<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_Reconnaissance" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.39.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.7.0">
  <bpmn:collaboration id="Collaboration_Reconnaissance">
    <bpmn:participant id="Participant_Reconnaissance" name="Processus de Reconnaissance de Compétences" processRef="Process_Reconnaissance_Competence" />
  </bpmn:collaboration>
  <bpmn:process id="Process_Reconnaissance_Competence" name="Reconnaissance de Compétences" isExecutable="true">
    <bpmn:laneSet id="LaneSet_Reconnaissance">
      <bpmn:lane id="Lane_Expert" name="Expert">
        <bpmn:flowNodeRef>Event_DemandeCreee</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_FournirComplement</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_DemandeRejetee</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_Manager" name="Manager">
        <bpmn:flowNodeRef>Task_AssignerRH</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_ValiderDemande</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_DecisionManager</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_RH" name="RH">
        <bpmn:flowNodeRef>Task_EvaluerDemande</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_Systeme" name="Système">
        <bpmn:flowNodeRef>Task_NotifierExpert</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_CreerBadge</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_NotifierApprobation</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_NotifierRejet</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_DemandeApprouvee</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="Event_DemandeCreee" name="Demande de reconnaissance créée">
      <bpmn:outgoing>Flow_DemandeVersAssignation</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:endEvent id="Event_DemandeApprouvee" name="Demande approuvée - Badge attribué">
      <bpmn:incoming>Flow_BadgeVersEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="Event_DemandeRejetee" name="Demande rejetée">
      <bpmn:incoming>Flow_RejetVersEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:receiveTask id="Task_AssignerRH" name="Attendre assignation à un RH" messageRef="Message_RhAssigne">
      <bpmn:incoming>Flow_DemandeVersAssignation</bpmn:incoming>
      <bpmn:outgoing>Flow_AssignationVersEvaluation</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:receiveTask id="Task_EvaluerDemande" name="Attendre évaluation par le RH" messageRef="Message_EvaluationSoumise">
      <bpmn:incoming>Flow_AssignationVersEvaluation</bpmn:incoming>
      <bpmn:incoming>Flow_ComplementVersRH</bpmn:incoming>
      <bpmn:outgoing>Flow_EvaluationVersValidation</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:receiveTask id="Task_ValiderDemande" name="Attendre décision du Manager" messageRef="Message_DecisionManager">
      <bpmn:incoming>Flow_EvaluationVersValidation</bpmn:incoming>
      <bpmn:outgoing>Flow_ValidationVersDecision</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:receiveTask id="Task_FournirComplement" name="Attendre complément de l&#39;expert" messageRef="Message_ComplementFourni">
      <bpmn:incoming>Flow_NotificationVersComplement</bpmn:incoming>
      <bpmn:outgoing>Flow_ComplementVersRH</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:serviceTask id="Task_CreerBadge" name="Créer et attribuer le badge">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="creer-badge" />
        <zeebe:ioMapping>
          <zeebe:input source="=demandeId" target="demandeId" />
          <zeebe:input source="=expertId" target="expertId" />
          <zeebe:input source="=competenceNom" target="competenceNom" />
          <zeebe:input source="=validitePermanente" target="validitePermanente" />
          <zeebe:input source="=dateExpiration" target="dateExpiration" />
          <zeebe:output source="=badgeId" target="badgeId" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_DecisionVersApprobation</bpmn:incoming>
      <bpmn:outgoing>Flow_BadgeVersNotification</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_NotifierApprobation" name="Notifier l&#39;expert (Approbation)">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="notifier-approbation" />
        <zeebe:ioMapping>
          <zeebe:input source="=expertId" target="expertId" />
          <zeebe:input source="=badgeId" target="badgeId" />
          <zeebe:input source="=competenceNom" target="competenceNom" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_BadgeVersNotification</bpmn:incoming>
      <bpmn:outgoing>Flow_BadgeVersEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_NotifierRejet" name="Notifier l&#39;expert (Rejet)">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="notifier-rejet" />
        <zeebe:ioMapping>
          <zeebe:input source="=expertId" target="expertId" />
          <zeebe:input source="=demandeId" target="demandeId" />
          <zeebe:input source="=commentaireManager" target="commentaireManager" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_DecisionVersRejet</bpmn:incoming>
      <bpmn:outgoing>Flow_RejetVersEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_NotifierExpert" name="Notifier l&#39;expert (Complément requis)">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="notifier-complement" />
        <zeebe:ioMapping>
          <zeebe:input source="=expertId" target="expertId" />
          <zeebe:input source="=demandeId" target="demandeId" />
          <zeebe:input source="=commentaireManager" target="commentaireManager" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_DecisionVersNotification</bpmn:incoming>
      <bpmn:outgoing>Flow_NotificationVersComplement</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_DecisionManager" name="Décision du Manager ?">
      <bpmn:incoming>Flow_ValidationVersDecision</bpmn:incoming>
      <bpmn:outgoing>Flow_DecisionVersApprobation</bpmn:outgoing>
      <bpmn:outgoing>Flow_DecisionVersRejet</bpmn:outgoing>
      <bpmn:outgoing>Flow_DecisionVersNotification</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_DemandeVersAssignation" sourceRef="Event_DemandeCreee" targetRef="Task_AssignerRH" />
    <bpmn:sequenceFlow id="Flow_AssignationVersEvaluation" sourceRef="Task_AssignerRH" targetRef="Task_EvaluerDemande" />
    <bpmn:sequenceFlow id="Flow_EvaluationVersValidation" sourceRef="Task_EvaluerDemande" targetRef="Task_ValiderDemande" />
    <bpmn:sequenceFlow id="Flow_ValidationVersDecision" sourceRef="Task_ValiderDemande" targetRef="Gateway_DecisionManager" />
    <bpmn:sequenceFlow id="Flow_DecisionVersApprobation" name="Approuver" sourceRef="Gateway_DecisionManager" targetRef="Task_CreerBadge">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=decision = "APPROUVER"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_BadgeVersNotification" sourceRef="Task_CreerBadge" targetRef="Task_NotifierApprobation" />
    <bpmn:sequenceFlow id="Flow_BadgeVersEnd" sourceRef="Task_NotifierApprobation" targetRef="Event_DemandeApprouvee" />
    <bpmn:sequenceFlow id="Flow_DecisionVersRejet" name="Rejeter" sourceRef="Gateway_DecisionManager" targetRef="Task_NotifierRejet">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=decision = "REJETER"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_RejetVersEnd" sourceRef="Task_NotifierRejet" targetRef="Event_DemandeRejetee" />
    <bpmn:sequenceFlow id="Flow_DecisionVersNotification" name="Complément requis" sourceRef="Gateway_DecisionManager" targetRef="Task_NotifierExpert">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=decision = "COMPLEMENT_REQUIS"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_NotificationVersComplement" sourceRef="Task_NotifierExpert" targetRef="Task_FournirComplement" />
    <bpmn:sequenceFlow id="Flow_ComplementVersRH" sourceRef="Task_FournirComplement" targetRef="Task_EvaluerDemande" />
  </bpmn:process>
  <bpmn:message id="Message_RhAssigne" name="msg_rh_assigne">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=demandeId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_EvaluationSoumise" name="msg_evaluation_soumise">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=demandeId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_DecisionManager" name="msg_decision_manager">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=demandeId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_ComplementFourni" name="msg_complement_fourni">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=demandeId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmndi:BPMNDiagram id="BPMNDiagram_Reconnaissance">
    <bpmndi:BPMNPlane id="BPMNPlane_Reconnaissance" bpmnElement="Collaboration_Reconnaissance">
      <bpmndi:BPMNShape id="Participant_Reconnaissance_di" bpmnElement="Participant_Reconnaissance" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1640" height="800" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_Systeme_di" bpmnElement="Lane_Systeme" isHorizontal="true">
        <dc:Bounds x="190" y="680" width="1610" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_RH_di" bpmnElement="Lane_RH" isHorizontal="true">
        <dc:Bounds x="190" y="480" width="1610" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_Manager_di" bpmnElement="Lane_Manager" isHorizontal="true">
        <dc:Bounds x="190" y="280" width="1610" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_Expert_di" bpmnElement="Lane_Expert" isHorizontal="true">
        <dc:Bounds x="190" y="80" width="1610" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_DemandeCreee_di" bpmnElement="Event_DemandeCreee">
        <dc:Bounds x="252" y="162" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="227" y="205" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_DemandeApprouvee_di" bpmnElement="Event_DemandeApprouvee">
        <dc:Bounds x="1712" y="762" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1687" y="805" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_DemandeRejetee_di" bpmnElement="Event_DemandeRejetee">
        <dc:Bounds x="1712" y="162" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1688" y="205" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_AssignerRH_di" bpmnElement="Task_AssignerRH">
        <dc:Bounds x="380" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_EvaluerDemande_di" bpmnElement="Task_EvaluerDemande">
        <dc:Bounds x="560" y="540" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ValiderDemande_di" bpmnElement="Task_ValiderDemande">
        <dc:Bounds x="920" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_FournirComplement_di" bpmnElement="Task_FournirComplement">
        <dc:Bounds x="1280" y="140" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_CreerBadge_di" bpmnElement="Task_CreerBadge">
        <dc:Bounds x="1280" y="740" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_NotifierApprobation_di" bpmnElement="Task_NotifierApprobation">
        <dc:Bounds x="1480" y="740" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_NotifierRejet_di" bpmnElement="Task_NotifierRejet">
        <dc:Bounds x="1480" y="740" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_NotifierExpert_di" bpmnElement="Task_NotifierExpert">
        <dc:Bounds x="1100" y="740" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_DecisionManager_di" bpmnElement="Gateway_DecisionManager" isMarkerVisible="true">
        <dc:Bounds x="1095" y="355" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1086" y="325" width="68" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_DemandeVersAssignation_di" bpmnElement="Flow_DemandeVersAssignation">
        <di:waypoint x="270" y="198" />
        <di:waypoint x="270" y="380" />
        <di:waypoint x="380" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_AssignationVersEvaluation_di" bpmnElement="Flow_AssignationVersEvaluation">
        <di:waypoint x="480" y="380" />
        <di:waypoint x="520" y="380" />
        <di:waypoint x="520" y="580" />
        <di:waypoint x="560" y="580" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_EvaluationVersValidation_di" bpmnElement="Flow_EvaluationVersValidation">
        <di:waypoint x="660" y="580" />
        <di:waypoint x="880" y="580" />
        <di:waypoint x="880" y="380" />
        <di:waypoint x="920" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ValidationVersDecision_di" bpmnElement="Flow_ValidationVersDecision">
        <di:waypoint x="1020" y="380" />
        <di:waypoint x="1095" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_DecisionVersApprobation_di" bpmnElement="Flow_DecisionVersApprobation">
        <di:waypoint x="1095" y="380" />
        <di:waypoint x="1060" y="380" />
        <di:waypoint x="1060" y="860" />
        <di:waypoint x="1330" y="860" />
        <di:waypoint x="1330" y="820" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1034" y="608" width="51" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_BadgeVersNotification_di" bpmnElement="Flow_BadgeVersNotification">
        <di:waypoint x="1380" y="780" />
        <di:waypoint x="1480" y="780" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_BadgeVersEnd_di" bpmnElement="Flow_BadgeVersEnd">
        <di:waypoint x="1580" y="780" />
        <di:waypoint x="1712" y="780" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_DecisionVersRejet_di" bpmnElement="Flow_DecisionVersRejet">
        <di:waypoint x="1145" y="380" />
        <di:waypoint x="1530" y="380" />
        <di:waypoint x="1530" y="740" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1318" y="362" width="38" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_RejetVersEnd_di" bpmnElement="Flow_RejetVersEnd">
        <di:waypoint x="1580" y="760" />
        <di:waypoint x="1646" y="760" />
        <di:waypoint x="1646" y="180" />
        <di:waypoint x="1712" y="180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_DecisionVersNotification_di" bpmnElement="Flow_DecisionVersNotification">
        <di:waypoint x="1120" y="405" />
        <di:waypoint x="1120" y="572" />
        <di:waypoint x="1150" y="572" />
        <di:waypoint x="1150" y="740" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1132" y="536" width="56" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_NotificationVersComplement_di" bpmnElement="Flow_NotificationVersComplement">
        <di:waypoint x="1200" y="750" />
        <di:waypoint x="1240" y="750" />
        <di:waypoint x="1240" y="210" />
        <di:waypoint x="1280" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ComplementVersRH_di" bpmnElement="Flow_ComplementVersRH">
        <di:waypoint x="1280" y="180" />
        <di:waypoint x="610" y="180" />
        <di:waypoint x="610" y="540" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
