var uf=Object.defineProperty;var mf=(t,s,r)=>s in t?uf(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var Ks=(t,s,r)=>mf(t,typeof s!="symbol"?s+"":s,r);function ep(t,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function tp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sp={exports:{}},Ai={},rp={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),pf=Symbol.for("react.portal"),hf=Symbol.for("react.fragment"),xf=Symbol.for("react.strict_mode"),ff=Symbol.for("react.profiler"),gf=Symbol.for("react.provider"),vf=Symbol.for("react.context"),bf=Symbol.for("react.forward_ref"),jf=Symbol.for("react.suspense"),yf=Symbol.for("react.memo"),Nf=Symbol.for("react.lazy"),Jd=Symbol.iterator;function wf(t){return t===null||typeof t!="object"?null:(t=Jd&&t[Jd]||t["@@iterator"],typeof t=="function"?t:null)}var np={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ap=Object.assign,lp={};function sa(t,s,r){this.props=t,this.context=s,this.refs=lp,this.updater=r||np}sa.prototype.isReactComponent={};sa.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ip(){}ip.prototype=sa.prototype;function Hc(t,s,r){this.props=t,this.context=s,this.refs=lp,this.updater=r||np}var Wc=Hc.prototype=new ip;Wc.constructor=Hc;ap(Wc,sa.prototype);Wc.isPureReactComponent=!0;var Gd=Array.isArray,op=Object.prototype.hasOwnProperty,qc={current:null},cp={key:!0,ref:!0,__self:!0,__source:!0};function dp(t,s,r){var n,a={},l=null,i=null;if(s!=null)for(n in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)op.call(s,n)&&!cp.hasOwnProperty(n)&&(a[n]=s[n]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var o=Array(c),m=0;m<c;m++)o[m]=arguments[m+2];a.children=o}if(t&&t.defaultProps)for(n in c=t.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:cl,type:t,key:l,ref:i,props:a,_owner:qc.current}}function Ef(t,s){return{$$typeof:cl,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Jc(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function Cf(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Qd=/\/+/g;function eo(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Cf(""+t.key):s.toString(36)}function Ul(t,s,r,n,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case cl:case pf:i=!0}}if(i)return i=t,a=a(i),t=n===""?"."+eo(i,0):n,Gd(a)?(r="",t!=null&&(r=t.replace(Qd,"$&/")+"/"),Ul(a,s,r,"",function(m){return m})):a!=null&&(Jc(a)&&(a=Ef(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Qd,"$&/")+"/")+t)),s.push(a)),1;if(i=0,n=n===""?".":n+":",Gd(t))for(var c=0;c<t.length;c++){l=t[c];var o=n+eo(l,c);i+=Ul(l,s,r,o,a)}else if(o=wf(t),typeof o=="function")for(t=o.call(t),c=0;!(l=t.next()).done;)l=l.value,o=n+eo(l,c++),i+=Ul(l,s,r,o,a);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function vl(t,s,r){if(t==null)return t;var n=[],a=0;return Ul(t,n,"","",function(l){return s.call(r,l,a++)}),n}function Sf(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Fl={transition:null},kf={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Fl,ReactCurrentOwner:qc};function up(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:vl,forEach:function(t,s,r){vl(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return vl(t,function(){s++}),s},toArray:function(t){return vl(t,function(s){return s})||[]},only:function(t){if(!Jc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=sa;Ie.Fragment=hf;Ie.Profiler=ff;Ie.PureComponent=Hc;Ie.StrictMode=xf;Ie.Suspense=jf;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kf;Ie.act=up;Ie.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=ap({},t.props),a=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=qc.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(o in s)op.call(s,o)&&!cp.hasOwnProperty(o)&&(n[o]=s[o]===void 0&&c!==void 0?c[o]:s[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){c=Array(o);for(var m=0;m<o;m++)c[m]=arguments[m+2];n.children=c}return{$$typeof:cl,type:t.type,key:a,ref:l,props:n,_owner:i}};Ie.createContext=function(t){return t={$$typeof:vf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gf,_context:t},t.Consumer=t};Ie.createElement=dp;Ie.createFactory=function(t){var s=dp.bind(null,t);return s.type=t,s};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:bf,render:t}};Ie.isValidElement=Jc;Ie.lazy=function(t){return{$$typeof:Nf,_payload:{_status:-1,_result:t},_init:Sf}};Ie.memo=function(t,s){return{$$typeof:yf,type:t,compare:s===void 0?null:s}};Ie.startTransition=function(t){var s=Fl.transition;Fl.transition={};try{t()}finally{Fl.transition=s}};Ie.unstable_act=up;Ie.useCallback=function(t,s){return Jt.current.useCallback(t,s)};Ie.useContext=function(t){return Jt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};Ie.useEffect=function(t,s){return Jt.current.useEffect(t,s)};Ie.useId=function(){return Jt.current.useId()};Ie.useImperativeHandle=function(t,s,r){return Jt.current.useImperativeHandle(t,s,r)};Ie.useInsertionEffect=function(t,s){return Jt.current.useInsertionEffect(t,s)};Ie.useLayoutEffect=function(t,s){return Jt.current.useLayoutEffect(t,s)};Ie.useMemo=function(t,s){return Jt.current.useMemo(t,s)};Ie.useReducer=function(t,s,r){return Jt.current.useReducer(t,s,r)};Ie.useRef=function(t){return Jt.current.useRef(t)};Ie.useState=function(t){return Jt.current.useState(t)};Ie.useSyncExternalStore=function(t,s,r){return Jt.current.useSyncExternalStore(t,s,r)};Ie.useTransition=function(){return Jt.current.useTransition()};Ie.version="18.3.1";rp.exports=Ie;var d=rp.exports;const zo=tp(d),Pf=ep({__proto__:null,default:zo},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf=d,Af=Symbol.for("react.element"),Mf=Symbol.for("react.fragment"),Rf=Object.prototype.hasOwnProperty,Lf=Tf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Df={key:!0,ref:!0,__self:!0,__source:!0};function mp(t,s,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(n in s)Rf.call(s,n)&&!Df.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:Af,type:t,key:l,ref:i,props:a,_owner:Lf.current}}Ai.Fragment=Mf;Ai.jsx=mp;Ai.jsxs=mp;sp.exports=Ai;var e=sp.exports,pp={exports:{}},ps={},hp={exports:{}},xp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(A,z){var S=A.length;A.push(z);e:for(;0<S;){var $=S-1>>>1,D=A[$];if(0<a(D,z))A[$]=z,A[S]=D,S=$;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var z=A[0],S=A.pop();if(S!==z){A[0]=S;e:for(var $=0,D=A.length,q=D>>>1;$<q;){var ie=2*($+1)-1,me=A[ie],Pe=ie+1,Ne=A[Pe];if(0>a(me,S))Pe<D&&0>a(Ne,me)?(A[$]=Ne,A[Pe]=S,$=Pe):(A[$]=me,A[ie]=S,$=ie);else if(Pe<D&&0>a(Ne,S))A[$]=Ne,A[Pe]=S,$=Pe;else break e}}return z}function a(A,z){var S=A.sortIndex-z.sortIndex;return S!==0?S:A.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,c=i.now();t.unstable_now=function(){return i.now()-c}}var o=[],m=[],j=1,x=null,h=3,u=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(A){for(var z=r(m);z!==null;){if(z.callback===null)n(m);else if(z.startTime<=A)n(m),z.sortIndex=z.expirationTime,s(o,z);else break;z=r(m)}}function E(A){if(v=!1,b(A),!g)if(r(o)!==null)g=!0,se(P);else{var z=r(m);z!==null&&be(E,z.startTime-A)}}function P(A,z){g=!1,v&&(v=!1,f(R),R=-1),u=!0;var S=h;try{for(b(z),x=r(o);x!==null&&(!(x.expirationTime>z)||A&&!L());){var $=x.callback;if(typeof $=="function"){x.callback=null,h=x.priorityLevel;var D=$(x.expirationTime<=z);z=t.unstable_now(),typeof D=="function"?x.callback=D:x===r(o)&&n(o),b(z)}else n(o);x=r(o)}if(x!==null)var q=!0;else{var ie=r(m);ie!==null&&be(E,ie.startTime-z),q=!1}return q}finally{x=null,h=S,u=!1}}var k=!1,w=null,R=-1,I=5,T=-1;function L(){return!(t.unstable_now()-T<I)}function J(){if(w!==null){var A=t.unstable_now();T=A;var z=!0;try{z=w(!0,A)}finally{z?Q():(k=!1,w=null)}}else k=!1}var Q;if(typeof p=="function")Q=function(){p(J)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ce=W.port2;W.port1.onmessage=J,Q=function(){ce.postMessage(null)}}else Q=function(){y(J,0)};function se(A){w=A,k||(k=!0,Q())}function be(A,z){R=y(function(){A(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){g||u||(g=!0,se(P))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var S=h;h=z;try{return A()}finally{h=S}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,z){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var S=h;h=A;try{return z()}finally{h=S}},t.unstable_scheduleCallback=function(A,z,S){var $=t.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?$+S:$):S=$,A){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=S+D,A={id:j++,callback:z,priorityLevel:A,startTime:S,expirationTime:D,sortIndex:-1},S>$?(A.sortIndex=S,s(m,A),r(o)===null&&A===r(m)&&(v?(f(R),R=-1):v=!0,be(E,S-$))):(A.sortIndex=D,s(o,A),g||u||(g=!0,se(P))),A},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(A){var z=h;return function(){var S=h;h=z;try{return A.apply(this,arguments)}finally{h=S}}}})(xp);hp.exports=xp;var If=hp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf=d,ms=If;function K(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fp=new Set,Fa={};function gn(t,s){qn(t,s),qn(t+"Capture",s)}function qn(t,s){for(Fa[t]=s,t=0;t<s.length;t++)fp.add(s[t])}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oo=Object.prototype.hasOwnProperty,Of=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xd={},Kd={};function _f(t){return Oo.call(Kd,t)?!0:Oo.call(Xd,t)?!1:Of.test(t)?Kd[t]=!0:(Xd[t]=!0,!1)}function $f(t,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uf(t,s,r,n){if(s===null||typeof s>"u"||$f(t,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Gt(t,s,r,n,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];zt[s]=new Gt(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gc=/[\-:]([a-z])/g;function Qc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Gc,Qc);zt[s]=new Gt(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Gc,Qc);zt[s]=new Gt(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Gc,Qc);zt[s]=new Gt(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});zt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xc(t,s,r,n){var a=zt.hasOwnProperty(s)?zt[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Uf(s,r,a,n)&&(r=null),n||a===null?_f(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,s,r):t.setAttribute(s,r))))}var dr=zf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),Sn=Symbol.for("react.portal"),kn=Symbol.for("react.fragment"),Kc=Symbol.for("react.strict_mode"),_o=Symbol.for("react.profiler"),gp=Symbol.for("react.provider"),vp=Symbol.for("react.context"),Yc=Symbol.for("react.forward_ref"),$o=Symbol.for("react.suspense"),Uo=Symbol.for("react.suspense_list"),Zc=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),bp=Symbol.for("react.offscreen"),Yd=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=Yd&&t[Yd]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,to;function Ea(t){if(to===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);to=s&&s[1]||""}return`
`+to+t}var so=!1;function ro(t,s){if(!t||so)return"";so=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(m){var n=m}Reflect.construct(t,[],s)}else{try{s.call()}catch(m){n=m}t.call(s.prototype)}else{try{throw Error()}catch(m){n=m}t()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,c=l.length-1;1<=i&&0<=c&&a[i]!==l[c];)c--;for(;1<=i&&0<=c;i--,c--)if(a[i]!==l[c]){if(i!==1||c!==1)do if(i--,c--,0>c||a[i]!==l[c]){var o=`
`+a[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=c);break}}}finally{so=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ea(t):""}function Ff(t){switch(t.tag){case 5:return Ea(t.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 2:case 15:return t=ro(t.type,!1),t;case 11:return t=ro(t.type.render,!1),t;case 1:return t=ro(t.type,!0),t;default:return""}}function Fo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kn:return"Fragment";case Sn:return"Portal";case _o:return"Profiler";case Kc:return"StrictMode";case $o:return"Suspense";case Uo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vp:return(t.displayName||"Context")+".Consumer";case gp:return(t._context.displayName||"Context")+".Provider";case Yc:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zc:return s=t.displayName||null,s!==null?s:Fo(t.type)||"Memo";case gr:s=t._payload,t=t._init;try{return Fo(t(s))}catch{}}return null}function Bf(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fo(s);case 8:return s===Kc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jp(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Vf(t){var s=jp(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),n=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function jl(t){t._valueTracker||(t._valueTracker=Vf(t))}function yp(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return t&&(n=jp(t)?t.checked?"true":"false":t.value),t=n,t!==r?(s.setValue(t),!0):!1}function Zl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bo(t,s){var r=s.checked;return it({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Zd(t,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=zr(s.value!=null?s.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Np(t,s){s=s.checked,s!=null&&Xc(t,"checked",s,!1)}function Vo(t,s){Np(t,s);var r=zr(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Ho(t,s.type,r):s.hasOwnProperty("defaultValue")&&Ho(t,s.type,zr(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function eu(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ho(t,s,r){(s!=="number"||Zl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ca=Array.isArray;function $n(t,s,r,n){if(t=t.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=s.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+zr(r),s=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function Wo(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(K(91));return it({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tu(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(K(92));if(Ca(r)){if(1<r.length)throw Error(K(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:zr(r)}}function wp(t,s){var r=zr(s.value),n=zr(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function su(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Ep(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qo(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Ep(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yl,Cp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(s,r,n,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(yl=yl||document.createElement("div"),yl.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=yl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Ba(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Aa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hf=["Webkit","ms","Moz","O"];Object.keys(Aa).forEach(function(t){Hf.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Aa[s]=Aa[t]})});function Sp(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Aa.hasOwnProperty(t)&&Aa[t]?(""+s).trim():s+"px"}function kp(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Sp(r,s[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var Wf=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jo(t,s){if(s){if(Wf[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(K(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(K(61))}if(s.style!=null&&typeof s.style!="object")throw Error(K(62))}}function Go(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qo=null;function ed(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xo=null,Un=null,Fn=null;function ru(t){if(t=ml(t)){if(typeof Xo!="function")throw Error(K(280));var s=t.stateNode;s&&(s=Ii(s),Xo(t.stateNode,t.type,s))}}function Pp(t){Un?Fn?Fn.push(t):Fn=[t]:Un=t}function Tp(){if(Un){var t=Un,s=Fn;if(Fn=Un=null,ru(t),s)for(t=0;t<s.length;t++)ru(s[t])}}function Ap(t,s){return t(s)}function Mp(){}var no=!1;function Rp(t,s,r){if(no)return t(s,r);no=!0;try{return Ap(t,s,r)}finally{no=!1,(Un!==null||Fn!==null)&&(Mp(),Tp())}}function Va(t,s){var r=t.stateNode;if(r===null)return null;var n=Ii(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(K(231,s,typeof r));return r}var Ko=!1;if(lr)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){Ko=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{Ko=!1}function qf(t,s,r,n,a,l,i,c,o){var m=Array.prototype.slice.call(arguments,3);try{s.apply(r,m)}catch(j){this.onError(j)}}var Ma=!1,ei=null,ti=!1,Yo=null,Jf={onError:function(t){Ma=!0,ei=t}};function Gf(t,s,r,n,a,l,i,c,o){Ma=!1,ei=null,qf.apply(Jf,arguments)}function Qf(t,s,r,n,a,l,i,c,o){if(Gf.apply(this,arguments),Ma){if(Ma){var m=ei;Ma=!1,ei=null}else throw Error(K(198));ti||(ti=!0,Yo=m)}}function vn(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Lp(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function nu(t){if(vn(t)!==t)throw Error(K(188))}function Xf(t){var s=t.alternate;if(!s){if(s=vn(t),s===null)throw Error(K(188));return s!==t?null:t}for(var r=t,n=s;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return nu(a),t;if(l===n)return nu(a),s;l=l.sibling}throw Error(K(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,c=a.child;c;){if(c===r){i=!0,r=a,n=l;break}if(c===n){i=!0,n=a,r=l;break}c=c.sibling}if(!i){for(c=l.child;c;){if(c===r){i=!0,r=l,n=a;break}if(c===n){i=!0,n=l,r=a;break}c=c.sibling}if(!i)throw Error(K(189))}}if(r.alternate!==n)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?t:s}function Dp(t){return t=Xf(t),t!==null?Ip(t):null}function Ip(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Ip(t);if(s!==null)return s;t=t.sibling}return null}var zp=ms.unstable_scheduleCallback,au=ms.unstable_cancelCallback,Kf=ms.unstable_shouldYield,Yf=ms.unstable_requestPaint,mt=ms.unstable_now,Zf=ms.unstable_getCurrentPriorityLevel,td=ms.unstable_ImmediatePriority,Op=ms.unstable_UserBlockingPriority,si=ms.unstable_NormalPriority,eg=ms.unstable_LowPriority,_p=ms.unstable_IdlePriority,Mi=null,Ws=null;function tg(t){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(Mi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ls=Math.clz32?Math.clz32:ng,sg=Math.log,rg=Math.LN2;function ng(t){return t>>>=0,t===0?32:31-(sg(t)/rg|0)|0}var Nl=64,wl=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ri(t,s){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,l=t.pingedLanes,i=r&268435455;if(i!==0){var c=i&~a;c!==0?n=Sa(c):(l&=i,l!==0&&(n=Sa(l)))}else i=r&~a,i!==0?n=Sa(i):l!==0&&(n=Sa(l));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(n&4&&(n|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=n;0<s;)r=31-Ls(s),a=1<<r,n|=t[r],s&=~a;return n}function ag(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lg(t,s){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-Ls(l),c=1<<i,o=a[i];o===-1?(!(c&r)||c&n)&&(a[i]=ag(c,s)):o<=s&&(t.expiredLanes|=c),l&=~c}}function Zo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $p(){var t=Nl;return Nl<<=1,!(Nl&4194240)&&(Nl=64),t}function ao(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function dl(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Ls(s),t[s]=r}function ig(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Ls(r),l=1<<a;s[a]=0,n[a]=-1,t[a]=-1,r&=~l}}function sd(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var n=31-Ls(r),a=1<<n;a&s|t[n]&s&&(t[n]|=s),r&=~a}}var qe=0;function Up(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fp,rd,Bp,Vp,Hp,ec=!1,El=[],Sr=null,kr=null,Pr=null,Ha=new Map,Wa=new Map,jr=[],og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lu(t,s){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Ha.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(s.pointerId)}}function pa(t,s,r,n,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},s!==null&&(s=ml(s),s!==null&&rd(s)),t):(t.eventSystemFlags|=n,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function cg(t,s,r,n,a){switch(s){case"focusin":return Sr=pa(Sr,t,s,r,n,a),!0;case"dragenter":return kr=pa(kr,t,s,r,n,a),!0;case"mouseover":return Pr=pa(Pr,t,s,r,n,a),!0;case"pointerover":var l=a.pointerId;return Ha.set(l,pa(Ha.get(l)||null,t,s,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,Wa.set(l,pa(Wa.get(l)||null,t,s,r,n,a)),!0}return!1}function Wp(t){var s=tn(t.target);if(s!==null){var r=vn(s);if(r!==null){if(s=r.tag,s===13){if(s=Lp(r),s!==null){t.blockedOn=s,Hp(t.priority,function(){Bp(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bl(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=tc(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Qo=n,r.target.dispatchEvent(n),Qo=null}else return s=ml(r),s!==null&&rd(s),t.blockedOn=r,!1;s.shift()}return!0}function iu(t,s,r){Bl(t)&&r.delete(s)}function dg(){ec=!1,Sr!==null&&Bl(Sr)&&(Sr=null),kr!==null&&Bl(kr)&&(kr=null),Pr!==null&&Bl(Pr)&&(Pr=null),Ha.forEach(iu),Wa.forEach(iu)}function ha(t,s){t.blockedOn===s&&(t.blockedOn=null,ec||(ec=!0,ms.unstable_scheduleCallback(ms.unstable_NormalPriority,dg)))}function qa(t){function s(a){return ha(a,t)}if(0<El.length){ha(El[0],t);for(var r=1;r<El.length;r++){var n=El[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Sr!==null&&ha(Sr,t),kr!==null&&ha(kr,t),Pr!==null&&ha(Pr,t),Ha.forEach(s),Wa.forEach(s),r=0;r<jr.length;r++)n=jr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<jr.length&&(r=jr[0],r.blockedOn===null);)Wp(r),r.blockedOn===null&&jr.shift()}var Bn=dr.ReactCurrentBatchConfig,ni=!0;function ug(t,s,r,n){var a=qe,l=Bn.transition;Bn.transition=null;try{qe=1,nd(t,s,r,n)}finally{qe=a,Bn.transition=l}}function mg(t,s,r,n){var a=qe,l=Bn.transition;Bn.transition=null;try{qe=4,nd(t,s,r,n)}finally{qe=a,Bn.transition=l}}function nd(t,s,r,n){if(ni){var a=tc(t,s,r,n);if(a===null)fo(t,s,n,ai,r),lu(t,n);else if(cg(a,t,s,r,n))n.stopPropagation();else if(lu(t,n),s&4&&-1<og.indexOf(t)){for(;a!==null;){var l=ml(a);if(l!==null&&Fp(l),l=tc(t,s,r,n),l===null&&fo(t,s,n,ai,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else fo(t,s,n,null,r)}}var ai=null;function tc(t,s,r,n){if(ai=null,t=ed(n),t=tn(t),t!==null)if(s=vn(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Lp(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return ai=t,null}function qp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zf()){case td:return 1;case Op:return 4;case si:case eg:return 16;case _p:return 536870912;default:return 16}default:return 16}}var Nr=null,ad=null,Vl=null;function Jp(){if(Vl)return Vl;var t,s=ad,r=s.length,n,a="value"in Nr?Nr.value:Nr.textContent,l=a.length;for(t=0;t<r&&s[t]===a[t];t++);var i=r-t;for(n=1;n<=i&&s[r-n]===a[l-n];n++);return Vl=a.slice(t,1<n?1-n:void 0)}function Hl(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function ou(){return!1}function hs(t){function s(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Cl:ou,this.isPropagationStopped=ou,this}return it(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),s}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ld=hs(ra),ul=it({},ra,{view:0,detail:0}),pg=hs(ul),lo,io,xa,Ri=it({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:id,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xa&&(xa&&t.type==="mousemove"?(lo=t.screenX-xa.screenX,io=t.screenY-xa.screenY):io=lo=0,xa=t),lo)},movementY:function(t){return"movementY"in t?t.movementY:io}}),cu=hs(Ri),hg=it({},Ri,{dataTransfer:0}),xg=hs(hg),fg=it({},ul,{relatedTarget:0}),oo=hs(fg),gg=it({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),vg=hs(gg),bg=it({},ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jg=hs(bg),yg=it({},ra,{data:0}),du=hs(yg),Ng={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cg(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Eg[t])?!!s[t]:!1}function id(){return Cg}var Sg=it({},ul,{key:function(t){if(t.key){var s=Ng[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Hl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:id,charCode:function(t){return t.type==="keypress"?Hl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kg=hs(Sg),Pg=it({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uu=hs(Pg),Tg=it({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:id}),Ag=hs(Tg),Mg=it({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rg=hs(Mg),Lg=it({},Ri,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dg=hs(Lg),Ig=[9,13,27,32],od=lr&&"CompositionEvent"in window,Ra=null;lr&&"documentMode"in document&&(Ra=document.documentMode);var zg=lr&&"TextEvent"in window&&!Ra,Gp=lr&&(!od||Ra&&8<Ra&&11>=Ra),mu=" ",pu=!1;function Qp(t,s){switch(t){case"keyup":return Ig.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pn=!1;function Og(t,s){switch(t){case"compositionend":return Xp(s);case"keypress":return s.which!==32?null:(pu=!0,mu);case"textInput":return t=s.data,t===mu&&pu?null:t;default:return null}}function _g(t,s){if(Pn)return t==="compositionend"||!od&&Qp(t,s)?(t=Jp(),Vl=ad=Nr=null,Pn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gp&&s.locale!=="ko"?null:s.data;default:return null}}var $g={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!$g[t.type]:s==="textarea"}function Kp(t,s,r,n){Pp(n),s=li(s,"onChange"),0<s.length&&(r=new ld("onChange","change",null,r,n),t.push({event:r,listeners:s}))}var La=null,Ja=null;function Ug(t){oh(t,0)}function Li(t){var s=Mn(t);if(yp(s))return t}function Fg(t,s){if(t==="change")return s}var Yp=!1;if(lr){var co;if(lr){var uo="oninput"in document;if(!uo){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),uo=typeof xu.oninput=="function"}co=uo}else co=!1;Yp=co&&(!document.documentMode||9<document.documentMode)}function fu(){La&&(La.detachEvent("onpropertychange",Zp),Ja=La=null)}function Zp(t){if(t.propertyName==="value"&&Li(Ja)){var s=[];Kp(s,Ja,t,ed(t)),Rp(Ug,s)}}function Bg(t,s,r){t==="focusin"?(fu(),La=s,Ja=r,La.attachEvent("onpropertychange",Zp)):t==="focusout"&&fu()}function Vg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Li(Ja)}function Hg(t,s){if(t==="click")return Li(s)}function Wg(t,s){if(t==="input"||t==="change")return Li(s)}function qg(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var zs=typeof Object.is=="function"?Object.is:qg;function Ga(t,s){if(zs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Oo.call(s,a)||!zs(t[a],s[a]))return!1}return!0}function gu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vu(t,s){var r=gu(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=s&&n>=s)return{node:r,offset:s-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gu(r)}}function eh(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?eh(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function th(){for(var t=window,s=Zl();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Zl(t.document)}return s}function cd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Jg(t){var s=th(),r=t.focusedElem,n=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&eh(r.ownerDocument.documentElement,r)){if(n!==null&&cd(r)){if(s=n.start,t=n.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!t.extend&&l>n&&(a=n,n=l,l=a),a=vu(r,l);var i=vu(r,n);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),l>n?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gg=lr&&"documentMode"in document&&11>=document.documentMode,Tn=null,sc=null,Da=null,rc=!1;function bu(t,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rc||Tn==null||Tn!==Zl(n)||(n=Tn,"selectionStart"in n&&cd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Da&&Ga(Da,n)||(Da=n,n=li(sc,"onSelect"),0<n.length&&(s=new ld("onSelect","select",null,s,r),t.push({event:s,listeners:n}),s.target=Tn)))}function Sl(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var An={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionend:Sl("Transition","TransitionEnd")},mo={},sh={};lr&&(sh=document.createElement("div").style,"AnimationEvent"in window||(delete An.animationend.animation,delete An.animationiteration.animation,delete An.animationstart.animation),"TransitionEvent"in window||delete An.transitionend.transition);function Di(t){if(mo[t])return mo[t];if(!An[t])return t;var s=An[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in sh)return mo[t]=s[r];return t}var rh=Di("animationend"),nh=Di("animationiteration"),ah=Di("animationstart"),lh=Di("transitionend"),ih=new Map,ju="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,s){ih.set(t,s),gn(s,[t])}for(var po=0;po<ju.length;po++){var ho=ju[po],Qg=ho.toLowerCase(),Xg=ho[0].toUpperCase()+ho.slice(1);Fr(Qg,"on"+Xg)}Fr(rh,"onAnimationEnd");Fr(nh,"onAnimationIteration");Fr(ah,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(lh,"onTransitionEnd");qn("onMouseEnter",["mouseout","mouseover"]);qn("onMouseLeave",["mouseout","mouseover"]);qn("onPointerEnter",["pointerout","pointerover"]);qn("onPointerLeave",["pointerout","pointerover"]);gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gn("onBeforeInput",["compositionend","keypress","textInput","paste"]);gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function yu(t,s,r){var n=t.type||"unknown-event";t.currentTarget=r,Qf(n,s,void 0,t),t.currentTarget=null}function oh(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var l=void 0;if(s)for(var i=n.length-1;0<=i;i--){var c=n[i],o=c.instance,m=c.currentTarget;if(c=c.listener,o!==l&&a.isPropagationStopped())break e;yu(a,c,m),l=o}else for(i=0;i<n.length;i++){if(c=n[i],o=c.instance,m=c.currentTarget,c=c.listener,o!==l&&a.isPropagationStopped())break e;yu(a,c,m),l=o}}}if(ti)throw t=Yo,ti=!1,Yo=null,t}function Ke(t,s){var r=s[oc];r===void 0&&(r=s[oc]=new Set);var n=t+"__bubble";r.has(n)||(ch(s,t,2,!1),r.add(n))}function xo(t,s,r){var n=0;s&&(n|=4),ch(r,t,n,s)}var kl="_reactListening"+Math.random().toString(36).slice(2);function Qa(t){if(!t[kl]){t[kl]=!0,fp.forEach(function(r){r!=="selectionchange"&&(Kg.has(r)||xo(r,!1,t),xo(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[kl]||(s[kl]=!0,xo("selectionchange",!1,s))}}function ch(t,s,r,n){switch(qp(s)){case 1:var a=ug;break;case 4:a=mg;break;default:a=nd}r=a.bind(null,s,r,t),a=void 0,!Ko||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(s,r,{capture:!0,passive:a}):t.addEventListener(s,r,!0):a!==void 0?t.addEventListener(s,r,{passive:a}):t.addEventListener(s,r,!1)}function fo(t,s,r,n,a){var l=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===a||o.nodeType===8&&o.parentNode===a))return;i=i.return}for(;c!==null;){if(i=tn(c),i===null)return;if(o=i.tag,o===5||o===6){n=l=i;continue e}c=c.parentNode}}n=n.return}Rp(function(){var m=l,j=ed(r),x=[];e:{var h=ih.get(t);if(h!==void 0){var u=ld,g=t;switch(t){case"keypress":if(Hl(r)===0)break e;case"keydown":case"keyup":u=kg;break;case"focusin":g="focus",u=oo;break;case"focusout":g="blur",u=oo;break;case"beforeblur":case"afterblur":u=oo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=xg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Ag;break;case rh:case nh:case ah:u=vg;break;case lh:u=Rg;break;case"scroll":u=pg;break;case"wheel":u=Dg;break;case"copy":case"cut":case"paste":u=jg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=uu}var v=(s&4)!==0,y=!v&&t==="scroll",f=v?h!==null?h+"Capture":null:h;v=[];for(var p=m,b;p!==null;){b=p;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,f!==null&&(E=Va(p,f),E!=null&&v.push(Xa(p,E,b)))),y)break;p=p.return}0<v.length&&(h=new u(h,g,null,r,j),x.push({event:h,listeners:v}))}}if(!(s&7)){e:{if(h=t==="mouseover"||t==="pointerover",u=t==="mouseout"||t==="pointerout",h&&r!==Qo&&(g=r.relatedTarget||r.fromElement)&&(tn(g)||g[ir]))break e;if((u||h)&&(h=j.window===j?j:(h=j.ownerDocument)?h.defaultView||h.parentWindow:window,u?(g=r.relatedTarget||r.toElement,u=m,g=g?tn(g):null,g!==null&&(y=vn(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(u=null,g=m),u!==g)){if(v=cu,E="onMouseLeave",f="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(v=uu,E="onPointerLeave",f="onPointerEnter",p="pointer"),y=u==null?h:Mn(u),b=g==null?h:Mn(g),h=new v(E,p+"leave",u,r,j),h.target=y,h.relatedTarget=b,E=null,tn(j)===m&&(v=new v(f,p+"enter",g,r,j),v.target=b,v.relatedTarget=y,E=v),y=E,u&&g)t:{for(v=u,f=g,p=0,b=v;b;b=wn(b))p++;for(b=0,E=f;E;E=wn(E))b++;for(;0<p-b;)v=wn(v),p--;for(;0<b-p;)f=wn(f),b--;for(;p--;){if(v===f||f!==null&&v===f.alternate)break t;v=wn(v),f=wn(f)}v=null}else v=null;u!==null&&Nu(x,h,u,v,!1),g!==null&&y!==null&&Nu(x,y,g,v,!0)}}e:{if(h=m?Mn(m):window,u=h.nodeName&&h.nodeName.toLowerCase(),u==="select"||u==="input"&&h.type==="file")var P=Fg;else if(hu(h))if(Yp)P=Wg;else{P=Vg;var k=Bg}else(u=h.nodeName)&&u.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=Hg);if(P&&(P=P(t,m))){Kp(x,P,r,j);break e}k&&k(t,h,m),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Ho(h,"number",h.value)}switch(k=m?Mn(m):window,t){case"focusin":(hu(k)||k.contentEditable==="true")&&(Tn=k,sc=m,Da=null);break;case"focusout":Da=sc=Tn=null;break;case"mousedown":rc=!0;break;case"contextmenu":case"mouseup":case"dragend":rc=!1,bu(x,r,j);break;case"selectionchange":if(Gg)break;case"keydown":case"keyup":bu(x,r,j)}var w;if(od)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Pn?Qp(t,r)&&(R="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(Gp&&r.locale!=="ko"&&(Pn||R!=="onCompositionStart"?R==="onCompositionEnd"&&Pn&&(w=Jp()):(Nr=j,ad="value"in Nr?Nr.value:Nr.textContent,Pn=!0)),k=li(m,R),0<k.length&&(R=new du(R,t,null,r,j),x.push({event:R,listeners:k}),w?R.data=w:(w=Xp(r),w!==null&&(R.data=w)))),(w=zg?Og(t,r):_g(t,r))&&(m=li(m,"onBeforeInput"),0<m.length&&(j=new du("onBeforeInput","beforeinput",null,r,j),x.push({event:j,listeners:m}),j.data=w))}oh(x,s)})}function Xa(t,s,r){return{instance:t,listener:s,currentTarget:r}}function li(t,s){for(var r=s+"Capture",n=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Va(t,r),l!=null&&n.unshift(Xa(t,l,a)),l=Va(t,s),l!=null&&n.push(Xa(t,l,a))),t=t.return}return n}function wn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nu(t,s,r,n,a){for(var l=s._reactName,i=[];r!==null&&r!==n;){var c=r,o=c.alternate,m=c.stateNode;if(o!==null&&o===n)break;c.tag===5&&m!==null&&(c=m,a?(o=Va(r,l),o!=null&&i.unshift(Xa(r,o,c))):a||(o=Va(r,l),o!=null&&i.push(Xa(r,o,c)))),r=r.return}i.length!==0&&t.push({event:s,listeners:i})}var Yg=/\r\n?/g,Zg=/\u0000|\uFFFD/g;function wu(t){return(typeof t=="string"?t:""+t).replace(Yg,`
`).replace(Zg,"")}function Pl(t,s,r){if(s=wu(s),wu(t)!==s&&r)throw Error(K(425))}function ii(){}var nc=null,ac=null;function lc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ic=typeof setTimeout=="function"?setTimeout:void 0,e0=typeof clearTimeout=="function"?clearTimeout:void 0,Eu=typeof Promise=="function"?Promise:void 0,t0=typeof queueMicrotask=="function"?queueMicrotask:typeof Eu<"u"?function(t){return Eu.resolve(null).then(t).catch(s0)}:ic;function s0(t){setTimeout(function(){throw t})}function go(t,s){var r=s,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),qa(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);qa(s)}function Tr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Cu(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var na=Math.random().toString(36).slice(2),Hs="__reactFiber$"+na,Ka="__reactProps$"+na,ir="__reactContainer$"+na,oc="__reactEvents$"+na,r0="__reactListeners$"+na,n0="__reactHandles$"+na;function tn(t){var s=t[Hs];if(s)return s;for(var r=t.parentNode;r;){if(s=r[ir]||r[Hs]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Cu(t);t!==null;){if(r=t[Hs])return r;t=Cu(t)}return s}t=r,r=t.parentNode}return null}function ml(t){return t=t[Hs]||t[ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Ii(t){return t[Ka]||null}var cc=[],Rn=-1;function Br(t){return{current:t}}function Ze(t){0>Rn||(t.current=cc[Rn],cc[Rn]=null,Rn--)}function Xe(t,s){Rn++,cc[Rn]=t.current,t.current=s}var Or={},Ut=Br(Or),Yt=Br(!1),dn=Or;function Jn(t,s){var r=t.type.contextTypes;if(!r)return Or;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=s[l];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function Zt(t){return t=t.childContextTypes,t!=null}function oi(){Ze(Yt),Ze(Ut)}function Su(t,s,r){if(Ut.current!==Or)throw Error(K(168));Xe(Ut,s),Xe(Yt,r)}function dh(t,s,r){var n=t.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(K(108,Bf(t)||"Unknown",a));return it({},r,n)}function ci(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,dn=Ut.current,Xe(Ut,t),Xe(Yt,Yt.current),!0}function ku(t,s,r){var n=t.stateNode;if(!n)throw Error(K(169));r?(t=dh(t,s,dn),n.__reactInternalMemoizedMergedChildContext=t,Ze(Yt),Ze(Ut),Xe(Ut,t)):Ze(Yt),Xe(Yt,r)}var er=null,zi=!1,vo=!1;function uh(t){er===null?er=[t]:er.push(t)}function a0(t){zi=!0,uh(t)}function Vr(){if(!vo&&er!==null){vo=!0;var t=0,s=qe;try{var r=er;for(qe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}er=null,zi=!1}catch(a){throw er!==null&&(er=er.slice(t+1)),zp(td,Vr),a}finally{qe=s,vo=!1}}return null}var Ln=[],Dn=0,di=null,ui=0,gs=[],vs=0,un=null,tr=1,sr="";function Kr(t,s){Ln[Dn++]=ui,Ln[Dn++]=di,di=t,ui=s}function mh(t,s,r){gs[vs++]=tr,gs[vs++]=sr,gs[vs++]=un,un=t;var n=tr;t=sr;var a=32-Ls(n)-1;n&=~(1<<a),r+=1;var l=32-Ls(s)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,tr=1<<32-Ls(s)+a|r<<a|n,sr=l+t}else tr=1<<l|r<<a|n,sr=t}function dd(t){t.return!==null&&(Kr(t,1),mh(t,1,0))}function ud(t){for(;t===di;)di=Ln[--Dn],Ln[Dn]=null,ui=Ln[--Dn],Ln[Dn]=null;for(;t===un;)un=gs[--vs],gs[vs]=null,sr=gs[--vs],gs[vs]=null,tr=gs[--vs],gs[vs]=null}var cs=null,os=null,tt=!1,Ms=null;function ph(t,s){var r=bs(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Pu(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,cs=t,os=Tr(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,cs=t,os=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=un!==null?{id:tr,overflow:sr}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=bs(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,cs=t,os=null,!0):!1;default:return!1}}function dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uc(t){if(tt){var s=os;if(s){var r=s;if(!Pu(t,s)){if(dc(t))throw Error(K(418));s=Tr(r.nextSibling);var n=cs;s&&Pu(t,s)?ph(n,r):(t.flags=t.flags&-4097|2,tt=!1,cs=t)}}else{if(dc(t))throw Error(K(418));t.flags=t.flags&-4097|2,tt=!1,cs=t}}}function Tu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cs=t}function Tl(t){if(t!==cs)return!1;if(!tt)return Tu(t),tt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!lc(t.type,t.memoizedProps)),s&&(s=os)){if(dc(t))throw hh(),Error(K(418));for(;s;)ph(t,s),s=Tr(s.nextSibling)}if(Tu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){os=Tr(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}os=null}}else os=cs?Tr(t.stateNode.nextSibling):null;return!0}function hh(){for(var t=os;t;)t=Tr(t.nextSibling)}function Gn(){os=cs=null,tt=!1}function md(t){Ms===null?Ms=[t]:Ms.push(t)}var l0=dr.ReactCurrentBatchConfig;function fa(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var n=r.stateNode}if(!n)throw Error(K(147,t));var a=n,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var c=a.refs;i===null?delete c[l]:c[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,t))}return t}function Al(t,s){throw t=Object.prototype.toString.call(s),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Au(t){var s=t._init;return s(t._payload)}function xh(t){function s(f,p){if(t){var b=f.deletions;b===null?(f.deletions=[p],f.flags|=16):b.push(p)}}function r(f,p){if(!t)return null;for(;p!==null;)s(f,p),p=p.sibling;return null}function n(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function a(f,p){return f=Lr(f,p),f.index=0,f.sibling=null,f}function l(f,p,b){return f.index=b,t?(b=f.alternate,b!==null?(b=b.index,b<p?(f.flags|=2,p):b):(f.flags|=2,p)):(f.flags|=1048576,p)}function i(f){return t&&f.alternate===null&&(f.flags|=2),f}function c(f,p,b,E){return p===null||p.tag!==6?(p=Co(b,f.mode,E),p.return=f,p):(p=a(p,b),p.return=f,p)}function o(f,p,b,E){var P=b.type;return P===kn?j(f,p,b.props.children,E,b.key):p!==null&&(p.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gr&&Au(P)===p.type)?(E=a(p,b.props),E.ref=fa(f,p,b),E.return=f,E):(E=Kl(b.type,b.key,b.props,null,f.mode,E),E.ref=fa(f,p,b),E.return=f,E)}function m(f,p,b,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==b.containerInfo||p.stateNode.implementation!==b.implementation?(p=So(b,f.mode,E),p.return=f,p):(p=a(p,b.children||[]),p.return=f,p)}function j(f,p,b,E,P){return p===null||p.tag!==7?(p=on(b,f.mode,E,P),p.return=f,p):(p=a(p,b),p.return=f,p)}function x(f,p,b){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Co(""+p,f.mode,b),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case bl:return b=Kl(p.type,p.key,p.props,null,f.mode,b),b.ref=fa(f,null,p),b.return=f,b;case Sn:return p=So(p,f.mode,b),p.return=f,p;case gr:var E=p._init;return x(f,E(p._payload),b)}if(Ca(p)||ua(p))return p=on(p,f.mode,b,null),p.return=f,p;Al(f,p)}return null}function h(f,p,b,E){var P=p!==null?p.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return P!==null?null:c(f,p,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bl:return b.key===P?o(f,p,b,E):null;case Sn:return b.key===P?m(f,p,b,E):null;case gr:return P=b._init,h(f,p,P(b._payload),E)}if(Ca(b)||ua(b))return P!==null?null:j(f,p,b,E,null);Al(f,b)}return null}function u(f,p,b,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return f=f.get(b)||null,c(p,f,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case bl:return f=f.get(E.key===null?b:E.key)||null,o(p,f,E,P);case Sn:return f=f.get(E.key===null?b:E.key)||null,m(p,f,E,P);case gr:var k=E._init;return u(f,p,b,k(E._payload),P)}if(Ca(E)||ua(E))return f=f.get(b)||null,j(p,f,E,P,null);Al(p,E)}return null}function g(f,p,b,E){for(var P=null,k=null,w=p,R=p=0,I=null;w!==null&&R<b.length;R++){w.index>R?(I=w,w=null):I=w.sibling;var T=h(f,w,b[R],E);if(T===null){w===null&&(w=I);break}t&&w&&T.alternate===null&&s(f,w),p=l(T,p,R),k===null?P=T:k.sibling=T,k=T,w=I}if(R===b.length)return r(f,w),tt&&Kr(f,R),P;if(w===null){for(;R<b.length;R++)w=x(f,b[R],E),w!==null&&(p=l(w,p,R),k===null?P=w:k.sibling=w,k=w);return tt&&Kr(f,R),P}for(w=n(f,w);R<b.length;R++)I=u(w,f,R,b[R],E),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?R:I.key),p=l(I,p,R),k===null?P=I:k.sibling=I,k=I);return t&&w.forEach(function(L){return s(f,L)}),tt&&Kr(f,R),P}function v(f,p,b,E){var P=ua(b);if(typeof P!="function")throw Error(K(150));if(b=P.call(b),b==null)throw Error(K(151));for(var k=P=null,w=p,R=p=0,I=null,T=b.next();w!==null&&!T.done;R++,T=b.next()){w.index>R?(I=w,w=null):I=w.sibling;var L=h(f,w,T.value,E);if(L===null){w===null&&(w=I);break}t&&w&&L.alternate===null&&s(f,w),p=l(L,p,R),k===null?P=L:k.sibling=L,k=L,w=I}if(T.done)return r(f,w),tt&&Kr(f,R),P;if(w===null){for(;!T.done;R++,T=b.next())T=x(f,T.value,E),T!==null&&(p=l(T,p,R),k===null?P=T:k.sibling=T,k=T);return tt&&Kr(f,R),P}for(w=n(f,w);!T.done;R++,T=b.next())T=u(w,f,R,T.value,E),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?R:T.key),p=l(T,p,R),k===null?P=T:k.sibling=T,k=T);return t&&w.forEach(function(J){return s(f,J)}),tt&&Kr(f,R),P}function y(f,p,b,E){if(typeof b=="object"&&b!==null&&b.type===kn&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case bl:e:{for(var P=b.key,k=p;k!==null;){if(k.key===P){if(P=b.type,P===kn){if(k.tag===7){r(f,k.sibling),p=a(k,b.props.children),p.return=f,f=p;break e}}else if(k.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gr&&Au(P)===k.type){r(f,k.sibling),p=a(k,b.props),p.ref=fa(f,k,b),p.return=f,f=p;break e}r(f,k);break}else s(f,k);k=k.sibling}b.type===kn?(p=on(b.props.children,f.mode,E,b.key),p.return=f,f=p):(E=Kl(b.type,b.key,b.props,null,f.mode,E),E.ref=fa(f,p,b),E.return=f,f=E)}return i(f);case Sn:e:{for(k=b.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===b.containerInfo&&p.stateNode.implementation===b.implementation){r(f,p.sibling),p=a(p,b.children||[]),p.return=f,f=p;break e}else{r(f,p);break}else s(f,p);p=p.sibling}p=So(b,f.mode,E),p.return=f,f=p}return i(f);case gr:return k=b._init,y(f,p,k(b._payload),E)}if(Ca(b))return g(f,p,b,E);if(ua(b))return v(f,p,b,E);Al(f,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,p!==null&&p.tag===6?(r(f,p.sibling),p=a(p,b),p.return=f,f=p):(r(f,p),p=Co(b,f.mode,E),p.return=f,f=p),i(f)):r(f,p)}return y}var Qn=xh(!0),fh=xh(!1),mi=Br(null),pi=null,In=null,pd=null;function hd(){pd=In=pi=null}function xd(t){var s=mi.current;Ze(mi),t._currentValue=s}function mc(t,s,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),t===r)break;t=t.return}}function Vn(t,s){pi=t,pd=In=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Kt=!0),t.firstContext=null)}function Ns(t){var s=t._currentValue;if(pd!==t)if(t={context:t,memoizedValue:s,next:null},In===null){if(pi===null)throw Error(K(308));In=t,pi.dependencies={lanes:0,firstContext:t}}else In=In.next=t;return s}var sn=null;function fd(t){sn===null?sn=[t]:sn.push(t)}function gh(t,s,r,n){var a=s.interleaved;return a===null?(r.next=r,fd(s)):(r.next=a.next,a.next=r),s.interleaved=r,or(t,n)}function or(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var vr=!1;function gd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rr(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Ar(t,s,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Fe&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,or(t,r)}return a=n.interleaved,a===null?(s.next=s,fd(n)):(s.next=a.next,a.next=s),n.interleaved=s,or(t,r)}function Wl(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,sd(t,r)}}function Mu(t,s){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=s:l=l.next=s}else a=l=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function hi(t,s,r,n){var a=t.updateQueue;vr=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var o=c,m=o.next;o.next=null,i===null?l=m:i.next=m,i=o;var j=t.alternate;j!==null&&(j=j.updateQueue,c=j.lastBaseUpdate,c!==i&&(c===null?j.firstBaseUpdate=m:c.next=m,j.lastBaseUpdate=o))}if(l!==null){var x=a.baseState;i=0,j=m=o=null,c=l;do{var h=c.lane,u=c.eventTime;if((n&h)===h){j!==null&&(j=j.next={eventTime:u,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var g=t,v=c;switch(h=s,u=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){x=g.call(u,x,h);break e}x=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(u,x,h):g,h==null)break e;x=it({},x,h);break e;case 2:vr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[c]:h.push(c))}else u={eventTime:u,lane:h,tag:c.tag,payload:c.payload,callback:c.callback,next:null},j===null?(m=j=u,o=x):j=j.next=u,i|=h;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;h=c,c=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(j===null&&(o=x),a.baseState=o,a.firstBaseUpdate=m,a.lastBaseUpdate=j,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);pn|=i,t.lanes=i,t.memoizedState=x}}function Ru(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var n=t[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(K(191,a));a.call(n)}}}var pl={},qs=Br(pl),Ya=Br(pl),Za=Br(pl);function rn(t){if(t===pl)throw Error(K(174));return t}function vd(t,s){switch(Xe(Za,s),Xe(Ya,t),Xe(qs,pl),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:qo(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=qo(s,t)}Ze(qs),Xe(qs,s)}function Xn(){Ze(qs),Ze(Ya),Ze(Za)}function bh(t){rn(Za.current);var s=rn(qs.current),r=qo(s,t.type);s!==r&&(Xe(Ya,t),Xe(qs,r))}function bd(t){Ya.current===t&&(Ze(qs),Ze(Ya))}var at=Br(0);function xi(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var bo=[];function jd(){for(var t=0;t<bo.length;t++)bo[t]._workInProgressVersionPrimary=null;bo.length=0}var ql=dr.ReactCurrentDispatcher,jo=dr.ReactCurrentBatchConfig,mn=0,lt=null,Nt=null,St=null,fi=!1,Ia=!1,el=0,i0=0;function Ot(){throw Error(K(321))}function yd(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!zs(t[r],s[r]))return!1;return!0}function Nd(t,s,r,n,a,l){if(mn=l,lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ql.current=t===null||t.memoizedState===null?u0:m0,t=r(n,a),Ia){l=0;do{if(Ia=!1,el=0,25<=l)throw Error(K(301));l+=1,St=Nt=null,s.updateQueue=null,ql.current=p0,t=r(n,a)}while(Ia)}if(ql.current=gi,s=Nt!==null&&Nt.next!==null,mn=0,St=Nt=lt=null,fi=!1,s)throw Error(K(300));return t}function wd(){var t=el!==0;return el=0,t}function Bs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?lt.memoizedState=St=t:St=St.next=t,St}function ws(){if(Nt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var s=St===null?lt.memoizedState:St.next;if(s!==null)St=s,Nt=t;else{if(t===null)throw Error(K(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},St===null?lt.memoizedState=St=t:St=St.next=t}return St}function tl(t,s){return typeof s=="function"?s(t):s}function yo(t){var s=ws(),r=s.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var n=Nt,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var c=i=null,o=null,m=l;do{var j=m.lane;if((mn&j)===j)o!==null&&(o=o.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:t(n,m.action);else{var x={lane:j,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};o===null?(c=o=x,i=n):o=o.next=x,lt.lanes|=j,pn|=j}m=m.next}while(m!==null&&m!==l);o===null?i=n:o.next=c,zs(n,s.memoizedState)||(Kt=!0),s.memoizedState=n,s.baseState=i,s.baseQueue=o,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do l=a.lane,lt.lanes|=l,pn|=l,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function No(t){var s=ws(),r=s.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,l=s.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=t(l,i.action),i=i.next;while(i!==a);zs(l,s.memoizedState)||(Kt=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,n]}function jh(){}function yh(t,s){var r=lt,n=ws(),a=s(),l=!zs(n.memoizedState,a);if(l&&(n.memoizedState=a,Kt=!0),n=n.queue,Ed(Eh.bind(null,r,n,t),[t]),n.getSnapshot!==s||l||St!==null&&St.memoizedState.tag&1){if(r.flags|=2048,sl(9,wh.bind(null,r,n,a,s),void 0,null),Tt===null)throw Error(K(349));mn&30||Nh(r,s,a)}return a}function Nh(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=lt.updateQueue,s===null?(s={lastEffect:null,stores:null},lt.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function wh(t,s,r,n){s.value=r,s.getSnapshot=n,Ch(s)&&Sh(t)}function Eh(t,s,r){return r(function(){Ch(s)&&Sh(t)})}function Ch(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!zs(t,r)}catch{return!0}}function Sh(t){var s=or(t,1);s!==null&&Ds(s,t,1,-1)}function Lu(t){var s=Bs();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:t},s.queue=t,t=t.dispatch=d0.bind(null,lt,t),[s.memoizedState,t]}function sl(t,s,r,n){return t={tag:t,create:s,destroy:r,deps:n,next:null},s=lt.updateQueue,s===null?(s={lastEffect:null,stores:null},lt.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,s.lastEffect=t)),t}function kh(){return ws().memoizedState}function Jl(t,s,r,n){var a=Bs();lt.flags|=t,a.memoizedState=sl(1|s,r,void 0,n===void 0?null:n)}function Oi(t,s,r,n){var a=ws();n=n===void 0?null:n;var l=void 0;if(Nt!==null){var i=Nt.memoizedState;if(l=i.destroy,n!==null&&yd(n,i.deps)){a.memoizedState=sl(s,r,l,n);return}}lt.flags|=t,a.memoizedState=sl(1|s,r,l,n)}function Du(t,s){return Jl(8390656,8,t,s)}function Ed(t,s){return Oi(2048,8,t,s)}function Ph(t,s){return Oi(4,2,t,s)}function Th(t,s){return Oi(4,4,t,s)}function Ah(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Mh(t,s,r){return r=r!=null?r.concat([t]):null,Oi(4,4,Ah.bind(null,s,t),r)}function Cd(){}function Rh(t,s){var r=ws();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&yd(s,n[1])?n[0]:(r.memoizedState=[t,s],t)}function Lh(t,s){var r=ws();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&yd(s,n[1])?n[0]:(t=t(),r.memoizedState=[t,s],t)}function Dh(t,s,r){return mn&21?(zs(r,s)||(r=$p(),lt.lanes|=r,pn|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=r)}function o0(t,s){var r=qe;qe=r!==0&&4>r?r:4,t(!0);var n=jo.transition;jo.transition={};try{t(!1),s()}finally{qe=r,jo.transition=n}}function Ih(){return ws().memoizedState}function c0(t,s,r){var n=Rr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},zh(t))Oh(s,r);else if(r=gh(t,s,r,n),r!==null){var a=Wt();Ds(r,t,n,a),_h(r,s,n)}}function d0(t,s,r){var n=Rr(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(zh(t))Oh(s,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,c=l(i,r);if(a.hasEagerState=!0,a.eagerState=c,zs(c,i)){var o=s.interleaved;o===null?(a.next=a,fd(s)):(a.next=o.next,o.next=a),s.interleaved=a;return}}catch{}finally{}r=gh(t,s,a,n),r!==null&&(a=Wt(),Ds(r,t,n,a),_h(r,s,n))}}function zh(t){var s=t.alternate;return t===lt||s!==null&&s===lt}function Oh(t,s){Ia=fi=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function _h(t,s,r){if(r&4194240){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,sd(t,r)}}var gi={readContext:Ns,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},u0={readContext:Ns,useCallback:function(t,s){return Bs().memoizedState=[t,s===void 0?null:s],t},useContext:Ns,useEffect:Du,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Jl(4194308,4,Ah.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Jl(4194308,4,t,s)},useInsertionEffect:function(t,s){return Jl(4,2,t,s)},useMemo:function(t,s){var r=Bs();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var n=Bs();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},n.queue=t,t=t.dispatch=c0.bind(null,lt,t),[n.memoizedState,t]},useRef:function(t){var s=Bs();return t={current:t},s.memoizedState=t},useState:Lu,useDebugValue:Cd,useDeferredValue:function(t){return Bs().memoizedState=t},useTransition:function(){var t=Lu(!1),s=t[0];return t=o0.bind(null,t[1]),Bs().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var n=lt,a=Bs();if(tt){if(r===void 0)throw Error(K(407));r=r()}else{if(r=s(),Tt===null)throw Error(K(349));mn&30||Nh(n,s,r)}a.memoizedState=r;var l={value:r,getSnapshot:s};return a.queue=l,Du(Eh.bind(null,n,l,t),[t]),n.flags|=2048,sl(9,wh.bind(null,n,l,r,s),void 0,null),r},useId:function(){var t=Bs(),s=Tt.identifierPrefix;if(tt){var r=sr,n=tr;r=(n&~(1<<32-Ls(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=el++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=i0++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},m0={readContext:Ns,useCallback:Rh,useContext:Ns,useEffect:Ed,useImperativeHandle:Mh,useInsertionEffect:Ph,useLayoutEffect:Th,useMemo:Lh,useReducer:yo,useRef:kh,useState:function(){return yo(tl)},useDebugValue:Cd,useDeferredValue:function(t){var s=ws();return Dh(s,Nt.memoizedState,t)},useTransition:function(){var t=yo(tl)[0],s=ws().memoizedState;return[t,s]},useMutableSource:jh,useSyncExternalStore:yh,useId:Ih,unstable_isNewReconciler:!1},p0={readContext:Ns,useCallback:Rh,useContext:Ns,useEffect:Ed,useImperativeHandle:Mh,useInsertionEffect:Ph,useLayoutEffect:Th,useMemo:Lh,useReducer:No,useRef:kh,useState:function(){return No(tl)},useDebugValue:Cd,useDeferredValue:function(t){var s=ws();return Nt===null?s.memoizedState=t:Dh(s,Nt.memoizedState,t)},useTransition:function(){var t=No(tl)[0],s=ws().memoizedState;return[t,s]},useMutableSource:jh,useSyncExternalStore:yh,useId:Ih,unstable_isNewReconciler:!1};function Ps(t,s){if(t&&t.defaultProps){s=it({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function pc(t,s,r,n){s=t.memoizedState,r=r(n,s),r=r==null?s:it({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var _i={isMounted:function(t){return(t=t._reactInternals)?vn(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var n=Wt(),a=Rr(t),l=rr(n,a);l.payload=s,r!=null&&(l.callback=r),s=Ar(t,l,a),s!==null&&(Ds(s,t,a,n),Wl(s,t,a))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var n=Wt(),a=Rr(t),l=rr(n,a);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=Ar(t,l,a),s!==null&&(Ds(s,t,a,n),Wl(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Wt(),n=Rr(t),a=rr(r,n);a.tag=2,s!=null&&(a.callback=s),s=Ar(t,a,n),s!==null&&(Ds(s,t,n,r),Wl(s,t,n))}};function Iu(t,s,r,n,a,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,l,i):s.prototype&&s.prototype.isPureReactComponent?!Ga(r,n)||!Ga(a,l):!0}function $h(t,s,r){var n=!1,a=Or,l=s.contextType;return typeof l=="object"&&l!==null?l=Ns(l):(a=Zt(s)?dn:Ut.current,n=s.contextTypes,l=(n=n!=null)?Jn(t,a):Or),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=_i,t.stateNode=s,s._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),s}function zu(t,s,r,n){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==t&&_i.enqueueReplaceState(s,s.state,null)}function hc(t,s,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},gd(t);var l=s.contextType;typeof l=="object"&&l!==null?a.context=Ns(l):(l=Zt(s)?dn:Ut.current,a.context=Jn(t,l)),a.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(pc(t,s,l,r),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&_i.enqueueReplaceState(a,a.state,null),hi(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Kn(t,s){try{var r="",n=s;do r+=Ff(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:a,digest:null}}function wo(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function xc(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var h0=typeof WeakMap=="function"?WeakMap:Map;function Uh(t,s,r){r=rr(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){bi||(bi=!0,Cc=n),xc(t,s)},r}function Fh(t,s,r){r=rr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){xc(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){xc(t,s),typeof n!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function Ou(t,s,r){var n=t.pingCache;if(n===null){n=t.pingCache=new h0;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),t=P0.bind(null,t,s,r),s.then(t,t))}function _u(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function $u(t,s,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=rr(-1,1),s.tag=2,Ar(r,s,1))),r.lanes|=1),t)}var x0=dr.ReactCurrentOwner,Kt=!1;function Vt(t,s,r,n){s.child=t===null?fh(s,null,r,n):Qn(s,t.child,r,n)}function Uu(t,s,r,n,a){r=r.render;var l=s.ref;return Vn(s,a),n=Nd(t,s,r,n,l,a),r=wd(),t!==null&&!Kt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,cr(t,s,a)):(tt&&r&&dd(s),s.flags|=1,Vt(t,s,n,a),s.child)}function Fu(t,s,r,n,a){if(t===null){var l=r.type;return typeof l=="function"&&!Ld(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,Bh(t,s,l,n,a)):(t=Kl(r.type,null,n,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Ga,r(i,n)&&t.ref===s.ref)return cr(t,s,a)}return s.flags|=1,t=Lr(l,n),t.ref=s.ref,t.return=s,s.child=t}function Bh(t,s,r,n,a){if(t!==null){var l=t.memoizedProps;if(Ga(l,n)&&t.ref===s.ref)if(Kt=!1,s.pendingProps=n=l,(t.lanes&a)!==0)t.flags&131072&&(Kt=!0);else return s.lanes=t.lanes,cr(t,s,a)}return fc(t,s,r,n,a)}function Vh(t,s,r){var n=s.pendingProps,a=n.children,l=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(On,ls),ls|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Xe(On,ls),ls|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Xe(On,ls),ls|=n}else l!==null?(n=l.baseLanes|r,s.memoizedState=null):n=r,Xe(On,ls),ls|=n;return Vt(t,s,a,r),s.child}function Hh(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function fc(t,s,r,n,a){var l=Zt(r)?dn:Ut.current;return l=Jn(s,l),Vn(s,a),r=Nd(t,s,r,n,l,a),n=wd(),t!==null&&!Kt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,cr(t,s,a)):(tt&&n&&dd(s),s.flags|=1,Vt(t,s,r,a),s.child)}function Bu(t,s,r,n,a){if(Zt(r)){var l=!0;ci(s)}else l=!1;if(Vn(s,a),s.stateNode===null)Gl(t,s),$h(s,r,n),hc(s,r,n,a),n=!0;else if(t===null){var i=s.stateNode,c=s.memoizedProps;i.props=c;var o=i.context,m=r.contextType;typeof m=="object"&&m!==null?m=Ns(m):(m=Zt(r)?dn:Ut.current,m=Jn(s,m));var j=r.getDerivedStateFromProps,x=typeof j=="function"||typeof i.getSnapshotBeforeUpdate=="function";x||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==n||o!==m)&&zu(s,i,n,m),vr=!1;var h=s.memoizedState;i.state=h,hi(s,n,i,a),o=s.memoizedState,c!==n||h!==o||Yt.current||vr?(typeof j=="function"&&(pc(s,r,j,n),o=s.memoizedState),(c=vr||Iu(s,r,c,n,h,o,m))?(x||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=o),i.props=n,i.state=o,i.context=m,n=c):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{i=s.stateNode,vh(t,s),c=s.memoizedProps,m=s.type===s.elementType?c:Ps(s.type,c),i.props=m,x=s.pendingProps,h=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=Ns(o):(o=Zt(r)?dn:Ut.current,o=Jn(s,o));var u=r.getDerivedStateFromProps;(j=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==x||h!==o)&&zu(s,i,n,o),vr=!1,h=s.memoizedState,i.state=h,hi(s,n,i,a);var g=s.memoizedState;c!==x||h!==g||Yt.current||vr?(typeof u=="function"&&(pc(s,r,u,n),g=s.memoizedState),(m=vr||Iu(s,r,m,n,h,g,o)||!1)?(j||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,o)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=g),i.props=n,i.state=g,i.context=o,n=m):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),n=!1)}return gc(t,s,r,n,l,a)}function gc(t,s,r,n,a,l){Hh(t,s);var i=(s.flags&128)!==0;if(!n&&!i)return a&&ku(s,r,!1),cr(t,s,l);n=s.stateNode,x0.current=s;var c=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,t!==null&&i?(s.child=Qn(s,t.child,null,l),s.child=Qn(s,null,c,l)):Vt(t,s,c,l),s.memoizedState=n.state,a&&ku(s,r,!0),s.child}function Wh(t){var s=t.stateNode;s.pendingContext?Su(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Su(t,s.context,!1),vd(t,s.containerInfo)}function Vu(t,s,r,n,a){return Gn(),md(a),s.flags|=256,Vt(t,s,r,n),s.child}var vc={dehydrated:null,treeContext:null,retryLane:0};function bc(t){return{baseLanes:t,cachePool:null,transitions:null}}function qh(t,s,r){var n=s.pendingProps,a=at.current,l=!1,i=(s.flags&128)!==0,c;if((c=i)||(c=t!==null&&t.memoizedState===null?!1:(a&2)!==0),c?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Xe(at,a&1),t===null)return uc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=n.children,t=n.fallback,l?(n=s.mode,l=s.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Fi(i,n,0,null),t=on(t,n,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=bc(r),s.memoizedState=vc,t):Sd(s,i));if(a=t.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return f0(t,s,i,n,c,a,r);if(l){l=n.fallback,i=s.mode,a=t.child,c=a.sibling;var o={mode:"hidden",children:n.children};return!(i&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=o,s.deletions=null):(n=Lr(a,o),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=Lr(c,l):(l=on(l,i,r,null),l.flags|=2),l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,i=t.child.memoizedState,i=i===null?bc(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~r,s.memoizedState=vc,n}return l=t.child,t=l.sibling,n=Lr(l,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=n,s.memoizedState=null,n}function Sd(t,s){return s=Fi({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ml(t,s,r,n){return n!==null&&md(n),Qn(s,t.child,null,r),t=Sd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function f0(t,s,r,n,a,l,i){if(r)return s.flags&256?(s.flags&=-257,n=wo(Error(K(422))),Ml(t,s,i,n)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=n.fallback,a=s.mode,n=Fi({mode:"visible",children:n.children},a,0,null),l=on(l,a,i,null),l.flags|=2,n.return=s,l.return=s,n.sibling=l,s.child=n,s.mode&1&&Qn(s,t.child,null,i),s.child.memoizedState=bc(i),s.memoizedState=vc,l);if(!(s.mode&1))return Ml(t,s,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,l=Error(K(419)),n=wo(l,n,void 0),Ml(t,s,i,n)}if(c=(i&t.childLanes)!==0,Kt||c){if(n=Tt,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,or(t,a),Ds(n,t,a,-1))}return Rd(),n=wo(Error(K(421))),Ml(t,s,i,n)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=T0.bind(null,t),a._reactRetry=s,null):(t=l.treeContext,os=Tr(a.nextSibling),cs=s,tt=!0,Ms=null,t!==null&&(gs[vs++]=tr,gs[vs++]=sr,gs[vs++]=un,tr=t.id,sr=t.overflow,un=s),s=Sd(s,n.children),s.flags|=4096,s)}function Hu(t,s,r){t.lanes|=s;var n=t.alternate;n!==null&&(n.lanes|=s),mc(t.return,s,r)}function Eo(t,s,r,n,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function Jh(t,s,r){var n=s.pendingProps,a=n.revealOrder,l=n.tail;if(Vt(t,s,n.children,r),n=at.current,n&2)n=n&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hu(t,r,s);else if(t.tag===19)Hu(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Xe(at,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)t=r.alternate,t!==null&&xi(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),Eo(s,!1,a,r,l);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&xi(t)===null){s.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Eo(s,!0,r,null,l);break;case"together":Eo(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Gl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function cr(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),pn|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(K(153));if(s.child!==null){for(t=s.child,r=Lr(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Lr(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function g0(t,s,r){switch(s.tag){case 3:Wh(s),Gn();break;case 5:bh(s);break;case 1:Zt(s.type)&&ci(s);break;case 4:vd(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;Xe(mi,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(Xe(at,at.current&1),s.flags|=128,null):r&s.child.childLanes?qh(t,s,r):(Xe(at,at.current&1),t=cr(t,s,r),t!==null?t.sibling:null);Xe(at,at.current&1);break;case 19:if(n=(r&s.childLanes)!==0,t.flags&128){if(n)return Jh(t,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Xe(at,at.current),n)break;return null;case 22:case 23:return s.lanes=0,Vh(t,s,r)}return cr(t,s,r)}var Gh,jc,Qh,Xh;Gh=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};jc=function(){};Qh=function(t,s,r,n){var a=t.memoizedProps;if(a!==n){t=s.stateNode,rn(qs.current);var l=null;switch(r){case"input":a=Bo(t,a),n=Bo(t,n),l=[];break;case"select":a=it({},a,{value:void 0}),n=it({},n,{value:void 0}),l=[];break;case"textarea":a=Wo(t,a),n=Wo(t,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ii)}Jo(r,n);var i;r=null;for(m in a)if(!n.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var c=a[m];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Fa.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in n){var o=n[m];if(c=a!=null?a[m]:void 0,n.hasOwnProperty(m)&&o!==c&&(o!=null||c!=null))if(m==="style")if(c){for(i in c)!c.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&c[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(l||(l=[]),l.push(m,r)),r=o;else m==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(l=l||[]).push(m,o)):m==="children"?typeof o!="string"&&typeof o!="number"||(l=l||[]).push(m,""+o):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Fa.hasOwnProperty(m)?(o!=null&&m==="onScroll"&&Ke("scroll",t),l||c===o||(l=[])):(l=l||[]).push(m,o))}r&&(l=l||[]).push("style",r);var m=l;(s.updateQueue=m)&&(s.flags|=4)}};Xh=function(t,s,r,n){r!==n&&(s.flags|=4)};function ga(t,s){if(!tt)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function _t(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(s)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,s}function v0(t,s,r){var n=s.pendingProps;switch(ud(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(s),null;case 1:return Zt(s.type)&&oi(),_t(s),null;case 3:return n=s.stateNode,Xn(),Ze(Yt),Ze(Ut),jd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Tl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ms!==null&&(Pc(Ms),Ms=null))),jc(t,s),_t(s),null;case 5:bd(s);var a=rn(Za.current);if(r=s.type,t!==null&&s.stateNode!=null)Qh(t,s,r,n,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(K(166));return _t(s),null}if(t=rn(qs.current),Tl(s)){n=s.stateNode,r=s.type;var l=s.memoizedProps;switch(n[Hs]=s,n[Ka]=l,t=(s.mode&1)!==0,r){case"dialog":Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":case"embed":Ke("load",n);break;case"video":case"audio":for(a=0;a<ka.length;a++)Ke(ka[a],n);break;case"source":Ke("error",n);break;case"img":case"image":case"link":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"input":Zd(n,l),Ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Ke("invalid",n);break;case"textarea":tu(n,l),Ke("invalid",n)}Jo(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="children"?typeof c=="string"?n.textContent!==c&&(l.suppressHydrationWarning!==!0&&Pl(n.textContent,c,t),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Pl(n.textContent,c,t),a=["children",""+c]):Fa.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Ke("scroll",n)}switch(r){case"input":jl(n),eu(n,l,!0);break;case"textarea":jl(n),su(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=ii)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ep(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Hs]=s,t[Ka]=n,Gh(t,s,!1,!1),s.stateNode=t;e:{switch(i=Go(r,n),r){case"dialog":Ke("cancel",t),Ke("close",t),a=n;break;case"iframe":case"object":case"embed":Ke("load",t),a=n;break;case"video":case"audio":for(a=0;a<ka.length;a++)Ke(ka[a],t);a=n;break;case"source":Ke("error",t),a=n;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),a=n;break;case"details":Ke("toggle",t),a=n;break;case"input":Zd(t,n),a=Bo(t,n),Ke("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=it({},n,{value:void 0}),Ke("invalid",t);break;case"textarea":tu(t,n),a=Wo(t,n),Ke("invalid",t);break;default:a=n}Jo(r,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var o=c[l];l==="style"?kp(t,o):l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Cp(t,o)):l==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Ba(t,o):typeof o=="number"&&Ba(t,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Fa.hasOwnProperty(l)?o!=null&&l==="onScroll"&&Ke("scroll",t):o!=null&&Xc(t,l,o,i))}switch(r){case"input":jl(t),eu(t,n,!1);break;case"textarea":jl(t),su(t);break;case"option":n.value!=null&&t.setAttribute("value",""+zr(n.value));break;case"select":t.multiple=!!n.multiple,l=n.value,l!=null?$n(t,!!n.multiple,l,!1):n.defaultValue!=null&&$n(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=ii)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return _t(s),null;case 6:if(t&&s.stateNode!=null)Xh(t,s,t.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(K(166));if(r=rn(Za.current),rn(qs.current),Tl(s)){if(n=s.stateNode,r=s.memoizedProps,n[Hs]=s,(l=n.nodeValue!==r)&&(t=cs,t!==null))switch(t.tag){case 3:Pl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pl(n.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Hs]=s,s.stateNode=n}return _t(s),null;case 13:if(Ze(at),n=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&os!==null&&s.mode&1&&!(s.flags&128))hh(),Gn(),s.flags|=98560,l=!1;else if(l=Tl(s),n!==null&&n.dehydrated!==null){if(t===null){if(!l)throw Error(K(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(K(317));l[Hs]=s}else Gn(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;_t(s),l=!1}else Ms!==null&&(Pc(Ms),Ms=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(t===null||at.current&1?wt===0&&(wt=3):Rd())),s.updateQueue!==null&&(s.flags|=4),_t(s),null);case 4:return Xn(),jc(t,s),t===null&&Qa(s.stateNode.containerInfo),_t(s),null;case 10:return xd(s.type._context),_t(s),null;case 17:return Zt(s.type)&&oi(),_t(s),null;case 19:if(Ze(at),l=s.memoizedState,l===null)return _t(s),null;if(n=(s.flags&128)!==0,i=l.rendering,i===null)if(n)ga(l,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=xi(t),i!==null){for(s.flags|=128,ga(l,!1),n=i.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)l=r,t=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Xe(at,at.current&1|2),s.child}t=t.sibling}l.tail!==null&&mt()>Yn&&(s.flags|=128,n=!0,ga(l,!1),s.lanes=4194304)}else{if(!n)if(t=xi(i),t!==null){if(s.flags|=128,n=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),ga(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!tt)return _t(s),null}else 2*mt()-l.renderingStartTime>Yn&&r!==1073741824&&(s.flags|=128,n=!0,ga(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=mt(),s.sibling=null,r=at.current,Xe(at,n?r&1|2:r&1),s):(_t(s),null);case 22:case 23:return Md(),n=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?ls&1073741824&&(_t(s),s.subtreeFlags&6&&(s.flags|=8192)):_t(s),null;case 24:return null;case 25:return null}throw Error(K(156,s.tag))}function b0(t,s){switch(ud(s),s.tag){case 1:return Zt(s.type)&&oi(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Xn(),Ze(Yt),Ze(Ut),jd(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return bd(s),null;case 13:if(Ze(at),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(K(340));Gn()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ze(at),null;case 4:return Xn(),null;case 10:return xd(s.type._context),null;case 22:case 23:return Md(),null;case 24:return null;default:return null}}var Rl=!1,$t=!1,j0=typeof WeakSet=="function"?WeakSet:Set,ue=null;function zn(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){dt(t,s,n)}else r.current=null}function yc(t,s,r){try{r()}catch(n){dt(t,s,n)}}var Wu=!1;function y0(t,s){if(nc=ni,t=th(),cd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,c=-1,o=-1,m=0,j=0,x=t,h=null;t:for(;;){for(var u;x!==r||a!==0&&x.nodeType!==3||(c=i+a),x!==l||n!==0&&x.nodeType!==3||(o=i+n),x.nodeType===3&&(i+=x.nodeValue.length),(u=x.firstChild)!==null;)h=x,x=u;for(;;){if(x===t)break t;if(h===r&&++m===a&&(c=i),h===l&&++j===n&&(o=i),(u=x.nextSibling)!==null)break;x=h,h=x.parentNode}x=u}r=c===-1||o===-1?null:{start:c,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(ac={focusedElem:t,selectionRange:r},ni=!1,ue=s;ue!==null;)if(s=ue,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ue=t;else for(;ue!==null;){s=ue;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,f=s.stateNode,p=f.getSnapshotBeforeUpdate(s.elementType===s.type?v:Ps(s.type,v),y);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var b=s.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(E){dt(s,s.return,E)}if(t=s.sibling,t!==null){t.return=s.return,ue=t;break}ue=s.return}return g=Wu,Wu=!1,g}function za(t,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&yc(s,r,l)}a=a.next}while(a!==n)}}function $i(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function Nc(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function Kh(t){var s=t.alternate;s!==null&&(t.alternate=null,Kh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Hs],delete s[Ka],delete s[oc],delete s[r0],delete s[n0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yh(t){return t.tag===5||t.tag===3||t.tag===4}function qu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wc(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=ii));else if(n!==4&&(t=t.child,t!==null))for(wc(t,s,r),t=t.sibling;t!==null;)wc(t,s,r),t=t.sibling}function Ec(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ec(t,s,r),t=t.sibling;t!==null;)Ec(t,s,r),t=t.sibling}var Lt=null,Ts=!1;function hr(t,s,r){for(r=r.child;r!==null;)Zh(t,s,r),r=r.sibling}function Zh(t,s,r){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(Mi,r)}catch{}switch(r.tag){case 5:$t||zn(r,s);case 6:var n=Lt,a=Ts;Lt=null,hr(t,s,r),Lt=n,Ts=a,Lt!==null&&(Ts?(t=Lt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Lt.removeChild(r.stateNode));break;case 18:Lt!==null&&(Ts?(t=Lt,r=r.stateNode,t.nodeType===8?go(t.parentNode,r):t.nodeType===1&&go(t,r),qa(t)):go(Lt,r.stateNode));break;case 4:n=Lt,a=Ts,Lt=r.stateNode.containerInfo,Ts=!0,hr(t,s,r),Lt=n,Ts=a;break;case 0:case 11:case 14:case 15:if(!$t&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&yc(r,s,i),a=a.next}while(a!==n)}hr(t,s,r);break;case 1:if(!$t&&(zn(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){dt(r,s,c)}hr(t,s,r);break;case 21:hr(t,s,r);break;case 22:r.mode&1?($t=(n=$t)||r.memoizedState!==null,hr(t,s,r),$t=n):hr(t,s,r);break;default:hr(t,s,r)}}function Ju(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new j0),s.forEach(function(n){var a=A0.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Cs(t,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=t,i=s,c=i;e:for(;c!==null;){switch(c.tag){case 5:Lt=c.stateNode,Ts=!1;break e;case 3:Lt=c.stateNode.containerInfo,Ts=!0;break e;case 4:Lt=c.stateNode.containerInfo,Ts=!0;break e}c=c.return}if(Lt===null)throw Error(K(160));Zh(l,i,a),Lt=null,Ts=!1;var o=a.alternate;o!==null&&(o.return=null),a.return=null}catch(m){dt(a,s,m)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ex(s,t),s=s.sibling}function ex(t,s){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cs(s,t),Fs(t),n&4){try{za(3,t,t.return),$i(3,t)}catch(v){dt(t,t.return,v)}try{za(5,t,t.return)}catch(v){dt(t,t.return,v)}}break;case 1:Cs(s,t),Fs(t),n&512&&r!==null&&zn(r,r.return);break;case 5:if(Cs(s,t),Fs(t),n&512&&r!==null&&zn(r,r.return),t.flags&32){var a=t.stateNode;try{Ba(a,"")}catch(v){dt(t,t.return,v)}}if(n&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,i=r!==null?r.memoizedProps:l,c=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&Np(a,l),Go(c,i);var m=Go(c,l);for(i=0;i<o.length;i+=2){var j=o[i],x=o[i+1];j==="style"?kp(a,x):j==="dangerouslySetInnerHTML"?Cp(a,x):j==="children"?Ba(a,x):Xc(a,j,x,m)}switch(c){case"input":Vo(a,l);break;case"textarea":wp(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var u=l.value;u!=null?$n(a,!!l.multiple,u,!1):h!==!!l.multiple&&(l.defaultValue!=null?$n(a,!!l.multiple,l.defaultValue,!0):$n(a,!!l.multiple,l.multiple?[]:"",!1))}a[Ka]=l}catch(v){dt(t,t.return,v)}}break;case 6:if(Cs(s,t),Fs(t),n&4){if(t.stateNode===null)throw Error(K(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(v){dt(t,t.return,v)}}break;case 3:if(Cs(s,t),Fs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{qa(s.containerInfo)}catch(v){dt(t,t.return,v)}break;case 4:Cs(s,t),Fs(t);break;case 13:Cs(s,t),Fs(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Td=mt())),n&4&&Ju(t);break;case 22:if(j=r!==null&&r.memoizedState!==null,t.mode&1?($t=(m=$t)||j,Cs(s,t),$t=m):Cs(s,t),Fs(t),n&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!j&&t.mode&1)for(ue=t,j=t.child;j!==null;){for(x=ue=j;ue!==null;){switch(h=ue,u=h.child,h.tag){case 0:case 11:case 14:case 15:za(4,h,h.return);break;case 1:zn(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{s=n,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(v){dt(n,r,v)}}break;case 5:zn(h,h.return);break;case 22:if(h.memoizedState!==null){Qu(x);continue}}u!==null?(u.return=h,ue=u):Qu(x)}j=j.sibling}e:for(j=null,x=t;;){if(x.tag===5){if(j===null){j=x;try{a=x.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=x.stateNode,o=x.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=Sp("display",i))}catch(v){dt(t,t.return,v)}}}else if(x.tag===6){if(j===null)try{x.stateNode.nodeValue=m?"":x.memoizedProps}catch(v){dt(t,t.return,v)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;j===x&&(j=null),x=x.return}j===x&&(j=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Cs(s,t),Fs(t),n&4&&Ju(t);break;case 21:break;default:Cs(s,t),Fs(t)}}function Fs(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(Yh(r)){var n=r;break e}r=r.return}throw Error(K(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ba(a,""),n.flags&=-33);var l=qu(t);Ec(t,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,c=qu(t);wc(t,c,i);break;default:throw Error(K(161))}}catch(o){dt(t,t.return,o)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function N0(t,s,r){ue=t,tx(t)}function tx(t,s,r){for(var n=(t.mode&1)!==0;ue!==null;){var a=ue,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||Rl;if(!i){var c=a.alternate,o=c!==null&&c.memoizedState!==null||$t;c=Rl;var m=$t;if(Rl=i,($t=o)&&!m)for(ue=a;ue!==null;)i=ue,o=i.child,i.tag===22&&i.memoizedState!==null?Xu(a):o!==null?(o.return=i,ue=o):Xu(a);for(;l!==null;)ue=l,tx(l),l=l.sibling;ue=a,Rl=c,$t=m}Gu(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ue=l):Gu(t)}}function Gu(t){for(;ue!==null;){var s=ue;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:$t||$i(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!$t)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:Ps(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Ru(s,l,n);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Ru(s,i,r)}break;case 5:var c=s.stateNode;if(r===null&&s.flags&4){r=c;var o=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var m=s.alternate;if(m!==null){var j=m.memoizedState;if(j!==null){var x=j.dehydrated;x!==null&&qa(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}$t||s.flags&512&&Nc(s)}catch(h){dt(s,s.return,h)}}if(s===t){ue=null;break}if(r=s.sibling,r!==null){r.return=s.return,ue=r;break}ue=s.return}}function Qu(t){for(;ue!==null;){var s=ue;if(s===t){ue=null;break}var r=s.sibling;if(r!==null){r.return=s.return,ue=r;break}ue=s.return}}function Xu(t){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{$i(4,s)}catch(o){dt(s,r,o)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(o){dt(s,a,o)}}var l=s.return;try{Nc(s)}catch(o){dt(s,l,o)}break;case 5:var i=s.return;try{Nc(s)}catch(o){dt(s,i,o)}}}catch(o){dt(s,s.return,o)}if(s===t){ue=null;break}var c=s.sibling;if(c!==null){c.return=s.return,ue=c;break}ue=s.return}}var w0=Math.ceil,vi=dr.ReactCurrentDispatcher,kd=dr.ReactCurrentOwner,js=dr.ReactCurrentBatchConfig,Fe=0,Tt=null,vt=null,It=0,ls=0,On=Br(0),wt=0,rl=null,pn=0,Ui=0,Pd=0,Oa=null,Xt=null,Td=0,Yn=1/0,Zs=null,bi=!1,Cc=null,Mr=null,Ll=!1,wr=null,ji=0,_a=0,Sc=null,Ql=-1,Xl=0;function Wt(){return Fe&6?mt():Ql!==-1?Ql:Ql=mt()}function Rr(t){return t.mode&1?Fe&2&&It!==0?It&-It:l0.transition!==null?(Xl===0&&(Xl=$p()),Xl):(t=qe,t!==0||(t=window.event,t=t===void 0?16:qp(t.type)),t):1}function Ds(t,s,r,n){if(50<_a)throw _a=0,Sc=null,Error(K(185));dl(t,r,n),(!(Fe&2)||t!==Tt)&&(t===Tt&&(!(Fe&2)&&(Ui|=r),wt===4&&yr(t,It)),es(t,n),r===1&&Fe===0&&!(s.mode&1)&&(Yn=mt()+500,zi&&Vr()))}function es(t,s){var r=t.callbackNode;lg(t,s);var n=ri(t,t===Tt?It:0);if(n===0)r!==null&&au(r),t.callbackNode=null,t.callbackPriority=0;else if(s=n&-n,t.callbackPriority!==s){if(r!=null&&au(r),s===1)t.tag===0?a0(Ku.bind(null,t)):uh(Ku.bind(null,t)),t0(function(){!(Fe&6)&&Vr()}),r=null;else{switch(Up(n)){case 1:r=td;break;case 4:r=Op;break;case 16:r=si;break;case 536870912:r=_p;break;default:r=si}r=cx(r,sx.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function sx(t,s){if(Ql=-1,Xl=0,Fe&6)throw Error(K(327));var r=t.callbackNode;if(Hn()&&t.callbackNode!==r)return null;var n=ri(t,t===Tt?It:0);if(n===0)return null;if(n&30||n&t.expiredLanes||s)s=yi(t,n);else{s=n;var a=Fe;Fe|=2;var l=nx();(Tt!==t||It!==s)&&(Zs=null,Yn=mt()+500,ln(t,s));do try{S0();break}catch(c){rx(t,c)}while(!0);hd(),vi.current=l,Fe=a,vt!==null?s=0:(Tt=null,It=0,s=wt)}if(s!==0){if(s===2&&(a=Zo(t),a!==0&&(n=a,s=kc(t,a))),s===1)throw r=rl,ln(t,0),yr(t,n),es(t,mt()),r;if(s===6)yr(t,n);else{if(a=t.current.alternate,!(n&30)&&!E0(a)&&(s=yi(t,n),s===2&&(l=Zo(t),l!==0&&(n=l,s=kc(t,l))),s===1))throw r=rl,ln(t,0),yr(t,n),es(t,mt()),r;switch(t.finishedWork=a,t.finishedLanes=n,s){case 0:case 1:throw Error(K(345));case 2:Yr(t,Xt,Zs);break;case 3:if(yr(t,n),(n&130023424)===n&&(s=Td+500-mt(),10<s)){if(ri(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Wt(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=ic(Yr.bind(null,t,Xt,Zs),s);break}Yr(t,Xt,Zs);break;case 4:if(yr(t,n),(n&4194240)===n)break;for(s=t.eventTimes,a=-1;0<n;){var i=31-Ls(n);l=1<<i,i=s[i],i>a&&(a=i),n&=~l}if(n=a,n=mt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*w0(n/1960))-n,10<n){t.timeoutHandle=ic(Yr.bind(null,t,Xt,Zs),n);break}Yr(t,Xt,Zs);break;case 5:Yr(t,Xt,Zs);break;default:throw Error(K(329))}}}return es(t,mt()),t.callbackNode===r?sx.bind(null,t):null}function kc(t,s){var r=Oa;return t.current.memoizedState.isDehydrated&&(ln(t,s).flags|=256),t=yi(t,s),t!==2&&(s=Xt,Xt=r,s!==null&&Pc(s)),t}function Pc(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function E0(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!zs(l(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yr(t,s){for(s&=~Pd,s&=~Ui,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Ls(s),n=1<<r;t[r]=-1,s&=~n}}function Ku(t){if(Fe&6)throw Error(K(327));Hn();var s=ri(t,0);if(!(s&1))return es(t,mt()),null;var r=yi(t,s);if(t.tag!==0&&r===2){var n=Zo(t);n!==0&&(s=n,r=kc(t,n))}if(r===1)throw r=rl,ln(t,0),yr(t,s),es(t,mt()),r;if(r===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Yr(t,Xt,Zs),es(t,mt()),null}function Ad(t,s){var r=Fe;Fe|=1;try{return t(s)}finally{Fe=r,Fe===0&&(Yn=mt()+500,zi&&Vr())}}function hn(t){wr!==null&&wr.tag===0&&!(Fe&6)&&Hn();var s=Fe;Fe|=1;var r=js.transition,n=qe;try{if(js.transition=null,qe=1,t)return t()}finally{qe=n,js.transition=r,Fe=s,!(Fe&6)&&Vr()}}function Md(){ls=On.current,Ze(On)}function ln(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,e0(r)),vt!==null)for(r=vt.return;r!==null;){var n=r;switch(ud(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&oi();break;case 3:Xn(),Ze(Yt),Ze(Ut),jd();break;case 5:bd(n);break;case 4:Xn();break;case 13:Ze(at);break;case 19:Ze(at);break;case 10:xd(n.type._context);break;case 22:case 23:Md()}r=r.return}if(Tt=t,vt=t=Lr(t.current,null),It=ls=s,wt=0,rl=null,Pd=Ui=pn=0,Xt=Oa=null,sn!==null){for(s=0;s<sn.length;s++)if(r=sn[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}sn=null}return t}function rx(t,s){do{var r=vt;try{if(hd(),ql.current=gi,fi){for(var n=lt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}fi=!1}if(mn=0,St=Nt=lt=null,Ia=!1,el=0,kd.current=null,r===null||r.return===null){wt=1,rl=s,vt=null;break}e:{var l=t,i=r.return,c=r,o=s;if(s=It,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var m=o,j=c,x=j.tag;if(!(j.mode&1)&&(x===0||x===11||x===15)){var h=j.alternate;h?(j.updateQueue=h.updateQueue,j.memoizedState=h.memoizedState,j.lanes=h.lanes):(j.updateQueue=null,j.memoizedState=null)}var u=_u(i);if(u!==null){u.flags&=-257,$u(u,i,c,l,s),u.mode&1&&Ou(l,m,s),s=u,o=m;var g=s.updateQueue;if(g===null){var v=new Set;v.add(o),s.updateQueue=v}else g.add(o);break e}else{if(!(s&1)){Ou(l,m,s),Rd();break e}o=Error(K(426))}}else if(tt&&c.mode&1){var y=_u(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),$u(y,i,c,l,s),md(Kn(o,c));break e}}l=o=Kn(o,c),wt!==4&&(wt=2),Oa===null?Oa=[l]:Oa.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var f=Uh(l,o,s);Mu(l,f);break e;case 1:c=o;var p=l.type,b=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Mr===null||!Mr.has(b)))){l.flags|=65536,s&=-s,l.lanes|=s;var E=Fh(l,c,s);Mu(l,E);break e}}l=l.return}while(l!==null)}lx(r)}catch(P){s=P,vt===r&&r!==null&&(vt=r=r.return);continue}break}while(!0)}function nx(){var t=vi.current;return vi.current=gi,t===null?gi:t}function Rd(){(wt===0||wt===3||wt===2)&&(wt=4),Tt===null||!(pn&268435455)&&!(Ui&268435455)||yr(Tt,It)}function yi(t,s){var r=Fe;Fe|=2;var n=nx();(Tt!==t||It!==s)&&(Zs=null,ln(t,s));do try{C0();break}catch(a){rx(t,a)}while(!0);if(hd(),Fe=r,vi.current=n,vt!==null)throw Error(K(261));return Tt=null,It=0,wt}function C0(){for(;vt!==null;)ax(vt)}function S0(){for(;vt!==null&&!Kf();)ax(vt)}function ax(t){var s=ox(t.alternate,t,ls);t.memoizedProps=t.pendingProps,s===null?lx(t):vt=s,kd.current=null}function lx(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=b0(r,s),r!==null){r.flags&=32767,vt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,vt=null;return}}else if(r=v0(r,s,ls),r!==null){vt=r;return}if(s=s.sibling,s!==null){vt=s;return}vt=s=t}while(s!==null);wt===0&&(wt=5)}function Yr(t,s,r){var n=qe,a=js.transition;try{js.transition=null,qe=1,k0(t,s,r,n)}finally{js.transition=a,qe=n}return null}function k0(t,s,r,n){do Hn();while(wr!==null);if(Fe&6)throw Error(K(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(ig(t,l),t===Tt&&(vt=Tt=null,It=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ll||(Ll=!0,cx(si,function(){return Hn(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=js.transition,js.transition=null;var i=qe;qe=1;var c=Fe;Fe|=4,kd.current=null,y0(t,r),ex(r,t),Jg(ac),ni=!!nc,ac=nc=null,t.current=r,N0(r),Yf(),Fe=c,qe=i,js.transition=l}else t.current=r;if(Ll&&(Ll=!1,wr=t,ji=a),l=t.pendingLanes,l===0&&(Mr=null),tg(r.stateNode),es(t,mt()),s!==null)for(n=t.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(bi)throw bi=!1,t=Cc,Cc=null,t;return ji&1&&t.tag!==0&&Hn(),l=t.pendingLanes,l&1?t===Sc?_a++:(_a=0,Sc=t):_a=0,Vr(),null}function Hn(){if(wr!==null){var t=Up(ji),s=js.transition,r=qe;try{if(js.transition=null,qe=16>t?16:t,wr===null)var n=!1;else{if(t=wr,wr=null,ji=0,Fe&6)throw Error(K(331));var a=Fe;for(Fe|=4,ue=t.current;ue!==null;){var l=ue,i=l.child;if(ue.flags&16){var c=l.deletions;if(c!==null){for(var o=0;o<c.length;o++){var m=c[o];for(ue=m;ue!==null;){var j=ue;switch(j.tag){case 0:case 11:case 15:za(8,j,l)}var x=j.child;if(x!==null)x.return=j,ue=x;else for(;ue!==null;){j=ue;var h=j.sibling,u=j.return;if(Kh(j),j===m){ue=null;break}if(h!==null){h.return=u,ue=h;break}ue=u}}}var g=l.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ue=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,ue=i;else e:for(;ue!==null;){if(l=ue,l.flags&2048)switch(l.tag){case 0:case 11:case 15:za(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,ue=f;break e}ue=l.return}}var p=t.current;for(ue=p;ue!==null;){i=ue;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,ue=b;else e:for(i=p;ue!==null;){if(c=ue,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:$i(9,c)}}catch(P){dt(c,c.return,P)}if(c===i){ue=null;break e}var E=c.sibling;if(E!==null){E.return=c.return,ue=E;break e}ue=c.return}}if(Fe=a,Vr(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(Mi,t)}catch{}n=!0}return n}finally{qe=r,js.transition=s}}return!1}function Yu(t,s,r){s=Kn(r,s),s=Uh(t,s,1),t=Ar(t,s,1),s=Wt(),t!==null&&(dl(t,1,s),es(t,s))}function dt(t,s,r){if(t.tag===3)Yu(t,t,r);else for(;s!==null;){if(s.tag===3){Yu(s,t,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Mr===null||!Mr.has(n))){t=Kn(r,t),t=Fh(s,t,1),s=Ar(s,t,1),t=Wt(),s!==null&&(dl(s,1,t),es(s,t));break}}s=s.return}}function P0(t,s,r){var n=t.pingCache;n!==null&&n.delete(s),s=Wt(),t.pingedLanes|=t.suspendedLanes&r,Tt===t&&(It&r)===r&&(wt===4||wt===3&&(It&130023424)===It&&500>mt()-Td?ln(t,0):Pd|=r),es(t,s)}function ix(t,s){s===0&&(t.mode&1?(s=wl,wl<<=1,!(wl&130023424)&&(wl=4194304)):s=1);var r=Wt();t=or(t,s),t!==null&&(dl(t,s,r),es(t,r))}function T0(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),ix(t,r)}function A0(t,s){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(K(314))}n!==null&&n.delete(s),ix(t,r)}var ox;ox=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Yt.current)Kt=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Kt=!1,g0(t,s,r);Kt=!!(t.flags&131072)}else Kt=!1,tt&&s.flags&1048576&&mh(s,ui,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Gl(t,s),t=s.pendingProps;var a=Jn(s,Ut.current);Vn(s,r),a=Nd(null,s,n,t,a,r);var l=wd();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(n)?(l=!0,ci(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,gd(s),a.updater=_i,s.stateNode=a,a._reactInternals=s,hc(s,n,t,r),s=gc(null,s,n,!0,l,r)):(s.tag=0,tt&&l&&dd(s),Vt(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Gl(t,s),t=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=R0(n),t=Ps(n,t),a){case 0:s=fc(null,s,n,t,r);break e;case 1:s=Bu(null,s,n,t,r);break e;case 11:s=Uu(null,s,n,t,r);break e;case 14:s=Fu(null,s,n,Ps(n.type,t),r);break e}throw Error(K(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Ps(n,a),fc(t,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Ps(n,a),Bu(t,s,n,a,r);case 3:e:{if(Wh(s),t===null)throw Error(K(387));n=s.pendingProps,l=s.memoizedState,a=l.element,vh(t,s),hi(s,n,null,r);var i=s.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=Kn(Error(K(423)),s),s=Vu(t,s,n,r,a);break e}else if(n!==a){a=Kn(Error(K(424)),s),s=Vu(t,s,n,r,a);break e}else for(os=Tr(s.stateNode.containerInfo.firstChild),cs=s,tt=!0,Ms=null,r=fh(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gn(),n===a){s=cr(t,s,r);break e}Vt(t,s,n,r)}s=s.child}return s;case 5:return bh(s),t===null&&uc(s),n=s.type,a=s.pendingProps,l=t!==null?t.memoizedProps:null,i=a.children,lc(n,a)?i=null:l!==null&&lc(n,l)&&(s.flags|=32),Hh(t,s),Vt(t,s,i,r),s.child;case 6:return t===null&&uc(s),null;case 13:return qh(t,s,r);case 4:return vd(s,s.stateNode.containerInfo),n=s.pendingProps,t===null?s.child=Qn(s,null,n,r):Vt(t,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Ps(n,a),Uu(t,s,n,a,r);case 7:return Vt(t,s,s.pendingProps,r),s.child;case 8:return Vt(t,s,s.pendingProps.children,r),s.child;case 12:return Vt(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,Xe(mi,n._currentValue),n._currentValue=i,l!==null)if(zs(l.value,i)){if(l.children===a.children&&!Yt.current){s=cr(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var c=l.dependencies;if(c!==null){i=l.child;for(var o=c.firstContext;o!==null;){if(o.context===n){if(l.tag===1){o=rr(-1,r&-r),o.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var j=m.pending;j===null?o.next=o:(o.next=j.next,j.next=o),m.pending=o}}l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),mc(l.return,r,s),c.lanes|=r;break}o=o.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(K(341));i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),mc(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Vt(t,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,Vn(s,r),a=Ns(a),n=n(a),s.flags|=1,Vt(t,s,n,r),s.child;case 14:return n=s.type,a=Ps(n,s.pendingProps),a=Ps(n.type,a),Fu(t,s,n,a,r);case 15:return Bh(t,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Ps(n,a),Gl(t,s),s.tag=1,Zt(n)?(t=!0,ci(s)):t=!1,Vn(s,r),$h(s,n,a),hc(s,n,a,r),gc(null,s,n,!0,t,r);case 19:return Jh(t,s,r);case 22:return Vh(t,s,r)}throw Error(K(156,s.tag))};function cx(t,s){return zp(t,s)}function M0(t,s,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(t,s,r,n){return new M0(t,s,r,n)}function Ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R0(t){if(typeof t=="function")return Ld(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yc)return 11;if(t===Zc)return 14}return 2}function Lr(t,s){var r=t.alternate;return r===null?(r=bs(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Kl(t,s,r,n,a,l){var i=2;if(n=t,typeof t=="function")Ld(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case kn:return on(r.children,a,l,s);case Kc:i=8,a|=8;break;case _o:return t=bs(12,r,s,a|2),t.elementType=_o,t.lanes=l,t;case $o:return t=bs(13,r,s,a),t.elementType=$o,t.lanes=l,t;case Uo:return t=bs(19,r,s,a),t.elementType=Uo,t.lanes=l,t;case bp:return Fi(r,a,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gp:i=10;break e;case vp:i=9;break e;case Yc:i=11;break e;case Zc:i=14;break e;case gr:i=16,n=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return s=bs(i,r,s,a),s.elementType=t,s.type=n,s.lanes=l,s}function on(t,s,r,n){return t=bs(7,t,n,s),t.lanes=r,t}function Fi(t,s,r,n){return t=bs(22,t,n,s),t.elementType=bp,t.lanes=r,t.stateNode={isHidden:!1},t}function Co(t,s,r){return t=bs(6,t,null,s),t.lanes=r,t}function So(t,s,r){return s=bs(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function L0(t,s,r,n,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ao(0),this.expirationTimes=ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ao(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Dd(t,s,r,n,a,l,i,c,o){return t=new L0(t,s,r,c,o),s===1?(s=1,l===!0&&(s|=8)):s=0,l=bs(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},gd(l),t}function D0(t,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sn,key:n==null?null:""+n,children:t,containerInfo:s,implementation:r}}function dx(t){if(!t)return Or;t=t._reactInternals;e:{if(vn(t)!==t||t.tag!==1)throw Error(K(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(K(171))}if(t.tag===1){var r=t.type;if(Zt(r))return dh(t,r,s)}return s}function ux(t,s,r,n,a,l,i,c,o){return t=Dd(r,n,!0,t,a,l,i,c,o),t.context=dx(null),r=t.current,n=Wt(),a=Rr(r),l=rr(n,a),l.callback=s??null,Ar(r,l,a),t.current.lanes=a,dl(t,a,n),es(t,n),t}function Bi(t,s,r,n){var a=s.current,l=Wt(),i=Rr(a);return r=dx(r),s.context===null?s.context=r:s.pendingContext=r,s=rr(l,i),s.payload={element:t},n=n===void 0?null:n,n!==null&&(s.callback=n),t=Ar(a,s,i),t!==null&&(Ds(t,a,i,l),Wl(t,a,i)),i}function Ni(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zu(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Id(t,s){Zu(t,s),(t=t.alternate)&&Zu(t,s)}function I0(){return null}var mx=typeof reportError=="function"?reportError:function(t){console.error(t)};function zd(t){this._internalRoot=t}Vi.prototype.render=zd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(K(409));Bi(t,s,null,null)};Vi.prototype.unmount=zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;hn(function(){Bi(null,t,null,null)}),s[ir]=null}};function Vi(t){this._internalRoot=t}Vi.prototype.unstable_scheduleHydration=function(t){if(t){var s=Vp();t={blockedOn:null,target:t,priority:s};for(var r=0;r<jr.length&&s!==0&&s<jr[r].priority;r++);jr.splice(r,0,t),r===0&&Wp(t)}};function Od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function em(){}function z0(t,s,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var m=Ni(i);l.call(m)}}var i=ux(s,n,t,0,null,!1,!1,"",em);return t._reactRootContainer=i,t[ir]=i.current,Qa(t.nodeType===8?t.parentNode:t),hn(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var m=Ni(o);c.call(m)}}var o=Dd(t,0,!1,null,null,!1,!1,"",em);return t._reactRootContainer=o,t[ir]=o.current,Qa(t.nodeType===8?t.parentNode:t),hn(function(){Bi(s,o,r,n)}),o}function Wi(t,s,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var c=a;a=function(){var o=Ni(i);c.call(o)}}Bi(s,i,t,a)}else i=z0(r,s,t,a,n);return Ni(i)}Fp=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Sa(s.pendingLanes);r!==0&&(sd(s,r|1),es(s,mt()),!(Fe&6)&&(Yn=mt()+500,Vr()))}break;case 13:hn(function(){var n=or(t,1);if(n!==null){var a=Wt();Ds(n,t,1,a)}}),Id(t,1)}};rd=function(t){if(t.tag===13){var s=or(t,134217728);if(s!==null){var r=Wt();Ds(s,t,134217728,r)}Id(t,134217728)}};Bp=function(t){if(t.tag===13){var s=Rr(t),r=or(t,s);if(r!==null){var n=Wt();Ds(r,t,s,n)}Id(t,s)}};Vp=function(){return qe};Hp=function(t,s){var r=qe;try{return qe=t,s()}finally{qe=r}};Xo=function(t,s,r){switch(s){case"input":if(Vo(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==t&&n.form===t.form){var a=Ii(n);if(!a)throw Error(K(90));yp(n),Vo(n,a)}}}break;case"textarea":wp(t,r);break;case"select":s=r.value,s!=null&&$n(t,!!r.multiple,s,!1)}};Ap=Ad;Mp=hn;var O0={usingClientEntryPoint:!1,Events:[ml,Mn,Ii,Pp,Tp,Ad]},va={findFiberByHostInstance:tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_0={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dp(t),t===null?null:t.stateNode},findFiberByHostInstance:va.findFiberByHostInstance||I0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{Mi=Dl.inject(_0),Ws=Dl}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O0;ps.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Od(s))throw Error(K(200));return D0(t,s,null,r)};ps.createRoot=function(t,s){if(!Od(t))throw Error(K(299));var r=!1,n="",a=mx;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Dd(t,1,!1,null,null,r,!1,n,a),t[ir]=s.current,Qa(t.nodeType===8?t.parentNode:t),new zd(s)};ps.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Dp(s),t=t===null?null:t.stateNode,t};ps.flushSync=function(t){return hn(t)};ps.hydrate=function(t,s,r){if(!Hi(s))throw Error(K(200));return Wi(null,t,s,!0,r)};ps.hydrateRoot=function(t,s,r){if(!Od(t))throw Error(K(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=mx;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=ux(s,null,t,1,r??null,a,!1,l,i),t[ir]=s.current,Qa(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new Vi(s)};ps.render=function(t,s,r){if(!Hi(s))throw Error(K(200));return Wi(null,t,s,!1,r)};ps.unmountComponentAtNode=function(t){if(!Hi(t))throw Error(K(40));return t._reactRootContainer?(hn(function(){Wi(null,null,t,!1,function(){t._reactRootContainer=null,t[ir]=null})}),!0):!1};ps.unstable_batchedUpdates=Ad;ps.unstable_renderSubtreeIntoContainer=function(t,s,r,n){if(!Hi(r))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Wi(t,s,r,!1,n)};ps.version="18.3.1-next-f1338f8080-20240426";function px(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(px)}catch(t){console.error(t)}}px(),pp.exports=ps;var _d=pp.exports;const $0=tp(_d),U0=ep({__proto__:null,default:$0},[_d]);var hx,tm=_d;hx=tm.createRoot,tm.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function et(){return et=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},et.apply(this,arguments)}var ft;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ft||(ft={}));const sm="popstate";function F0(t){t===void 0&&(t={});function s(n,a){let{pathname:l,search:i,hash:c}=n.location;return nl("",{pathname:l,search:i,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:fn(a)}return V0(s,r,null,t)}function De(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function xn(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function B0(){return Math.random().toString(36).substr(2,8)}function rm(t,s){return{usr:t.state,key:t.key,idx:s}}function nl(t,s,r,n){return r===void 0&&(r=null),et({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Hr(s):s,{state:r,key:s&&s.key||n||B0()})}function fn(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Hr(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function V0(t,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,i=a.history,c=ft.Pop,o=null,m=j();m==null&&(m=0,i.replaceState(et({},i.state,{idx:m}),""));function j(){return(i.state||{idx:null}).idx}function x(){c=ft.Pop;let y=j(),f=y==null?null:y-m;m=y,o&&o({action:c,location:v.location,delta:f})}function h(y,f){c=ft.Push;let p=nl(v.location,y,f);m=j()+1;let b=rm(p,m),E=v.createHref(p);try{i.pushState(b,"",E)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(E)}l&&o&&o({action:c,location:v.location,delta:1})}function u(y,f){c=ft.Replace;let p=nl(v.location,y,f);m=j();let b=rm(p,m),E=v.createHref(p);i.replaceState(b,"",E),l&&o&&o({action:c,location:v.location,delta:0})}function g(y){let f=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof y=="string"?y:fn(y);return p=p.replace(/ $/,"%20"),De(f,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,f)}let v={get action(){return c},get location(){return t(a,i)},listen(y){if(o)throw new Error("A history only accepts one active listener");return a.addEventListener(sm,x),o=y,()=>{a.removeEventListener(sm,x),o=null}},createHref(y){return s(a,y)},createURL:g,encodeLocation(y){let f=g(y);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:h,replace:u,go(y){return i.go(y)}};return v}var We;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(We||(We={}));const H0=new Set(["lazy","caseSensitive","path","id","index","children"]);function W0(t){return t.index===!0}function wi(t,s,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),t.map((a,l)=>{let i=[...r,String(l)],c=typeof a.id=="string"?a.id:i.join("-");if(De(a.index!==!0||!a.children,"Cannot specify children on an index route"),De(!n[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),W0(a)){let o=et({},a,s(a),{id:c});return n[c]=o,o}else{let o=et({},a,s(a),{id:c,children:void 0});return n[c]=o,a.children&&(o.children=wi(a.children,s,i,n)),o}})}function Zr(t,s,r){return r===void 0&&(r="/"),Yl(t,s,r,!1)}function Yl(t,s,r,n){let a=typeof s=="string"?Hr(s):s,l=aa(a.pathname||"/",r);if(l==null)return null;let i=xx(t);J0(i);let c=null;for(let o=0;c==null&&o<i.length;++o){let m=nv(l);c=sv(i[o],m,n)}return c}function q0(t,s){let{route:r,pathname:n,params:a}=t;return{id:r.id,pathname:n,params:a,data:s[r.id],handle:r.handle}}function xx(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,i,c)=>{let o={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};o.relativePath.startsWith("/")&&(De(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let m=nr([n,o.relativePath]),j=r.concat(o);l.children&&l.children.length>0&&(De(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),xx(l.children,s,j,m)),!(l.path==null&&!l.index)&&s.push({path:m,score:ev(m,l.index),routesMeta:j})};return t.forEach((l,i)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,i);else for(let o of fx(l.path))a(l,i,o)}),s}function fx(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let i=fx(n.join("/")),c=[];return c.push(...i.map(o=>o===""?l:[l,o].join("/"))),a&&c.push(...i),c.map(o=>t.startsWith("/")&&o===""?"/":o)}function J0(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:tv(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const G0=/^:[\w-]+$/,Q0=3,X0=2,K0=1,Y0=10,Z0=-2,nm=t=>t==="*";function ev(t,s){let r=t.split("/"),n=r.length;return r.some(nm)&&(n+=Z0),s&&(n+=X0),r.filter(a=>!nm(a)).reduce((a,l)=>a+(G0.test(l)?Q0:l===""?K0:Y0),n)}function tv(t,s){return t.length===s.length&&t.slice(0,-1).every((n,a)=>n===s[a])?t[t.length-1]-s[s.length-1]:0}function sv(t,s,r){r===void 0&&(r=!1);let{routesMeta:n}=t,a={},l="/",i=[];for(let c=0;c<n.length;++c){let o=n[c],m=c===n.length-1,j=l==="/"?s:s.slice(l.length)||"/",x=am({path:o.relativePath,caseSensitive:o.caseSensitive,end:m},j),h=o.route;if(!x&&m&&r&&!n[n.length-1].route.index&&(x=am({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},j)),!x)return null;Object.assign(a,x.params),i.push({params:a,pathname:nr([l,x.pathname]),pathnameBase:ov(nr([l,x.pathnameBase])),route:h}),x.pathnameBase!=="/"&&(l=nr([l,x.pathnameBase]))}return i}function am(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=rv(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((m,j,x)=>{let{paramName:h,isOptional:u}=j;if(h==="*"){let v=c[x]||"";i=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const g=c[x];return u&&!g?m[h]=void 0:m[h]=(g||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:i,pattern:t}}function rv(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),xn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,o)=>(n.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function nv(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return xn(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function aa(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const av=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lv=t=>av.test(t);function iv(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Hr(t):t,l;if(r)if(lv(r))l=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),xn(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?l=lm(r.substring(1),"/"):l=lm(r,s)}else l=s;return{pathname:l,search:cv(n),hash:dv(a)}}function lm(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function ko(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gx(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function qi(t,s){let r=gx(t);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ji(t,s,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Hr(t):(a=et({},t),De(!a.pathname||!a.pathname.includes("?"),ko("?","pathname","search",a)),De(!a.pathname||!a.pathname.includes("#"),ko("#","pathname","hash",a)),De(!a.search||!a.search.includes("#"),ko("#","search","hash",a)));let l=t===""||a.pathname==="",i=l?"/":a.pathname,c;if(i==null)c=r;else{let x=s.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),x-=1;a.pathname=h.join("/")}c=x>=0?s[x]:"/"}let o=iv(a,c),m=i&&i!=="/"&&i.endsWith("/"),j=(l||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(m||j)&&(o.pathname+="/"),o}const nr=t=>t.join("/").replace(/\/\/+/g,"/"),ov=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Ei{constructor(s,r,n,a){a===void 0&&(a=!1),this.status=s,this.statusText=r||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function al(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vx=["post","put","patch","delete"],uv=new Set(vx),mv=["get",...vx],pv=new Set(mv),hv=new Set([301,302,303,307,308]),xv=new Set([307,308]),Po={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fv={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ba={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},$d=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gv=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),bx="remix-router-transitions";function vv(t){const s=t.window?t.window:typeof window<"u"?window:void 0,r=typeof s<"u"&&typeof s.document<"u"&&typeof s.document.createElement<"u",n=!r;De(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(t.mapRouteProperties)a=t.mapRouteProperties;else if(t.detectErrorBoundary){let C=t.detectErrorBoundary;a=M=>({hasErrorBoundary:C(M)})}else a=gv;let l={},i=wi(t.routes,a,void 0,l),c,o=t.basename||"/",m=t.dataStrategy||Nv,j=t.patchRoutesOnNavigation,x=et({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),h=null,u=new Set,g=null,v=null,y=null,f=t.hydrationData!=null,p=Zr(i,t.history.location,o),b=!1,E=null;if(p==null&&!j){let C=Qt(404,{pathname:t.history.location.pathname}),{matches:M,route:_}=gm(i);p=M,E={[_.id]:C}}p&&!t.hydrationData&&Qs(p,i,t.history.location.pathname).active&&(p=null);let P;if(p)if(p.some(C=>C.route.lazy))P=!1;else if(!p.some(C=>C.route.loader))P=!0;else if(x.v7_partialHydration){let C=t.hydrationData?t.hydrationData.loaderData:null,M=t.hydrationData?t.hydrationData.errors:null;if(M){let _=p.findIndex(G=>M[G.route.id]!==void 0);P=p.slice(0,_+1).every(G=>!Ac(G.route,C,M))}else P=p.every(_=>!Ac(_.route,C,M))}else P=t.hydrationData!=null;else if(P=!1,p=[],x.v7_partialHydration){let C=Qs(null,i,t.history.location.pathname);C.active&&C.matches&&(b=!0,p=C.matches)}let k,w={historyAction:t.history.action,location:t.history.location,matches:p,initialized:P,navigation:Po,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||E,fetchers:new Map,blockers:new Map},R=ft.Pop,I=!1,T,L=!1,J=new Map,Q=null,W=!1,ce=!1,se=[],be=new Set,A=new Map,z=0,S=-1,$=new Map,D=new Set,q=new Map,ie=new Map,me=new Set,Pe=new Map,Ne=new Map,Le;function Y(){if(h=t.history.listen(C=>{let{action:M,location:_,delta:G}=C;if(Le){Le(),Le=void 0;return}xn(Ne.size===0||G!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Z=Ct({currentLocation:w.location,nextLocation:_,historyAction:M});if(Z&&G!=null){let pe=new Promise(ye=>{Le=ye});t.history.go(G*-1),nt(Z,{state:"blocked",location:_,proceed(){nt(Z,{state:"proceeding",proceed:void 0,reset:void 0,location:_}),pe.then(()=>t.history.go(G))},reset(){let ye=new Map(w.blockers);ye.set(Z,ba),re({blockers:ye})}});return}return H(M,_)}),r){zv(s,J);let C=()=>Ov(s,J);s.addEventListener("pagehide",C),Q=()=>s.removeEventListener("pagehide",C)}return w.initialized||H(ft.Pop,w.location,{initialHydration:!0}),k}function ve(){h&&h(),Q&&Q(),u.clear(),T&&T.abort(),w.fetchers.forEach((C,M)=>Mt(M)),w.blockers.forEach((C,M)=>_e(M))}function O(C){return u.add(C),()=>u.delete(C)}function re(C,M){M===void 0&&(M={}),w=et({},w,C);let _=[],G=[];x.v7_fetcherPersist&&w.fetchers.forEach((Z,pe)=>{Z.state==="idle"&&(me.has(pe)?G.push(pe):_.push(pe))}),me.forEach(Z=>{!w.fetchers.has(Z)&&!A.has(Z)&&G.push(Z)}),[...u].forEach(Z=>Z(w,{deletedFetchers:G,viewTransitionOpts:M.viewTransitionOpts,flushSync:M.flushSync===!0})),x.v7_fetcherPersist?(_.forEach(Z=>w.fetchers.delete(Z)),G.forEach(Z=>Mt(Z))):G.forEach(Z=>me.delete(Z))}function ne(C,M,_){var G,Z;let{flushSync:pe}=_===void 0?{}:_,ye=w.actionData!=null&&w.navigation.formMethod!=null&&As(w.navigation.formMethod)&&w.navigation.state==="loading"&&((G=C.state)==null?void 0:G._isRedirect)!==!0,he;M.actionData?Object.keys(M.actionData).length>0?he=M.actionData:he=null:ye?he=w.actionData:he=null;let de=M.loaderData?xm(w.loaderData,M.loaderData,M.matches||[],M.errors):w.loaderData,oe=w.blockers;oe.size>0&&(oe=new Map(oe),oe.forEach(($e,Rt)=>oe.set(Rt,ba)));let ge=I===!0||w.navigation.formMethod!=null&&As(w.navigation.formMethod)&&((Z=C.state)==null?void 0:Z._isRedirect)!==!0;c&&(i=c,c=void 0),W||R===ft.Pop||(R===ft.Push?t.history.push(C,C.state):R===ft.Replace&&t.history.replace(C,C.state));let Ae;if(R===ft.Pop){let $e=J.get(w.location.pathname);$e&&$e.has(C.pathname)?Ae={currentLocation:w.location,nextLocation:C}:J.has(C.pathname)&&(Ae={currentLocation:C,nextLocation:w.location})}else if(L){let $e=J.get(w.location.pathname);$e?$e.add(C.pathname):($e=new Set([C.pathname]),J.set(w.location.pathname,$e)),Ae={currentLocation:w.location,nextLocation:C}}re(et({},M,{actionData:he,loaderData:de,historyAction:R,location:C,initialized:!0,navigation:Po,revalidation:"idle",restoreScrollPosition:pr(C,M.matches||w.matches),preventScrollReset:ge,blockers:oe}),{viewTransitionOpts:Ae,flushSync:pe===!0}),R=ft.Pop,I=!1,L=!1,W=!1,ce=!1,se=[]}async function we(C,M){if(typeof C=="number"){t.history.go(C);return}let _=Tc(w.location,w.matches,o,x.v7_prependBasename,C,x.v7_relativeSplatPath,M==null?void 0:M.fromRouteId,M==null?void 0:M.relative),{path:G,submission:Z,error:pe}=im(x.v7_normalizeFormMethod,!1,_,M),ye=w.location,he=nl(w.location,G,M&&M.state);he=et({},he,t.history.encodeLocation(he));let de=M&&M.replace!=null?M.replace:void 0,oe=ft.Push;de===!0?oe=ft.Replace:de===!1||Z!=null&&As(Z.formMethod)&&Z.formAction===w.location.pathname+w.location.search&&(oe=ft.Replace);let ge=M&&"preventScrollReset"in M?M.preventScrollReset===!0:void 0,Ae=(M&&M.flushSync)===!0,$e=Ct({currentLocation:ye,nextLocation:he,historyAction:oe});if($e){nt($e,{state:"blocked",location:he,proceed(){nt($e,{state:"proceeding",proceed:void 0,reset:void 0,location:he}),we(C,M)},reset(){let Rt=new Map(w.blockers);Rt.set($e,ba),re({blockers:Rt})}});return}return await H(oe,he,{submission:Z,pendingError:pe,preventScrollReset:ge,replace:M&&M.replace,enableViewTransition:M&&M.viewTransition,flushSync:Ae})}function U(){if(Ve(),re({revalidation:"loading"}),w.navigation.state!=="submitting"){if(w.navigation.state==="idle"){H(w.historyAction,w.location,{startUninterruptedRevalidation:!0});return}H(R||w.historyAction,w.navigation.location,{overrideNavigation:w.navigation,enableViewTransition:L===!0})}}async function H(C,M,_){T&&T.abort(),T=null,R=C,W=(_&&_.startUninterruptedRevalidation)===!0,mr(w.location,w.matches),I=(_&&_.preventScrollReset)===!0,L=(_&&_.enableViewTransition)===!0;let G=c||i,Z=_&&_.overrideNavigation,pe=_!=null&&_.initialHydration&&w.matches&&w.matches.length>0&&!b?w.matches:Zr(G,M,o),ye=(_&&_.flushSync)===!0;if(pe&&w.initialized&&!ce&&Pv(w.location,M)&&!(_&&_.submission&&As(_.submission.formMethod))){ne(M,{matches:pe},{flushSync:ye});return}let he=Qs(pe,G,M.pathname);if(he.active&&he.matches&&(pe=he.matches),!pe){let{error:Qe,notFoundMatches:He,route:ot}=xs(M.pathname);ne(M,{matches:He,loaderData:{},errors:{[ot.id]:Qe}},{flushSync:ye});return}T=new AbortController;let de=En(t.history,M,T.signal,_&&_.submission),oe;if(_&&_.pendingError)oe=[en(pe).route.id,{type:We.error,error:_.pendingError}];else if(_&&_.submission&&As(_.submission.formMethod)){let Qe=await ae(de,M,_.submission,pe,he.active,{replace:_.replace,flushSync:ye});if(Qe.shortCircuited)return;if(Qe.pendingActionResult){let[He,ot]=Qe.pendingActionResult;if(is(ot)&&al(ot.error)&&ot.error.status===404){T=null,ne(M,{matches:Qe.matches,loaderData:{},errors:{[He]:ot.error}});return}}pe=Qe.matches||pe,oe=Qe.pendingActionResult,Z=To(M,_.submission),ye=!1,he.active=!1,de=En(t.history,de.url,de.signal)}let{shortCircuited:ge,matches:Ae,loaderData:$e,errors:Rt}=await ke(de,M,pe,he.active,Z,_&&_.submission,_&&_.fetcherSubmission,_&&_.replace,_&&_.initialHydration===!0,ye,oe);ge||(T=null,ne(M,et({matches:Ae||pe},fm(oe),{loaderData:$e,errors:Rt})))}async function ae(C,M,_,G,Z,pe){pe===void 0&&(pe={}),Ve();let ye=Dv(M,_);if(re({navigation:ye},{flushSync:pe.flushSync===!0}),Z){let oe=await N(G,M.pathname,C.signal);if(oe.type==="aborted")return{shortCircuited:!0};if(oe.type==="error"){let ge=en(oe.partialMatches).route.id;return{matches:oe.partialMatches,pendingActionResult:[ge,{type:We.error,error:oe.error}]}}else if(oe.matches)G=oe.matches;else{let{notFoundMatches:ge,error:Ae,route:$e}=xs(M.pathname);return{matches:ge,pendingActionResult:[$e.id,{type:We.error,error:Ae}]}}}let he,de=Pa(G,M);if(!de.route.action&&!de.route.lazy)he={type:We.error,error:Qt(405,{method:C.method,pathname:M.pathname,routeId:de.route.id})};else if(he=(await Se("action",w,C,[de],G,null))[de.route.id],C.signal.aborted)return{shortCircuited:!0};if(nn(he)){let oe;return pe&&pe.replace!=null?oe=pe.replace:oe=mm(he.response.headers.get("Location"),new URL(C.url),o)===w.location.pathname+w.location.search,await je(C,he,!0,{submission:_,replace:oe}),{shortCircuited:!0}}if(Er(he))throw Qt(400,{type:"defer-action"});if(is(he)){let oe=en(G,de.route.id);return(pe&&pe.replace)!==!0&&(R=ft.Push),{matches:G,pendingActionResult:[oe.route.id,he]}}return{matches:G,pendingActionResult:[de.route.id,he]}}async function ke(C,M,_,G,Z,pe,ye,he,de,oe,ge){let Ae=Z||To(M,pe),$e=pe||ye||bm(Ae),Rt=!W&&(!x.v7_partialHydration||!de);if(G){if(Rt){let ct=Te(ge);re(et({navigation:Ae},ct!==void 0?{actionData:ct}:{}),{flushSync:oe})}let Be=await N(_,M.pathname,C.signal);if(Be.type==="aborted")return{shortCircuited:!0};if(Be.type==="error"){let ct=en(Be.partialMatches).route.id;return{matches:Be.partialMatches,loaderData:{},errors:{[ct]:Be.error}}}else if(Be.matches)_=Be.matches;else{let{error:ct,notFoundMatches:yn,route:da}=xs(M.pathname);return{matches:yn,loaderData:{},errors:{[da.id]:ct}}}}let Qe=c||i,[He,ot]=cm(t.history,w,_,$e,M,x.v7_partialHydration&&de===!0,x.v7_skipActionErrorRevalidation,ce,se,be,me,q,D,Qe,o,ge);if(Bt(Be=>!(_&&_.some(ct=>ct.route.id===Be))||He&&He.some(ct=>ct.route.id===Be)),S=++z,He.length===0&&ot.length===0){let Be=xe();return ne(M,et({matches:_,loaderData:{},errors:ge&&is(ge[1])?{[ge[0]]:ge[1].error}:null},fm(ge),Be?{fetchers:new Map(w.fetchers)}:{}),{flushSync:oe}),{shortCircuited:!0}}if(Rt){let Be={};if(!G){Be.navigation=Ae;let ct=Te(ge);ct!==void 0&&(Be.actionData=ct)}ot.length>0&&(Be.fetchers=Me(ot)),re(Be,{flushSync:oe})}ot.forEach(Be=>{Ce(Be.key),Be.controller&&A.set(Be.key,Be.controller)});let jn=()=>ot.forEach(Be=>Ce(Be.key));T&&T.signal.addEventListener("abort",jn);let{loaderResults:oa,fetcherResults:Xs}=await Re(w,_,He,ot,C);if(C.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",jn),ot.forEach(Be=>A.delete(Be.key));let Us=Il(oa);if(Us)return await je(C,Us.result,!0,{replace:he}),{shortCircuited:!0};if(Us=Il(Xs),Us)return D.add(Us.key),await je(C,Us.result,!0,{replace:he}),{shortCircuited:!0};let{loaderData:Zi,errors:ca}=hm(w,_,oa,ge,ot,Xs,Pe);Pe.forEach((Be,ct)=>{Be.subscribe(yn=>{(yn||Be.done)&&Pe.delete(ct)})}),x.v7_partialHydration&&de&&w.errors&&(ca=et({},w.errors,ca));let Gr=xe(),fl=fe(S),gl=Gr||fl||ot.length>0;return et({matches:_,loaderData:Zi,errors:ca},gl?{fetchers:new Map(w.fetchers)}:{})}function Te(C){if(C&&!is(C[1]))return{[C[0]]:C[1].data};if(w.actionData)return Object.keys(w.actionData).length===0?null:w.actionData}function Me(C){return C.forEach(M=>{let _=w.fetchers.get(M.key),G=ja(void 0,_?_.data:void 0);w.fetchers.set(M.key,G)}),new Map(w.fetchers)}function pt(C,M,_,G){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ce(C);let Z=(G&&G.flushSync)===!0,pe=c||i,ye=Tc(w.location,w.matches,o,x.v7_prependBasename,_,x.v7_relativeSplatPath,M,G==null?void 0:G.relative),he=Zr(pe,ye,o),de=Qs(he,pe,ye);if(de.active&&de.matches&&(he=de.matches),!he){yt(C,M,Qt(404,{pathname:ye}),{flushSync:Z});return}let{path:oe,submission:ge,error:Ae}=im(x.v7_normalizeFormMethod,!0,ye,G);if(Ae){yt(C,M,Ae,{flushSync:Z});return}let $e=Pa(he,oe),Rt=(G&&G.preventScrollReset)===!0;if(ge&&As(ge.formMethod)){At(C,M,oe,$e,he,de.active,Z,Rt,ge);return}q.set(C,{routeId:M,path:oe}),V(C,M,oe,$e,he,de.active,Z,Rt,ge)}async function At(C,M,_,G,Z,pe,ye,he,de){Ve(),q.delete(C);function oe(ht){if(!ht.route.action&&!ht.route.lazy){let Nn=Qt(405,{method:de.formMethod,pathname:_,routeId:M});return yt(C,M,Nn,{flushSync:ye}),!0}return!1}if(!pe&&oe(G))return;let ge=w.fetchers.get(C);rt(C,Iv(de,ge),{flushSync:ye});let Ae=new AbortController,$e=En(t.history,_,Ae.signal,de);if(pe){let ht=await N(Z,new URL($e.url).pathname,$e.signal,C);if(ht.type==="aborted")return;if(ht.type==="error"){yt(C,M,ht.error,{flushSync:ye});return}else if(ht.matches){if(Z=ht.matches,G=Pa(Z,_),oe(G))return}else{yt(C,M,Qt(404,{pathname:_}),{flushSync:ye});return}}A.set(C,Ae);let Rt=z,He=(await Se("action",w,$e,[G],Z,C))[G.route.id];if($e.signal.aborted){A.get(C)===Ae&&A.delete(C);return}if(x.v7_fetcherPersist&&me.has(C)){if(nn(He)||is(He)){rt(C,fr(void 0));return}}else{if(nn(He))if(A.delete(C),S>Rt){rt(C,fr(void 0));return}else return D.add(C),rt(C,ja(de)),je($e,He,!1,{fetcherSubmission:de,preventScrollReset:he});if(is(He)){yt(C,M,He.error);return}}if(Er(He))throw Qt(400,{type:"defer-action"});let ot=w.navigation.location||w.location,jn=En(t.history,ot,Ae.signal),oa=c||i,Xs=w.navigation.state!=="idle"?Zr(oa,w.navigation.location,o):w.matches;De(Xs,"Didn't find any matches after fetcher action");let Us=++z;$.set(C,Us);let Zi=ja(de,He.data);w.fetchers.set(C,Zi);let[ca,Gr]=cm(t.history,w,Xs,de,ot,!1,x.v7_skipActionErrorRevalidation,ce,se,be,me,q,D,oa,o,[G.route.id,He]);Gr.filter(ht=>ht.key!==C).forEach(ht=>{let Nn=ht.key,qd=w.fetchers.get(Nn),df=ja(void 0,qd?qd.data:void 0);w.fetchers.set(Nn,df),Ce(Nn),ht.controller&&A.set(Nn,ht.controller)}),re({fetchers:new Map(w.fetchers)});let fl=()=>Gr.forEach(ht=>Ce(ht.key));Ae.signal.addEventListener("abort",fl);let{loaderResults:gl,fetcherResults:Be}=await Re(w,Xs,ca,Gr,jn);if(Ae.signal.aborted)return;Ae.signal.removeEventListener("abort",fl),$.delete(C),A.delete(C),Gr.forEach(ht=>A.delete(ht.key));let ct=Il(gl);if(ct)return je(jn,ct.result,!1,{preventScrollReset:he});if(ct=Il(Be),ct)return D.add(ct.key),je(jn,ct.result,!1,{preventScrollReset:he});let{loaderData:yn,errors:da}=hm(w,Xs,gl,void 0,Gr,Be,Pe);if(w.fetchers.has(C)){let ht=fr(He.data);w.fetchers.set(C,ht)}fe(Us),w.navigation.state==="loading"&&Us>S?(De(R,"Expected pending action"),T&&T.abort(),ne(w.navigation.location,{matches:Xs,loaderData:yn,errors:da,fetchers:new Map(w.fetchers)})):(re({errors:da,loaderData:xm(w.loaderData,yn,Xs,da),fetchers:new Map(w.fetchers)}),ce=!1)}async function V(C,M,_,G,Z,pe,ye,he,de){let oe=w.fetchers.get(C);rt(C,ja(de,oe?oe.data:void 0),{flushSync:ye});let ge=new AbortController,Ae=En(t.history,_,ge.signal);if(pe){let He=await N(Z,new URL(Ae.url).pathname,Ae.signal,C);if(He.type==="aborted")return;if(He.type==="error"){yt(C,M,He.error,{flushSync:ye});return}else if(He.matches)Z=He.matches,G=Pa(Z,_);else{yt(C,M,Qt(404,{pathname:_}),{flushSync:ye});return}}A.set(C,ge);let $e=z,Qe=(await Se("loader",w,Ae,[G],Z,C))[G.route.id];if(Er(Qe)&&(Qe=await Ud(Qe,Ae.signal,!0)||Qe),A.get(C)===ge&&A.delete(C),!Ae.signal.aborted){if(me.has(C)){rt(C,fr(void 0));return}if(nn(Qe))if(S>$e){rt(C,fr(void 0));return}else{D.add(C),await je(Ae,Qe,!1,{preventScrollReset:he});return}if(is(Qe)){yt(C,M,Qe.error);return}De(!Er(Qe),"Unhandled fetcher deferred data"),rt(C,fr(Qe.data))}}async function je(C,M,_,G){let{submission:Z,fetcherSubmission:pe,preventScrollReset:ye,replace:he}=G===void 0?{}:G;M.response.headers.has("X-Remix-Revalidate")&&(ce=!0);let de=M.response.headers.get("Location");De(de,"Expected a Location header on the redirect Response"),de=mm(de,new URL(C.url),o);let oe=nl(w.location,de,{_isRedirect:!0});if(r){let He=!1;if(M.response.headers.has("X-Remix-Reload-Document"))He=!0;else if($d.test(de)){const ot=t.history.createURL(de);He=ot.origin!==s.location.origin||aa(ot.pathname,o)==null}if(He){he?s.location.replace(de):s.location.assign(de);return}}T=null;let ge=he===!0||M.response.headers.has("X-Remix-Replace")?ft.Replace:ft.Push,{formMethod:Ae,formAction:$e,formEncType:Rt}=w.navigation;!Z&&!pe&&Ae&&$e&&Rt&&(Z=bm(w.navigation));let Qe=Z||pe;if(xv.has(M.response.status)&&Qe&&As(Qe.formMethod))await H(ge,oe,{submission:et({},Qe,{formAction:de}),preventScrollReset:ye||I,enableViewTransition:_?L:void 0});else{let He=To(oe,Z);await H(ge,oe,{overrideNavigation:He,fetcherSubmission:pe,preventScrollReset:ye||I,enableViewTransition:_?L:void 0})}}async function Se(C,M,_,G,Z,pe){let ye,he={};try{ye=await wv(m,C,M,_,G,Z,pe,l,a)}catch(de){return G.forEach(oe=>{he[oe.route.id]={type:We.error,error:de}}),he}for(let[de,oe]of Object.entries(ye))if(Tv(oe)){let ge=oe.result;he[de]={type:We.redirect,response:Sv(ge,_,de,Z,o,x.v7_relativeSplatPath)}}else he[de]=await Cv(oe);return he}async function Re(C,M,_,G,Z){let pe=C.matches,ye=Se("loader",C,Z,_,M,null),he=Promise.all(G.map(async ge=>{if(ge.matches&&ge.match&&ge.controller){let $e=(await Se("loader",C,En(t.history,ge.path,ge.controller.signal),[ge.match],ge.matches,ge.key))[ge.match.route.id];return{[ge.key]:$e}}else return Promise.resolve({[ge.key]:{type:We.error,error:Qt(404,{pathname:ge.path})}})})),de=await ye,oe=(await he).reduce((ge,Ae)=>Object.assign(ge,Ae),{});return await Promise.all([Rv(M,de,Z.signal,pe,C.loaderData),Lv(M,oe,G)]),{loaderResults:de,fetcherResults:oe}}function Ve(){ce=!0,se.push(...Bt()),q.forEach((C,M)=>{A.has(M)&&be.add(M),Ce(M)})}function rt(C,M,_){_===void 0&&(_={}),w.fetchers.set(C,M),re({fetchers:new Map(w.fetchers)},{flushSync:(_&&_.flushSync)===!0})}function yt(C,M,_,G){G===void 0&&(G={});let Z=en(w.matches,M);Mt(C),re({errors:{[Z.route.id]:_},fetchers:new Map(w.fetchers)},{flushSync:(G&&G.flushSync)===!0})}function rs(C){return ie.set(C,(ie.get(C)||0)+1),me.has(C)&&me.delete(C),w.fetchers.get(C)||fv}function Mt(C){let M=w.fetchers.get(C);A.has(C)&&!(M&&M.state==="loading"&&$.has(C))&&Ce(C),q.delete(C),$.delete(C),D.delete(C),x.v7_fetcherPersist&&me.delete(C),be.delete(C),w.fetchers.delete(C)}function F(C){let M=(ie.get(C)||0)-1;M<=0?(ie.delete(C),me.add(C),x.v7_fetcherPersist||Mt(C)):ie.set(C,M),re({fetchers:new Map(w.fetchers)})}function Ce(C){let M=A.get(C);M&&(M.abort(),A.delete(C))}function X(C){for(let M of C){let _=rs(M),G=fr(_.data);w.fetchers.set(M,G)}}function xe(){let C=[],M=!1;for(let _ of D){let G=w.fetchers.get(_);De(G,"Expected fetcher: "+_),G.state==="loading"&&(D.delete(_),C.push(_),M=!0)}return X(C),M}function fe(C){let M=[];for(let[_,G]of $)if(G<C){let Z=w.fetchers.get(_);De(Z,"Expected fetcher: "+_),Z.state==="loading"&&(Ce(_),$.delete(_),M.push(_))}return X(M),M.length>0}function Oe(C,M){let _=w.blockers.get(C)||ba;return Ne.get(C)!==M&&Ne.set(C,M),_}function _e(C){w.blockers.delete(C),Ne.delete(C)}function nt(C,M){let _=w.blockers.get(C)||ba;De(_.state==="unblocked"&&M.state==="blocked"||_.state==="blocked"&&M.state==="blocked"||_.state==="blocked"&&M.state==="proceeding"||_.state==="blocked"&&M.state==="unblocked"||_.state==="proceeding"&&M.state==="unblocked","Invalid blocker state transition: "+_.state+" -> "+M.state);let G=new Map(w.blockers);G.set(C,M),re({blockers:G})}function Ct(C){let{currentLocation:M,nextLocation:_,historyAction:G}=C;if(Ne.size===0)return;Ne.size>1&&xn(!1,"A router only supports one blocker at a time");let Z=Array.from(Ne.entries()),[pe,ye]=Z[Z.length-1],he=w.blockers.get(pe);if(!(he&&he.state==="proceeding")&&ye({currentLocation:M,nextLocation:_,historyAction:G}))return pe}function xs(C){let M=Qt(404,{pathname:C}),_=c||i,{matches:G,route:Z}=gm(_);return Bt(),{notFoundMatches:G,route:Z,error:M}}function Bt(C){let M=[];return Pe.forEach((_,G)=>{(!C||C(G))&&(_.cancel(),M.push(G),Pe.delete(G))}),M}function ns(C,M,_){if(g=C,y=M,v=_||null,!f&&w.navigation===Po){f=!0;let G=pr(w.location,w.matches);G!=null&&re({restoreScrollPosition:G})}return()=>{g=null,y=null,v=null}}function ur(C,M){return v&&v(C,M.map(G=>q0(G,w.loaderData)))||C.key}function mr(C,M){if(g&&y){let _=ur(C,M);g[_]=y()}}function pr(C,M){if(g){let _=ur(C,M),G=g[_];if(typeof G=="number")return G}return null}function Qs(C,M,_){if(j)if(C){if(Object.keys(C[0].params).length>0)return{active:!0,matches:Yl(M,_,o,!0)}}else return{active:!0,matches:Yl(M,_,o,!0)||[]};return{active:!1,matches:null}}async function N(C,M,_,G){if(!j)return{type:"success",matches:C};let Z=C;for(;;){let pe=c==null,ye=c||i,he=l;try{await j({signal:_,path:M,matches:Z,fetcherKey:G,patch:(ge,Ae)=>{_.aborted||um(ge,Ae,ye,he,a)}})}catch(ge){return{type:"error",error:ge,partialMatches:Z}}finally{pe&&!_.aborted&&(i=[...i])}if(_.aborted)return{type:"aborted"};let de=Zr(ye,M,o);if(de)return{type:"success",matches:de};let oe=Yl(ye,M,o,!0);if(!oe||Z.length===oe.length&&Z.every((ge,Ae)=>ge.route.id===oe[Ae].route.id))return{type:"success",matches:null};Z=oe}}function B(C){l={},c=wi(C,a,void 0,l)}function te(C,M){let _=c==null;um(C,M,c||i,l,a),_&&(i=[...i],re({}))}return k={get basename(){return o},get future(){return x},get state(){return w},get routes(){return i},get window(){return s},initialize:Y,subscribe:O,enableScrollRestoration:ns,navigate:we,fetch:pt,revalidate:U,createHref:C=>t.history.createHref(C),encodeLocation:C=>t.history.encodeLocation(C),getFetcher:rs,deleteFetcher:F,dispose:ve,getBlocker:Oe,deleteBlocker:_e,patchRoutes:te,_internalFetchControllers:A,_internalActiveDeferreds:Pe,_internalSetRoutes:B},k}function bv(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Tc(t,s,r,n,a,l,i,c){let o,m;if(i){o=[];for(let x of s)if(o.push(x),x.route.id===i){m=x;break}}else o=s,m=s[s.length-1];let j=Ji(a||".",qi(o,l),aa(t.pathname,r)||t.pathname,c==="path");if(a==null&&(j.search=t.search,j.hash=t.hash),(a==null||a===""||a===".")&&m){let x=Fd(j.search);if(m.route.index&&!x)j.search=j.search?j.search.replace(/^\?/,"?index&"):"?index";else if(!m.route.index&&x){let h=new URLSearchParams(j.search),u=h.getAll("index");h.delete("index"),u.filter(v=>v).forEach(v=>h.append("index",v));let g=h.toString();j.search=g?"?"+g:""}}return n&&r!=="/"&&(j.pathname=j.pathname==="/"?r:nr([r,j.pathname])),fn(j)}function im(t,s,r,n){if(!n||!bv(n))return{path:r};if(n.formMethod&&!Mv(n.formMethod))return{path:r,error:Qt(405,{method:n.formMethod})};let a=()=>({path:r,error:Qt(400,{type:"invalid-body"})}),l=n.formMethod||"get",i=t?l.toUpperCase():l.toLowerCase(),c=Nx(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!As(i))return a();let h=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((u,g)=>{let[v,y]=g;return""+u+v+"="+y+`
`},""):String(n.body);return{path:r,submission:{formMethod:i,formAction:c,formEncType:n.formEncType,formData:void 0,json:void 0,text:h}}}else if(n.formEncType==="application/json"){if(!As(i))return a();try{let h=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:i,formAction:c,formEncType:n.formEncType,formData:void 0,json:h,text:void 0}}}catch{return a()}}}De(typeof FormData=="function","FormData is not available in this environment");let o,m;if(n.formData)o=Mc(n.formData),m=n.formData;else if(n.body instanceof FormData)o=Mc(n.body),m=n.body;else if(n.body instanceof URLSearchParams)o=n.body,m=pm(o);else if(n.body==null)o=new URLSearchParams,m=new FormData;else try{o=new URLSearchParams(n.body),m=pm(o)}catch{return a()}let j={formMethod:i,formAction:c,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(As(j.formMethod))return{path:r,submission:j};let x=Hr(r);return s&&x.search&&Fd(x.search)&&o.append("index",""),x.search="?"+o,{path:fn(x),submission:j}}function om(t,s,r){r===void 0&&(r=!1);let n=t.findIndex(a=>a.route.id===s);return n>=0?t.slice(0,r?n+1:n):t}function cm(t,s,r,n,a,l,i,c,o,m,j,x,h,u,g,v){let y=v?is(v[1])?v[1].error:v[1].data:void 0,f=t.createURL(s.location),p=t.createURL(a),b=r;l&&s.errors?b=om(r,Object.keys(s.errors)[0],!0):v&&is(v[1])&&(b=om(r,v[0]));let E=v?v[1].statusCode:void 0,P=i&&E&&E>=400,k=b.filter((R,I)=>{let{route:T}=R;if(T.lazy)return!0;if(T.loader==null)return!1;if(l)return Ac(T,s.loaderData,s.errors);if(jv(s.loaderData,s.matches[I],R)||o.some(Q=>Q===R.route.id))return!0;let L=s.matches[I],J=R;return dm(R,et({currentUrl:f,currentParams:L.params,nextUrl:p,nextParams:J.params},n,{actionResult:y,actionStatus:E,defaultShouldRevalidate:P?!1:c||f.pathname+f.search===p.pathname+p.search||f.search!==p.search||jx(L,J)}))}),w=[];return x.forEach((R,I)=>{if(l||!r.some(W=>W.route.id===R.routeId)||j.has(I))return;let T=Zr(u,R.path,g);if(!T){w.push({key:I,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let L=s.fetchers.get(I),J=Pa(T,R.path),Q=!1;h.has(I)?Q=!1:m.has(I)?(m.delete(I),Q=!0):L&&L.state!=="idle"&&L.data===void 0?Q=c:Q=dm(J,et({currentUrl:f,currentParams:s.matches[s.matches.length-1].params,nextUrl:p,nextParams:r[r.length-1].params},n,{actionResult:y,actionStatus:E,defaultShouldRevalidate:P?!1:c})),Q&&w.push({key:I,routeId:R.routeId,path:R.path,matches:T,match:J,controller:new AbortController})}),[k,w]}function Ac(t,s,r){if(t.lazy)return!0;if(!t.loader)return!1;let n=s!=null&&s[t.id]!==void 0,a=r!=null&&r[t.id]!==void 0;return!n&&a?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!a}function jv(t,s,r){let n=!s||r.route.id!==s.route.id,a=t[r.route.id]===void 0;return n||a}function jx(t,s){let r=t.route.path;return t.pathname!==s.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==s.params["*"]}function dm(t,s){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(s);if(typeof r=="boolean")return r}return s.defaultShouldRevalidate}function um(t,s,r,n,a){var l;let i;if(t){let m=n[t];De(m,"No route found to patch children into: routeId = "+t),m.children||(m.children=[]),i=m.children}else i=r;let c=s.filter(m=>!i.some(j=>yx(m,j))),o=wi(c,a,[t||"_","patch",String(((l=i)==null?void 0:l.length)||"0")],n);i.push(...o)}function yx(t,s){return"id"in t&&"id"in s&&t.id===s.id?!0:t.index===s.index&&t.path===s.path&&t.caseSensitive===s.caseSensitive?(!t.children||t.children.length===0)&&(!s.children||s.children.length===0)?!0:t.children.every((r,n)=>{var a;return(a=s.children)==null?void 0:a.some(l=>yx(r,l))}):!1}async function yv(t,s,r){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let a=r[t.id];De(a,"No route found in manifest");let l={};for(let i in n){let o=a[i]!==void 0&&i!=="hasErrorBoundary";xn(!o,'Route "'+a.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+i+'" will be ignored.')),!o&&!H0.has(i)&&(l[i]=n[i])}Object.assign(a,l),Object.assign(a,et({},s(a),{lazy:void 0}))}async function Nv(t){let{matches:s}=t,r=s.filter(a=>a.shouldLoad);return(await Promise.all(r.map(a=>a.resolve()))).reduce((a,l,i)=>Object.assign(a,{[r[i].route.id]:l}),{})}async function wv(t,s,r,n,a,l,i,c,o,m){let j=l.map(u=>u.route.lazy?yv(u.route,o,c):void 0),x=l.map((u,g)=>{let v=j[g],y=a.some(p=>p.route.id===u.route.id);return et({},u,{shouldLoad:y,resolve:async p=>(p&&n.method==="GET"&&(u.route.lazy||u.route.loader)&&(y=!0),y?Ev(s,n,u,v,p,m):Promise.resolve({type:We.data,result:void 0}))})}),h=await t({matches:x,request:n,params:l[0].params,fetcherKey:i,context:m});try{await Promise.all(j)}catch{}return h}async function Ev(t,s,r,n,a,l){let i,c,o=m=>{let j,x=new Promise((g,v)=>j=v);c=()=>j(),s.signal.addEventListener("abort",c);let h=g=>typeof m!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+r.route.id+"]"))):m({request:s,params:r.params,context:l},...g!==void 0?[g]:[]),u=(async()=>{try{return{type:"data",result:await(a?a(v=>h(v)):h())}}catch(g){return{type:"error",result:g}}})();return Promise.race([u,x])};try{let m=r.route[t];if(n)if(m){let j,[x]=await Promise.all([o(m).catch(h=>{j=h}),n]);if(j!==void 0)throw j;i=x}else if(await n,m=r.route[t],m)i=await o(m);else if(t==="action"){let j=new URL(s.url),x=j.pathname+j.search;throw Qt(405,{method:s.method,pathname:x,routeId:r.route.id})}else return{type:We.data,result:void 0};else if(m)i=await o(m);else{let j=new URL(s.url),x=j.pathname+j.search;throw Qt(404,{pathname:x})}De(i.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(m){return{type:We.error,result:m}}finally{c&&s.signal.removeEventListener("abort",c)}return i}async function Cv(t){let{result:s,type:r}=t;if(wx(s)){let x;try{let h=s.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?s.body==null?x=null:x=await s.json():x=await s.text()}catch(h){return{type:We.error,error:h}}return r===We.error?{type:We.error,error:new Ei(s.status,s.statusText,x),statusCode:s.status,headers:s.headers}:{type:We.data,data:x,statusCode:s.status,headers:s.headers}}if(r===We.error){if(vm(s)){var n,a;if(s.data instanceof Error){var l,i;return{type:We.error,error:s.data,statusCode:(l=s.init)==null?void 0:l.status,headers:(i=s.init)!=null&&i.headers?new Headers(s.init.headers):void 0}}return{type:We.error,error:new Ei(((n=s.init)==null?void 0:n.status)||500,void 0,s.data),statusCode:al(s)?s.status:void 0,headers:(a=s.init)!=null&&a.headers?new Headers(s.init.headers):void 0}}return{type:We.error,error:s,statusCode:al(s)?s.status:void 0}}if(Av(s)){var c,o;return{type:We.deferred,deferredData:s,statusCode:(c=s.init)==null?void 0:c.status,headers:((o=s.init)==null?void 0:o.headers)&&new Headers(s.init.headers)}}if(vm(s)){var m,j;return{type:We.data,data:s.data,statusCode:(m=s.init)==null?void 0:m.status,headers:(j=s.init)!=null&&j.headers?new Headers(s.init.headers):void 0}}return{type:We.data,data:s}}function Sv(t,s,r,n,a,l){let i=t.headers.get("Location");if(De(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!$d.test(i)){let c=n.slice(0,n.findIndex(o=>o.route.id===r)+1);i=Tc(new URL(s.url),c,a,!0,i,l),t.headers.set("Location",i)}return t}function mm(t,s,r){if($d.test(t)){let n=t,a=n.startsWith("//")?new URL(s.protocol+n):new URL(n),l=aa(a.pathname,r)!=null;if(a.origin===s.origin&&l)return a.pathname+a.search+a.hash}return t}function En(t,s,r,n){let a=t.createURL(Nx(s)).toString(),l={signal:r};if(n&&As(n.formMethod)){let{formMethod:i,formEncType:c}=n;l.method=i.toUpperCase(),c==="application/json"?(l.headers=new Headers({"Content-Type":c}),l.body=JSON.stringify(n.json)):c==="text/plain"?l.body=n.text:c==="application/x-www-form-urlencoded"&&n.formData?l.body=Mc(n.formData):l.body=n.formData}return new Request(a,l)}function Mc(t){let s=new URLSearchParams;for(let[r,n]of t.entries())s.append(r,typeof n=="string"?n:n.name);return s}function pm(t){let s=new FormData;for(let[r,n]of t.entries())s.append(r,n);return s}function kv(t,s,r,n,a){let l={},i=null,c,o=!1,m={},j=r&&is(r[1])?r[1].error:void 0;return t.forEach(x=>{if(!(x.route.id in s))return;let h=x.route.id,u=s[h];if(De(!nn(u),"Cannot handle redirect results in processLoaderData"),is(u)){let g=u.error;j!==void 0&&(g=j,j=void 0),i=i||{};{let v=en(t,h);i[v.route.id]==null&&(i[v.route.id]=g)}l[h]=void 0,o||(o=!0,c=al(u.error)?u.error.status:500),u.headers&&(m[h]=u.headers)}else Er(u)?(n.set(h,u.deferredData),l[h]=u.deferredData.data,u.statusCode!=null&&u.statusCode!==200&&!o&&(c=u.statusCode),u.headers&&(m[h]=u.headers)):(l[h]=u.data,u.statusCode&&u.statusCode!==200&&!o&&(c=u.statusCode),u.headers&&(m[h]=u.headers))}),j!==void 0&&r&&(i={[r[0]]:j},l[r[0]]=void 0),{loaderData:l,errors:i,statusCode:c||200,loaderHeaders:m}}function hm(t,s,r,n,a,l,i){let{loaderData:c,errors:o}=kv(s,r,n,i);return a.forEach(m=>{let{key:j,match:x,controller:h}=m,u=l[j];if(De(u,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(is(u)){let g=en(t.matches,x==null?void 0:x.route.id);o&&o[g.route.id]||(o=et({},o,{[g.route.id]:u.error})),t.fetchers.delete(j)}else if(nn(u))De(!1,"Unhandled fetcher revalidation redirect");else if(Er(u))De(!1,"Unhandled fetcher deferred data");else{let g=fr(u.data);t.fetchers.set(j,g)}}),{loaderData:c,errors:o}}function xm(t,s,r,n){let a=et({},s);for(let l of r){let i=l.route.id;if(s.hasOwnProperty(i)?s[i]!==void 0&&(a[i]=s[i]):t[i]!==void 0&&l.route.loader&&(a[i]=t[i]),n&&n.hasOwnProperty(i))break}return a}function fm(t){return t?is(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function en(t,s){return(s?t.slice(0,t.findIndex(n=>n.route.id===s)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function gm(t){let s=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:s}],route:s}}function Qt(t,s){let{pathname:r,routeId:n,method:a,type:l,message:i}=s===void 0?{}:s,c="Unknown Server Error",o="Unknown @remix-run/router error";return t===400?(c="Bad Request",a&&r&&n?o="You made a "+a+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":l==="defer-action"?o="defer() is not supported in actions":l==="invalid-body"&&(o="Unable to encode submission body")):t===403?(c="Forbidden",o='Route "'+n+'" does not match URL "'+r+'"'):t===404?(c="Not Found",o='No route matches URL "'+r+'"'):t===405&&(c="Method Not Allowed",a&&r&&n?o="You made a "+a.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":a&&(o='Invalid request method "'+a.toUpperCase()+'"')),new Ei(t||500,c,new Error(o),!0)}function Il(t){let s=Object.entries(t);for(let r=s.length-1;r>=0;r--){let[n,a]=s[r];if(nn(a))return{key:n,result:a}}}function Nx(t){let s=typeof t=="string"?Hr(t):t;return fn(et({},s,{hash:""}))}function Pv(t,s){return t.pathname!==s.pathname||t.search!==s.search?!1:t.hash===""?s.hash!=="":t.hash===s.hash?!0:s.hash!==""}function Tv(t){return wx(t.result)&&hv.has(t.result.status)}function Er(t){return t.type===We.deferred}function is(t){return t.type===We.error}function nn(t){return(t&&t.type)===We.redirect}function vm(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Av(t){let s=t;return s&&typeof s=="object"&&typeof s.data=="object"&&typeof s.subscribe=="function"&&typeof s.cancel=="function"&&typeof s.resolveData=="function"}function wx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Mv(t){return pv.has(t.toLowerCase())}function As(t){return uv.has(t.toLowerCase())}async function Rv(t,s,r,n,a){let l=Object.entries(s);for(let i=0;i<l.length;i++){let[c,o]=l[i],m=t.find(h=>(h==null?void 0:h.route.id)===c);if(!m)continue;let j=n.find(h=>h.route.id===m.route.id),x=j!=null&&!jx(j,m)&&(a&&a[m.route.id])!==void 0;Er(o)&&x&&await Ud(o,r,!1).then(h=>{h&&(s[c]=h)})}}async function Lv(t,s,r){for(let n=0;n<r.length;n++){let{key:a,routeId:l,controller:i}=r[n],c=s[a];t.find(m=>(m==null?void 0:m.route.id)===l)&&Er(c)&&(De(i,"Expected an AbortController for revalidating fetcher deferred result"),await Ud(c,i.signal,!0).then(m=>{m&&(s[a]=m)}))}}async function Ud(t,s,r){if(r===void 0&&(r=!1),!await t.deferredData.resolveData(s)){if(r)try{return{type:We.data,data:t.deferredData.unwrappedData}}catch(a){return{type:We.error,error:a}}return{type:We.data,data:t.deferredData.data}}}function Fd(t){return new URLSearchParams(t).getAll("index").some(s=>s==="")}function Pa(t,s){let r=typeof s=="string"?Hr(s).search:s.search;if(t[t.length-1].route.index&&Fd(r||""))return t[t.length-1];let n=gx(t);return n[n.length-1]}function bm(t){let{formMethod:s,formAction:r,formEncType:n,text:a,formData:l,json:i}=t;if(!(!s||!r||!n)){if(a!=null)return{formMethod:s,formAction:r,formEncType:n,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:s,formAction:r,formEncType:n,formData:l,json:void 0,text:void 0};if(i!==void 0)return{formMethod:s,formAction:r,formEncType:n,formData:void 0,json:i,text:void 0}}}function To(t,s){return s?{state:"loading",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Dv(t,s){return{state:"submitting",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}}function ja(t,s){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function Iv(t,s){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s?s.data:void 0}}function fr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function zv(t,s){try{let r=t.sessionStorage.getItem(bx);if(r){let n=JSON.parse(r);for(let[a,l]of Object.entries(n||{}))l&&Array.isArray(l)&&s.set(a,new Set(l||[]))}}catch{}}function Ov(t,s){if(s.size>0){let r={};for(let[n,a]of s)r[n]=[...a];try{t.sessionStorage.setItem(bx,JSON.stringify(r))}catch(n){xn(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ci(){return Ci=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ci.apply(this,arguments)}const Gi=d.createContext(null),Ex=d.createContext(null),Wr=d.createContext(null),Bd=d.createContext(null),Gs=d.createContext({outlet:null,matches:[],isDataRoute:!1}),Cx=d.createContext(null);function _v(t,s){let{relative:r}=s===void 0?{}:s;la()||De(!1);let{basename:n,navigator:a}=d.useContext(Wr),{hash:l,pathname:i,search:c}=kx(t,{relative:r}),o=i;return n!=="/"&&(o=i==="/"?n:nr([n,i])),a.createHref({pathname:o,search:c,hash:l})}function la(){return d.useContext(Bd)!=null}function $s(){return la()||De(!1),d.useContext(Bd).location}function Sx(t){d.useContext(Wr).static||d.useLayoutEffect(t)}function jt(){let{isDataRoute:t}=d.useContext(Gs);return t?Yv():$v()}function $v(){la()||De(!1);let t=d.useContext(Gi),{basename:s,future:r,navigator:n}=d.useContext(Wr),{matches:a}=d.useContext(Gs),{pathname:l}=$s(),i=JSON.stringify(qi(a,r.v7_relativeSplatPath)),c=d.useRef(!1);return Sx(()=>{c.current=!0}),d.useCallback(function(m,j){if(j===void 0&&(j={}),!c.current)return;if(typeof m=="number"){n.go(m);return}let x=Ji(m,JSON.parse(i),l,j.relative==="path");t==null&&s!=="/"&&(x.pathname=x.pathname==="/"?s:nr([s,x.pathname])),(j.replace?n.replace:n.push)(x,j.state,j)},[s,n,i,l,t])}const Uv=d.createContext(null);function Fv(t){let s=d.useContext(Gs).outlet;return s&&d.createElement(Uv.Provider,{value:t},s)}function bn(){let{matches:t}=d.useContext(Gs),s=t[t.length-1];return s?s.params:{}}function kx(t,s){let{relative:r}=s===void 0?{}:s,{future:n}=d.useContext(Wr),{matches:a}=d.useContext(Gs),{pathname:l}=$s(),i=JSON.stringify(qi(a,n.v7_relativeSplatPath));return d.useMemo(()=>Ji(t,JSON.parse(i),l,r==="path"),[t,i,l,r])}function Bv(t,s,r,n){la()||De(!1);let{navigator:a}=d.useContext(Wr),{matches:l}=d.useContext(Gs),i=l[l.length-1],c=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let m=$s(),j;j=m;let x=j.pathname||"/",h=x;if(o!=="/"){let v=o.replace(/^\//,"").split("/");h="/"+x.replace(/^\//,"").split("/").slice(v.length).join("/")}let u=Zr(t,{pathname:h});return Jv(u&&u.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:nr([o,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?o:nr([o,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),l,r,n)}function Vv(){let t=Kv(),s=al(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},s),r?d.createElement("pre",{style:a},r):null,null)}const Hv=d.createElement(Vv,null);class Wv extends d.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?d.createElement(Gs.Provider,{value:this.props.routeContext},d.createElement(Cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qv(t){let{routeContext:s,match:r,children:n}=t,a=d.useContext(Gi);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),d.createElement(Gs.Provider,{value:s},n)}function Jv(t,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,c=(a=r)==null?void 0:a.errors;if(c!=null){let j=i.findIndex(x=>x.route.id&&(c==null?void 0:c[x.route.id])!==void 0);j>=0||De(!1),i=i.slice(0,Math.min(i.length,j+1))}let o=!1,m=-1;if(r&&n&&n.v7_partialHydration)for(let j=0;j<i.length;j++){let x=i[j];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=j),x.route.id){let{loaderData:h,errors:u}=r,g=x.route.loader&&h[x.route.id]===void 0&&(!u||u[x.route.id]===void 0);if(x.route.lazy||g){o=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}return i.reduceRight((j,x,h)=>{let u,g=!1,v=null,y=null;r&&(u=c&&x.route.id?c[x.route.id]:void 0,v=x.route.errorElement||Hv,o&&(m<0&&h===0?(Zv("route-fallback"),g=!0,y=null):m===h&&(g=!0,y=x.route.hydrateFallbackElement||null)));let f=s.concat(i.slice(0,h+1)),p=()=>{let b;return u?b=v:g?b=y:x.route.Component?b=d.createElement(x.route.Component,null):x.route.element?b=x.route.element:b=j,d.createElement(qv,{match:x,routeContext:{outlet:j,matches:f,isDataRoute:r!=null},children:b})};return r&&(x.route.ErrorBoundary||x.route.errorElement||h===0)?d.createElement(Wv,{location:r.location,revalidation:r.revalidation,component:v,error:u,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()},null)}var Px=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Px||{}),Tx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tx||{});function Gv(t){let s=d.useContext(Gi);return s||De(!1),s}function Qv(t){let s=d.useContext(Ex);return s||De(!1),s}function Xv(t){let s=d.useContext(Gs);return s||De(!1),s}function Ax(t){let s=Xv(),r=s.matches[s.matches.length-1];return r.route.id||De(!1),r.route.id}function Kv(){var t;let s=d.useContext(Cx),r=Qv(Tx.UseRouteError),n=Ax();return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function Yv(){let{router:t}=Gv(Px.UseNavigateStable),s=Ax(),r=d.useRef(!1);return Sx(()=>{r.current=!0}),d.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Ci({fromRouteId:s},l)))},[t,s])}const jm={};function Zv(t,s,r){jm[t]||(jm[t]=!0)}function eb(t,s){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!s||s.v7_relativeSplatPath),s&&(s.v7_fetcherPersist,s.v7_normalizeFormMethod,s.v7_partialHydration,s.v7_skipActionErrorRevalidation)}function Mx(t){let{to:s,replace:r,state:n,relative:a}=t;la()||De(!1);let{future:l,static:i}=d.useContext(Wr),{matches:c}=d.useContext(Gs),{pathname:o}=$s(),m=jt(),j=Ji(s,qi(c,l.v7_relativeSplatPath),o,a==="path"),x=JSON.stringify(j);return d.useEffect(()=>m(JSON.parse(x),{replace:r,state:n,relative:a}),[m,x,a,r,n]),null}function tb(t){return Fv(t.context)}function sb(t){let{basename:s="/",children:r=null,location:n,navigationType:a=ft.Pop,navigator:l,static:i=!1,future:c}=t;la()&&De(!1);let o=s.replace(/^\/*/,"/"),m=d.useMemo(()=>({basename:o,navigator:l,static:i,future:Ci({v7_relativeSplatPath:!1},c)}),[o,c,l,i]);typeof n=="string"&&(n=Hr(n));let{pathname:j="/",search:x="",hash:h="",state:u=null,key:g="default"}=n,v=d.useMemo(()=>{let y=aa(j,o);return y==null?null:{location:{pathname:y,search:x,hash:h,state:u,key:g},navigationType:a}},[o,j,x,h,u,g,a]);return v==null?null:d.createElement(Wr.Provider,{value:m},d.createElement(Bd.Provider,{children:r,value:v}))}new Promise(()=>{});function rb(t){let s={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(s,{element:d.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(s,{hydrateFallbackElement:d.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(s,{errorElement:d.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ll.apply(this,arguments)}function nb(t,s){if(t==null)return{};var r={},n=Object.keys(t),a,l;for(l=0;l<n.length;l++)a=n[l],!(s.indexOf(a)>=0)&&(r[a]=t[a]);return r}function ab(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lb(t,s){return t.button===0&&(!s||s==="_self")&&!ab(t)}function Rc(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let n=t[r];return s.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function ib(t,s){let r=Rc(t);return s&&s.forEach((n,a)=>{r.has(a)||s.getAll(a).forEach(l=>{r.append(a,l)})}),r}const ob=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cb="6";try{window.__reactRouterVersion=cb}catch{}function db(t,s){return vv({basename:void 0,future:ll({},void 0,{v7_prependBasename:!0}),history:F0({window:void 0}),hydrationData:ub(),routes:t,mapRouteProperties:rb,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function ub(){var t;let s=(t=window)==null?void 0:t.__staticRouterHydrationData;return s&&s.errors&&(s=ll({},s,{errors:mb(s.errors)})),s}function mb(t){if(!t)return null;let s=Object.entries(t),r={};for(let[n,a]of s)if(a&&a.__type==="RouteErrorResponse")r[n]=new Ei(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let i=new l(a.message);i.stack="",r[n]=i}catch{}}if(r[n]==null){let l=new Error(a.message);l.stack="",r[n]=l}}else r[n]=a;return r}const pb=d.createContext({isTransitioning:!1}),hb=d.createContext(new Map),xb="startTransition",ym=Pf[xb],fb="flushSync",Nm=U0[fb];function gb(t){ym?ym(t):t()}function ya(t){Nm?Nm(t):t()}class vb{constructor(){this.status="pending",this.promise=new Promise((s,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",s(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function bb(t){let{fallbackElement:s,router:r,future:n}=t,[a,l]=d.useState(r.state),[i,c]=d.useState(),[o,m]=d.useState({isTransitioning:!1}),[j,x]=d.useState(),[h,u]=d.useState(),[g,v]=d.useState(),y=d.useRef(new Map),{v7_startTransition:f}=n||{},p=d.useCallback(R=>{f?gb(R):R()},[f]),b=d.useCallback((R,I)=>{let{deletedFetchers:T,flushSync:L,viewTransitionOpts:J}=I;R.fetchers.forEach((W,ce)=>{W.data!==void 0&&y.current.set(ce,W.data)}),T.forEach(W=>y.current.delete(W));let Q=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!J||Q){L?ya(()=>l(R)):p(()=>l(R));return}if(L){ya(()=>{h&&(j&&j.resolve(),h.skipTransition()),m({isTransitioning:!0,flushSync:!0,currentLocation:J.currentLocation,nextLocation:J.nextLocation})});let W=r.window.document.startViewTransition(()=>{ya(()=>l(R))});W.finished.finally(()=>{ya(()=>{x(void 0),u(void 0),c(void 0),m({isTransitioning:!1})})}),ya(()=>u(W));return}h?(j&&j.resolve(),h.skipTransition(),v({state:R,currentLocation:J.currentLocation,nextLocation:J.nextLocation})):(c(R),m({isTransitioning:!0,flushSync:!1,currentLocation:J.currentLocation,nextLocation:J.nextLocation}))},[r.window,h,j,y,p]);d.useLayoutEffect(()=>r.subscribe(b),[r,b]),d.useEffect(()=>{o.isTransitioning&&!o.flushSync&&x(new vb)},[o]),d.useEffect(()=>{if(j&&i&&r.window){let R=i,I=j.promise,T=r.window.document.startViewTransition(async()=>{p(()=>l(R)),await I});T.finished.finally(()=>{x(void 0),u(void 0),c(void 0),m({isTransitioning:!1})}),u(T)}},[p,i,j,r.window]),d.useEffect(()=>{j&&i&&a.location.key===i.location.key&&j.resolve()},[j,h,a.location,i]),d.useEffect(()=>{!o.isTransitioning&&g&&(c(g.state),m({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),v(void 0))},[o.isTransitioning,g]),d.useEffect(()=>{},[]);let E=d.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:R=>r.navigate(R),push:(R,I,T)=>r.navigate(R,{state:I,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(R,I,T)=>r.navigate(R,{replace:!0,state:I,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[r]),P=r.basename||"/",k=d.useMemo(()=>({router:r,navigator:E,static:!1,basename:P}),[r,E,P]),w=d.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return d.useEffect(()=>eb(n,r.future),[n,r.future]),d.createElement(d.Fragment,null,d.createElement(Gi.Provider,{value:k},d.createElement(Ex.Provider,{value:a},d.createElement(hb.Provider,{value:y.current},d.createElement(pb.Provider,{value:o},d.createElement(sb,{basename:P,location:a.location,navigationType:a.historyAction,navigator:E,future:w},a.initialized||r.future.v7_partialHydration?d.createElement(jb,{routes:r.routes,future:r.future,state:a}):s))))),null)}const jb=d.memo(yb);function yb(t){let{routes:s,future:r,state:n}=t;return Bv(s,void 0,n,r)}const Nb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kt=d.forwardRef(function(s,r){let{onClick:n,relative:a,reloadDocument:l,replace:i,state:c,target:o,to:m,preventScrollReset:j,viewTransition:x}=s,h=nb(s,ob),{basename:u}=d.useContext(Wr),g,v=!1;if(typeof m=="string"&&wb.test(m)&&(g=m,Nb))try{let b=new URL(window.location.href),E=m.startsWith("//")?new URL(b.protocol+m):new URL(m),P=aa(E.pathname,u);E.origin===b.origin&&P!=null?m=P+E.search+E.hash:v=!0}catch{}let y=_v(m,{relative:a}),f=Eb(m,{replace:i,state:c,target:o,preventScrollReset:j,relative:a,viewTransition:x});function p(b){n&&n(b),b.defaultPrevented||f(b)}return d.createElement("a",ll({},h,{href:g||y,onClick:v||l?n:p,ref:r,target:o}))});var wm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wm||(wm={}));var Em;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Em||(Em={}));function Eb(t,s){let{target:r,replace:n,state:a,preventScrollReset:l,relative:i,viewTransition:c}=s===void 0?{}:s,o=jt(),m=$s(),j=kx(t,{relative:i});return d.useCallback(x=>{if(lb(x,r)){x.preventDefault();let h=n!==void 0?n:fn(m)===fn(j);o(t,{replace:h,state:a,preventScrollReset:l,relative:i,viewTransition:c})}},[m,o,j,n,a,r,t,l,i,c])}function Vd(t){let s=d.useRef(Rc(t)),r=d.useRef(!1),n=$s(),a=d.useMemo(()=>ib(n.search,r.current?null:s.current),[n.search]),l=jt(),i=d.useCallback((c,o)=>{const m=Rc(typeof c=="function"?c(a):c);r.current=!0,l("?"+m,o)},[l,a]);return[a,i]}/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rx=(...t)=>t.filter((s,r,n)=>!!s&&n.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=d.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:l,iconNode:i,...c},o)=>d.createElement("svg",{ref:o,...Sb,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:Rx("lucide",a),...c},[...i.map(([m,j])=>d.createElement(m,j)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(t,s)=>{const r=d.forwardRef(({className:n,...a},l)=>d.createElement(kb,{ref:l,iconNode:s,className:Rx(`lucide-${Cb(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=ee("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=ee("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=ee("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=ee("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ee("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=ee("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=ee("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=ee("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=ee("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=ee("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=ee("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=ee("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=ee("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=ee("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=ee("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=ee("Component",[["path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z",key:"1kciei"}],["path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z",key:"1ome0g"}],["path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z",key:"vbupec"}],["path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z",key:"16csic"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=ee("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=ee("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ee("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ee("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=ee("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ee("FileBox",[["path",{d:"M14.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"16lz6z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 13.1a2 2 0 0 0-1 1.76v3.24a2 2 0 0 0 .97 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01Z",key:"99pj1s"}],["path",{d:"M7 17v5",key:"1yj1jh"}],["path",{d:"M11.7 14.2 7 17l-4.7-2.8",key:"1yk8tc"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=ee("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=ee("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=ee("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=ee("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=ee("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=ee("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=ee("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=ee("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=ee("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=ee("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=ee("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=ee("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=ee("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=ee("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ee("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=ee("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ee("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=ee("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ee("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=ee("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=ee("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=ee("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ee("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=ee("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ee("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=ee("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=ee("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=ee("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ee("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=ee("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=ee("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ee("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=ee("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=ee("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ee("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=ee("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class Xb{constructor(){Ks(this,"AUTH_SERVICE_URL","/api");Ks(this,"OAUTH_URL","/oauth2")}login(s){let r=`${this.OAUTH_URL}/authorization/keycloak`;s&&(r+=`?kc_idp_hint=${s}`),window.location.href=r}async checkAuth(){try{const s=await fetch(`${this.AUTH_SERVICE_URL}/me`,{credentials:"include",headers:{Accept:"application/json"}});return s.ok?await s.json():{authenticated:!1}}catch(s){throw s}}async registerWithPassword(s){try{const r=await fetch(`${this.AUTH_SERVICE_URL}/gateway/auth/register`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)}),n=r.headers.get("content-type");let a={};if(n&&n.includes("application/json")){const l=await r.text();l&&(a=JSON.parse(l))}return r.ok?{success:!0,utilisateur:a.utilisateur}:{success:!1,message:a.message||`Erreur ${r.status}: ${r.statusText}`}}catch(r){return console.error("Erreur lors de l'inscription:",r),{success:!1,message:r.message||"Erreur rseau"}}}async loginWithPassword(s,r){try{const n=await fetch(`${this.AUTH_SERVICE_URL}/gateway/auth/login`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:s,motDePasse:r})}),a=n.headers.get("content-type");let l={};if(a&&a.includes("application/json")){const i=await n.text();i&&(l=JSON.parse(i))}return n.ok?{success:!0,utilisateur:l.utilisateur}:{success:!1,message:l.message||"Email ou mot de passe incorrect",emailNonVerifie:l.emailNonVerifie||!1,email:l.email}}catch(n){return console.error("Erreur lors de la connexion:",n),{success:!1,message:n.message||"Erreur rseau"}}}async logout(){try{await fetch("/logout",{method:"POST",credentials:"include"}),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(r=>{const n=r.split("=")[0].trim();document.cookie=`${n}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`,document.cookie=`${n}=; path=/; domain=${window.location.hostname}; expires=Thu, 01 Jan 1970 00:00:00 GMT`,document.cookie=`${n}=; path=/api; expires=Thu, 01 Jan 1970 00:00:00 GMT`,document.cookie=`${n}=; expires=Thu, 01 Jan 1970 00:00:00 GMT`})}catch{localStorage.clear(),sessionStorage.clear()}}}const ta=new Xb;function Kb({isOpen:t,onClose:s,onRetourConnexion:r}){const[n,a]=d.useState("social"),[l,i]=d.useState(""),[c,o]=d.useState(""),[m,j]=d.useState(""),[x,h]=d.useState(""),[u,g]=d.useState(""),[v,y]=d.useState(!1),[f,p]=d.useState(!1),[b,E]=d.useState(""),[P,k]=d.useState(!1);if(!t)return null;const w=I=>{ta.login(I)},R=async()=>{if(E(""),!l||!c||!m||!x||!u){E("Tous les champs sont obligatoires");return}if(x!==u){E("Les mots de passe ne correspondent pas");return}if(x.length<8){E("Le mot de passe doit contenir au moins 8 caractres");return}k(!0);try{const I=await ta.registerWithPassword({nom:l,prenom:c,email:m,motDePasse:x});I.success?(console.log("[INSCRIPTION EMAIL] Inscription russie, email de vrification envoy"),window.location.href=`/confirmation-inscription?email=${encodeURIComponent(m)}`):E(I.message||"chec de l'inscription")}catch(I){console.error("Erreur d'inscription:",I),E(I.message||"Erreur lors de l'inscription")}finally{k(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md mx-4 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-5",children:[e.jsx("h2",{className:"text-xl font-bold text-center flex-1 text-gray-900",children:"Crer un compte PITM"}),e.jsx("button",{onClick:s,className:"text-gray-800 hover:text-black transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex border-t border-gray-200",children:[e.jsx("button",{onClick:()=>a("social"),className:`flex-1 py-3 text-center font-medium border-b-2 transition-colors ${n==="social"?"text-primary border-primary":"text-gray-600 hover:text-gray-900 border-transparent hover:border-gray-300"}`,children:"Rseaux sociaux"}),e.jsx("button",{onClick:()=>a("email"),className:`flex-1 py-3 text-center font-medium border-b-2 transition-colors ${n==="email"?"text-primary border-primary":"text-gray-600 hover:text-gray-900 border-transparent hover:border-gray-300"}`,children:"Email / Mot de passe"})]})]}),e.jsx("div",{className:"p-6",children:n==="social"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center mb-6",children:e.jsx("p",{className:"text-gray-600",children:"Choisissez votre mthode d'inscription"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>w("facebook"),disabled:!1,className:"w-full flex items-center gap-4 p-4 border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Continuer avec Facebook"})]}),e.jsxs("button",{onClick:()=>w("google"),disabled:!1,className:"w-full flex items-center gap-4 p-4 border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Continuer avec Google"})]}),e.jsxs("button",{onClick:()=>w("apple"),disabled:!1,className:"w-full flex items-center gap-4 p-4 border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-800",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})})}),e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Continuer avec Apple"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Inscription par email"}),e.jsx("p",{className:"text-gray-700 text-sm mt-2",children:"Crez votre compte avec votre adresse email"})]}),b&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:b}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Nom",value:l,onChange:I=>i(I.target.value),className:"flex-1 bg-gray-100 border-0 rounded-lg p-3 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",autoComplete:"family-name"}),e.jsx("input",{type:"text",placeholder:"Prnom",value:c,onChange:I=>o(I.target.value),className:"flex-1 bg-gray-100 border-0 rounded-lg p-3 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",autoComplete:"given-name"})]}),e.jsx("div",{children:e.jsx("input",{type:"email",placeholder:"Adresse email",value:m,onChange:I=>j(I.target.value),className:"w-full bg-gray-100 border-0 rounded-lg p-3 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",autoComplete:"email"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v?"text":"password",placeholder:"Mot de passe (min. 8 caractres)",value:x,onChange:I=>h(I.target.value),className:"w-full bg-gray-100 border-0 rounded-lg p-3 pr-12 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>y(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",placeholder:"Confirmer le mot de passe",value:u,onChange:I=>g(I.target.value),onKeyPress:I=>I.key==="Enter"&&!P&&l&&c&&m&&x&&u&&R(),className:"w-full bg-gray-100 border-0 rounded-lg p-3 pr-12 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>p(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})})})]}),e.jsx("button",{onClick:R,disabled:!l||!c||!m||!x||!u||P,className:"w-full bg-primary text-white py-3 rounded-xl font-semibold disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed hover:bg-primary-800 transition-colors",children:P?"Inscription...":"Crer mon compte"})]})}),e.jsx("div",{className:"border-t border-gray-200 p-5",children:e.jsxs("div",{className:"text-center text-sm text-gray-700",children:[e.jsxs("p",{className:"mb-3 leading-relaxed",children:["En crant un compte, tu acceptes nos"," ",e.jsx("button",{className:"text-black underline font-medium hover:text-gray-700",children:"Conditions d'utilisation"})," ","et reconnais avoir lu notre"," ",e.jsx("button",{className:"text-black underline font-medium hover:text-gray-700",children:"Politique de confidentialit"}),"."]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2 mb-3",children:'Aprs inscription, vous pourrez complter votre profil dans la section "Mon Compte"'}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-gray-800",children:"Tu as dj un compte ? "}),e.jsx("button",{onClick:r||s,className:"text-primary font-semibold hover:text-primary/90 transition-colors",children:"Se connecter"})]})]})})]})})}const Wx=d.createContext(void 0),Am=t=>{if(!t||!t.roles)return!1;const s=t.roles.map(r=>r.toLowerCase());return s.includes("manager")||s.includes("rh")},Yb=({children:t})=>{const[s,r]=d.useState(null),[n,a]=d.useState(!1),[l,i]=d.useState(!0),[c,o]=d.useState(!1),[m,j]=d.useState(null),x=d.useCallback(async(p=0)=>{i(!0);const b=window.location.search.includes("auth=success");b&&p===0&&await new Promise(E=>setTimeout(E,500));try{const E=await ta.checkAuth();if(b&&!E.authenticated&&p===0)return i(!1),await new Promise(P=>setTimeout(P,1e3)),x(1);if(a(E.authenticated),r(E.utilisateur||null),E.authenticated&&(localStorage.removeItem("auth_redirect_url"),document.cookie="auth_redirect_url=; path=/; max-age=0",sessionStorage.removeItem("auth_redirecting"),b&&E.utilisateur)){const P=Am(E.utilisateur),k=window.location.pathname;P&&k!=="/demandes-reconnaissance"&&(window.location.href="/demandes-reconnaissance")}}catch{a(!1),r(null)}finally{i(!1)}},[]);d.useEffect(()=>{x()},[x]);const h=()=>{g()},u=async()=>{const p=Am(s);await ta.logout(),a(!1),r(null),p&&setTimeout(()=>{g()},100)},g=d.useCallback(p=>{const b=p||window.location.pathname+window.location.search;j(b),o(!0)},[]),v=d.useCallback(()=>{o(!1)},[]),y=d.useCallback(()=>m,[m]),f=d.useCallback(()=>{j(null)},[]);return e.jsx(Wx.Provider,{value:{user:s,isAuthenticated:n,isLoading:l,showAuthModal:c,redirectUrl:m,login:h,logout:u,refreshAuth:x,openAuthModal:g,closeAuthModal:v,getRedirectUrl:y,clearRedirectUrl:f},children:t})},Es=()=>{const t=d.useContext(Wx);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};function qx({isOpen:t,onClose:s}){const{getRedirectUrl:r,clearRedirectUrl:n}=Es(),[a,l]=d.useState("principal"),[i,c]=d.useState(""),[o,m]=d.useState(""),[j,x]=d.useState(!1),[h,u]=d.useState(!1),[g,v]=d.useState(t),[y,f]=d.useState(""),[p,b]=d.useState(!1),[E,P]=d.useState(!1),[k,w]=d.useState(!1);if(t&&!g&&!h&&v(!0),!g&&!h)return null;const R=async()=>{var W,ce;if(!(!i||!o)){b(!0),f(""),P(!1);try{const se=await ta.loginWithPassword(i,o);if(se.success){console.log("[CONNEXION EMAIL] Connexion russie:",se.utilisateur);const be=((ce=(W=se.utilisateur)==null?void 0:W.roles)==null?void 0:ce.map(z=>z.toLowerCase()))||[],A=be.includes("manager")||be.includes("rh");if(se.utilisateur&&!se.utilisateur.profilComplet)console.log("[CONNEXION EMAIL] Profil incomplet, redirection vers /mon-compte"),n(),window.location.href="/mon-compte?auth=success";else if(A)console.log("[CONNEXION EMAIL] Utilisateur organisation, redirection vers /demandes-reconnaissance"),n(),window.location.href="/demandes-reconnaissance";else{const z=r();console.log("[CONNEXION EMAIL] URL de redirection:",z),z&&z!==window.location.pathname+window.location.search?(console.log("[CONNEXION EMAIL] Redirection vers:",z),n(),window.location.href=z):(console.log("[CONNEXION EMAIL] Rechargement de la page actuelle"),n(),window.location.reload())}}else se.emailNonVerifie&&P(!0),f(se.message||"Erreur lors de la connexion")}catch(se){console.error("Erreur lors de la connexion:",se),f(se.message||"Une erreur est survenue")}finally{b(!1)}}},I=async()=>{if(i){w(!0);try{(await(await fetch("/api/auth/renvoyer-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).json()).success&&(window.location.href=`/confirmation-inscription?email=${encodeURIComponent(i)}`)}catch{}finally{w(!1)}}},T=async W=>{const ce=r();ce&&(console.log(" [MODAL] Sauvegarde de l'URL de redirection pour OAuth:",ce),localStorage.setItem("auth_redirect_url",ce),document.cookie=`auth_redirect_url=${encodeURIComponent(ce)}; path=/; max-age=600; SameSite=Lax`,console.log(" [MODAL] Cookie auth_redirect_url cr (encod):",encodeURIComponent(ce))),ta.login(W)},L=()=>{v(!1),setTimeout(()=>{u(!0)},200)},J=()=>{v(!1),s()},Q=()=>{u(!1),setTimeout(()=>{v(!0)},200)};return e.jsxs(e.Fragment,{children:[g&&!h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md mx-4 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-5",children:[a==="email"&&e.jsx("button",{onClick:()=>l("principal"),className:"text-gray-800 hover:text-black transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h2",{className:"text-xl font-bold text-center flex-1 text-gray-900",children:"Connecte-toi  PITM"}),e.jsx("button",{onClick:J,className:"text-gray-800 hover:text-black transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a==="principal"&&e.jsxs("div",{className:"flex border-t border-gray-200",children:[e.jsx("button",{onClick:()=>l("principal"),className:"flex-1 py-3 text-center font-medium text-primary border-b-2 border-primary",children:"Rseaux sociaux"}),e.jsx("button",{onClick:()=>l("email"),className:"flex-1 py-3 text-center font-medium text-gray-600 hover:text-gray-900 border-b-2 border-transparent hover:border-gray-300 transition-colors",children:"Email / Mot de passe"})]})]}),e.jsx("div",{className:"p-6",children:a==="principal"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>T("facebook"),className:"w-full flex items-center gap-4 p-4 border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Continuer avec Facebook"})]}),e.jsxs("button",{onClick:()=>T("google"),className:"w-full flex items-center gap-4 p-4 border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Continuer avec Google"})]}),e.jsxs("button",{onClick:()=>T("apple"),className:"w-full flex items-center gap-4 p-4 border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-800",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})})}),e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Continuer avec Apple"})]})]}):e.jsxs("form",{onSubmit:W=>{W.preventDefault(),!p&&i&&o&&R()},className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Connexion par email"}),e.jsx("p",{className:"text-gray-700 text-sm mt-2",children:"Utilisez votre adresse email et votre mot de passe"})]}),y&&e.jsxs("div",{className:`border px-4 py-3 rounded-lg text-sm ${E?"bg-amber-50 border-amber-200 text-amber-800":"bg-red-50 border-red-200 text-red-700"}`,children:[e.jsx("p",{children:y}),E&&e.jsx("button",{type:"button",onClick:I,disabled:k,className:"mt-2 text-primary underline font-medium hover:text-primary/80 disabled:opacity-50",children:k?"Envoi en cours...":"Renvoyer l'email de vrification"})]}),e.jsx("div",{children:e.jsx("input",{type:"email",placeholder:"Adresse email",value:i,onChange:W=>c(W.target.value),className:"w-full bg-gray-100 border-0 rounded-lg p-3 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",autoComplete:"email",required:!0})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:j?"text":"password",placeholder:"Mot de passe",value:o,onChange:W=>m(W.target.value),className:"w-full bg-gray-100 border-0 rounded-lg p-3 pr-12 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",autoComplete:"current-password",required:!0}),e.jsx("button",{type:"button",onClick:()=>x(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:j?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})})})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"button",className:"text-sm text-gray-600 hover:text-gray-900 underline",children:"Mot de passe oubli ?"})}),e.jsx("button",{type:"submit",disabled:!i||!o||p,className:"w-full bg-primary text-white py-3 rounded-xl font-semibold disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed hover:bg-primary-800 transition-colors",children:p?"Connexion...":"Se connecter"})]})}),e.jsx("div",{className:"border-t border-gray-200 p-5",children:e.jsxs("div",{className:"text-center text-sm text-gray-700",children:[a==="principal"&&e.jsx(e.Fragment,{children:e.jsxs("p",{className:"mb-3 leading-relaxed",children:["En continuant avec un compte bas dans le pays suivant :"," ",e.jsx("span",{className:"font-semibold text-black",children:"Burkina Faso"}),", tu acceptes nos"," ",e.jsx("button",{className:"text-black underline font-medium hover:text-gray-700",children:"Conditions d'utilisation"})," et reconnais avoir lu notre"," ",e.jsx("button",{className:"text-black underline font-medium hover:text-gray-700",children:"Politique de confidentialit"}),"."]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-gray-800",children:"Tu n'as pas de compte ? "}),e.jsx("button",{onClick:L,className:"text-primary font-semibold hover:text-primary/90 transition-colors",children:"S'inscrire"})]})]})})]})}),e.jsx(Kb,{isOpen:h,onClose:()=>{u(!1),s()},onRetourConnexion:Q})]})}const Na={"pitm-light":{name:"pitm-light",displayName:"Thme Clair",primaryColor:"#1A3D64",secondaryColor:"#64748b",backgroundColor:"#f8fafc",textColor:"#1e293b"},"pitm-dark":{name:"pitm-dark",displayName:"Thme Sombre",primaryColor:"#1A3D64",secondaryColor:"#94a3b8",backgroundColor:"#0f172a",textColor:"#f1f5f9"}},Mm="pitm-theme",Rm="pitm-light";function Zb(){const[t,s]=d.useState(Rm);d.useEffect(()=>{const c=localStorage.getItem(Mm);c&&Na[c]?(s(c),r(c)):r(Rm)},[]);const r=c=>{document.documentElement.setAttribute("data-theme",c);const m=Na[c],j=document.documentElement.style;j.setProperty("--current-primary",m.primaryColor),j.setProperty("--current-background",m.backgroundColor),j.setProperty("--current-text",m.textColor)},n=c=>{s(c),r(c),localStorage.setItem(Mm,c)},a=()=>{const c=Object.keys(Na),m=(c.indexOf(t)+1)%c.length;n(c[m])},l=c=>{const o=document.documentElement.style;o.setProperty("--primary-500",c),o.setProperty("--current-primary",c),localStorage.setItem("pitm-custom-primary",c),i(c)},i=c=>{const o=y=>{const f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(y);if(!f)return{h:0,s:0,l:0};const p=parseInt(f[1],16)/255,b=parseInt(f[2],16)/255,E=parseInt(f[3],16)/255,P=Math.max(p,b,E),k=Math.min(p,b,E);let w,R,I=(P+k)/2;if(P===k)w=R=0;else{const T=P-k;switch(R=I>.5?T/(2-P-k):T/(P+k),P){case p:w=(b-E)/T+(b<E?6:0);break;case b:w=(E-p)/T+2;break;case E:w=(p-b)/T+4;break;default:w=0}w/=6}return{h:w*360,s:R*100,l:I*100}},m=(y,f,p)=>{p/=100;const b=f*Math.min(p,1-p)/100,E=P=>{const k=(P+y/30)%12,w=p-b*Math.max(Math.min(k-3,9-k,1),-1);return Math.round(255*w).toString(16).padStart(2,"0")};return`#${E(0)}${E(8)}${E(4)}`},{h:j,s:x,l:h}=o(c),u=document.documentElement.style,g=[50,100,200,300,400,500,600,700,800,900],v=[95,90,80,65,50,h,35,25,15,10];g.forEach((y,f)=>{const p=m(j,x,v[f]);u.setProperty(`--primary-${y}`,p)})};return d.useEffect(()=>{const c=localStorage.getItem("pitm-custom-primary");c&&l(c)},[]),{currentTheme:t,themeConfig:Na[t],availableThemes:Na,changeTheme:n,toggleTheme:a,customizePrimaryColor:l,isLight:t==="pitm-light",isDark:t==="pitm-dark"}}const Jx=d.createContext(void 0);function ej({children:t}){const s=Zb();return e.jsx(Jx.Provider,{value:s,children:t})}function tj(){const t=d.useContext(Jx);if(t===void 0)throw new Error("useThemeContext must be used within a ThemeProvider");return t}function sj({isOpen:t,onClose:s}){const{currentTheme:r,themeConfig:n,availableThemes:a,changeTheme:l,customizePrimaryColor:i}=tj(),[c,o]=d.useState(n.primaryColor);if(!t)return null;const m=()=>{i(c)},j=[{nom:"Bleu PITM",couleur:"#1A3D64"},{nom:"Bleu Moderne",couleur:"#3B82F6"},{nom:"Violet",couleur:"#8B5CF6"},{nom:"Vert",couleur:"#10B981"},{nom:"Orange",couleur:"#F59E0B"},{nom:"Rouge",couleur:"#EF4444"},{nom:"Rose",couleur:"#EC4899"},{nom:"Cyan",couleur:"#06B6D4"}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personnaliser le thme"}),e.jsx("button",{onClick:s,className:"text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thme"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(a).map(([x,h])=>e.jsx("button",{onClick:()=>l(x),className:`p-4 rounded-lg border-2 transition-all text-left ${r===x?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300 bg-white"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:h.displayName}),e.jsx("div",{className:"text-sm text-gray-600",children:x==="pitm-light"?"Interface claire et moderne":"Interface sombre et lgante"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:h.backgroundColor}}),e.jsx("div",{className:"w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:h.primaryColor}})]})]})},x))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Couleur principale"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Couleurs prdfinies"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:j.map(x=>e.jsx("button",{onClick:()=>{o(x.couleur),i(x.couleur)},className:`aspect-square rounded-lg border-2 transition-all hover:scale-105 ${c===x.couleur?"border-gray-900 shadow-lg":"border-gray-300"}`,style:{backgroundColor:x.couleur},title:x.nom,children:c===x.couleur&&e.jsx("svg",{className:"w-6 h-6 text-gray-900 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})},x.couleur))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Couleur personnalise"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:c,onChange:x=>o(x.target.value),className:"w-12 h-12 rounded-lg border border-gray-300 cursor-pointer"}),e.jsx("input",{type:"text",value:c,onChange:x=>o(x.target.value),placeholder:"#166064",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-800 transition-colors",children:"Appliquer"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Aperu"}),e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-slate-50",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-800 transition-colors",children:"Bouton principal"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm",children:"Badge"}),e.jsx("span",{className:"px-3 py-1 bg-primary/5 text-primary border border-primary rounded-full text-sm",children:"Badge bord"})]}),e.jsxs("p",{className:"text-gray-600",children:["Texte d'exemple avec ",e.jsx("span",{className:"text-primary font-medium",children:"couleur principale"})]})]})})]})]}),e.jsx("div",{className:"border-t border-gray-200 p-6",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:()=>{i("#166064"),o("#166064")},className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Rinitialiser"}),e.jsx("button",{onClick:s,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-800 transition-colors",children:"Termin"})]})})]})})}function Wd(){const{user:t,isLoading:s}=Es();return!t||s?{roles:[],loading:s,error:null}:{roles:t.roles||[],loading:!1,error:null}}function hl(t){const{roles:s,loading:r}=Wd();return r?!1:s.some(n=>n.toLowerCase()===t.toLowerCase())}function Gx(t){const{roles:s,loading:r}=Wd();return r?!1:s.some(n=>t.some(a=>a.toLowerCase()===n.toLowerCase()))}const rj=()=>({hasRole:hl("manager")}),nj=()=>({canManage:hl("rh")}),aj=()=>({canAccess:Gx(["rh","manager"])}),lj=()=>({canManage:hl("manager")}),ij=()=>({canManage:hl("expert")}),oj=()=>({canManage:hl("expert")}),cj=()=>({canAccess:Gx(["expert","rh","manager"])});function dj({collapsed:t,onToggle:s}){const r=$s(),{isAuthenticated:n,logout:a,user:l,openAuthModal:i}=Es(),{canManage:c}=nj(),{canAccess:o}=cj(),{canManage:m}=oj(),{canManage:j}=ij(),{canAccess:x}=aj(),{canManage:h}=lj(),[u,g]=d.useState(!1),[v,y]=d.useState(!1),[f,p]=d.useState(!1);d.useEffect(()=>{},[n,l,c,o,m,j,x,h]);const b=async()=>{n?await a():g(!0)},E=(T,L,J=!1)=>{if(J&&!n){T.preventDefault(),i(L);return}},P=[{icon:Bb,label:"Aperu",path:"/"},{icon:_b,label:"Explorer",path:"/explorer"},{icon:us,label:"Rechercher",path:"/rechercher"},...m?[{icon:bt,label:"Mon rseau",path:"/reseau"}]:[],{icon:Ft,label:"Projets",path:"/projets"},...n?[{icon:an,label:"Mes tches",path:"/mes-taches",requiresAuth:!0},{icon:ys,label:"Mes candidatures",path:"/mes-candidatures",requiresAuth:!0}]:[],{icon:$b,label:"Plus",path:"/plus"}],k=[{icon:ts,label:"Mon expertise",path:"/expertise",expertOnly:!0},{icon:Ic,label:"Comptences",path:"/competences",managerOnly:!0},{icon:Ir,label:"Localisations",path:"/competences/localisations",managerOnly:!0},{icon:Et,label:"Certifications",path:"/competences/certifications",managerOnly:!0},{icon:zc,label:"Demande de reconnaissance",path:"/demandes-reconnaissance",dividerBefore:!0,managerOrRhOnly:!0},{icon:Ub,label:"Domaine mtier",path:"/competences/domaines-metier",managerOnly:!0},{icon:Vx,label:"Critre d'valuation",path:"/competences/criteres-evaluation",managerOnly:!0},{icon:Fx,label:"Mthode d'valuation",path:"/competences/methodes-evaluation",managerOnly:!0}],w=k.filter(T=>T.expertOnly?j:T.managerOnly?h:T.managerOrRhOnly?x:!0),R=T=>r.pathname===T,I=k.some(T=>r.pathname.startsWith(T.path));return d.useEffect(()=>{I&&!t&&p(!0)},[I,t]),e.jsxs("aside",{className:`fixed left-0 top-0 h-screen bg-white border-r border-slate-200 flex flex-col z-50 transition-all duration-300 shadow-lg ${t?"w-20":"w-64"}`,children:["      ",e.jsx("button",{onClick:s,className:"absolute -right-3 top-8 w-6 h-6 bg-primary rounded-full flex items-center justify-center text-white hover:bg-primary-800 shadow-lg transition-all duration-200 z-10","aria-label":t?"Afficher le sidebar":"Masquer le sidebar",children:t?e.jsx(qr,{size:16}):e.jsx(Db,{size:16})}),e.jsx("div",{className:"px-6 py-8",children:e.jsxs(kt,{to:"/",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"P"})}),!t&&e.jsx("span",{className:"text-xl font-bold text-primary-900",children:"PITM"})]})}),e.jsx("nav",{className:"flex-1 px-3 overflow-y-auto",children:P.map(T=>{const L=T.icon,J=R(T.path);if(T.label==="Projets")return e.jsxs(zo.Fragment,{children:[o&&e.jsxs("div",{className:"mb-1",children:[e.jsxs("button",{onClick:()=>!t&&p(!f),className:`w-full flex items-center gap-4 px-4 py-3 rounded-lg transition-all duration-200 ${t?"justify-center":"justify-between"} ${I?"text-primary-900 font-semibold":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,title:t?"Expertise":void 0,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ic,{size:24,strokeWidth:I?2.5:2}),!t&&e.jsx("span",{className:"text-base",children:"Expertise"})]}),!t&&e.jsx(ia,{size:18,className:`transition-transform duration-200 ${f?"rotate-180":""}`})]}),!t&&f&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:w.map(W=>{const ce=W.icon,se=R(W.path),be=!0;return e.jsxs(zo.Fragment,{children:[W.dividerBefore&&e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs(kt,{to:W.path,onClick:A=>E(A,W.path,be),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all duration-200 ${se?"text-primary-900 font-semibold bg-primary/10":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(ce,{size:20,strokeWidth:se?2.5:2}),e.jsx("span",{className:"text-sm",children:W.label})]})]},W.path)})})]}),e.jsxs(kt,{to:T.path,className:`flex items-center gap-4 px-4 py-3 rounded-lg mb-1 transition-all duration-200 ${t?"justify-center":""} ${J?"text-primary-900 font-semibold":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,title:t?T.label:void 0,children:[e.jsx(L,{size:24,strokeWidth:J?2.5:2}),!t&&e.jsx("span",{className:"text-base",children:T.label})]})]},"expertise-and-projets");const Q=T.path==="/reseau"||T.requiresAuth===!0;return e.jsxs(kt,{to:T.path,onClick:W=>E(W,T.path,Q),className:`flex items-center gap-4 px-4 py-3 rounded-lg mb-1 transition-all duration-200 ${t?"justify-center":""} ${J?"text-primary-900 font-semibold":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,title:t?T.label:void 0,children:[e.jsx(L,{size:24,strokeWidth:J?2.5:2}),!t&&e.jsx("span",{className:"text-base",children:T.label})]},T.path)})}),!t&&e.jsx("div",{className:"px-6 py-4 space-y-3",children:e.jsx("button",{onClick:b,className:`w-full font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg flex items-center justify-center gap-2 ${n?"bg-rose-500 hover:bg-rose-600 text-white hover:shadow-rose-400/50":"bg-primary hover:bg-primary-800 text-white hover:shadow-primary/50"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(Pm,{size:20}),"Se dconnecter"]}):e.jsxs(e.Fragment,{children:[e.jsx(_c,{size:20}),"Se connecter"]})})}),t&&e.jsx("div",{className:"px-3 py-4 space-y-2",children:e.jsx("button",{onClick:b,className:`w-full flex items-center justify-center font-medium py-3 rounded-lg transition-all duration-200 shadow-lg ${n?"bg-rose-500 hover:bg-rose-600 text-white hover:shadow-rose-400/50":"bg-primary hover:bg-primary-800 text-white hover:shadow-primary/50"}`,title:n?"Se dconnecter":"Se connecter",children:n?e.jsx(Pm,{size:20}):e.jsx(_c,{size:20})})}),!t&&e.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 space-y-2 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(kt,{to:"/entreprise",className:"block text-gray-600 hover:text-primary transition-colors",children:"Entreprise"}),e.jsx(kt,{to:"/programme",className:"block text-gray-600 hover:text-primary transition-colors",children:"Programme"}),e.jsx(kt,{to:"/conditions",className:"block text-gray-600 hover:text-primary transition-colors",children:"Conditions gnrales"})]}),e.jsx("div",{className:"text-gray-600 text-xs pt-2",children:" 2025 PITM"})]}),e.jsx(qx,{isOpen:u,onClose:()=>g(!1)}),e.jsx(sj,{isOpen:v,onClose:()=>y(!1)})]})}const Qx=d.createContext(void 0),Ao={};function uj({children:t}){const[s,r]=d.useState(Ao),n=l=>{r({...Ao,...l})},a=()=>{r(Ao)};return e.jsx(Qx.Provider,{value:{config:s,setConfig:n,resetConfig:a},children:t})}function Xx(){const t=d.useContext(Qx);if(!t)throw new Error("useHeader doit tre utilis dans un HeaderProvider");return t}const Qr="/api/contact",br={async envoyerDemandeContact(t,s){const r=await fetch(`${Qr}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!r.ok){const n=await r.json().catch(()=>({message:"Erreur lors de l'envoi du message"}));throw new Error(n.message||"Erreur lors de l'envoi du message")}return r.json()},async getDemandesEnvoyees(){const t=await fetch(`${Qr}/envoyees`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des demandes envoyes");return t.json()},async getDemandesRecues(){const t=await fetch(`${Qr}/recues`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des demandes reues");return t.json()},async getDemandesNonLues(){const t=await fetch(`${Qr}/non-lues`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des demandes non lues");return t.json()},async compterDemandesNonLues(){const t=await fetch(`${Qr}/non-lues/count`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors du comptage des demandes");return(await t.json()).count},async marquerCommeLue(t){const s=await fetch(`${Qr}/${t}/lue`,{method:"PUT",credentials:"include"});if(!s.ok)throw new Error("Erreur lors du marquage de la demande");return s.json()},async archiverDemande(t){if(!(await fetch(`${Qr}/${t}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Erreur lors de l'archivage de la demande")}};function mj(){const{config:t}=Xx(),{title:s,actions:r,tabs:n,activeTab:a,onTabChange:l}=t,i=$s(),{isAuthenticated:c}=Es(),[o,m]=d.useState(0);d.useEffect(()=>{if(c){j();const h=setInterval(j,3e4);return()=>clearInterval(h)}},[c]);const j=async()=>{try{const h=await br.compterDemandesNonLues();m(h)}catch{}},x=()=>{if(s)return s;const h=i.pathname;return h==="/"?"Aperu":h==="/explorer"?"Explorer":h==="/rechercher"?"Rechercher des Expertises":h.startsWith("/expertise-profil/")?"Profil d'Expertise":h==="/suivis"?"Suivis":h==="/profil"?"Mon Profil":h==="/mon-compte"?"Mon Compte":h==="/expertise"?"Mon Expertise":h==="/competences/certifications"?"Certifications":h==="/competences/localisations"?"Localisations":h==="/competences/domaines-metier"?"Domaines Mtier":h==="/competences/criteres-evaluation"?"Critres d'valuation":h==="/competences/methodes-evaluation"?"Mthodes d'valuation":h==="/competences"?"Rfrentiel de Comptences":h==="/projets"?"Mes Projets":h==="/messages"?"Messagerie":h==="/plus"?"Plus":h.startsWith("/expert/")?"Dtail Expert":"PITM"};return e.jsxs("header",{className:"sticky top-0 bg-white border-b border-slate-200 z-40",children:[e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:x()})}),e.jsxs("div",{className:"flex items-center gap-4",children:[r,c&&e.jsxs(e.Fragment,{children:[e.jsxs(kt,{to:"/messages",className:"p-2 hover:bg-slate-100 rounded-lg transition-colors relative",title:"Messagerie",children:[e.jsx(_r,{size:24,className:"text-gray-600 hover:text-gray-800"}),o>0&&e.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-error text-white text-xs font-bold rounded-full flex items-center justify-center px-1",children:o>9?"9+":o})]}),e.jsx(kt,{to:"/mon-compte",className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Mon Compte",children:e.jsx(zb,{size:24,className:"text-gray-600 hover:text-gray-800"})})]}),e.jsxs("button",{className:"p-2 hover:bg-slate-100 rounded-lg transition-colors relative",children:[e.jsx(Lc,{size:24,className:"text-gray-600 hover:text-gray-800"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-error rounded-full"})]}),e.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(Uc,{size:24,className:"text-gray-600 hover:text-gray-800"})})]})]})}),n&&n.length>0&&e.jsx("div",{className:"border-t border-slate-200",children:e.jsx("div",{className:"flex gap-1 px-6",children:n.map(h=>e.jsxs("button",{onClick:()=>l==null?void 0:l(h.id),className:`px-6 py-3 font-medium text-sm transition-all relative
                  ${a===h.id?"text-primary":"text-gray-600 hover:text-gray-800"}`,children:[h.label,a===h.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]},h.id))})})]})}function pj(){const[t,s]=d.useState(!1);return e.jsx(uj,{children:e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(dj,{collapsed:t,onToggle:()=>s(!t)}),e.jsxs("div",{className:`transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(mj,{}),e.jsx(tb,{})]})]})})}const hj=24*60*60*1e3,Lm=(t,s)=>{try{localStorage.setItem("visiteurId",t),localStorage.setItem("sessionTs",String(Date.now()))}catch(r){console.error("Failed to save session:",r)}},xj=()=>{try{const t=localStorage.getItem("visiteurId")||"",s=Number(localStorage.getItem("sessionTs")||"0");return{visiteurId:t,instanceKey:0,ts:s}}catch(t){return console.error("Failed to load session:",t),{visiteurId:"",instanceKey:0,ts:0}}},fj=()=>{try{localStorage.removeItem("visiteurId"),localStorage.removeItem("sessionTs"),localStorage.removeItem("instanceKey")}catch(t){console.error("Failed to clear session:",t)}},Dm=t=>!t||isNaN(t)?!0:Date.now()-t>hj,gj=()=>{const[t,s]=d.useState(""),[r,n]=d.useState(!1);return d.useEffect(()=>{(()=>{const i=xj();if(i.visiteurId&&!Dm(i.ts))s(i.visiteurId);else{i.visiteurId&&Dm(i.ts)&&fj();const c=`v-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;s(c),Lm(c)}n(!0)})()},[]),{visiteurId:t,isInitialized:r,startNewSession:l=>{const i=l||`v-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;s(i),Lm(i)}}};async function Im(t,s){const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s||{})});if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.json()}const Ua={scrollNext:async(t,s,r=5)=>Im("/api/acceuil/api/scroll-next",{visiteurId:t,afterCursor:s,batchSize:r}),dwell:async(t,s,r,n)=>{const a={visiteurId:t,itemId:s,eventType:r};return n!==void 0&&(a.dureeDwellMs=n),Im("/api/acceuil/api/dwell",a)}};let Bc=null;const vj=t=>{Bc=t},bj=t=>{(t===401||t===403)&&Bc&&Bc()},Ee=async(t,s)=>{const r=await fetch(t,s);return(r.status===401||r.status===403)&&bj(r.status),r};class jj{constructor(){Ks(this,"BASE_URL","/api/projets")}async creerProjet(s){const r=await Ee(this.BASE_URL,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`Erreur lors de la cration du projet: ${r.status}`);return await r.json()}async modifierProjet(s,r){const n=await Ee(`${this.BASE_URL}/${s}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Erreur lors de la modification du projet: ${n.status}`);return await n.json()}async obtenirProjet(s){const r=await fetch(`${this.BASE_URL}/${s}`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration du projet: ${r.status}`);return await r.json()}async listerMesProjets(){const s=await Ee(`${this.BASE_URL}/mes-projets`,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la rcupration des projets: ${s.status}`);return await s.json()}async publierProjet(s){const r=await Ee(`${this.BASE_URL}/${s}/publier`,{method:"PUT",credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la publication du projet: ${r.status}`);return await r.json()}async depublierProjet(s){const r=await Ee(`${this.BASE_URL}/${s}/depublier`,{method:"PUT",credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la dpublication du projet: ${r.status}`);return await r.json()}async changerStatut(s,r){const n=await Ee(`${this.BASE_URL}/${s}/statut`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({statut:r})});if(!n.ok)throw new Error(`Erreur lors du changement de statut: ${n.status}`);return await n.json()}async supprimerProjet(s){const r=await Ee(`${this.BASE_URL}/${s}`,{method:"DELETE",credentials:"include"});if(!r.ok)throw new Error(`Erreur lors de la suppression du projet: ${r.status}`)}async creerEtape(s){const r=await Ee(`${this.BASE_URL}/etapes`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`Erreur lors de la cration de l'tape: ${r.status}`);return await r.json()}async supprimerEtape(s){const r=await Ee(`${this.BASE_URL}/etapes/${s}`,{method:"DELETE",credentials:"include"});if(!r.ok)throw new Error(`Erreur lors de la suppression de l'tape: ${r.status}`)}async ajouterExigence(s,r){const n=await Ee(`${this.BASE_URL}/${s}/exigences`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({description:r})});if(!n.ok)throw new Error(`Erreur lors de l'ajout de l'exigence: ${n.status}`);return await n.json()}async supprimerExigence(s){const r=await Ee(`${this.BASE_URL}/exigences/${s}`,{method:"DELETE",credentials:"include"});if(!r.ok)throw new Error(`Erreur lors de la suppression de l'exigence: ${r.status}`)}async listerProjetsPublics(s=0,r=10){const n=await fetch(`${this.BASE_URL}/public?page=${s}&size=${r}`,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`Erreur lors de la rcupration des projets publics: ${n.status}`);return await n.json()}async rechercherProjetsPublics(s,r=0,n=10){const a=new URLSearchParams({page:r.toString(),size:n.toString()});s&&a.set("q",s);const l=await fetch(`${this.BASE_URL}/public/recherche?${a}`,{headers:{Accept:"application/json"}});if(!l.ok)throw new Error(`Erreur lors de la recherche de projets: ${l.status}`);return await l.json()}async listerProjetsAvecTachesDisponibles(s=0,r=10){const n=await fetch(`${this.BASE_URL}/public/avec-taches-disponibles?page=${s}&size=${r}`,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`Erreur lors de la rcupration des projets: ${n.status}`);return await n.json()}}const Ht=new jj,yj=({visiteurId:t,batchSize:s=5,filter:r="tous"})=>{const[n,a]=d.useState({items:[],expertCursor:"0",projetPage:0,hasMoreExperts:!0,hasMoreProjets:!0}),[l,i]=d.useState(!0),[c,o]=d.useState(!1),m=g=>({type:"expert",id:`expert-${g.id}`,data:g,score:g.rating||0}),j=g=>({type:"projet",id:`projet-${g.id}`,data:g,score:g.nombreTachesDisponibles||0}),x=(g,v)=>{const y=[],f=Math.max(g.length,v.length);for(let p=0;p<f;p++)p<v.length&&y.push(v[p]),p<g.length&&y.push(g[p]);return y},h=d.useCallback(async()=>{if(t)try{i(!0);const g=r==="tous"||r==="experts",v=r==="tous"||r==="projets";let y=[],f=[],p="0",b=0,E=!0,P=!0;if(g)try{const w=await Ua.scrollNext(t,"0",s);y=(w.pileContenu||[]).map(m),p=w.nextCursor||"0",E=y.length===s}catch(w){console.error("Erreur chargement experts:",w),E=!1}else E=!1;if(v)try{const w=await Ht.listerProjetsAvecTachesDisponibles(0,s);f=(w.content||[]).map(j),b=1,P=!w.last}catch(w){console.error("Erreur chargement projets:",w),P=!1}else P=!1;const k=r==="tous"?x(y,f):[...f,...y];a({items:k,expertCursor:p,projetPage:b,hasMoreExperts:E,hasMoreProjets:P})}catch(g){console.error("Erreur chargement initial:",g)}finally{i(!1)}},[t,s,r]),u=d.useCallback(async()=>{if(!(!t||c)&&!(!n.hasMoreExperts&&!n.hasMoreProjets))try{o(!0);const g=(r==="tous"||r==="experts")&&n.hasMoreExperts,v=(r==="tous"||r==="projets")&&n.hasMoreProjets;let y=[],f=[],p=n.expertCursor,b=n.projetPage,E=n.hasMoreExperts,P=n.hasMoreProjets;if(g)try{const w=await Ua.scrollNext(t,n.expertCursor,s);y=(w.pileContenu||[]).map(m),p=w.nextCursor||n.expertCursor,E=y.length===s}catch(w){console.error("Erreur chargement experts:",w),E=!1}if(v)try{const w=await Ht.listerProjetsAvecTachesDisponibles(n.projetPage,s);f=(w.content||[]).map(j),b=n.projetPage+1,P=!w.last}catch(w){console.error("Erreur chargement projets:",w),P=!1}const k=r==="tous"?x(y,f):[...f,...y];a(w=>({items:[...w.items,...k],expertCursor:p,projetPage:b,hasMoreExperts:E,hasMoreProjets:P}))}catch(g){console.error("Erreur chargement supplmentaire:",g)}finally{o(!1)}},[t,s,r,c,n]);return d.useEffect(()=>{a({items:[],expertCursor:"0",projetPage:0,hasMoreExperts:!0,hasMoreProjets:!0}),h()},[r,t]),{items:n.items,loading:l,isLoadingMore:c,loadMore:u,hasMore:n.hasMoreExperts||n.hasMoreProjets}};function Jr(t){var a;const{setConfig:s,resetConfig:r}=Xx(),n=((a=t.tabs)==null?void 0:a.map(l=>l.label).join("|"))||"";d.useEffect(()=>(s(t),()=>{r()}),[t.title,t.showSearch,t.visiteurId,t.activeTab,n])}function Nj({expert:t}){const s=t.prenom&&t.prenom.trim()!==""?`${t.prenom} ${t.nom}`:t.nom,r=t.disponible?"bg-success/20 text-success":"bg-error/20 text-error";return e.jsxs("div",{className:"flex gap-6 mb-6",children:[e.jsx("img",{src:t.photoUrl,alt:s,className:"w-40 h-40 rounded-full object-cover border-4 border-slate-200 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm ${r}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${t.disponible?"bg-success":"bg-error"}`}),e.jsx("span",{children:t.disponible?"Disponible":"Occup"})]})]}),e.jsx("p",{className:"text-lg text-primary font-medium mb-4",children:t.titre})]})]})}function wj({competence:t}){return e.jsxs("div",{className:`bg-slate-50 border ${t.favorite?"border-warning":"border-slate-200"} rounded-lg p-3`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[t.nom,t.favorite&&e.jsx($r,{className:"w-4 h-4 fill-warning text-warning"})]}),t.niveauMaitrise&&e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((s,r)=>e.jsx($r,{className:`w-3 h-3 ${r<t.niveauMaitrise?"fill-warning text-warning":"text-gray-300"}`},r))})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[t.anneesExperience!==void 0&&t.anneesExperience>0&&e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Exp.: ",t.anneesExperience," an",t.anneesExperience>1?"s":""]}),t.thm&&e.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:["THM: ",t.thm.toLocaleString()," FCFA/h"]}),t.nombreProjets!==void 0&&t.nombreProjets>0&&e.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded",children:["Nbre projet: ",t.nombreProjets]})]}),t.certifications&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Certifications: "}),t.certifications]})]})}function Ej({competences:t}){return e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Comptences et expertise:"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.map((s,r)=>e.jsx(wj,{competence:s},r))})]})}function Cj({expert:t}){return e.jsx("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:t.localisation})]})})}function Sj({expert:t,onPropose:s,onViewProfile:r,onShare:n}){return e.jsxs("div",{className:"relative w-full max-w-4xl",children:[e.jsxs("article",{"data-id":t.id,className:`card bg-white border border-slate-200 rounded-2xl p-8 w-full \r
                   h-[75vh] flex flex-col \r
                   shadow-2xl`,children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto pr-2",style:{scrollbarWidth:"thin",scrollbarColor:"#2a2f45 transparent"},children:[e.jsx(Nj,{expert:t}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:t.description}),e.jsx(Ej,{competences:t.competences})]}),e.jsx("div",{className:"mt-4 flex-shrink-0 h-24 relative",children:e.jsx(Cj,{expert:t,onPropose:s,onViewProfile:r,onShare:n})})]}),e.jsxs("div",{className:"absolute bottom-0 -right-20 flex flex-col gap-4",children:[n&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>n(t),className:"w-12 h-12 bg-primary hover:bg-primary-800 rounded-full flex items-center justify-center text-white transition-colors backdrop-blur-sm shadow-lg",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),e.jsx("span",{className:"text-xs text-gray-700 mt-1 font-medium",children:"Partager"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>r(t.id),className:"w-12 h-12 bg-primary hover:bg-primary-800 rounded-full flex items-center justify-center text-white transition-colors backdrop-blur-sm shadow-lg",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("span",{className:"text-xs text-gray-700 mt-1 font-medium",children:"Profil"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>s(t.id),className:"w-14 h-14 bg-primary hover:bg-primary-800 rounded-full flex items-center justify-center text-white transition-colors shadow-lg",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"})})}),e.jsx("span",{className:"text-xs text-primary font-semibold mt-1",children:"Proposer"})]})]})]})}const zm={BROUILLON:{label:"Brouillon",classe:"badge-ghost"},PUBLIE:{label:"Publi",classe:"badge-success"},EN_COURS:{label:"En cours",classe:"badge-info"},EN_PAUSE:{label:"En pause",classe:"badge-warning"},TERMINE:{label:"Termin",classe:"badge-neutral"},ANNULE:{label:"Annul",classe:"badge-error"}};function kj({projet:t,onViewDetails:s,onShare:r,onPostuler:n}){const a=zm[t.statut]||zm.BROUILLON,l=(c,o)=>c>=1e6?`${(c/1e6).toFixed(1)}M ${o}`:c>=1e3?`${(c/1e3).toFixed(0)}K ${o}`:`${c.toLocaleString()} ${o}`,i=c=>c?new Date(c).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):null;return e.jsxs("div",{className:"relative w-full max-w-4xl",children:[e.jsxs("article",{"data-id":`projet-${t.id}`,className:`card bg-gradient-to-br from-emerald-50 to-white border border-emerald-200 rounded-2xl p-8 w-full
                   h-[75vh] flex flex-col
                   shadow-2xl`,children:[e.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center flex-shrink-0 shadow-lg",children:e.jsx(Ft,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"badge badge-sm bg-emerald-100 text-emerald-700 border-emerald-300",children:"Projet"}),e.jsx("span",{className:`badge badge-sm ${a.classe}`,children:a.label})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2 line-clamp-2",children:t.nom}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[t.nombreTachesDisponibles>0&&e.jsxs("span",{className:"flex items-center gap-1 text-emerald-600 font-medium",children:[e.jsx(ze,{size:16}),t.nombreTachesDisponibles," tche",t.nombreTachesDisponibles>1?"s":""," disponible",t.nombreTachesDisponibles>1?"s":""]}),t.nombreTaches>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(bt,{size:16}),t.nombreTaches," tche",t.nombreTaches>1?"s":""," au total"]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto pr-2",style:{scrollbarWidth:"thin",scrollbarColor:"#10b981 transparent"},children:[t.description&&e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6 text-base",children:t.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[t.budget>0&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white rounded-xl border border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:e.jsx(il,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Budget"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:l(t.budget,t.devise)})]})]}),(t.dateDebutPrevue||t.dateFinPrevue)&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white rounded-xl border border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(ss,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Priode"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[i(t.dateDebutPrevue),t.dateFinPrevue&&e.jsxs(e.Fragment,{children:["  ",i(t.dateFinPrevue)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white rounded-xl border border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:e.jsx(ut,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Progression"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all",style:{width:`${t.progression}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[t.progression,"%"]})]})]})]}),t.nombreVues>0&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white rounded-xl border border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(qt,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Vues"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:t.nombreVues})]})]})]}),t.nombreEtapes>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Structure du projet"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsxs("span",{className:"badge badge-outline badge-lg",children:[t.nombreEtapes," tape",t.nombreEtapes>1?"s":""]}),e.jsxs("span",{className:"badge badge-outline badge-lg",children:[t.nombreTaches," tche",t.nombreTaches>1?"s":""]}),t.nombreCandidatures>0&&e.jsxs("span",{className:"badge badge-primary badge-lg",children:[t.nombreCandidatures," candidature",t.nombreCandidatures>1?"s":""]})]})]})]}),e.jsx("div",{className:"mt-4 flex-shrink-0 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Cr le ",i(t.dateCreation)]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n&&t.nombreTachesDisponibles>0&&e.jsxs("button",{onClick:()=>n(t.id),className:"btn btn-primary gap-2",children:[e.jsx(bt,{size:18}),"Postuler"]}),e.jsxs("button",{onClick:()=>s(t.id),className:"btn btn-outline btn-primary gap-2",children:["Voir les dtails",e.jsx(qr,{size:18})]})]})]})})]}),e.jsxs("div",{className:"absolute bottom-0 -right-20 flex flex-col gap-4",children:[r&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>r(t),className:"w-12 h-12 bg-emerald-600 hover:bg-emerald-700 rounded-full flex items-center justify-center text-white transition-colors backdrop-blur-sm shadow-lg",children:e.jsx(Bx,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs text-gray-700 mt-1 font-medium",children:"Partager"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>s(t.id),className:"w-12 h-12 bg-emerald-600 hover:bg-emerald-700 rounded-full flex items-center justify-center text-white transition-colors backdrop-blur-sm shadow-lg",children:e.jsx(qt,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs text-gray-700 mt-1 font-medium",children:"Dtails"})]}),n&&t.nombreTachesDisponibles>0&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>n(t.id),className:"w-14 h-14 bg-emerald-600 hover:bg-emerald-700 rounded-full flex items-center justify-center text-white transition-colors shadow-lg",children:e.jsx(Ft,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs text-emerald-600 font-semibold mt-1",children:"Postuler"})]})]})]})}function ol({children:t,variant:s="primary",size:r="md",className:n="",...a}){const l={primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost"},i={sm:"btn-sm",md:"btn-md",lg:"btn-lg"};return e.jsx("button",{className:`btn ${l[s]} ${i[r]} ${n}`,...a,children:t})}function Kx({expert:t,isOpen:s,onClose:r}){const[n,a]=d.useState(!1),[l,i]=d.useState(""),[c,o]=d.useState("");if(!s)return null;const m=`${window.location.origin}/expertise-profil/${t.id}`,j=async()=>{try{await navigator.clipboard.writeText(m),a(!0),setTimeout(()=>a(!1),2e3)}catch(y){console.error("Erreur lors de la copie:",y);const f=document.createElement("textarea");f.value=m,document.body.appendChild(f),f.select(),document.execCommand("copy"),document.body.removeChild(f),a(!0),setTimeout(()=>a(!1),2e3)}},x=()=>{const y=c.trim()||`Dcouvrez le profil de ${t.prenom} ${t.nom}, ${t.titre}`,f=`https://wa.me/?text=${encodeURIComponent(`${y}

${m}`)}`;window.open(f,"_blank")},h=()=>{const y=`Profil expert - ${t.prenom} ${t.nom}`,f=c.trim()||`Bonjour,

Je vous partage le profil de ${t.prenom} ${t.nom}, ${t.titre}.

Vous pouvez consulter son profil ici :`,p=`mailto:${l}?subject=${encodeURIComponent(y)}&body=${encodeURIComponent(`${f}

${m}`)}`;window.location.href=p},u=()=>{const y=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(m)}`;window.open(y,"_blank","width=600,height=400")},g=()=>{const y=c.trim()||`Dcouvrez le profil de ${t.prenom} ${t.nom}, ${t.titre}`,f=`https://twitter.com/intent/tweet?text=${encodeURIComponent(y)}&url=${encodeURIComponent(m)}`;window.open(f,"_blank","width=600,height=400")},v=()=>{const y=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(m)}`;window.open(y,"_blank","width=600,height=400")};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.photoUrl,alt:`${t.prenom} ${t.nom}`,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Partager le profil"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[t.prenom," ",t.nom]})]})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 p-1",children:""})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"bg-slate-100 border border-slate-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:m,readOnly:!0,className:"flex-1 bg-transparent text-gray-700 text-xs focus:outline-none truncate"}),e.jsx(ol,{onClick:j,size:"sm",className:`text-xs px-3 py-1 ${n?"bg-success/20 text-success":""}`,children:n?" Copi":"Copier"})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Partager via"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:x,className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center hover:bg-green-600 transition-colors",title:"WhatsApp",children:e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),e.jsx("button",{onClick:u,className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors",title:"Facebook",children:e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),e.jsx("button",{onClick:g,className:"w-10 h-10 bg-black rounded-full flex items-center justify-center hover:bg-gray-800 transition-colors",title:"X (Twitter)",children:e.jsx("svg",{className:"w-4 h-4 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),e.jsx("button",{onClick:v,className:"w-10 h-10 bg-blue-700 rounded-full flex items-center justify-center hover:bg-blue-800 transition-colors",title:"LinkedIn",children:e.jsx("svg",{className:"w-4 h-4 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Message (optionnel)"}),e.jsx("textarea",{value:c,onChange:y=>o(y.target.value),rows:2,className:`w-full px-3 py-2 bg-slate-100 border border-slate-200 rounded-lg\r
                       text-gray-900 text-sm placeholder-gray-500 focus:outline-none focus:ring-2\r
                       focus:ring-primary focus:border-transparent resize-none`,placeholder:"Ajoutez un message..."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Ou envoyer par email"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",value:l,onChange:y=>i(y.target.value),placeholder:"email@exemple.com",className:`flex-1 px-3 py-2 bg-slate-100 border border-slate-200 rounded-lg\r
                         text-gray-900 text-sm placeholder-gray-500 focus:outline-none focus:ring-2\r
                         focus:ring-primary focus:border-transparent`}),e.jsx(ol,{onClick:h,disabled:!l.trim(),size:"sm",className:"text-xs",children:"Envoyer"})]})]})]}),e.jsx("div",{className:"p-3 border-t border-slate-200 flex justify-end",children:e.jsx("button",{onClick:r,className:"text-sm text-gray-600 hover:text-gray-800 px-4 py-1.5",children:"Fermer"})})]})})}function _s(){return e.jsx("div",{className:"fixed inset-0 bg-slate-50/90 flex items-center justify-center z-50",children:e.jsx("span",{className:"loading loading-spinner loading-lg text-primary"})})}class Pj{constructor(){Ks(this,"BASE_URL","/api/taches")}async creerTache(s){const r=await Ee(this.BASE_URL,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`Erreur lors de la cration de la tche: ${r.status}`);return await r.json()}async modifierTache(s,r){const n=await Ee(`${this.BASE_URL}/${s}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Erreur lors de la modification de la tche: ${n.status}`);return await n.json()}async obtenirTache(s){const r=await fetch(`${this.BASE_URL}/${s}`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration de la tche: ${r.status}`);return await r.json()}async listerTachesProjet(s){const r=await fetch(`${this.BASE_URL}/projet/${s}`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration des tches: ${r.status}`);return await r.json()}async listerMesTaches(){const s=await Ee(`${this.BASE_URL}/mes-taches`,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la rcupration de mes tches: ${s.status}`);return await s.json()}async changerStatut(s,r){const n=await Ee(`${this.BASE_URL}/${s}/statut`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({statut:r})});if(!n.ok)throw new Error(`Erreur lors du changement de statut: ${n.status}`);return await n.json()}async assignerExpert(s,r){const n=await Ee(`${this.BASE_URL}/${s}/assigner`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({expertId:r})});if(!n.ok)throw new Error(`Erreur lors de l'assignation de l'expert: ${n.status}`);return await n.json()}async desassignerExpert(s){const r=await Ee(`${this.BASE_URL}/${s}/desassigner`,{method:"PUT",credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la dsassignation: ${r.status}`);return await r.json()}async supprimerTache(s){const r=await Ee(`${this.BASE_URL}/${s}`,{method:"DELETE",credentials:"include"});if(!r.ok)throw new Error(`Erreur lors de la suppression de la tche: ${r.status}`)}async ajouterLivrable(s,r,n){const a=await Ee(`${this.BASE_URL}/${s}/livrables`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({nom:r,description:n})});if(!a.ok)throw new Error(`Erreur lors de l'ajout du livrable: ${a.status}`);return await a.json()}async ajouterCommentaire(s){const r=await Ee(`${this.BASE_URL}/commentaires`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`Erreur lors de l'ajout du commentaire: ${r.status}`);return await r.json()}async listerCommentaires(s){const r=await fetch(`${this.BASE_URL}/${s}/commentaires`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration des commentaires: ${r.status}`);return await r.json()}async listerTachesDisponibles(s=0,r=10){const n=await fetch(`${this.BASE_URL}/disponibles?page=${s}&size=${r}`,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`Erreur lors de la rcupration des tches disponibles: ${n.status}`);return await n.json()}async listerTachesDisponiblesParCompetences(s,r=0,n=10){const a=new URLSearchParams({page:r.toString(),size:n.toString()});s.forEach(i=>a.append("competenceIds",i.toString()));const l=await fetch(`${this.BASE_URL}/disponibles/par-competences?${a}`,{headers:{Accept:"application/json"}});if(!l.ok)throw new Error(`Erreur lors de la rcupration des tches: ${l.status}`);return await l.json()}}const ar=new Pj;function Yx({expert:t,isOpen:s,onClose:r}){const[n,a]=d.useState([]),[l,i]=d.useState(!0),[c,o]=d.useState(!1),[m,j]=d.useState("");d.useEffect(()=>{s&&x()},[s]);const x=async()=>{i(!0);try{const p=await Ht.listerMesProjets(),b=await Promise.all(p.map(async E=>{let P=[];try{P=await ar.listerTachesProjet(E.id)}catch{}return{...E,taches:P,tachesSelectionnees:new Set,toutSelectionne:!1,expanded:!1}}));a(b)}catch(p){console.error("Erreur lors du chargement des projets:",p)}finally{i(!1)}},h=p=>{a(n.map(b=>b.id===p?{...b,expanded:!b.expanded}:b))},u=p=>{a(n.map(b=>{if(b.id===p){const E=!b.toutSelectionne,P=E?new Set(b.taches.map(k=>k.id)):new Set;return{...b,toutSelectionne:E,tachesSelectionnees:P,expanded:!0}}return b}))},g=(p,b)=>{a(n.map(E=>{if(E.id===p){const P=new Set(E.tachesSelectionnees);P.has(b)?P.delete(b):P.add(b);const k=P.size===E.taches.length&&E.taches.length>0;return{...E,tachesSelectionnees:P,toutSelectionne:k}}return E}))},v=()=>{const p=[];return n.forEach(b=>{b.tachesSelectionnees.size>0?b.tachesSelectionnees.forEach(E=>{p.push({projetId:b.id,tacheId:E})}):b.toutSelectionne&&b.taches.length===0&&p.push({projetId:b.id})}),p},y=async()=>{const p=v();if(p.length===0){alert("Veuillez slectionner au moins un projet ou une tche");return}o(!0);try{console.log("Proposition envoye:",{expertId:t.id,selections:p,message:m}),alert(`Proposition envoye  ${t.prenom} ${t.nom}`),r(),a(n.map(b=>({...b,tachesSelectionnees:new Set,toutSelectionne:!1,expanded:!1}))),j("")}catch(b){console.error("Erreur lors de l'envoi de la proposition:",b),alert("Erreur lors de l'envoi de la proposition")}finally{o(!1)}};if(!s)return null;const f=v().length;return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Proposer un projet"}),e.jsx("button",{onClick:r,className:"text-gray-600 hover:text-gray-800 text-xl",disabled:c,children:""})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("img",{src:t.photoUrl,alt:`${t.prenom} ${t.nom}`,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-800",children:[t.prenom," ",t.nom]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.titre})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(_s,{})}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-600 text-4xl mb-4",children:""}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Aucun projet disponible"}),e.jsx("p",{className:"text-gray-600",children:"Crez d'abord des projets pour pouvoir les proposer  des experts"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Message pour l'expert (optionnel)"}),e.jsx("textarea",{value:m,onChange:p=>j(p.target.value),rows:3,className:`w-full px-4 py-3 bg-slate-100 border border-slate-200 rounded-lg\r
                           text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2\r
                           focus:ring-primary focus:border-transparent resize-none`,placeholder:`Bonjour ${t.prenom}, j'aimerais collaborer avec vous sur...`,disabled:c})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-4",children:"Slectionnez les projets et tches  proposer"}),e.jsx("div",{className:"space-y-4",children:n.map(p=>e.jsxs("div",{className:"bg-slate-100 border border-slate-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.toutSelectionne,onChange:()=>u(p.id),className:`w-4 h-4 text-primary bg-slate-50 border-slate-200 rounded\r
                                       focus:ring-primary focus:ring-2`,disabled:c}),e.jsx("span",{className:"font-semibold text-gray-800",children:p.nom})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[p.taches.length," tche",p.taches.length>1?"s":""]}),p.taches.length>0&&e.jsx("button",{onClick:()=>h(p.id),className:"text-primary hover:underline text-sm",children:p.expanded?"Masquer":"Voir"})]})]}),p.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:p.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Budget:"}),e.jsxs("span",{className:"text-gray-700",children:[p.budget.toLocaleString("fr-FR")," ",p.devise]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Progression:"}),e.jsxs("span",{className:"text-gray-700",children:[p.progression,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Statut:"}),e.jsx("span",{className:"text-primary capitalize",children:p.statut.toLowerCase().replace("_"," ")})]})]}),p.expanded&&p.taches.length>0&&e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-gray-700 mb-3",children:"Tches du projet"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:p.taches.map(b=>e.jsxs("label",{className:`flex items-start gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-50/80\r
                                         transition-colors cursor-pointer`,children:[e.jsx("input",{type:"checkbox",checked:p.tachesSelectionnees.has(b.id),onChange:()=>g(p.id,b.id),className:`w-4 h-4 text-primary bg-slate-100 border-slate-200 rounded\r
                                           focus:ring-primary focus:ring-2 mt-0.5`,disabled:c}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-800 mb-1",children:b.nom}),b.description&&e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2",children:b.description}),e.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[b.budget>0&&e.jsxs("span",{children:["Budget: ",b.budget.toLocaleString("fr-FR")," FCFA"]}),b.delaiJours&&e.jsxs("span",{children:["Dlai: ",b.delaiJours," jours"]}),e.jsxs("span",{children:["Livrables: ",b.nombreLivrables]})]})]})]},b.id))})]})]},p.id))})]})]})}),!l&&n.length>0&&e.jsx("div",{className:"p-6 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[f," lment",f>1?"s":""," slectionn",f>1?"s":""]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(ol,{variant:"secondary",onClick:r,disabled:c,children:"Annuler"}),e.jsx(ol,{onClick:y,disabled:c||f===0,children:c?"Envoi...":"Envoyer la proposition"})]})]})})]})})}const Tj=({onLoadMore:t,threshold:s=400,isLoading:r=!1})=>{const n=d.useRef(null),a=d.useRef(null);return d.useEffect(()=>{const l={root:null,rootMargin:`${s}px`,threshold:.1};n.current=new IntersectionObserver(c=>{const[o]=c;o.isIntersecting&&!r&&t()},l);const i=a.current;return i&&n.current.observe(i),()=>{n.current&&i&&n.current.unobserve(i)}},[t,s,r]),a},Aj=t=>{const s=d.useRef(null),r=d.useRef(null),n=d.useCallback(async l=>{if(!(!t||!l)){if(s.current&&r.current){const i=Date.now()-r.current;try{await Ua.dwell(t,s.current,"DWELL_STOP",i)}catch(c){console.error("Failed to stop dwell:",c)}}s.current=l,r.current=Date.now();try{await Ua.dwell(t,l,"DWELL_START")}catch(i){console.error("Failed to start dwell:",i)}}},[t]),a=d.useCallback(async()=>{if(!t||!s.current||!r.current)return;const l=Date.now()-r.current;try{await Ua.dwell(t,s.current,"DWELL_STOP",l)}catch(i){console.error("Failed to stop dwell:",i)}s.current=null,r.current=null},[t]);return{startDwell:n,stopDwell:a}},Mj=[{value:"tous",label:"Tous",icon:Xi},{value:"projets",label:"Projets",icon:Ft},{value:"experts",label:"Experts",icon:bt}];function Rj({items:t,visiteurId:s,onLoadMore:r,isLoadingMore:n,hasMore:a,filter:l,onFilterChange:i}){const c=jt(),o=d.useRef(null),m=Tj({onLoadMore:r,threshold:400,isLoading:n}),{startDwell:j}=Aj(s),[x,h]=d.useState(null),[u,g]=d.useState(!1),[v,y]=d.useState(!1),[f,p]=d.useState(null);d.useEffect(()=>{const T=o.current;if(!T)return;let L=!1;const J=()=>{L||(window.requestAnimationFrame(()=>{const Q=Array.from(T.querySelectorAll("[data-id]"));let W=null,ce=0;const se=T.scrollTop,be=se+T.clientHeight;if(Q.forEach(A=>{const z=A.getBoundingClientRect(),S=z.top+T.scrollTop,$=z.bottom+T.scrollTop,D=Math.max(0,Math.min($,be)-Math.max(S,se));D>ce&&(ce=D,W=A)}),W){const A=W.getAttribute("data-id");A&&A!==x&&(h(A),j(A))}L=!1}),L=!0)};return T.addEventListener("scroll",J,{passive:!0}),()=>T.removeEventListener("scroll",J)},[x,j]);const b=T=>{const L=t.find(J=>J.type==="expert"&&J.data.id===T);L&&(p(L.data),y(!0))},E=T=>{c(`/expert/${T}`)},P=T=>{p(T),g(!0)},k=T=>{c(`/projets/${T}`)},w=T=>{c(`/projets/${T}?action=postuler`)},R=()=>{g(!1),y(!1),p(null)},I=T=>{if(T.type==="expert"){const L=T.data;return e.jsx(Sj,{expert:L,onPropose:b,onViewProfile:E,onShare:P})}else{const L=T.data;return e.jsx(kj,{projet:L,onViewDetails:k,onPostuler:w})}};return e.jsxs("div",{className:"flex flex-col h-screen",children:[e.jsx("div",{className:"flex-shrink-0 bg-base-100/95 backdrop-blur-sm border-b border-base-300 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-3",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:Mj.map(T=>{const L=T.icon,J=l===T.value;return e.jsxs("button",{onClick:()=>i(T.value),className:`btn btn-sm gap-2 ${J?T.value==="projets"?"btn-success":T.value==="experts"?"btn-primary":"btn-neutral":"btn-ghost"}`,children:[e.jsx(L,{size:16}),T.label]},T.value)})})})}),e.jsxs("div",{ref:o,className:"flex-1 overflow-y-scroll snap-y snap-mandatory px-4",style:{scrollBehavior:"smooth"},children:[t&&t.length>0?t.map(T=>e.jsx("div",{className:"h-screen flex items-center justify-center py-6 snap-start snap-always",children:I(T)},T.id)):e.jsx("div",{className:"h-screen flex flex-col items-center justify-center",children:e.jsx("div",{className:"text-center",children:l==="experts"?e.jsxs(e.Fragment,{children:[e.jsx(bt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-xl",children:"Aucun expert  afficher"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Revenez plus tard pour dcouvrir de nouveaux talents"})]}):l==="projets"?e.jsxs(e.Fragment,{children:[e.jsx(Ft,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-xl",children:"Aucun projet disponible"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Revenez plus tard pour dcouvrir de nouvelles opportunits"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-xl",children:"Aucun contenu  afficher"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Revenez plus tard pour dcouvrir experts et projets"})]})})}),a&&e.jsx("div",{ref:m,className:"h-10"}),n&&e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("span",{className:"loading loading-spinner loading-lg text-primary"})}),!a&&t.length>0&&e.jsx("div",{className:"h-40 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Vous avez tout vu !"})})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx(Kx,{expert:f,isOpen:u,onClose:R}),e.jsx(Yx,{expert:f,isOpen:v,onClose:R})]})]})}function Lj(){const{visiteurId:t,isInitialized:s}=gj(),[r,n]=d.useState("tous"),{items:a,loading:l,isLoadingMore:i,loadMore:c,hasMore:o}=yj({visiteurId:t,batchSize:5,filter:r});Jr({});const m=j=>{n(j)};return!s||l?e.jsx(_s,{}):e.jsx(Rj,{items:a,visiteurId:t,onLoadMore:c,isLoadingMore:i,hasMore:o,filter:r,onFilterChange:m})}const Om=[{value:"dev-web",label:"Dveloppement Web"},{value:"dev-mobile",label:"Dveloppement Mobile"},{value:"design",label:"Design & UX/UI"},{value:"marketing",label:"Marketing Digital"},{value:"redaction",label:"Rdaction & Content"},{value:"consulting",label:"Conseil & Stratgie"},{value:"finance",label:"Finance & Comptabilit"},{value:"juridique",label:"Juridique"},{value:"traduction",label:"Traduction"},{value:"data-science",label:"Data Science & IA"},{value:"cybersecurite",label:"Cyberscurit"},{value:"autre",label:"Autre"}],Zx=(t,s)=>{const{informationsPersonnelles:r,informationsExpert:n}=s;return{id:t,type:"expert",prenom:r.prenom||"",nom:r.nom||"",email:r.email||"",telephone:r.telephone||"",motDePasse:r.motDePasse||"",confirmMotDePasse:r.confirmMotDePasse||"",domaineExpertise:n.domaineExpertise||"",competences:n.competences||[],formation:n.formation||"",tarifHoraire:n.tarifHoraire||0,disponibilite:n.disponibilite||"",portfolio:n.portfolio||"",certifications:n.certifications||[],langues:n.langues||["Franais (natif)"],bio:n.bio||"",domainesInteret:n.domainesInteret||[],avatar:`https://i.pravatar.cc/200?u=${t}`,isVerified:Math.random()>.7,dateInscription:new Date().toISOString(),stats:{projetsRealises:Math.floor(Math.random()*50)+1,clientsSatisfaits:Math.floor(Math.random()*40)+1,tauxReussite:Math.floor(Math.random()*20)+80,anciennete:Math.floor(Math.random()*10)+1},avis:[],portfolioItems:[]}},Dj=(t,s)=>{const{informationsPersonnelles:r,informationsClient:n}=s;return{id:t,type:"client",prenom:r.prenom||"",nom:r.nom||"",email:r.email||"",telephone:r.telephone||"",motDePasse:r.motDePasse||"",confirmMotDePasse:r.confirmMotDePasse||"",nomEntreprise:n.nomEntreprise||"",secteurActivite:n.secteurActivite||"",tailleEntreprise:n.tailleEntreprise||"",poste:n.poste||"",adresse:n.adresse||"",siteWeb:n.siteWeb||"",description:n.description||"",avatar:`https://i.pravatar.cc/200?u=${t}`,isVerified:Math.random()>.8,dateInscription:new Date().toISOString(),projetsPublies:Math.floor(Math.random()*20)+1,expertsEmbauches:Math.floor(Math.random()*15)+1}};let as=[];const Ij=()=>{const t=[];for(let s=1;s<=20;s++){const r=Om[Math.floor(Math.random()*Om.length)],a=["React","Node.js","TypeScript","Python","Java","PHP","Angular","Vue.js"].slice(0,Math.floor(Math.random()*4)+1),l=Zx(`expert_${s}`,{informationsPersonnelles:{prenom:`Expert${s}`,nom:"Dupont",email:`expert${s}@pitm.com`,telephone:`+226 70 86 73 ${s.toString().padStart(2,"0")}`,motDePasse:"password123",confirmMotDePasse:"password123"},informationsExpert:{domaineExpertise:r.value,competences:a,tarifHoraire:Math.floor(Math.random()*1e4)+3e3,disponibilite:["temps-plein","temps-partiel","mission-courte"][Math.floor(Math.random()*3)],bio:`Expert passionn en ${r.label}.`,certifications:[],langues:["Franais (natif)","Anglais (courant)"],domainesInteret:[r.value]}});t.push(l)}return t};as=Ij();const zj={inscrire:async t=>new Promise((s,r)=>{setTimeout(()=>{try{if(as.find(c=>c.email===t.informationsPersonnelles.email)){r({success:!1,message:"Cet email est dj utilis"});return}const a=`${t.typeCompte}_${Date.now()}`;let l;t.typeCompte==="expert"?l=Zx(a,t):l=Dj(a,t),as.push(l);const i=`token_${a}_${Date.now()}`;s({success:!0,utilisateur:l,token:i,message:"Inscription russie ! Bienvenue sur PITM."})}catch{r({success:!1,message:"Erreur lors de l'inscription"})}},1500)}),connecter:async(t,s)=>new Promise((r,n)=>{setTimeout(()=>{const a=as.find(i=>i.email===t);if(!a){n({success:!1,message:"Email ou mot de passe incorrect"});return}if(a.motDePasse!==s){n({success:!1,message:"Email ou mot de passe incorrect"});return}const l=`token_${a.id}_${Date.now()}`;r({success:!0,utilisateur:a,token:l,message:"Connexion russie"})},1e3)}),obtenirProfil:async t=>new Promise(s=>{setTimeout(()=>{const r=as.find(n=>n.id===t);s(r||null)},500)}),mettreAJourProfil:async(t,s)=>new Promise((r,n)=>{setTimeout(()=>{const a=as.findIndex(l=>l.id===t);if(a===-1){n(new Error("Utilisateur non trouv"));return}as[a]={...as[a],...s},r(as[a])},800)}),rechercherExperts:async t=>new Promise(s=>{setTimeout(()=>{let r=as.filter(n=>n.type==="expert");t&&(t.domaine&&(r=r.filter(n=>n.domaineExpertise===t.domaine)),t.competences&&t.competences.length>0&&(r=r.filter(n=>t.competences.some(a=>n.competences.some(l=>l.toLowerCase().includes(a.toLowerCase()))))),t.tarifMax&&(r=r.filter(n=>n.tarifHoraire<=t.tarifMax)),t.disponibilite&&(r=r.filter(n=>n.disponibilite===t.disponibilite))),r.sort((n,a)=>a.stats.tauxReussite-n.stats.tauxReussite),s(r)},600)}),changerMotDePasse:async(t,s,r)=>new Promise((n,a)=>{setTimeout(()=>{const l=as.find(i=>i.id===t);if(!l){a({success:!1,message:"Utilisateur non trouv"});return}if(l.motDePasse!==s){a({success:!1,message:"L'ancien mot de passe est incorrect"});return}l.motDePasse=r,l.confirmMotDePasse=r,n({success:!0,message:"Mot de passe modifi avec succs"})},800)}),obtenirStatistiques:async()=>new Promise(t=>{setTimeout(()=>{const s=as.filter(i=>i.type==="expert"),r=as.filter(i=>i.type==="client"),n=s.filter(i=>i.disponibilite&&i.disponibilite!=="indisponible").length,a={};s.forEach(i=>{i.domaineExpertise&&(a[i.domaineExpertise]=(a[i.domaineExpertise]||0)+1)});const l=Object.entries(a).map(([i,c])=>({domaine:i,count:c})).sort((i,c)=>c.count-i.count).slice(0,5);t({totalExperts:s.length,totalClients:r.length,expertsDispo:n,domainesPopulaires:l})},400)})};function ef({utilisateurId:t}){const[s,r]=d.useState(null),[n,a]=d.useState("apropos"),[l,i]=d.useState(!0);d.useEffect(()=>{c()},[t]);const c=async()=>{try{i(!0);let u=t;if(!u){const g=localStorage.getItem("pitm_utilisateur");g&&(u=JSON.parse(g).id)}if(u){const g=await zj.obtenirProfil(u);r(g)}}catch(u){console.error("Erreur lors du chargement du profil:",u)}finally{i(!1)}};if(l)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!s)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Profil non trouv"})});const o=s.type==="expert"?[{id:"apropos",label:" propos",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{id:"competences",label:"Comptences",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"portfolio",label:"Portfolio",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}]:[{id:"apropos",label:" propos",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{id:"entreprise",label:"Entreprise",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{id:"projets",label:"Projets",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}],m=()=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6 mb-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.avatar||`https://i.pravatar.cc/200?u=${s.id}`,alt:`${s.prenom} ${s.nom}`,className:"w-24 h-24 rounded-full object-cover ring-4 ring-white shadow-lg"}),s.isVerified&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:[s.prenom," ",s.nom]}),s.type==="expert"&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-lg text-primary font-semibold mb-1",children:s.domaineExpertise?s.domaineExpertise.charAt(0).toUpperCase()+s.domaineExpertise.slice(1).replace("-"," "):"Expert"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Burkina Faso"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),s.stats.tauxReussite,"% russite"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),s.tarifHoraire," FCFA/h"]})]})]}),s.type==="client"&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-lg text-primary font-semibold mb-1",children:[s.poste," chez ",s.nomEntreprise]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.secteurActivite]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),s.tailleEntreprise]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.email]})]})]}),s.type==="expert"&&e.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.stats.projetsRealises}),e.jsx("p",{className:"text-sm text-gray-600",children:"Projets raliss"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.stats.clientsSatisfaits}),e.jsx("p",{className:"text-sm text-gray-600",children:"Clients satisfaits"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.stats.anciennete}),e.jsx("p",{className:"text-sm text-gray-600",children:"Annes d'exp."})]})]}),s.type==="client"&&e.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.projetsPublies}),e.jsx("p",{className:"text-sm text-gray-600",children:"Projets publis"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.expertsEmbauches}),e.jsx("p",{className:"text-sm text-gray-600",children:"Experts embauchs"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-800 transition-colors",children:"Contacter"}),e.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Partager"})]})]})}),j=()=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border mb-6",children:e.jsx("div",{className:"flex border-b border-gray-200",children:o.map(u=>e.jsxs("button",{onClick:()=>a(u.id),className:`flex-1 flex items-center justify-center gap-2 py-4 px-6 transition-colors relative ${n===u.id?"text-primary bg-primary/5":"text-gray-600 hover:text-gray-700"}`,children:[e.jsx("span",{children:u.icon}),e.jsx("span",{className:"font-medium",children:u.label}),n===u.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]},u.id))})}),x=()=>{var g,v;const u=s;switch(n){case"apropos":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" propos"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:u.bio})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{className:"text-gray-700",children:u.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"text-gray-700",children:u.telephone})]}),u.portfolio&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),e.jsx("a",{href:u.portfolio,className:"text-primary hover:underline",children:"Portfolio"})]})]})]})]});case"competences":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Comptences principales"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.competences.map((y,f)=>e.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-medium",children:y},f))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Langues"}),e.jsx("div",{className:"space-y-2",children:u.langues.map((y,f)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsx("span",{className:"text-gray-700",children:y})]},f))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Disponibilit"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${u.disponibilite==="indisponible"?"bg-primary/10 text-primary":"bg-green-100 text-green-700"}`,children:((g=u.disponibilite)==null?void 0:g.charAt(0).toUpperCase())+((v=u.disponibilite)==null?void 0:v.slice(1).replace("-"," "))||"Non spcifie"})]})]});case"portfolio":return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Portfolio"}),e.jsxs("div",{className:"text-center py-8 text-gray-600",children:[e.jsx("p",{children:"Aucun projet ajout pour le moment"}),e.jsx("p",{className:"text-sm mt-2",children:"Les projets apparatront ici une fois ajouts"})]})]});default:return null}},h=()=>{const u=s;switch(n){case"apropos":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" propos"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:u.description})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{className:"text-gray-700",children:u.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"text-gray-700",children:u.telephone})]}),u.adresse&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-gray-700",children:u.adresse})]}),u.siteWeb&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),e.jsx("a",{href:u.siteWeb,className:"text-primary hover:underline",children:"Site web"})]})]})]})]});case"entreprise":return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informations entreprise"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Nom de l'entreprise"}),e.jsx("p",{className:"text-gray-900",children:u.nomEntreprise})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Secteur d'activit"}),e.jsx("p",{className:"text-gray-900",children:u.secteurActivite})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Taille de l'entreprise"}),e.jsx("p",{className:"text-gray-900",children:u.tailleEntreprise})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Poste"}),e.jsx("p",{className:"text-gray-900",children:u.poste})]})]})]});case"projets":return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Projets publis"}),e.jsxs("div",{className:"text-center py-8 text-gray-600",children:[e.jsx("p",{children:"Aucun projet publi pour le moment"}),e.jsx("p",{className:"text-sm mt-2",children:"Les projets apparatront ici une fois publis"})]})]});default:return null}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[m(),j(),e.jsx("div",{children:s.type==="expert"?x():h()})]})}function Oj(){const{id:t}=bn();return t?e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsx(ef,{utilisateurId:t})}):e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600",children:"Expert non trouv"})})})}function _j(){return e.jsx("div",{className:"min-h-screen bg-slate-50 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(t=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[e.jsx("div",{className:"w-full h-40 bg-slate-100 rounded-lg mb-4"}),e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Expert ",t]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Dcouvrez les meilleurs experts dans diffrents domaines"})]},t))})})})}function $j(){const[t,s]=d.useState([]),[r,n]=d.useState(!0),[a,l]=d.useState(null),[i,c]=d.useState(""),[o,m]=d.useState("tous");Jr({title:"Mon rseau"}),d.useEffect(()=>{j()},[]);const j=async()=>{try{n(!0);const g=await fetch("/api/expertise/reseau");if(g.ok){const v=await g.json();s(Array.isArray(v)?v:[])}else s([])}catch(g){console.error("Erreur lors du chargement des experts du rseau:",g),s([])}finally{n(!1)}},x=async g=>{try{l(g),(await fetch(`/api/expertise/reseau/${g}`,{method:"DELETE"})).ok&&s(y=>y.filter(f=>f.utilisateurId!==g))}catch(v){console.error("Erreur lors du retrait de l'expert du rseau:",v)}finally{l(null)}},h=d.useMemo(()=>{const g=t.filter(v=>v.disponible).length;return{total:t.length,disponibles:g,indisponibles:t.length-g}},[t]),u=d.useMemo(()=>t.filter(g=>{var f,p,b;const v=i===""||g.titre.toLowerCase().includes(i.toLowerCase())||((f=g.description)==null?void 0:f.toLowerCase().includes(i.toLowerCase()))||((p=g.localisation)==null?void 0:p.toLowerCase().includes(i.toLowerCase()))||((b=g.competences)==null?void 0:b.some(E=>E.nom.toLowerCase().includes(i.toLowerCase()))),y=o==="tous"||o==="disponibles"&&g.disponible||o==="indisponibles"&&!g.disponible;return v&&y}),[t,i,o]);return r?e.jsx("div",{className:"p-4 sm:p-6 flex justify-center items-center min-h-96",children:e.jsx("span",{className:"loading loading-spinner loading-lg text-primary"})}):e.jsx("div",{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-transparent rounded-lg px-4 py-2.5 border border-primary/20",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(bt,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold text-base-content",children:"Mon Rseau"}),e.jsx("p",{className:"text-[11px] text-base-content/60",children:t.length===0?"Construisez votre rseau d'experts":"Vos experts favoris"})]})]}),t.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-base-100 rounded-md border border-base-200",children:[e.jsx(bt,{className:"w-3.5 h-3.5 text-primary"}),e.jsx("span",{className:"text-xs font-semibold",children:h.total})]}),e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-success/10 rounded-md border border-success/20",children:[e.jsx(ea,{className:"w-3.5 h-3.5 text-success"}),e.jsx("span",{className:"text-xs font-semibold text-success",children:h.disponibles})]})]})]})}),t.length===0?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-base-200 rounded-full flex items-center justify-center",children:e.jsx(bt,{className:"w-10 h-10 text-base-content/30"})}),e.jsx("h3",{className:"text-lg font-semibold text-base-content mb-2",children:"Votre rseau est vide"}),e.jsx("p",{className:"text-sm text-base-content/60 mb-6 max-w-sm mx-auto",children:"Ajoutez des experts  votre rseau pour les retrouver facilement et suivre leur activit"}),e.jsxs(kt,{to:"/rechercher",className:"btn btn-primary btn-sm gap-2",children:[e.jsx(us,{className:"w-4 h-4"}),"Dcouvrir des experts"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-base-content/40"}),e.jsx("input",{type:"text",placeholder:"Rechercher par nom, comptence, lieu...",className:"input input-bordered input-sm w-full pl-9 pr-4",value:i,onChange:g=>c(g.target.value)}),i&&e.jsx("button",{onClick:()=>c(""),className:"absolute right-2 top-1/2 -translate-y-1/2 btn btn-ghost btn-xs btn-circle",children:e.jsx(ds,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-base-200/50 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>m("tous"),className:`btn btn-xs gap-1 ${o==="tous"?"btn-primary":"btn-ghost"}`,children:[e.jsx(zx,{className:"w-3 h-3"}),"Tous"]}),e.jsxs("button",{onClick:()=>m("disponibles"),className:`btn btn-xs gap-1 ${o==="disponibles"?"btn-success":"btn-ghost"}`,children:[e.jsx(ea,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Disponibles"}),e.jsx("span",{className:"sm:hidden",children:"Dispo"})]}),e.jsxs("button",{onClick:()=>m("indisponibles"),className:`btn btn-xs gap-1 ${o==="indisponibles"?"btn-neutral":"btn-ghost"}`,children:[e.jsx(Qb,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Indisponibles"}),e.jsx("span",{className:"sm:hidden",children:"Indispo"})]})]})]}),u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(us,{className:"w-10 h-10 text-base-content/20 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-base-content/60",children:"Aucun expert ne correspond  vos critres"}),e.jsx("button",{onClick:()=>{c(""),m("tous")},className:"btn btn-ghost btn-sm mt-2",children:"Rinitialiser les filtres"})]}):e.jsxs(e.Fragment,{children:[(i||o!=="tous")&&e.jsxs("p",{className:"text-xs text-base-content/60",children:[u.length," rsultat",u.length>1?"s":""," sur ",t.length]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:u.map(g=>e.jsxs("div",{className:"group bg-primary/5 rounded-xl border border-primary/20 shadow-sm hover:shadow-lg hover:border-primary/40 hover:-translate-y-0.5 transition-all duration-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(kt,{to:`/expertise-profil/${g.utilisateurId}`,className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden ring-2 ring-primary/20 group-hover:ring-primary/40 transition-all",children:g.photoUrl?e.jsx("img",{src:g.photoUrl,alt:g.titre,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white font-bold text-lg",children:g.titre.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(kt,{to:`/expertise-profil/${g.utilisateurId}`,className:"block font-semibold text-sm text-base-content hover:text-primary transition-colors truncate",title:g.titre,children:g.titre}),g.localisation&&e.jsxs("p",{className:"flex items-center gap-1 text-xs text-base-content/70 mt-0.5 truncate",children:[e.jsx(Ir,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:g.localisation})]}),e.jsx("div",{className:"mt-1.5",children:g.disponible?e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-success font-medium",children:[e.jsx(Qi,{className:"w-3 h-3"}),"Disponible"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-base-content/60",children:[e.jsx(ds,{className:"w-3 h-3"}),"Indisponible"]})})]})]}),g.description&&e.jsx("p",{className:"text-xs text-base-content/70 mt-3 line-clamp-2",children:g.description}),g.competences&&g.competences.length>0&&e.jsxs("div",{className:"mt-3 flex items-center gap-1.5 flex-wrap",children:[e.jsx(Ft,{className:"w-3 h-3 text-primary/60 flex-shrink-0"}),g.competences.slice(0,2).map((v,y)=>e.jsx("span",{className:"px-2 py-0.5 bg-base-100/80 border border-base-300 text-base-content text-xs rounded-full truncate max-w-[100px]",title:v.nom,children:v.nom},y)),g.competences.length>2&&e.jsxs("span",{className:"text-xs text-primary font-medium",children:["+",g.competences.length-2]})]})]}),e.jsxs("div",{className:"px-4 py-2.5 bg-base-100/60 border-t border-primary/10 flex items-center gap-2",children:[e.jsxs(kt,{to:`/expertise-profil/${g.utilisateurId}`,className:"btn btn-sm btn-ghost flex-1 gap-1 text-xs",children:[e.jsx(Ix,{className:"w-3.5 h-3.5"}),"Voir le profil"]}),e.jsx("div",{className:"tooltip tooltip-left","data-tip":"Retirer du rseau",children:e.jsx("button",{onClick:()=>x(g.utilisateurId),className:"btn btn-sm btn-ghost text-error hover:bg-error/10",disabled:a===g.utilisateurId,children:a===g.utilisateurId?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(Ti,{className:"w-4 h-4"})})})]})]},g.utilisateurId))})]})]})]})})}function _m(){const{id:t}=bn(),[s,r]=d.useState(null);return d.useEffect(()=>{if(t)r(t);else{const n=localStorage.getItem("pitm_session");if(n)try{const a=JSON.parse(n);r(a.visiteurId)}catch(a){console.error("Erreur lors de la lecture de la session:",a),r("visiteur_"+Date.now())}else r("visiteur_"+Date.now())}},[t]),s?e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsx(ef,{utilisateurId:s})}):e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600",children:"Chargement du profil..."})})})}class Uj{constructor(){Ks(this,"API_URL","/api/profil")}async getProfil(){const s=await fetch(this.API_URL,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error("Erreur lors de la rcupration du profil");return s.json()}async updateProfil(s){const r=await fetch(this.API_URL,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!r.ok){try{const l=r.headers.get("content-type");if(l&&l.includes("application/json")){const i=await r.text();if(i){const c=JSON.parse(i);throw new Error(c.error||"Erreur lors de la mise  jour du profil")}}}catch{}throw new Error(`Erreur ${r.status}: ${r.statusText}`)}const n=r.headers.get("content-type");let a={success:!0,message:"Profil mis  jour",profil:{}};if(n&&n.includes("application/json")){const l=await r.text();if(l)try{a=JSON.parse(l)}catch(i){console.error("Erreur parsing JSON:",i)}}return a}async isProfilComplet(){const s=await fetch(`${this.API_URL}/complet`,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error("Erreur lors de la vrification du profil");return(await s.json()).profilComplet}async uploadPhoto(s){const r=new FormData;r.append("photo",s);const n=await fetch(`${this.API_URL}/photo`,{method:"POST",credentials:"include",body:r}),a=await n.json();if(!n.ok)throw new Error(a.error||"Erreur lors de l'upload de la photo");return a}getPhotoUrl(){return`${this.API_URL}/photo?t=${Date.now()}`}async supprimerPhoto(){const s=await fetch(`${this.API_URL}/photo`,{method:"DELETE",credentials:"include"}),r=await s.json();if(!s.ok)throw new Error(r.error||"Erreur lors de la suppression de la photo");return r}async changerMotDePasse(s,r,n){const a=await fetch(`${this.API_URL}/mot-de-passe`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({motDePasseActuel:s,nouveauMotDePasse:r,confirmationMotDePasse:n})}),l=await a.json();if(!a.ok)throw new Error(l.error||"Erreur lors du changement de mot de passe");return l}}const Xr=new Uj;function Fj({formData:t,setFormData:s,domainesInteret:r,setDomainesInteret:n,onSave:a,isSaving:l}){var h;const[i,c]=d.useState([]),[o,m]=d.useState(!0),j=d.useRef(!1);d.useEffect(()=>{(async()=>{try{m(!0);const v=await(await fetch("/api/competences-reference/domaines")).json();if(Array.isArray(v)&&v.length>0)c(v),localStorage.setItem("domaines_cache",JSON.stringify(v)),console.log("Domaines chargs depuis l'API et mis en cache");else throw new Error("Donnes invalides reues de l'API")}catch(g){console.error("Erreur lors du chargement des domaines depuis l'API:",g);const v=localStorage.getItem("domaines_cache");if(v)try{const y=JSON.parse(v);if(Array.isArray(y)&&y.length>0)c(y),console.log("Domaines chargs depuis le cache local (donnes API prcdentes)");else throw new Error("Cache invalide")}catch(y){console.error("Erreur lors du parsing du cache:",y),localStorage.removeItem("domaines_cache"),c([]),console.warn("Cache corrompu supprim - Liste vide en attente de donnes API")}else c([]),console.warn("Aucun cache disponible - Liste vide en attente de donnes API")}finally{m(!1)}})()},[]),d.useEffect(()=>{if(!o&&i.length>0&&!j.current){const u=r.filter(g=>i.includes(g));u.length!==r.length&&(console.log(" Nettoyage des domaines obsoltes:",{avant:r,aprs:u,supprims:r.filter(g=>!i.includes(g))}),n(u)),j.current=!0}},[o,i,r,n]);const x=u=>{r.includes(u)?n(r.filter(g=>g!==u)):n([...r,u])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:["Informations professionnelles",e.jsx("span",{className:"text-sm text-gray-500 font-normal ml-2",children:"(optionnel)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-900 font-medium mb-2",children:"Domaine d'expertise"}),e.jsxs("select",{value:t.domaineExpertise||"",onChange:u=>s({...t,domaineExpertise:u.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary",disabled:o||i.length===0,children:[e.jsx("option",{value:"",children:o?"Chargement des domaines...":i.length===0?"Aucun domaine disponible":"Slectionnez un domaine"}),i.map(u=>e.jsx("option",{value:u,children:u},u))]}),!o&&i.length===0&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Impossible de charger les domaines. Veuillez vrifier votre connexion ou ressayer plus tard."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-900 font-medium mb-2",children:"Biographie / Description"}),e.jsx("textarea",{value:t.biographie||"",onChange:u=>s({...t,biographie:u.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:"Dcrivez votre parcours, vos spcialits et vos objectifs...",maxLength:2e3}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[((h=t.biographie)==null?void 0:h.length)||0," / 2000 caractres"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-900 font-medium mb-2",children:"Domaines d'intrt"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Types de projets qui vous intressent"}),o?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{children:"Chargement des domaines..."})]}):i.length===0?e.jsxs("div",{className:"text-center py-8 border border-red-200 rounded-lg bg-red-50",children:[e.jsx("p",{className:"text-red-600 mb-2",children:" Aucun domaine disponible"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Veuillez vrifier votre connexion ou ressayer plus tard."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:i.map(u=>e.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:r.includes(u),onChange:()=>x(u),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary focus:ring-2"}),e.jsx("span",{className:"ml-3 text-gray-900",children:u})]},u))})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:a,disabled:l,className:"flex items-center gap-2 px-8 py-3 bg-primary text-white rounded-lg hover:bg-primary-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-lg",children:[e.jsx(Js,{size:20}),l?"Enregistrement...":"Enregistrer"]})})]})}function Bj(){const t=jt(),[s,r]=d.useState("personnel"),[n,a]=d.useState(null),[l,i]=d.useState(!0),[c,o]=d.useState(!1),[m,j]=d.useState(null),[x,h]=d.useState({}),[u,g]=d.useState({typePersonne:"PHYSIQUE",nom:"",prenom:"",telephone:"",dateNaissance:void 0,domaineExpertise:"",experience:"",biographie:""}),[v,y]=d.useState([]),[f,p]=d.useState(""),[b,E]=d.useState(""),[P,k]=d.useState(""),[w,R]=d.useState(!1),[I,T]=d.useState(!1),[L,J]=d.useState(!1),[Q,W]=d.useState(!1),[ce,se]=d.useState(null),be=d.useRef(null),[A,z]=d.useState(null),[S,$]=d.useState(null),[D,q]=d.useState(!1),[ie,me]=d.useState(Date.now());d.useEffect(()=>{Pe()},[]);const Pe=async()=>{var H;try{i(!0);const ae=await Xr.getProfil();a(ae);const ke=ae.informationsPersonnelles,Te=ae.informationsProfessionnelles;g({typePersonne:ke.typePersonne||"PHYSIQUE",nom:ke.nom||"",prenom:ke.prenom||"",telephone:ke.telephone||"",dateNaissance:ke.dateNaissance,domaineExpertise:Te.domaineExpertise||"",experience:Te.experience||"",biographie:Te.biographie||""}),console.log(" [FRONTEND] Domaines d'intrt reus du backend:",Te.domainesInteret),y(Te.domainesInteret||[]),console.log(" [FRONTEND] State domainesInteret initialis")}catch(ae){console.error("Erreur lors du chargement du profil:",ae),(H=ae==null?void 0:ae.message)!=null&&H.includes("401")?(Ne("error","Veuillez vous connecter pour accder  votre profil"),setTimeout(()=>t("/"),2e3)):Ne("error","Erreur lors du chargement du profil")}finally{i(!1)}},Ne=(H,ae)=>{j({type:H,texte:ae}),setTimeout(()=>j(null),5e3)},Le=()=>{var ae,ke,Te;const H={};return(ae=u.nom)!=null&&ae.trim()||(H.nom="Le nom est obligatoire"),u.typePersonne==="PHYSIQUE"&&!((ke=u.prenom)!=null&&ke.trim())&&(H.prenom="Le prnom est obligatoire pour une personne physique"),(Te=u.telephone)!=null&&Te.trim()?/^\+?[0-9]{10,15}$/.test(u.telephone.replace(/\s/g,""))||(H.telephone="Format de tlphone invalide"):H.telephone="Le tlphone est obligatoire",u.dateNaissance||(H.dateNaissance=u.typePersonne==="PHYSIQUE"?"La date de naissance est obligatoire":"La date de cration est obligatoire"),h(H),Object.keys(H).length===0},Y=async()=>{var H;if(!Le()){Ne("error","Veuillez remplir tous les champs obligatoires");return}o(!0);try{const ae={...u,domainesInteret:JSON.stringify(v)};console.log(" [FRONTEND] Domaines d'intrt envoys:",v),console.log(" [FRONTEND] Domaines d'intrt JSON:",ae.domainesInteret),u.typePersonne==="MORALE"&&(ae.prenom="");const ke=await Xr.updateProfil(ae);a(ke.profil),console.log(" [FRONTEND] Rponse du serveur - domaines d'intrt:",(H=ke.profil.informationsProfessionnelles)==null?void 0:H.domainesInteret),ke.profil.informationsProfessionnelles&&(y(ke.profil.informationsProfessionnelles.domainesInteret||[]),console.log(" [FRONTEND] State domainesInteret synchronis aprs sauvegarde")),Ne("success",ke.message),ke.profil.profilComplet&&setTimeout(()=>{t("/")},2e3)}catch(ae){console.error("Erreur lors de la sauvegarde:",ae),Ne("error",ae.message||"Erreur lors de la sauvegarde du profil")}finally{o(!1)}},ve=H=>{var Me;const ae=(Me=H.target.files)==null?void 0:Me[0];if(!ae)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(ae.type)){Ne("error","Type de fichier non accept. Utilisez JPEG, PNG, GIF ou WebP");return}if(ae.size>5*1024*1024){Ne("error","Le fichier est trop volumineux (max 5 MB)");return}const Te=new FileReader;Te.onloadend=()=>{z(Te.result)},Te.readAsDataURL(ae),$(ae)},O=()=>{z(null),$(null),be.current&&(be.current.value="")},re=async()=>{if(S){q(!0);try{await Xr.uploadPhoto(S),Ne("success","Photo mise  jour avec succs"),z(null),$(null),me(Date.now());const H=await Xr.getProfil();a(H)}catch(H){Ne("error",H.message||"Erreur lors de l'upload de la photo")}finally{q(!1)}}},ne=async()=>{q(!0);try{await Xr.supprimerPhoto(),Ne("success","Photo supprime avec succs"),me(Date.now());const H=await Xr.getProfil();a(H)}catch(H){Ne("error",H.message||"Erreur lors de la suppression de la photo")}finally{q(!1)}},we=async()=>{if(se(null),!f.trim()){se("Le mot de passe actuel est requis");return}if(!b.trim()){se("Le nouveau mot de passe est requis");return}if(b.length<8){se("Le nouveau mot de passe doit contenir au moins 8 caractres");return}if(b!==P){se("Les mots de passe ne correspondent pas");return}if(f===b){se("Le nouveau mot de passe doit tre diffrent de l'ancien");return}W(!0);try{const H=await Xr.changerMotDePasse(f,b,P);Ne("success",H.message||"Mot de passe modifi avec succs"),p(""),E(""),k("")}catch(H){console.error("Erreur lors du changement de mot de passe:",H),se(H.message||"Erreur lors du changement de mot de passe")}finally{W(!1)}},U=n!=null&&n.hasOAuthProvider?[{id:"personnel",label:"Informations gnrales",icon:Vs},{id:"professionnel",label:"Informations professionnelles",icon:Ft}]:[{id:"personnel",label:"Informations gnrales",icon:Vs},{id:"motdepasse",label:"Mot de passe",icon:Oc},{id:"professionnel",label:"Informations professionnelles",icon:Ft}];return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement du profil..."})]})}):e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[!(n!=null&&n.profilComplet)&&e.jsx("div",{className:"mb-6 p-4 bg-amber-50 border-l-4 border-amber-500 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ge,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-900",children:"Profil incomplet"}),e.jsx("p",{className:"text-amber-700 text-sm mt-1",children:`Veuillez remplir tous les champs obligatoires (*) dans l'onglet "Informations gnrales" pour exploiter toutes les fonctionnalits de la plateforme.`})]})]})}),m&&e.jsxs("div",{className:`mb-6 px-4 py-3 rounded-lg flex items-center gap-3 ${m.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:[m.type==="success"?e.jsx(ze,{size:20,className:"flex-shrink-0"}):e.jsx(Ge,{size:20,className:"flex-shrink-0"}),e.jsx("span",{children:m.texte})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-gray-200",children:U.map(H=>{const ae=H.icon;return e.jsxs("button",{onClick:()=>r(H.id),className:`flex-1 flex items-center justify-center gap-2 px-6 py-4 font-medium transition-all relative ${s===H.id?"text-primary bg-primary/5":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(ae,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:H.label}),s===H.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-primary"})]},H.id)})}),e.jsxs("div",{className:"p-8",children:[s==="personnel"&&e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-900 font-medium mb-3",children:"Type de compte *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>{g(H=>({...H,typePersonne:"PHYSIQUE"})),h(H=>({...H,prenom:""}))},className:`p-4 border-2 rounded-lg transition-all ${u.typePersonne==="PHYSIQUE"?"border-primary bg-primary/5 shadow-sm":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx(Vs,{className:"mx-auto mb-2",size:24}),e.jsx("div",{className:"font-medium text-gray-900",children:"Personne physique"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Particulier"})]}),e.jsxs("button",{type:"button",onClick:()=>{g(H=>({...H,typePersonne:"MORALE",prenom:""})),h(H=>({...H,prenom:""}))},className:`p-4 border-2 rounded-lg transition-all ${u.typePersonne==="MORALE"?"border-primary bg-primary/5 shadow-sm":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx(Si,{className:"mx-auto mb-2",size:24}),e.jsx("div",{className:"font-medium text-gray-900",children:"Personne morale"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Entreprise, association"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.typePersonne==="PHYSIQUE"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-900 font-medium mb-2 flex items-center gap-2",children:[e.jsx(Vs,{size:16}),"Prnom *"]}),e.jsx("input",{type:"text",value:u.prenom,onChange:H=>g(ae=>({...ae,prenom:H.target.value})),className:`w-full px-4 py-3 border rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary ${x.prenom?"border-red-500":"border-gray-300"}`,placeholder:"Votre prnom"}),x.prenom&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.prenom})]}),e.jsxs("div",{className:u.typePersonne==="MORALE"?"md:col-span-2":"",children:[e.jsxs("label",{className:"block text-gray-900 font-medium mb-2 flex items-center gap-2",children:[e.jsx(Vs,{size:16}),u.typePersonne==="MORALE"?"Nom de l'organisation *":"Nom *"]}),e.jsx("input",{type:"text",value:u.nom,onChange:H=>g(ae=>({...ae,nom:H.target.value})),className:`w-full px-4 py-3 border rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary ${x.nom?"border-red-500":"border-gray-300"}`,placeholder:u.typePersonne==="MORALE"?"Nom de votre organisation":"Votre nom"}),x.nom&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.nom})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-900 font-medium mb-2 flex items-center gap-2",children:[e.jsx(ss,{size:16}),u.typePersonne==="PHYSIQUE"?"Date de naissance *":"Date de cration *"]}),e.jsx("input",{type:"date",value:u.dateNaissance||"",onChange:H=>g(ae=>({...ae,dateNaissance:H.target.value})),className:`w-full px-4 py-3 border rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary ${x.dateNaissance?"border-red-500":"border-gray-300"}`,max:new Date().toISOString().split("T")[0]}),x.dateNaissance&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.dateNaissance}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:u.typePersonne==="PHYSIQUE"?"Votre date de naissance":"Date de cration de l'organisation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-900 font-medium mb-2 flex items-center gap-2",children:[e.jsx(_r,{size:16}),"Email"]}),e.jsx("input",{type:"email",value:(n==null?void 0:n.informationsPersonnelles.email)||"",disabled:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"L'email ne peut pas tre modifi"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-900 font-medium mb-2 flex items-center gap-2",children:[e.jsx(Jb,{size:16}),"Tlphone *"]}),e.jsx("input",{type:"tel",value:u.telephone,onChange:H=>g(ae=>({...ae,telephone:H.target.value})),className:`w-full px-4 py-3 border rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary ${x.telephone?"border-red-500":"border-gray-300"}`,placeholder:"+228 XX XX XX XX"}),x.telephone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.telephone})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:Y,disabled:c,className:"flex items-center gap-2 px-8 py-3 bg-primary text-white rounded-lg hover:bg-primary-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-lg",children:[e.jsx(Js,{size:20}),c?"Enregistrement...":"Enregistrer"]})})]}),e.jsx("div",{className:"lg:w-72 flex-shrink-0",children:e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4 text-center",children:u.typePersonne==="PHYSIQUE"?"Photo de profil":"Logo"}),e.jsxs("div",{className:"relative mx-auto w-40 h-40 mb-4",children:[e.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-gray-200 border-4 border-white shadow-lg",children:A?e.jsx("img",{src:A,alt:"Prvisualisation",className:"w-full h-full object-cover"}):n!=null&&n.hasPhoto?e.jsx("img",{src:`/api/profil/photo?t=${ie}`,alt:"Photo de profil",className:"w-full h-full object-cover",onError:H=>{H.target.style.display="none"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.typePersonne==="PHYSIQUE"?e.jsx(Vs,{className:"w-16 h-16 text-gray-400"}):e.jsx(Si,{className:"w-16 h-16 text-gray-400"})})}),!A&&!(n!=null&&n.hasPhoto)&&e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-400 rounded-full p-2",children:e.jsx(Mb,{className:"w-4 h-4 text-white"})})]}),e.jsx("input",{ref:be,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:ve,className:"hidden"}),e.jsx("div",{className:"space-y-2",children:A?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:re,disabled:D,className:"btn btn-primary btn-sm w-full gap-2",children:[D?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(ze,{size:16}),"Valider"]}),e.jsx("button",{onClick:O,disabled:D,className:"btn btn-ghost btn-sm w-full gap-2",children:"Annuler"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{var H;return(H=be.current)==null?void 0:H.click()},disabled:D,className:"btn btn-primary btn-sm w-full gap-2",children:[e.jsx(Wn,{size:16}),n!=null&&n.hasPhoto?"Modifier":"Ajouter"]}),(n==null?void 0:n.hasPhoto)&&e.jsxs("button",{onClick:ne,disabled:D,className:"btn btn-ghost btn-sm w-full gap-2 text-error hover:bg-error/10",children:[D?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(Je,{size:16}),"Supprimer"]})]})}),e.jsxs("p",{className:"text-xs text-gray-500 text-center mt-4",children:["JPEG, PNG, GIF ou WebP",e.jsx("br",{}),"Max 5 MB"]})]})})]}),s==="motdepasse"&&!(n!=null&&n.hasOAuthProvider)&&e.jsxs("div",{className:"space-y-6 max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Oc,{size:32,className:"text-primary"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Modifier le mot de passe"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Assurez-vous d'utiliser un mot de passe fort avec au moins 8 caractres"})]}),ce&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx(Ge,{size:20}),e.jsx("span",{children:ce})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Mot de passe actuel *"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",value:f,onChange:H=>p(H.target.value),className:"input input-bordered w-full pr-12",placeholder:"Entrez votre mot de passe actuel"}),e.jsx("button",{type:"button",onClick:()=>R(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:w?e.jsx(Dr,{size:20}):e.jsx(qt,{size:20})})]})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Nouveau mot de passe *"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:I?"text":"password",value:b,onChange:H=>E(H.target.value),className:"input input-bordered w-full pr-12",placeholder:"Entrez votre nouveau mot de passe"}),e.jsx("button",{type:"button",onClick:()=>T(!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:I?e.jsx(Dr,{size:20}):e.jsx(qt,{size:20})})]}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-gray-500",children:"Minimum 8 caractres"})})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Confirmer le nouveau mot de passe *"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:L?"text":"password",value:P,onChange:H=>k(H.target.value),className:"input input-bordered w-full pr-12",placeholder:"Confirmez votre nouveau mot de passe"}),e.jsx("button",{type:"button",onClick:()=>J(!L),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:L?e.jsx(Dr,{size:20}):e.jsx(qt,{size:20})})]}),b&&P&&b!==P&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:"Les mots de passe ne correspondent pas"})}),b&&P&&b===P&&e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text-alt text-success flex items-center gap-1",children:[e.jsx(ze,{size:14})," Les mots de passe correspondent"]})})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:we,disabled:Q||!f||!b||!P,className:"btn btn-primary w-full gap-2",children:Q?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-sm"}),"Modification en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Js,{size:20}),"Modifier le mot de passe"]})})})]}),s==="professionnel"&&e.jsx(Fj,{formData:u,setFormData:g,domainesInteret:v,setDomainesInteret:y,onSave:Y,isSaving:c})]})]})]})}const $m=[{id:"comp_react",nom:"React",description:"Bibliothque JavaScript pour crer des interfaces utilisateur interactives",categorie:"Dveloppement Web",icone:""},{id:"comp_vue",nom:"Vue.js",description:"Framework JavaScript progressif pour construire des interfaces web modernes",categorie:"Dveloppement Web",icone:""},{id:"comp_angular",nom:"Angular",description:"Framework TypeScript complet pour applications web d'entreprise",categorie:"Dveloppement Web",icone:""},{id:"comp_nodejs",nom:"Node.js",description:"Environnement d'excution JavaScript ct serveur",categorie:"Dveloppement Backend",icone:""},{id:"comp_express",nom:"Express.js",description:"Framework web minimaliste et flexible pour Node.js",categorie:"Dveloppement Backend",icone:""},{id:"comp_typescript",nom:"TypeScript",description:"Superset typ de JavaScript qui compile en JavaScript pur",categorie:"Dveloppement Web",icone:""},{id:"comp_javascript",nom:"JavaScript",description:"Langage de programmation pour le web dynamique et interactif",categorie:"Dveloppement Web",icone:""},{id:"comp_html_css",nom:"HTML/CSS",description:"Langages de balisage et de style pour structurer et designer le web",categorie:"Dveloppement Web",icone:""},{id:"comp_tailwind",nom:"Tailwind CSS",description:"Framework CSS utilitaire pour crer rapidement des designs personnaliss",categorie:"Dveloppement Web",icone:""},{id:"comp_python",nom:"Python",description:"Langage polyvalent pour dveloppement web, data science et automatisation",categorie:"Dveloppement Backend",icone:""},{id:"comp_django",nom:"Django",description:"Framework Python de haut niveau pour dveloppement web rapide",categorie:"Dveloppement Backend",icone:""},{id:"comp_flask",nom:"Flask",description:"Micro-framework Python lger et flexible pour applications web",categorie:"Dveloppement Backend",icone:""},{id:"comp_php",nom:"PHP",description:"Langage de script ct serveur pour dveloppement web dynamique",categorie:"Dveloppement Backend",icone:""},{id:"comp_laravel",nom:"Laravel",description:"Framework PHP lgant pour applications web avec syntaxe expressive",categorie:"Dveloppement Backend",icone:""},{id:"comp_java",nom:"Java",description:"Langage orient objet robuste pour applications d'entreprise",categorie:"Dveloppement Backend",icone:""},{id:"comp_spring",nom:"Spring Boot",description:"Framework Java pour crer des applications robustes et scalables",categorie:"Dveloppement Backend",icone:""},{id:"comp_react_native",nom:"React Native",description:"Framework pour crer des apps mobiles natives avec React",categorie:"Dveloppement Mobile",icone:""},{id:"comp_flutter",nom:"Flutter",description:"Framework Google pour crer des apps multi-plateformes",categorie:"Dveloppement Mobile",icone:""},{id:"comp_swift",nom:"Swift",description:"Langage Apple pour dveloppement iOS et macOS natif",categorie:"Dveloppement Mobile",icone:""},{id:"comp_kotlin",nom:"Kotlin",description:"Langage moderne pour dveloppement Android natif",categorie:"Dveloppement Mobile",icone:""},{id:"comp_mysql",nom:"MySQL",description:"Systme de gestion de base de donnes relationnelle open-source",categorie:"Base de donnes",icone:""},{id:"comp_postgresql",nom:"PostgreSQL",description:"Base de donnes relationnelle avance et conforme aux standards",categorie:"Base de donnes",icone:""},{id:"comp_mongodb",nom:"MongoDB",description:"Base de donnes NoSQL oriente documents flexible et scalable",categorie:"Base de donnes",icone:""},{id:"comp_redis",nom:"Redis",description:"Stockage de donnes en mmoire pour cache et messages",categorie:"Base de donnes",icone:""},{id:"comp_figma",nom:"Figma",description:"Outil de design collaboratif pour interfaces et prototypes",categorie:"Design",icone:""},{id:"comp_adobe_xd",nom:"Adobe XD",description:"Solution Adobe pour design et prototypage d'expriences",categorie:"Design",icone:""},{id:"comp_photoshop",nom:"Photoshop",description:"Logiciel de retouche et cration d'images professionnelles",categorie:"Design",icone:""},{id:"comp_illustrator",nom:"Illustrator",description:"Cration de graphiques vectoriels et illustrations",categorie:"Design",icone:""},{id:"comp_ui_ux",nom:"UI/UX Design",description:"Conception d'interfaces et d'expriences utilisateur optimales",categorie:"Design",icone:""},{id:"comp_docker",nom:"Docker",description:"Plateforme de conteneurisation pour dploiement d'applications",categorie:"DevOps",icone:""},{id:"comp_kubernetes",nom:"Kubernetes",description:"Orchestration de conteneurs pour applications cloud-native",categorie:"DevOps",icone:""},{id:"comp_aws",nom:"AWS",description:"Services cloud Amazon pour infrastructure et dploiement",categorie:"Cloud",icone:""},{id:"comp_azure",nom:"Microsoft Azure",description:"Plateforme cloud Microsoft pour applications d'entreprise",categorie:"Cloud",icone:""},{id:"comp_gcp",nom:"Google Cloud",description:"Infrastructure cloud Google pour applications scalables",categorie:"Cloud",icone:""},{id:"comp_git",nom:"Git",description:"Systme de contrle de version distribu pour code source",categorie:"DevOps",icone:""},{id:"comp_machine_learning",nom:"Machine Learning",description:"Algorithmes d'apprentissage automatique et modles prdictifs",categorie:"Data Science",icone:""},{id:"comp_tensorflow",nom:"TensorFlow",description:"Framework open-source pour machine learning et deep learning",categorie:"Data Science",icone:""},{id:"comp_data_analysis",nom:"Analyse de donnes",description:"Exploration et visualisation de donnes pour insights business",categorie:"Data Science",icone:""},{id:"comp_seo",nom:"SEO",description:"Optimisation pour moteurs de recherche et visibilit web",categorie:"Marketing Digital",icone:""},{id:"comp_google_ads",nom:"Google Ads",description:"Publicit en ligne sur Google et rseau display",categorie:"Marketing Digital",icone:""},{id:"comp_social_media",nom:"Social Media Marketing",description:"Stratgies marketing sur rseaux sociaux",categorie:"Marketing Digital",icone:""},{id:"comp_content_writing",nom:"Rdaction de contenu",description:"Cration de textes engageants pour web et marketing",categorie:"Communication",icone:""},{id:"comp_gestion_projet",nom:"Gestion de projet",description:"Planification et coordination de projets complexes",categorie:"Management",icone:""},{id:"comp_agile_scrum",nom:"Agile/Scrum",description:"Mthodologies agiles pour dveloppement itratif",categorie:"Management",icone:""}],Vj={titre:"",description:"",disponible:!0};class Hj{constructor(){Ks(this,"BASE_URL","/api/expertise")}async getExpertiseComplete(){const s=await Ee(this.BASE_URL,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la rcupration de l'expertise: ${s.status}`);return await s.json()}async getMonExpertise(){const s=await Ee(`${this.BASE_URL}/mon-expertise`,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la rcupration de l'expertise: ${s.status}`);return await s.json()}async saveExpertise(s){const r=await Ee(`${this.BASE_URL}/mon-expertise`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`Erreur lors de la sauvegarde de l'expertise: ${r.status}`);return await r.json()}async publierExpertise(){const s=await Ee(`${this.BASE_URL}/mon-expertise/publier`,{method:"PUT",credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la publication de l'expertise: ${s.status}`);return await s.json()}async depublierExpertise(){const s=await Ee(`${this.BASE_URL}/mon-expertise/depublier`,{method:"PUT",credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la dpublication de l'expertise: ${s.status}`);return await s.json()}async getExpertisesPubliees(){const s=await fetch(`${this.BASE_URL}/public/expertises`,{headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la rcupration des expertises: ${s.status}`);return await s.json()}async getCompetences(){const s=await Ee(`${this.BASE_URL}/competences`,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la rcupration des comptences: ${s.status}`);return await s.json()}async addCompetence(s){const r=await Ee(`${this.BASE_URL}/competences`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`Erreur lors de l'ajout de la comptence: ${r.status}`);return await r.json()}async updateCompetence(s,r){const n=await Ee(`${this.BASE_URL}/competences/${s}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Erreur lors de la mise  jour de la comptence: ${n.status}`);return await n.json()}async deleteCompetence(s){const r=await Ee(`${this.BASE_URL}/competences/${s}`,{method:"DELETE",credentials:"include"});if(!r.ok)throw new Error(`Erreur lors de la suppression de la comptence: ${r.status}`)}async getCompetenceUtilisateur(s,r){const n=await Ee(`${this.BASE_URL}/utilisateur/${s}/competence/${r}`,{credentials:"include",headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`Erreur lors de la rcupration de la comptence: ${n.status}`);return await n.json()}}const Ys=new Hj,Ss="/api/reconnaissance-competences",Rs={async soumettreDemande(t){const s=await fetch(Ss,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!s.ok){const r=await s.text();throw new Error(r||"Erreur lors de la soumission de la demande")}return s.json()},async ajouterPieceJustificative(t,s,r,n){const a=new FormData;a.append("file",s),a.append("typePiece",r),n&&a.append("description",n);const l=await fetch(`${Ss}/${t}/pieces`,{method:"POST",credentials:"include",body:a});if(!l.ok){const i=await l.text();throw new Error(i||"Erreur lors de l'ajout de la pice justificative")}return l.json()},async getMesDemandes(){const t=await fetch(`${Ss}/mes-demandes`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des demandes");return t.json()},async getDemandeDetails(t){const s=await fetch(`${Ss}/${t}`,{credentials:"include"});if(!s.ok)throw new Error("Erreur lors de la rcupration des dtails");return s.json()},async annulerDemande(t){const s=await fetch(`${Ss}/${t}/annuler`,{method:"PUT",credentials:"include"});if(!s.ok){const r=await s.text();throw new Error(r||"Erreur lors de l'annulation de la demande")}},async resoumettreApresComplement(t,s){const r=await fetch(`${Ss}/${t}/resoumettre`,{method:"PUT",headers:{"Content-Type":"text/plain"},credentials:"include",body:s||""});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors de la resoumission")}return r.json()},async supprimerPiece(t,s){const r=await fetch(`${Ss}/${t}/pieces/${s}`,{method:"DELETE",credentials:"include"});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors de la suppression de la pice")}},async getMesBadges(t=!0){const s=await fetch(`${Ss}/badges/mes-badges?actifSeulement=${t}`,{credentials:"include"});if(!s.ok)throw new Error("Erreur lors de la rcupration des badges");return s.json()},async toggleVisibiliteBadge(t){const s=await fetch(`${Ss}/badges/${t}/visibilite`,{method:"PUT",credentials:"include"});if(!s.ok)throw new Error("Erreur lors de la modification de la visibilit");return s.json()},async definirOrdreBadges(t){if(!(await fetch(`${Ss}/badges/ordre`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).ok)throw new Error("Erreur lors de la dfinition de l'ordre")},async getBadgesExpert(t){const s=await fetch(`${Ss}/badges/expert/${t}`,{credentials:"include"});if(!s.ok)throw new Error("Erreur lors de la rcupration des badges de l'expert");return s.json()}};var le=(t=>(t.EN_ATTENTE="EN_ATTENTE",t.ASSIGNEE_RH="ASSIGNEE_RH",t.EN_COURS_EVALUATION="EN_COURS_EVALUATION",t.EN_ATTENTE_VALIDATION="EN_ATTENTE_VALIDATION",t.EN_COURS_TRAITEMENT="EN_COURS_TRAITEMENT",t.COMPLEMENT_REQUIS="COMPLEMENT_REQUIS",t.APPROUVEE="APPROUVEE",t.REJETEE="REJETEE",t.ANNULEE="ANNULEE",t))(le||{}),Ue=(t=>(t.BRONZE="BRONZE",t.ARGENT="ARGENT",t.OR="OR",t.PLATINE="PLATINE",t))(Ue||{}),Pt=(t=>(t.CERTIFICAT="CERTIFICAT",t.DIPLOME="DIPLOME",t.PROJET="PROJET",t.RECOMMANDATION="RECOMMANDATION",t.EXPERIENCE="EXPERIENCE",t.PUBLICATION="PUBLICATION",t.AUTRE="AUTRE",t))(Pt||{}),Ta=(t=>(t.APPROUVER="APPROUVER",t.REJETER="REJETER",t.DEMANDER_COMPLEMENT="DEMANDER_COMPLEMENT",t.EN_COURS="EN_COURS",t))(Ta||{});function Wj({message:t,type:s,isOpen:r,onClose:n,duration:a=4e3}){if(d.useEffect(()=>{if(r&&a>0){const o=setTimeout(()=>{n()},a);return()=>clearTimeout(o)}},[r,a,n]),!r)return null;const i={success:{bg:"bg-success",icon:ze,alertClass:"alert-success"},error:{bg:"bg-error",icon:ds,alertClass:"alert-error"},warning:{bg:"bg-warning",icon:Ge,alertClass:"alert-warning"},info:{bg:"bg-info",icon:_x,alertClass:"alert-info"}}[s],c=i.icon;return e.jsx("div",{className:"fixed top-4 right-4 z-[9999] animate-in slide-in-from-top-2 duration-300",children:e.jsxs("div",{className:`alert ${i.alertClass} shadow-lg max-w-md`,children:[e.jsx(c,{size:24}),e.jsx("span",{className:"font-medium",children:t}),e.jsx("button",{onClick:n,className:"btn btn-sm btn-circle btn-ghost",children:e.jsx(st,{size:18})})]})})}const Um={[Pt.CERTIFICAT]:"Certificat",[Pt.DIPLOME]:"Diplme",[Pt.PROJET]:"Projet",[Pt.RECOMMANDATION]:"Recommandation",[Pt.EXPERIENCE]:"Exprience",[Pt.PUBLICATION]:"Publication",[Pt.AUTRE]:"Autre"};function qj({isOpen:t,onClose:s,competenceId:r,competenceNom:n,onSuccess:a}){const[l,i]=d.useState("justification"),[c,o]=d.useState(""),[m,j]=d.useState([]),[x,h]=d.useState(!1),[u,g]=d.useState(null),[v,y]=d.useState({isOpen:!1,message:"",type:"success"}),[f,p]=d.useState(Pt.CERTIFICAT),[b,E]=d.useState(""),P=()=>{i("justification"),o(""),j([]),g(null)};d.useEffect(()=>{t&&P()},[t]),d.useEffect(()=>{g(null)},[r]);const k=T=>{const L=T.target.files;L&&L[0]&&(j([...m,{file:L[0],typePiece:f,description:b||L[0].name}]),E(""),T.target.value="")},w=T=>{j(m.filter((L,J)=>J!==T))},R=async()=>{if(!c.trim()){g("Veuillez fournir une justification");return}try{h(!0),g(null);const T=await Rs.soumettreDemande({competenceId:r,commentaire:c});for(const L of m)await Rs.ajouterPieceJustificative(T.id,L.file,L.typePiece,L.description);a&&a(),y({isOpen:!0,message:" Demande de reconnaissance soumise avec succs !",type:"success"}),setTimeout(()=>{s(),P()},2e3)}catch(T){g(T instanceof Error?T.message:"Erreur lors de la soumission")}finally{h(!1)}},I=()=>{x||(P(),s())};return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:I,children:[e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Demande de reconnaissance"}),e.jsx("p",{className:"text-gray-600 text-sm",children:n})]}),e.jsx("button",{onClick:I,disabled:x,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(st,{size:24})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`flex-1 h-2 rounded ${l==="justification"?"bg-blue-500":"bg-green-500"}`}),e.jsx("div",{className:`flex-1 h-2 rounded ${l==="paiement"?"bg-blue-500":"bg-gray-300"}`})]}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[e.jsx("span",{className:l==="justification"?"font-semibold text-blue-600":"text-gray-600",children:"1. Justification"}),e.jsx("span",{className:l==="paiement"?"font-semibold text-blue-600":"text-gray-600",children:"2. Paiement"})]})]}),u&&e.jsx("div",{className:"mx-6 mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u}),e.jsxs("div",{className:"p-6 space-y-6",children:[l==="justification"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Justification *"}),e.jsx("textarea",{value:c,onChange:T=>o(T.target.value),rows:6,className:"w-full border rounded-lg p-3",placeholder:`Expliquez pourquoi vous mritez cette certification

Exemples :
- Annes d'exprience
- Projets raliss
- Formations suivies
- Certifications obtenues...`,disabled:x}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[c.length,"/1000 caractres"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-3",children:"Pices justificatives"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Ajoutez des documents pour appuyer votre demande (certificats, projets, recommandations...)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type de document"}),e.jsx("select",{value:f,onChange:T=>p(T.target.value),className:"w-full border rounded px-3 py-2",children:Object.entries(Um).map(([T,L])=>e.jsx("option",{value:T,children:L},T))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("input",{type:"text",value:b,onChange:T=>E(T.target.value),placeholder:"Ex: Certificat Oracle Java",className:"w-full border rounded px-3 py-2"})]})]}),e.jsxs("label",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-50 border-2 border-blue-300 rounded-lg cursor-pointer hover:bg-blue-100 transition-colors",children:[e.jsx(Wn,{size:20,className:"text-blue-600"}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Choisir un fichier"}),e.jsx("input",{type:"file",onChange:k,className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"PDF, DOC, DOCX, images (max 10 MB)"})]}),m.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"font-medium",children:[m.length," fichier(s) ajout(s)"]}),m.map((T,L)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:T.file.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Um[T.typePiece]," - ",T.description]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(T.file.size/1024).toFixed(0)," Ko"]})]}),e.jsx("button",{onClick:()=>w(L),className:"p-2 text-red-500 hover:bg-red-100 rounded",children:e.jsx(Je,{size:18})})]},L))]})]})]})]}),l==="paiement"&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Module de paiement  venir..."})})})]}),e.jsx("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4 flex justify-between",children:l==="justification"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:I,disabled:x,className:"px-6 py-2 border rounded-lg hover:bg-gray-50",children:"Annuler"}),e.jsx("button",{onClick:()=>i("paiement"),disabled:!c.trim()||x,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:"Continuer "})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i("justification"),disabled:x,className:"px-6 py-2 border rounded-lg hover:bg-gray-50",children:" Retour"}),e.jsx("button",{onClick:R,disabled:x,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 flex items-center gap-2",children:x?"Envoi...":" Soumettre la demande"})]})})]}),e.jsx(Wj,{message:v.message,type:v.type,isOpen:v.isOpen,onClose:()=>y({...v,isOpen:!1}),duration:4e3})]}):null}const Jj={[Ue.BRONZE]:"from-orange-300 to-orange-600",[Ue.ARGENT]:"from-gray-300 to-gray-500",[Ue.OR]:"from-yellow-400 to-yellow-600",[Ue.PLATINE]:"from-purple-400 to-pink-600"},Gj={[Ue.BRONZE]:"",[Ue.ARGENT]:"",[Ue.OR]:"",[Ue.PLATINE]:""},Qj={1:"Dbutant",2:"Junior",3:"Intermdiaire",4:"Senior",5:"Expert"};function tf({isOpen:t,onClose:s,competence:r,badge:n,onDemanderCertification:a,montrerBoutonCertification:l=!1}){if(!t||!r)return null;const i=r.certifications?r.certifications.split(",").map(c=>c.trim()).filter(c=>c):[];return e.jsxs("div",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box max-w-lg relative",children:[e.jsx("button",{onClick:s,className:"btn btn-sm btn-circle btn-ghost absolute right-3 top-3",children:e.jsx(st,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-start gap-4 mb-6 pr-8",children:[e.jsx("div",{className:`p-3 rounded-xl ${n?"bg-primary/10":"bg-base-200"}`,children:e.jsx(Ft,{className:`w-6 h-6 ${n?"text-primary":"text-base-content/50"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-bold text-base-content",children:r.nom}),r.estFavorite&&e.jsx($r,{className:"w-5 h-5 fill-warning text-warning flex-shrink-0"})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br ${Jj[n.niveauCertification]} flex items-center justify-center shadow-md`,children:e.jsx("span",{className:"text-sm",children:Gj[n.niveauCertification]})}),e.jsxs("div",{children:[e.jsxs("span",{className:"badge badge-success badge-sm gap-1",children:[e.jsx(Tb,{className:"w-3 h-3"}),"Certifi ",n.niveauCertification]}),n.dateObtention&&e.jsxs("p",{className:"text-xs text-base-content/50 mt-0.5",children:["Obtenu le ",new Date(n.dateObtention).toLocaleDateString("fr-FR")]})]})]})]})]}),r.niveauMaitrise!==void 0&&e.jsxs("div",{className:"mb-4 p-3 bg-base-200/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-base-content/70",children:"Niveau de matrise"}),e.jsx("span",{className:"text-sm font-semibold text-primary",children:Qj[r.niveauMaitrise]||`Niveau ${r.niveauMaitrise}`})]}),e.jsx("div",{className:"flex items-center gap-1 mt-2",children:[1,2,3,4,5].map(c=>e.jsx("div",{className:`flex-1 h-2 rounded-full ${c<=r.niveauMaitrise?"bg-warning":"bg-base-300"}`},c))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-base-content mb-2 flex items-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4 text-primary"}),"Description"]}),r.description?e.jsx("p",{className:"text-sm text-base-content/70 leading-relaxed whitespace-pre-wrap",children:r.description}):e.jsx("p",{className:"text-sm text-base-content/40 italic",children:"Aucune description fournie"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-success/10 rounded-lg p-3 text-center",children:[e.jsx(Ur,{className:"w-5 h-5 text-success mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-base-content/60",children:"Taux horaire"}),r.thm!==void 0&&r.thm>0?e.jsxs("p",{className:"text-sm font-bold text-success",children:[r.thm.toLocaleString()," F/h"]}):e.jsx("p",{className:"text-xs text-base-content/40",children:"Non renseign"})]}),e.jsxs("div",{className:"bg-info/10 rounded-lg p-3 text-center",children:[e.jsx(Ft,{className:"w-5 h-5 text-info mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-base-content/60",children:"Projets"}),r.nombreProjets!==void 0&&r.nombreProjets>0?e.jsx("p",{className:"text-sm font-bold text-info",children:r.nombreProjets}):e.jsx("p",{className:"text-xs text-base-content/40",children:"0"})]}),e.jsxs("div",{className:"bg-secondary/10 rounded-lg p-3 text-center",children:[e.jsx(ut,{className:"w-5 h-5 text-secondary mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-base-content/60",children:"Exprience"}),r.anneesExperience!==void 0&&r.anneesExperience>0?e.jsxs("p",{className:"text-sm font-bold text-secondary",children:[r.anneesExperience," an",r.anneesExperience>1?"s":""]}):e.jsx("p",{className:"text-xs text-base-content/40",children:"Non renseign"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-base-content mb-2 flex items-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4 text-accent"}),"Certifications"]}),i.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((c,o)=>e.jsxs("span",{className:"badge badge-accent badge-outline",children:[" ",c]},o))}):e.jsx("p",{className:"text-sm text-base-content/40 italic",children:"Aucune certification"})]}),e.jsxs("div",{className:"modal-action mt-0 pt-4 border-t border-base-300",children:[l&&a&&!n&&e.jsxs("button",{onClick:()=>{a(),s()},className:"btn btn-primary btn-sm gap-2",children:[e.jsx(Et,{className:"w-4 h-4"}),"Demander la certification"]}),e.jsx("button",{onClick:s,className:"btn btn-ghost btn-sm",children:"Fermer"})]})]}),e.jsx("div",{className:"modal-backdrop",onClick:s})]})}const sf={succes:{icone:ze,classeIcone:"text-emerald-500",classeFond:"bg-emerald-50",classeBordure:"border-emerald-200",dureeDefaut:5e3},erreur:{icone:ds,classeIcone:"text-red-500",classeFond:"bg-red-50",classeBordure:"border-red-200",dureeDefaut:8e3},avertissement:{icone:Hx,classeIcone:"text-amber-500",classeFond:"bg-amber-50",classeBordure:"border-amber-200",dureeDefaut:6e3},info:{icone:_x,classeIcone:"text-blue-500",classeFond:"bg-blue-50",classeBordure:"border-blue-200",dureeDefaut:5e3}},rf=d.createContext(void 0),Mo=t=>{if(t.message&&typeof t.message=="string"){if(t.erreurs&&typeof t.erreurs=="object"){const s=Object.values(t.erreurs);if(s.length>0)return s.join(". ")}return t.message}return t.error&&typeof t.error=="string"?t.error:null},Xj=t=>{if(typeof t=="string"){try{const s=JSON.parse(t);if(typeof s=="object"&&s!==null){const r=Mo(s);if(r)return r}}catch{}return t}if(t instanceof Error){try{const s=JSON.parse(t.message);if(typeof s=="object"&&s!==null){const r=Mo(s);if(r)return r}}catch{}return t.message}if(typeof t=="object"&&t!==null){const s=Mo(t);if(s)return s}return"Une erreur inattendue s'est produite"};let Fm=0;const Kj=()=>(Fm+=1,`toast-${Date.now()}-${Fm}`);function Yj({children:t}){const[s,r]=d.useState([]),n=d.useRef(new Map),a=d.useCallback(v=>{n.current.delete(v),r(y=>y.filter(f=>f.id!==v))},[]),l=d.useCallback(v=>{const y=n.current.get(v);y!=null&&y.timer&&clearTimeout(y.timer),n.current.delete(v),r(f=>f.map(p=>p.id===v?{...p,etatAnimation:"sortie"}:p)),setTimeout(()=>a(v),400)},[a]),i=d.useCallback(v=>{const y=n.current.get(v);if(y!=null&&y.timer){clearTimeout(y.timer);const f=Date.now();n.current.set(v,{...y,timer:null,debutPause:f})}r(f=>f.map(p=>p.id===v?{...p,estEnPause:!0}:p))},[]),c=d.useCallback(v=>{const y=n.current.get(v);if(y&&y.debutPause){const f=Date.now()-y.debutPause,p=Math.max(0,y.restant-f);if(p>0){const b=setTimeout(()=>l(v),p);n.current.set(v,{timer:b,restant:p})}else l(v)}r(f=>f.map(p=>p.id===v?{...p,estEnPause:!1}:p))},[l]),o=d.useCallback((v,y,f)=>{const p=Kj(),b=f??sf[v].dureeDefaut,E={id:p,message:y,type:v,duree:b,etatAnimation:"entree",timestampCreation:Date.now(),estEnPause:!1};if(r(P=>[...P,E]),setTimeout(()=>{r(P=>P.map(k=>k.id===p?{...k,etatAnimation:"visible"}:k))},50),b&&b>0){const P=setTimeout(()=>l(p),b);n.current.set(p,{timer:P,restant:b})}return p},[l]),m=d.useCallback((v,y)=>{o("succes",v,y)},[o]),j=d.useCallback((v,y)=>{const f=Xj(v);o("erreur",f,y)},[o]),x=d.useCallback((v,y)=>{o("avertissement",v,y)},[o]),h=d.useCallback((v,y)=>{o("info",v,y)},[o]),u=d.useCallback(v=>{l(v)},[l]),g=d.useCallback(()=>{r([])},[]);return e.jsxs(rf.Provider,{value:{toasts:s,succes:m,erreur:j,avertissement:x,info:h,fermer:u,fermerTous:g,pauserToast:i,reprendreToast:c},children:[t,e.jsx(Zj,{toasts:s,onFermer:u,onPause:i,onResume:c})]})}function xl(){const t=d.useContext(rf);if(!t)throw new Error("useToast doit tre utilis dans un ToastProvider");return t}function Zj({toasts:t,onFermer:s,onPause:r,onResume:n}){return t.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 max-w-sm w-full pointer-events-none px-4 sm:px-0",children:t.map(a=>e.jsx(ey,{toast:a,onFermer:()=>s(a.id),onPause:()=>r(a.id),onResume:()=>n(a.id)},a.id))})}function ey({toast:t,onFermer:s,onPause:r,onResume:n}){const a=sf[t.type],l=a.icone,[i,c]=d.useState(100),o=d.useRef(null),m=d.useRef(100),j=()=>{r()},x=()=>{n()};d.useEffect(()=>{if(!t.duree||t.duree<=0||t.etatAnimation==="sortie")return;const g=100/(t.duree/50);return o.current=setInterval(()=>{t.estEnPause||(m.current=Math.max(0,m.current-g),c(m.current))},50),()=>{o.current&&clearInterval(o.current)}},[t.duree,t.etatAnimation,t.estEnPause]);const h=()=>{switch(t.etatAnimation){case"entree":return"translate-x-full opacity-0 scale-95";case"sortie":return"translate-x-full opacity-0 scale-95";case"visible":default:return"translate-x-0 opacity-100 scale-100"}},u=()=>{switch(t.type){case"succes":return"bg-emerald-400";case"erreur":return"bg-red-400";case"avertissement":return"bg-amber-400";case"info":return"bg-blue-400"}};return e.jsxs("div",{className:`
        pointer-events-auto
        relative overflow-hidden
        flex items-start gap-3 p-4 rounded-xl border shadow-lg backdrop-blur-sm
        ${a.classeFond} ${a.classeBordure}
        transform transition-all duration-400 ease-out
        ${h()}
        hover:shadow-xl hover:scale-[1.02]
      `,onMouseEnter:j,onMouseLeave:x,style:{transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[e.jsx("div",{className:`
          flex-shrink-0 ${a.classeIcone}
          ${t.etatAnimation==="visible"?"animate-pulse-once":""}
        `,children:e.jsx(l,{size:22,strokeWidth:2.5})}),e.jsx("p",{className:"flex-1 text-sm font-medium text-gray-800 leading-relaxed pr-2",children:t.message}),e.jsx("button",{onClick:s,className:"flex-shrink-0 p-1.5 -m-1 rounded-lg hover:bg-black/10 transition-all duration-200 hover:rotate-90 group",children:e.jsx(st,{size:16,className:"text-gray-400 group-hover:text-gray-600 transition-colors"})}),t.duree&&t.duree>0&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/5 overflow-hidden",children:e.jsx("div",{className:`h-full ${u()} transition-all duration-100 ease-linear`,style:{width:`${i}%`,opacity:t.estEnPause?.5:1}})}),t.estEnPause&&t.duree&&t.duree>0&&e.jsx("div",{className:"absolute top-1 right-8 text-[10px] text-gray-400 font-medium animate-fade-in",children:"En pause"})]})}const ty=({onSave:t,onDemandeSubmitted:s})=>{const r=xl(),[n,a]=d.useState(Vj),[l,i]=d.useState([]),[c,o]=d.useState(!0),[m,j]=d.useState(!1),[x,h]=d.useState(!1),[u,g]=d.useState(null),[v,y]=d.useState(!1),[f,p]=d.useState(!1),[b,E]=d.useState(null),[P,k]=d.useState([]),[w,R]=d.useState(!1),[I,T]=d.useState(!1),[L,J]=d.useState(null),[Q,W]=d.useState(!1),[ce,se]=d.useState([]),[be,A]=d.useState(!1),[z,S]=d.useState(!1),[$,D]=d.useState(""),[q,ie]=d.useState([]),[me,Pe]=d.useState([]),[Ne,Le]=d.useState(!1),[Y,ve]=d.useState(!1),[O,re]=d.useState(""),[ne,we]=d.useState(!1),[U,H]=d.useState(null),[ae,ke]=d.useState(!1),[Te,Me]=d.useState(null),[pt,At]=d.useState([]),[V,je]=d.useState([]),[Se,Re]=d.useState([]),Ve=N=>{if(!N.competenceReferenceId){r.erreur("Cette comptence n'est pas lie  une comptence de rfrence. Veuillez l'diter pour slectionner une comptence du rfrentiel.");return}H(N),we(!0)};d.useEffect(()=>{rt(),ur()},[]),d.useEffect(()=>{n.localisationComplete&&re(n.localisationComplete)},[n.localisationComplete]);const rt=async()=>{try{o(!0);const N=await Ys.getMonExpertise();a(N),await yt()}catch(N){console.error("Erreur lors du chargement de l'expertise:",N),r.erreur("Erreur lors du chargement de l'expertise")}finally{o(!1)}},yt=async()=>{try{const N=await Ys.getCompetences();i(N)}catch(N){console.error("Erreur lors du chargement des comptences:",N)}},rs=()=>{const N=[];return(!n.titre||n.titre.trim()==="")&&N.push("Le titre professionnel est obligatoire"),(!n.description||n.description.trim()==="")&&N.push("La description est obligatoire"),n.villeId||N.push("La localisation est obligatoire"),l.length===0&&N.push("Au moins une comptence doit tre ajoute"),{valide:N.length===0,raisons:N}},Mt=(N,B)=>{a(te=>({...te,[N]:B}))},F=async()=>{try{j(!0),await Ys.saveExpertise(n),r.succes("Expertise sauvegarde avec succs !"),t&&t()}catch(N){console.error("Erreur lors de la sauvegarde:",N),r.erreur("Erreur lors de la sauvegarde de l'expertise")}finally{j(!1)}},Ce=async N=>{if(N){const B=rs();if(!B.valide){r.avertissement(`Impossible de publier. Compltez : ${B.raisons.join(", ")}`);return}}try{h(!0);const B={...n,publiee:N},te=await Ys.saveExpertise(B);a(te),N?r.succes("Expertise publie ! Visible sur la page d'accueil."):r.info("Expertise dpublie. Non visible publiquement."),t&&t()}catch(B){console.error("Erreur lors de la publication/dpublication:",B),r.erreur("Erreur lors de la mise  jour du statut de publication"),a({...n,publiee:!N})}finally{h(!1)}},X=()=>{if(l.length>=6){r.avertissement("Vous ne pouvez pas ajouter plus de 6 comptences");return}g({nom:"",description:"",niveauMaitrise:3,anneesExperience:0,thm:void 0,nombreProjets:0,certifications:"",estFavorite:!1}),W(!1),J(null),ie([]),D(""),y(!0)},xe=async N=>{if(!N||N.length<2){k([]),R(!1);return}try{T(!0);const te=await(await fetch(`/api/competences-reference/recherche?terme=${encodeURIComponent(N)}`)).json(),C=l.filter(_=>!(u!=null&&u.id)||_.id!==u.id).map(_=>_.nom.toLowerCase()),M=te.filter(_=>!C.includes(_.libelle.toLowerCase()));k(M.slice(0,10)),R(!0)}catch(B){console.error("Erreur lors de la recherche:",B),k([])}finally{T(!1)}},fe=async()=>{try{T(!0);const B=await(await fetch("/api/competences-reference/populaires?limit=10")).json(),te=l.filter(M=>!(u!=null&&u.id)||M.id!==u.id).map(M=>M.nom.toLowerCase()),C=B.filter(M=>!te.includes(M.libelle.toLowerCase()));k(C),R(!0)}catch(N){console.error("Erreur lors du chargement des comptences populaires:",N),k([])}finally{T(!1)}},Oe=N=>{u&&(g({...u,nom:N.libelle,description:N.description||""}),J(N.id),W(!0)),R(!1),k([])},_e=N=>{if(g(N),W(!0),J(N.competenceReferenceId||null),N.certifications){const B=N.certifications.split(",").map(te=>te.trim()).filter(te=>te);ie(B)}else ie([]);D(""),y(!0)},nt=async()=>{if(!u||!u.nom.trim()){r.erreur("Veuillez slectionner une comptence du rfrentiel");return}if(!Q&&!u.id){r.erreur("Vous devez slectionner une comptence depuis la liste propose");return}try{if(u.id){const N=l.find(Z=>Z.id===u.id),B=N==null?void 0:N.competenceReferenceId,te=L,C=N!=null&&N.certifications?N.certifications.split(",").map(Z=>Z.trim()).filter(Z=>Z):[],M=q,_={...u,competenceReferenceId:te||u.competenceReferenceId},G=await Ys.updateCompetence(u.id,_);if(i(Z=>Z.map(pe=>pe.id===G.id?G:pe)),r.succes("Comptence mise  jour !"),te&&B!==te)try{B&&await fetch(`/api/competences-reference/${B}/retirer`,{method:"POST"}),await fetch(`/api/competences-reference/${te}/utiliser`,{method:"POST"})}catch(Z){console.error("Erreur lors de la mise  jour de la popularit:",Z)}try{const Z=C.filter(ye=>!M.includes(ye)),pe=M.filter(ye=>!C.includes(ye));for(const ye of Z){const de=await(await fetch(`/api/certifications/recherche?terme=${encodeURIComponent(ye)}`)).json();if(de&&de.length>0){const oe=de.find(ge=>ge.intitule===ye);oe&&await fetch(`/api/certifications/${oe.id}/retirer`,{method:"POST"})}}for(const ye of pe){const de=await(await fetch(`/api/certifications/recherche?terme=${encodeURIComponent(ye)}`)).json();if(de&&de.length>0){const oe=de.find(ge=>ge.intitule===ye);oe&&await fetch(`/api/certifications/${oe.id}/utiliser`,{method:"POST"})}}}catch(Z){console.error("Erreur lors de la mise  jour de la popularit des certifications:",Z)}}else{const N={...u,competenceReferenceId:L||void 0},B=await Ys.addCompetence(N);if(i(te=>[...te,B]),r.succes("Comptence ajoute !"),L)try{await fetch(`/api/competences-reference/${L}/utiliser`,{method:"POST"})}catch(te){console.error("Erreur lors de l'incrmentation de la popularit:",te)}if(q.length>0)try{for(const te of q){const M=await(await fetch(`/api/certifications/recherche?terme=${encodeURIComponent(te)}`)).json();if(M&&M.length>0){const _=M.find(G=>G.intitule===te);_&&await fetch(`/api/certifications/${_.id}/utiliser`,{method:"POST"})}}}catch(te){console.error("Erreur lors de l'incrmentation de la popularit des certifications:",te)}}y(!1),g(null),J(null),W(!1)}catch(N){console.error("Erreur lors de la sauvegarde de la comptence:",N),r.erreur("Erreur lors de la sauvegarde de la comptence")}},Ct=(N,B)=>{E({id:N,nom:B}),p(!0)},xs=async()=>{if(b)try{const N=l.find(B=>B.id===b.id);if(await Ys.deleteCompetence(b.id),i(B=>B.filter(te=>te.id!==b.id)),r.succes("Comptence supprime !"),N!=null&&N.competenceReferenceId)try{await fetch(`/api/competences-reference/${N.competenceReferenceId}/retirer`,{method:"POST"})}catch(B){console.error("Erreur lors de la dcrmentation de la popularit de la comptence:",B)}if(N!=null&&N.certifications){const B=N.certifications.split(",").map(te=>te.trim()).filter(te=>te);try{for(const te of B){const M=await(await fetch(`/api/certifications/recherche?terme=${encodeURIComponent(te)}`)).json();if(M&&M.length>0){const _=M.find(G=>G.intitule===te);_&&await fetch(`/api/certifications/${_.id}/retirer`,{method:"POST"})}}}catch(te){console.error("Erreur lors de la dcrmentation de la popularit des certifications:",te)}}p(!1),E(null)}catch(N){console.error("Erreur lors de la suppression:",N),r.erreur("Erreur lors de la suppression de la comptence"),p(!1),E(null)}},Bt=()=>{p(!1),E(null)},ns=async N=>{try{const B=await Ys.updateCompetence(N.id,{...N,estFavorite:!N.estFavorite});i(te=>te.map(C=>C.id===B.id?B:C))}catch(B){console.error("Erreur lors de la mise  jour:",B)}},ur=async()=>{try{const N=await Rs.getMesBadges(!0);At(N);const B=await Rs.getMesDemandes();Re(B);const te=B.filter(C=>C.statut===le.EN_ATTENTE||C.statut===le.ASSIGNEE_RH||C.statut===le.EN_COURS_EVALUATION||C.statut===le.EN_ATTENTE_VALIDATION||C.statut===le.EN_COURS_TRAITEMENT||C.statut===le.COMPLEMENT_REQUIS);je(te)}catch(N){console.error("Erreur chargement badges/demandes:",N)}},mr=N=>pt.find(B=>B.competenceNom.toLowerCase()===N.toLowerCase()&&B.estValide),pr=N=>V.some(B=>B.competenceNom.toLowerCase()===N.toLowerCase()&&B.statut!==le.REJETEE&&B.statut!==le.APPROUVEE),Qs=N=>{const B=Se.filter(C=>C.competenceNom.toLowerCase()===N.toLowerCase());return B.length===0?!1:B.sort((C,M)=>new Date(M.dateDerniereModification||M.dateCreation).getTime()-new Date(C.dateDerniereModification||C.dateCreation).getTime())[0].statut===le.REJETEE};return c?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"loading loading-spinner loading-lg"})}):e.jsxs("div",{className:"space-y-4",children:[n.publiee&&e.jsxs("div",{className:"alert alert-info alert-sm py-2",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Votre expertise est publie et visible sur la page d'accueil"})]}),e.jsx("div",{className:"card bg-base-100 shadow-sm border border-base-200",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold",children:"diter votre expertise"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("span",{className:`text-xs font-medium ${n.disponible?"text-success":"text-base-content/50"}`,children:n.disponible?"Disponible":"Indisponible"}),e.jsx("input",{type:"checkbox",className:"toggle toggle-success toggle-sm",checked:n.disponible||!1,onChange:N=>Mt("disponible",N.target.checked)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text text-sm font-medium",children:"Titre professionnel *"})}),e.jsx("input",{type:"text",placeholder:"Ex: Dveloppeur Full Stack Senior",className:"input input-bordered input-sm w-full",value:n.titre||"",onChange:N=>Mt("titre",N.target.value)})]}),e.jsxs("div",{className:"form-control relative",children:[e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text text-sm font-medium",children:"Localisation *"})}),e.jsx("input",{type:"text",placeholder:"Ex: Abidjan, Cte d'Ivoire",className:"input input-bordered input-sm w-full",value:O,onChange:async N=>{const B=N.target.value;if(re(B),B.length>=2){ve(!0);try{const C=await(await fetch(`/api/localisations/recherche?terme=${encodeURIComponent(B)}`)).json();Pe(C),Le(!0)}catch(te){console.error("Erreur lors de la recherche de localisations:",te)}finally{ve(!1)}}else Le(!1)},onFocus:()=>{O.length>=2&&me.length>0&&Le(!0)}}),Ne&&me.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-base-100 border border-base-300 rounded-lg shadow-lg max-h-48 overflow-y-auto top-full",children:me.map(N=>e.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-base-200 transition-colors border-b border-base-200 last:border-b-0 text-sm",onClick:()=>{re(N.nomComplet),Mt("villeId",N.villeId),Mt("localisationComplete",N.nomComplet),Le(!1)},children:e.jsx("div",{className:"font-medium",children:N.nomComplet})},N.villeId))}),Y&&e.jsx("div",{className:"absolute right-3 top-9",children:e.jsx("span",{className:"loading loading-spinner loading-xs"})})]})]}),e.jsxs("div",{className:"form-control h-full",children:[e.jsxs("label",{className:"label py-1",children:[e.jsx("span",{className:"label-text text-sm font-medium",children:"Description *"}),e.jsxs("span",{className:"label-text-alt text-xs text-base-content/50",children:[(n.description||"").length,"/500"]})]}),e.jsx("textarea",{className:"textarea textarea-bordered text-sm flex-1 min-h-[100px] md:h-full resize-none",placeholder:"Dcrivez votre expertise, vos domaines de comptence, ce qui vous distingue...",value:n.description||"",onChange:N=>Mt("description",N.target.value),maxLength:500})]})]})]})}),e.jsx("div",{className:"card bg-base-100 shadow-sm border border-base-200",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Mes Comptences"}),e.jsxs("span",{className:"badge badge-ghost badge-sm",children:[l.length,"/6"]})]}),e.jsxs("button",{className:`btn btn-xs gap-1 ${l.length>=6?"btn-disabled":"btn-primary"}`,onClick:X,disabled:l.length>=6,children:[e.jsx(Ye,{className:"w-3 h-3"}),"Ajouter"]})]}),l.length===0?e.jsx("div",{className:"text-center py-6 text-base-content/50 text-sm",children:e.jsx("p",{children:'Aucune comptence. Cliquez sur "Ajouter" pour commencer.'})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(N=>e.jsx("div",{className:"bg-base-200/50 border border-base-300 rounded-lg p-4 hover:border-primary/30 hover:bg-primary/5 transition-all group min-h-[140px]",children:e.jsxs("div",{className:"flex justify-between items-start gap-3 h-full",children:[e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>{Me(N),ke(!0)},title:"Cliquez pour voir les dtails",children:N.nom}),N.estFavorite&&e.jsx($r,{className:"w-3.5 h-3.5 fill-warning text-warning flex-shrink-0"})]}),N.description&&e.jsx("p",{className:"text-xs text-base-content/60 mt-1 line-clamp-2",children:N.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[N.niveauMaitrise&&e.jsx("div",{className:"rating rating-xs",children:[1,2,3,4,5].map(B=>e.jsx("input",{type:"radio",className:"mask mask-star-2 bg-warning",checked:B===N.niveauMaitrise,readOnly:!0},B))}),N.anneesExperience!==void 0&&N.anneesExperience>0&&e.jsxs("span",{className:"badge badge-ghost badge-sm",children:[N.anneesExperience,"an",N.anneesExperience>1?"s":""]}),N.thm&&e.jsxs("span",{className:"badge badge-primary badge-sm badge-outline",children:[(N.thm/1e3).toFixed(0),"k/h"]}),N.nombreProjets!==void 0&&N.nombreProjets>0&&e.jsxs("span",{className:"badge badge-ghost badge-sm",children:[N.nombreProjets,"proj"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2 opacity-70 group-hover:opacity-100 transition-opacity",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"btn btn-ghost btn-xs btn-circle",onClick:()=>ns(N),title:N.estFavorite?"Retirer des favoris":"Favoris",children:e.jsx($r,{className:`w-3.5 h-3.5 ${N.estFavorite?"fill-warning text-warning":""}`})}),e.jsx("button",{className:"btn btn-ghost btn-xs btn-circle",onClick:()=>_e(N),title:"Modifier",children:e.jsx(Is,{className:"w-3.5 h-3.5"})}),e.jsx("button",{className:"btn btn-ghost btn-xs btn-circle text-error",onClick:()=>Ct(N.id,N.nom),title:"Supprimer",children:e.jsx(Je,{className:"w-3.5 h-3.5"})})]}),(()=>{const B=mr(N.nom),te=pr(N.nom),C=Qs(N.nom);if(te)return e.jsxs("span",{className:"badge badge-warning badge-sm gap-1",children:[e.jsx(ut,{className:"w-3 h-3"}),"En cours"]});if(B){const M={BRONZE:"badge-warning",ARGENT:"badge-info",OR:"badge-accent",PLATINE:"badge-secondary"};return e.jsxs("span",{className:`badge ${M[B.niveauCertification]||"badge-success"} badge-sm gap-1`,children:[e.jsx(ze,{className:"w-3 h-3"}),B.niveauCertification]})}return C?e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:"badge badge-error badge-sm gap-1 text-white",children:"Rejete"}),e.jsxs("button",{className:"btn btn-outline btn-primary btn-xs gap-1 text-xs",onClick:()=>Ve(N),title:"Soumettre une nouvelle demande",children:[e.jsx(Et,{className:"w-3 h-3"}),"Resoumettre"]})]}):!te&&!B?e.jsxs("button",{className:"btn btn-primary btn-xs gap-1 text-xs",onClick:()=>Ve(N),children:[e.jsx(Et,{className:"w-3 h-3"}),"Certifier"]}):null})()]})]})},N.id))}),f&&b&&e.jsxs("div",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box relative",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"rounded-full bg-error/10 p-3",children:e.jsx(Je,{className:"w-12 h-12 text-error"})})}),e.jsx("h3",{className:"font-bold text-xl text-center mb-2",children:"Confirmer la suppression"}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-base-content/70 mb-2",children:"tes-vous sr de vouloir supprimer la comptence :"}),e.jsx("p",{className:"font-semibold text-lg text-primary",children:b.nom}),e.jsx("p",{className:"text-sm text-error mt-2",children:"Cette action est irrversible."})]}),e.jsxs("div",{className:"modal-action justify-center gap-3",children:[e.jsx("button",{className:"btn btn-ghost",onClick:Bt,children:"Annuler"}),e.jsxs("button",{className:"btn btn-error gap-2",onClick:xs,children:[e.jsx(Je,{className:"w-4 h-4"}),"Supprimer"]})]})]}),e.jsx("div",{className:"modal-backdrop",onClick:Bt})]}),v&&u&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box max-w-md p-4",children:[e.jsx("h3",{className:"font-bold text-base mb-3",children:u.id?"Modifier la comptence":"Ajouter une comptence"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"label py-1",children:[e.jsx("span",{className:"label-text text-sm font-medium",children:"Comptence *"}),Q&&e.jsxs("span",{className:"label-text-alt text-success flex items-center gap-1 text-xs",children:[e.jsx(ze,{className:"w-3 h-3"}),"Valide"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Recherchez une comptence...",className:`input input-bordered input-sm w-full ${Q?"input-success":""}`,value:u.nom,onChange:N=>{const B=N.target.value;g({...u,nom:B}),xe(B),W(!1),J(null),B===""&&g({...u,nom:"",description:""})},onFocus:()=>{u.nom.length>=2?xe(u.nom):fe()},onBlur:()=>{setTimeout(()=>R(!1),200)}}),w&&P.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-base-100 border border-base-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:I?e.jsx("div",{className:"p-4 text-center",children:e.jsx("span",{className:"loading loading-spinner loading-sm"})}):P.map(N=>e.jsxs("div",{className:"p-3 hover:bg-base-200 cursor-pointer border-b border-base-300 last:border-b-0",onClick:()=>Oe(N),children:[e.jsx("div",{className:"font-medium text-sm",children:N.libelle}),N.description&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:N.description}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[N.domaine&&e.jsx("span",{className:"badge badge-primary badge-xs",children:N.domaine}),N.typeCompetence&&e.jsx("span",{className:"badge badge-secondary badge-xs",children:N.typeCompetence})]})]},N.id))}),w&&!I&&P.length===0&&u.nom.length>=2&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-base-100 border border-base-300 rounded-lg shadow-lg p-3",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Aucune comptence disponible. Les comptences dj ajoutes ne sont pas affiches."})}),w&&!I&&P.length===0&&u.nom.length<2&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-base-100 border border-base-300 rounded-lg shadow-lg p-3",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Toutes les comptences populaires ont dj t ajoutes. Tapez pour rechercher d'autres comptences."})})]}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-gray-500",children:Q?"Comptence valide depuis le rfrentiel":"Vous devez slectionner une comptence depuis la liste propose"})})]}),e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"label py-1",children:[e.jsx("span",{className:"label-text text-sm font-medium",children:"Description"}),Q&&e.jsx("span",{className:"label-text-alt text-info text-xs",children:"Depuis rfrentiel"})]}),e.jsx("textarea",{className:"textarea textarea-bordered textarea-sm h-16 text-sm disabled:bg-base-200 disabled:text-base-content/70",placeholder:"Dcrivez votre exprience...",value:u.description||"",onChange:N=>g({...u,description:N.target.value}),disabled:Q})]}),e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"label py-1",children:[e.jsx("span",{className:"label-text text-sm font-medium",children:"Niveau de matrise"}),e.jsxs("span",{className:"label-text-alt text-xs text-base-content/60",children:[u.niveauMaitrise===1&&"Dbutant",u.niveauMaitrise===2&&"Junior",u.niveauMaitrise===3&&"Intermdiaire",u.niveauMaitrise===4&&"Senior",u.niveauMaitrise===5&&"Expert"]})]}),e.jsx("div",{className:"rating rating-sm",children:[1,2,3,4,5].map(N=>e.jsx("input",{type:"radio",name:"rating",className:"mask mask-star-2 bg-warning",checked:N===u.niveauMaitrise,onChange:()=>g({...u,niveauMaitrise:N})},N))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text text-sm font-medium",children:"Annes d'exp."})}),e.jsx("input",{type:"number",min:"0",className:"input input-bordered input-sm w-full",value:u.anneesExperience||0,onChange:N=>g({...u,anneesExperience:parseInt(N.target.value)||0})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text text-sm font-medium",children:"Nbre projets"})}),e.jsx("input",{type:"number",min:"0",className:"input input-bordered input-sm w-full",value:u.nombreProjets||0,onChange:N=>g({...u,nombreProjets:parseInt(N.target.value)||0})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text text-sm font-medium",children:"Taux Horaire Moyen (FCFA/h)"})}),e.jsx("input",{type:"number",min:"0",placeholder:"Ex: 15000",className:"input input-bordered input-sm w-full",value:u.thm||"",onChange:N=>g({...u,thm:parseInt(N.target.value)||void 0})})]}),e.jsxs("div",{className:"form-control relative",children:[e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text text-sm font-medium",children:"Certifications"})}),q.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-1.5",children:q.map((N,B)=>e.jsxs("div",{className:"badge badge-primary badge-sm gap-1",children:[e.jsx("span",{className:"truncate max-w-[120px]",children:N}),e.jsx("button",{type:"button",className:"hover:text-error",onClick:()=>{const te=q.filter((C,M)=>M!==B);ie(te),g({...u,certifications:te.join(", ")})},children:""})]},B))}),e.jsx("input",{type:"text",className:"input input-bordered input-sm w-full",placeholder:"Rechercher une certification...",value:$,onChange:async N=>{const B=N.target.value;if(D(B),B.length>=2)try{S(!0);const C=await(await fetch(`/api/certifications/recherche?terme=${encodeURIComponent(B)}`)).json();se(Array.isArray(C)?C:[]),A(!0)}catch(te){console.error("Erreur lors de la recherche de certifications:",te),se([])}finally{S(!1)}else A(!1),se([])},onKeyPress:N=>{if(N.key==="Enter"&&$.trim()){N.preventDefault();const B=[...q,$.trim()];ie(B),g({...u,certifications:B.join(", ")}),D(""),A(!1)}},onFocus:async()=>{if($.length<2)try{S(!0);const B=await(await fetch("/api/certifications/populaires?limit=10")).json();se(Array.isArray(B)?B:[]),A(!0)}catch(N){console.error("Erreur:",N)}finally{S(!1)}}}),be&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-base-100 border border-base-300 rounded-lg shadow-lg max-h-60 overflow-y-auto top-full",children:z?e.jsx("div",{className:"p-4 text-center",children:e.jsx("span",{className:"loading loading-spinner loading-sm"})}):ce.length>0?ce.map(N=>e.jsxs("button",{type:"button",className:"w-full text-left px-4 py-2 hover:bg-base-200 transition-colors",onClick:()=>{if(!q.includes(N.intitule)){const B=[...q,N.intitule];ie(B),g({...u,certifications:B.join(", ")})}D(""),A(!1)},children:[e.jsx("div",{className:"font-semibold",children:N.intitule}),N.organismeDelivrant&&e.jsx("div",{className:"text-xs text-gray-500",children:N.organismeDelivrant})]},N.id)):e.jsxs("div",{className:"p-4 text-center text-gray-500",children:['Aucune certification trouve. Appuyez sur Entre pour ajouter "',$,'"']})})]}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start gap-2 py-1",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-warning checkbox-sm",checked:u.estFavorite||!1,onChange:N=>g({...u,estFavorite:N.target.checked})}),e.jsx("span",{className:"label-text text-sm",children:"Comptence favorite"})]})})]}),e.jsxs("div",{className:"modal-action mt-4 pt-3 border-t border-base-200",children:[!Q&&e.jsxs("div",{className:"flex-1 text-xs text-warning flex items-center gap-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Slectionnez une comptence du rfrentiel"]}),e.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>{y(!1),g(null)},children:"Annuler"}),e.jsx("button",{className:`btn btn-primary btn-sm ${Q?"":"btn-disabled"}`,onClick:nt,disabled:!Q,children:u.id?"Modifier":"Ajouter"})]})]})})]})}),e.jsx("div",{className:"card bg-base-100 shadow-sm border border-base-200",children:e.jsxs("div",{className:"card-body p-4",children:[!rs().valide&&!n.publiee&&e.jsxs("div",{className:"alert alert-warning alert-sm py-2 mb-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium",children:"Pour publier : "}),rs().raisons.join("  ")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"toggle toggle-success toggle-sm",checked:n.publiee||!1,onChange:N=>Ce(N.target.checked),disabled:x||m}),e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-medium ${n.publiee?"text-success":"text-base-content/70"}`,children:n.publiee?"Publie":"Non publie"}),e.jsx("span",{className:"text-xs text-base-content/50 ml-2",children:n.publiee?"(visible publiquement)":"(brouillon)"})]})]}),e.jsx("button",{className:"btn btn-primary btn-sm gap-1.5",onClick:F,disabled:m||x,children:m?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Sauvegarde..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-3.5 h-3.5"}),"Enregistrer"]})})]})]})}),U&&U.competenceReferenceId&&e.jsx(qj,{isOpen:ne,onClose:()=>{we(!1),H(null)},competenceId:U.id,competenceNom:U.nom,onSuccess:()=>{rt(),ur(),s&&s()}}),e.jsx(tf,{isOpen:ae,onClose:()=>{ke(!1),Me(null)},competence:Te,badge:Te?mr(Te.nom):null,montrerBoutonCertification:Te!==null&&Te.competenceReferenceId!==void 0&&!mr(Te.nom)&&!pr(Te.nom),onDemanderCertification:()=>{Te&&Ve(Te)}})]})};function sy({isOpen:t,onClose:s,onConfirm:r,title:n,message:a,confirmText:l="Confirmer",cancelText:i="Annuler",type:c="warning"}){if(!t)return null;const o={info:"alert-info",warning:"alert-warning",error:"alert-error",success:"alert-success"};return e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:n}),e.jsxs("div",{className:`alert ${o[c]} mb-6`,children:[e.jsx(Ge,{size:24}),e.jsx("span",{children:a})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:s,className:"btn btn-ghost",children:i}),e.jsx("button",{onClick:()=>{r(),s()},className:`btn ${c==="error"?"btn-error":c==="success"?"btn-success":c==="warning"?"btn-warning":"btn-primary"}`,children:l})]})]})})}var Dt=(t=>(t.BRONZE="BRONZE",t.ARGENT="ARGENT",t.OR="OR",t.PLATINE="PLATINE",t))(Dt||{});const Cn="/api/badges",Ol={async getMesBadges(t=!0){const s=`${Cn}/mes-badges?actifSeulement=${t}`,r=await fetch(s,{credentials:"include"});if(!r.ok)throw new Error("Erreur lors de la rcupration des badges");return r.json()},async getBadgesPublics(t){const s=await fetch(`${Cn}/utilisateur/${t}`,{credentials:"include"});if(!s.ok)throw new Error("Erreur lors de la rcupration des badges publics");return s.json()},async getBadge(t){const s=await fetch(`${Cn}/${t}`,{credentials:"include"});if(!s.ok)throw new Error("Erreur lors de la rcupration du badge");return s.json()},async toggleVisibilite(t){const s=await fetch(`${Cn}/${t}/toggle-visibilite`,{method:"PUT",credentials:"include"});if(!s.ok)throw new Error("Erreur lors du changement de visibilit");return s.json()},async getStatistiques(){const t=await fetch(`${Cn}/statistiques`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des statistiques");return t.json()},async definirOrdreAffichage(t){if(!(await fetch(`${Cn}/ordre-affichage`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).ok)throw new Error("Erreur lors de la dfinition de l'ordre")},getNiveauLibelle(t){return{BRONZE:"Bronze - Niveau dbutant",ARGENT:"Argent - Niveau intermdiaire",OR:"Or - Niveau avanc",PLATINE:"Platine - Niveau expert"}[t]||t},getNiveauCouleur(t){return{BRONZE:"#CD7F32",ARGENT:"#C0C0C0",OR:"#FFD700",PLATINE:"#E5E4E2"}[t]||"#808080"},getNiveauClasse(t){return{BRONZE:"badge-bronze",ARGENT:"badge-argent",OR:"badge-or",PLATINE:"badge-platine"}[t]||""}},Vc=t=>({[Dt.BRONZE]:"BRONZE (Dbutant)",[Dt.ARGENT]:"ARGENT (Intermdiaire)",[Dt.OR]:"OR (Avanc)",[Dt.PLATINE]:"PLATINE (Expert)"})[t]||t,ry=t=>({SAVOIR:"Dbutant (Bronze)",SAVOIR_FAIRE:"Intermdiaire (Argent)",SAVOIR_ETRE:"Avanc (Or)",SAVOIR_AGIR:"Expert (Platine)"})[t]||"Non spcifi";function ny(){const t=jt(),s=xl(),[r,n]=d.useState("editer"),[a,l]=d.useState(""),[i,c]=d.useState([]),[o,m]=d.useState(!1),[j,x]=d.useState([]),[h,u]=d.useState([]),[g,v]=d.useState(!1),[y,f]=d.useState(null),[p,b]=d.useState(!1),[E,P]=d.useState(null),[k,w]=d.useState(!1),[R,I]=d.useState(null),[T,L]=d.useState(""),[J,Q]=d.useState([]),[W,ce]=d.useState(!1),[se,be]=d.useState([]),[A,z]=d.useState(!1);Jr({title:"Mon Expertise",tabs:[{id:"editer",label:"Editer mon profil"},{id:"demandes",label:`Mes demandes de reconnaissance (${h.length})`},{id:"badges",label:`Mes badges (${se.length})`},{id:"competences",label:`Mes Comptences (${i.length})`}],activeTab:r,onTabChange:V=>n(V)});const S={[Ue.BRONZE]:"",[Ue.ARGENT]:"",[Ue.OR]:"",[Ue.PLATINE]:""},$={[Ue.BRONZE]:"from-orange-400 to-orange-600",[Ue.ARGENT]:"from-gray-300 to-gray-500",[Ue.OR]:"from-yellow-400 to-yellow-600",[Ue.PLATINE]:"from-purple-400 to-pink-600"},D={[Ue.BRONZE]:{bg:"bg-gradient-to-br from-orange-50 to-amber-50",border:"border-orange-200 hover:border-orange-300",accent:"text-orange-700"},[Ue.ARGENT]:{bg:"bg-gradient-to-br from-slate-50 to-gray-100",border:"border-slate-300 hover:border-slate-400",accent:"text-slate-600"},[Ue.OR]:{bg:"bg-gradient-to-br from-yellow-50 to-amber-50",border:"border-yellow-300 hover:border-yellow-400",accent:"text-yellow-700"},[Ue.PLATINE]:{bg:"bg-gradient-to-br from-purple-50 to-pink-50",border:"border-purple-200 hover:border-purple-300",accent:"text-purple-700"}};d.useEffect(()=>{q(),ne(),ie(),ve()},[]);const q=()=>{const Se=(JSON.parse(localStorage.getItem("pitm_utilisateur")||"{}").competences||[]).map(Re=>{const Ve=$m.find(rt=>rt.nom===Re);return{id:`user_comp_${Re}`,competenceId:(Ve==null?void 0:Ve.id)||Re,nom:Re,description:(Ve==null?void 0:Ve.description)||"Comptence ajoute",nombreDemandes:Math.floor(Math.random()*15)+1,dateAjout:new Date().toISOString()}});c(Se)},ie=async()=>{try{v(!0);const V=await Rs.getMesDemandes();u(V)}catch(V){s.erreur(V),console.error("Erreur chargement demandes:",V)}finally{v(!1)}},me=V=>{P(V),b(!0)},Pe=async()=>{if(E)try{await Rs.annulerDemande(E),await ie(),b(!1),P(null),s.succes("Demande annule avec succs")}catch(V){b(!1),s.erreur(V)}},Ne=V=>{I(V),L(""),Q([]),w(!0)},Le=V=>{V.target.files&&Q(Array.from(V.target.files))},Y=async()=>{if(R)try{if(ce(!0),J.length>0)for(const V of J)await Rs.ajouterPieceJustificative(R.id,V,Pt.AUTRE);await Rs.resoumettreApresComplement(R.id,T||void 0),s.succes("Complment fourni ! Votre demande a t resoumise."),w(!1),I(null),L(""),Q([]),ie()}catch(V){s.erreur(V)}finally{ce(!1)}},ve=async()=>{try{z(!0);const V=await Rs.getMesBadges(!0);be(V)}catch(V){s.erreur(V)}finally{z(!1)}},O=async()=>{await Promise.all([ie(),ve()]),q()},re=async(V,je)=>{try{await Rs.toggleVisibiliteBadge(V),await ve(),s.succes(je?"Badge masqu sur votre profil public":"Badge visible sur votre profil public")}catch(Se){s.erreur(Se)}},ne=()=>{x([{id:"prop_1",competenceId:"comp_react",nomProjet:"Dveloppement d'une plateforme e-commerce",descriptionProjet:"Cration d'une boutique en ligne moderne avec panier, paiement et gestion des commandes. Interface responsive et performante.",nomClient:"Sarah Ouedraogo",emailClient:"sarah.o@entreprise.bf",avatarClient:"https://i.pravatar.cc/200?u=sarah",entrepriseClient:"TechStore BF",budget:25e5,devise:"FCFA",dureeEstimee:"6 semaines",dateProposition:"2025-01-28",statut:"en_attente",priorite:"haute",type:"projet"},{id:"prop_2",competenceId:"comp_react",nomProjet:"Correction de bugs sur application React",descriptionProjet:"Rsoudre 5 bugs identifis dans notre application de gestion. Liste dtaille fournie.",nomClient:"Moussa Traor",emailClient:"moussa.t@startup.bf",entrepriseClient:"StartupHub",budget:15e4,devise:"FCFA",dureeEstimee:"1 semaine",dateProposition:"2025-01-27",statut:"en_attente",priorite:"normale",type:"tache"},{id:"prop_3",competenceId:"comp_nodejs",nomProjet:"API REST pour application mobile",descriptionProjet:"Dveloppement d'une API backend complte avec authentification, gestion utilisateurs et base de donnes MongoDB.",nomClient:"Aminata Kabor",emailClient:"aminata.k@mobile.bf",entrepriseClient:"MobileFirst",budget:18e5,devise:"FCFA",dureeEstimee:"4 semaines",dateProposition:"2025-01-26",statut:"en_attente",priorite:"haute",type:"projet"},{id:"prop_4",competenceId:"comp_figma",nomProjet:"Maquettes UI pour application bancaire",descriptionProjet:"Cration de 15 crans pour une application bancaire moderne. Respect de la charte graphique fournie.",nomClient:"Ibrahim Sawadogo",emailClient:"ibrahim.s@banque.bf",entrepriseClient:"Banque Digitale",budget:8e5,devise:"FCFA",dureeEstimee:"3 semaines",dateProposition:"2025-01-25",statut:"en_attente",priorite:"normale",type:"projet"}])},we=$m.filter(V=>{const je=a.toLowerCase();return!i.some(Re=>Re.nom===V.nom)&&(V.nom.toLowerCase().includes(je)||V.description.toLowerCase().includes(je)||V.categorie.toLowerCase().includes(je))}).slice(0,6),U=V=>{const je={id:`user_${V.id}`,competenceId:V.id,nom:V.nom,description:V.description,nombreDemandes:0,dateAjout:new Date().toISOString()};c(Ve=>[...Ve,je]),l(""),m(!1);const Se=JSON.parse(localStorage.getItem("pitm_utilisateur")||"{}"),Re=[...Se.competences||[],V.nom];localStorage.setItem("pitm_utilisateur",JSON.stringify({...Se,competences:Re}))},H=V=>{const je=i.find(Ve=>Ve.id===V);if(!je)return;c(Ve=>Ve.filter(rt=>rt.id!==V));const Se=JSON.parse(localStorage.getItem("pitm_utilisateur")||"{}"),Re=(Se.competences||[]).filter(Ve=>Ve!==je.nom);localStorage.setItem("pitm_utilisateur",JSON.stringify({...Se,competences:Re}))},ae=V=>{t(`/expertise/${V.nom}`)},ke=V=>V===le.ASSIGNEE_RH||V===le.EN_COURS_EVALUATION||V===le.EN_ATTENTE_VALIDATION||V===le.EN_COURS_TRAITEMENT?le.EN_COURS_TRAITEMENT:V,Te={[le.EN_ATTENTE]:"bg-yellow-100 text-yellow-800",[le.ASSIGNEE_RH]:"bg-blue-100 text-blue-800",[le.EN_COURS_EVALUATION]:"bg-indigo-100 text-indigo-800",[le.EN_ATTENTE_VALIDATION]:"bg-purple-100 text-purple-800",[le.EN_COURS_TRAITEMENT]:"bg-blue-100 text-blue-800",[le.COMPLEMENT_REQUIS]:"bg-orange-100 text-orange-800",[le.APPROUVEE]:"bg-green-100 text-green-800",[le.REJETEE]:"bg-red-100 text-red-800",[le.ANNULEE]:"bg-gray-100 text-gray-800"},Me={[le.EN_ATTENTE]:"En attente",[le.ASSIGNEE_RH]:"En cours de traitement",[le.EN_COURS_EVALUATION]:"En cours de traitement",[le.EN_ATTENTE_VALIDATION]:"En cours de traitement",[le.EN_COURS_TRAITEMENT]:"En cours de traitement",[le.COMPLEMENT_REQUIS]:"Complment requis",[le.APPROUVEE]:"Approuve",[le.REJETEE]:"Rejete",[le.ANNULEE]:"Annule"},pt=V=>j.filter(je=>je.competenceId===V),At=V=>{const je=ke(V.statut),Se=V.commentaireTraitant;if(je===le.APPROUVEE){let Re=`Flicitations ! Votre demande de reconnaissance pour la comptence "${V.competenceNom}" a t approuve. Vous avez obtenu un badge qui valorise votre expertise.`;return Se&&(Re+=` Observations : ${Se}`),{message:Re,type:"succes"}}if(je===le.REJETEE){let Re=`Nous sommes dsols, votre demande de reconnaissance pour la comptence "${V.competenceNom}" n'a pas pu tre approuve.`;return Se?Re+=` Raison : ${Se}`:Re+=" N'hsitez pas  soumettre une nouvelle demande avec des justificatifs plus complets.",{message:Re,type:"erreur"}}if(je===le.COMPLEMENT_REQUIS){let Re="Des informations complmentaires sont ncessaires pour traiter votre demande.";return Se&&(Re+=` Ce qui est demand : ${Se}`),{message:Re,type:"avertissement"}}return je===le.ANNULEE?{message:"Cette demande a t annule.",type:"info"}:je===le.EN_ATTENTE?{message:"Votre demande est en attente d'assignation  un valuateur. Vous serez notifi ds qu'elle sera prise en charge.",type:"info"}:{message:"Votre demande est en cours de traitement par nos quipes. Vous serez notifi ds qu'une dcision sera prise.",type:"info"}};return e.jsxs("div",{className:"p-4 max-w-7xl mx-auto",children:[r==="editer"&&e.jsx(ty,{onDemandeSubmitted:O}),r==="demandes"&&(g?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):h.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[e.jsx(Ob,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Aucune demande de reconnaissance"}),e.jsx("button",{onClick:()=>n("editer"),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 text-sm font-medium",children:"Grer mes comptences"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2",children:h.map(V=>{const je=ke(V.statut),Se=je===le.APPROUVEE?ze:je===le.REJETEE?ds:je===le.COMPLEMENT_REQUIS?Ge:ut;return e.jsxs("div",{onClick:()=>f(V),className:"bg-white border border-slate-200 rounded-xl p-4 hover:border-primary/40 hover:bg-primary/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${je===le.APPROUVEE?"bg-emerald-100 text-emerald-600":je===le.REJETEE?"bg-red-100 text-red-600":je===le.COMPLEMENT_REQUIS?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}`,children:e.jsx(Se,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:V.competenceNom}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${Te[je]}`,children:Me[je]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ss,{size:12}),new Date(V.dateCreation).toLocaleDateString("fr-FR")]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($a,{size:12}),V.nombrePieces," pice(s)"]}),V.badge&&e.jsx("span",{className:"font-medium text-emerald-600",children:"Badge obtenu"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[V.statut===le.COMPLEMENT_REQUIS&&e.jsxs("button",{onClick:Re=>{Re.stopPropagation(),Ne(V)},className:"px-3 py-1.5 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-xs font-medium flex items-center gap-1",children:[e.jsx(Wn,{size:14}),"Complter"]}),e.jsx(qr,{size:18,className:"text-gray-400 group-hover:text-primary transition-colors"})]})]}),V.statut===le.COMPLEMENT_REQUIS&&V.commentaireTraitant&&e.jsx("div",{className:"mt-3 p-2.5 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-orange-800",children:[e.jsx("span",{className:"font-medium",children:"Demande :"})," ",V.commentaireTraitant]})})]},V.id)})})),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>f(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full shadow-xl",onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(ts,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:y.competenceNom}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${Te[ke(y.statut)]}`,children:Me[ke(y.statut)]})]})]}),e.jsx("button",{onClick:()=>f(null),className:"p-1.5 hover:bg-slate-100 rounded-lg",children:e.jsx(st,{size:18,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-5 space-y-4 max-h-[60vh] overflow-y-auto",children:[(()=>{const V=At(y),Se={succes:{bg:"bg-emerald-50",border:"border-emerald-200",text:"text-emerald-800",icon:e.jsx(ze,{size:18,className:"text-emerald-500 flex-shrink-0 mt-0.5"})},erreur:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:e.jsx(ds,{size:18,className:"text-red-500 flex-shrink-0 mt-0.5"})},avertissement:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",icon:e.jsx(Ge,{size:18,className:"text-orange-500 flex-shrink-0 mt-0.5"})},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:e.jsx(ut,{size:18,className:"text-blue-500 flex-shrink-0 mt-0.5"})}}[V.type];return e.jsxs("div",{className:`p-3 ${Se.bg} border ${Se.border} rounded-lg flex gap-2.5`,children:[Se.icon,e.jsx("p",{className:`text-sm ${Se.text} text-justify`,children:V.message})]})})(),y.commentaireExpert&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 mb-1",children:"Motif / Justification Demande"}),e.jsx("p",{className:"text-sm text-gray-700 text-justify",children:y.commentaireExpert})]}),y.pieces&&y.pieces.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 mb-2",children:["Pices jointes (",y.pieces.length,")"]}),e.jsx("div",{className:"space-y-1",children:y.pieces.map(V=>e.jsxs("div",{className:"flex items-center gap-2 text-sm p-2 bg-slate-50 rounded-lg",children:[V.estVerifie?e.jsx(ze,{size:14,className:"text-emerald-500"}):e.jsx($a,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"truncate flex-1",children:V.nom})]},V.id))})]}),y.evaluation&&e.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Note d'valuation"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:[y.evaluation.noteGlobale,"/100"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-5 py-4 border-t border-slate-200 bg-slate-50 rounded-b-xl",children:[(y.statut===le.EN_ATTENTE||y.statut===le.COMPLEMENT_REQUIS)&&e.jsx("button",{onClick:()=>{f(null),me(y.id)},className:"px-3 py-1.5 text-red-600 hover:bg-red-50 rounded-lg text-sm font-medium",children:"Annuler"}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:()=>f(null),className:"px-4 py-1.5 bg-slate-200 hover:bg-slate-300 rounded-lg text-sm font-medium",children:"Fermer"})]})]})}),k&&R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>!W&&w(!1),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full shadow-xl",onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-orange-100",children:e.jsx(Wn,{size:18,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Fournir le complment"}),e.jsx("p",{className:"text-xs text-gray-500",children:R.competenceNom})]})]}),e.jsx("button",{onClick:()=>w(!1),disabled:W,className:"p-1 hover:bg-slate-100 rounded-lg",children:e.jsx(st,{size:16,className:"text-gray-400"})})]}),e.jsxs("div",{className:"px-4 py-3 space-y-3",children:[R.commentaireTraitant&&e.jsxs("div",{className:"p-2.5 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-orange-700 mb-1",children:"Ce qui est demand :"}),e.jsx("p",{className:"text-sm text-orange-800",children:R.commentaireTraitant})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1.5",children:["Commentaires ",e.jsx("span",{className:"text-gray-400",children:"(optionnel)"})]}),e.jsx("textarea",{value:T,onChange:V=>L(V.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none focus:ring-2 focus:ring-primary/20 focus:border-primary",rows:2,placeholder:"Expliquez les complments apports...",disabled:W})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1.5",children:["Pices justificatives ",e.jsx("span",{className:"text-gray-400",children:"(optionnel)"})]}),e.jsxs("div",{className:"border border-dashed border-slate-300 rounded-lg p-3 text-center",children:[e.jsx("input",{type:"file",multiple:!0,onChange:Le,className:"hidden",id:"fichier-complement",disabled:W}),e.jsxs("label",{htmlFor:"fichier-complement",className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg text-sm font-medium text-gray-700",children:[e.jsx(Wn,{size:14}),"Ajouter des fichiers"]}),J.length>0&&e.jsx("div",{className:"mt-2 text-left space-y-1",children:J.map((V,je)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 p-1.5 bg-slate-50 rounded",children:[e.jsx($a,{size:12}),e.jsx("span",{className:"truncate",children:V.name}),e.jsxs("span",{className:"text-gray-400",children:["(",(V.size/1024).toFixed(0)," Ko)"]})]},je))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 px-4 py-3 border-t border-slate-200 bg-slate-50 rounded-b-xl",children:[e.jsx("button",{onClick:()=>w(!1),disabled:W,className:"px-3 py-1.5 text-gray-600 hover:bg-slate-200 rounded-lg text-sm font-medium",children:"Annuler"}),e.jsxs("button",{onClick:Y,disabled:W,className:"px-4 py-1.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium flex items-center gap-1.5 disabled:opacity-50",children:[e.jsx(ys,{size:14}),W?"Envoi...":"Resoumettre"]})]})]})}),e.jsx(sy,{isOpen:p,onClose:()=>{b(!1),P(null)},onConfirm:Pe,title:"Annuler la demande",message:"tes-vous sr de vouloir annuler cette demande ? Cette action est irrversible.",confirmText:"Oui, annuler",cancelText:"Non, garder",type:"error"}),r==="badges"&&(A?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):se.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[e.jsx(Et,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Aucun badge obtenu"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Soumettez des demandes de reconnaissance pour obtenir vos premiers badges"}),e.jsx("button",{onClick:()=>n("demandes"),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 text-sm font-medium",children:"Voir mes demandes"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:se.map(V=>{const je=D[V.niveauCertification];return e.jsxs("div",{className:`${je.bg} border ${je.border} rounded-xl p-4 hover:shadow-md transition-all group`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${$[V.niveauCertification]} flex items-center justify-center shadow-md`,children:e.jsx("span",{className:"text-2xl",children:S[V.niveauCertification]})}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${V.estValide?"bg-emerald-100/80 text-emerald-700":"bg-red-100/80 text-red-700"}`,children:V.estValide?"Valide":"Expir"}),e.jsx("button",{onClick:()=>re(V.id,V.estPublic),className:`p-1.5 rounded-lg transition-colors ${V.estPublic?"text-emerald-600 hover:bg-white/50":"text-gray-400 hover:bg-white/50"}`,title:V.estPublic?"Visible publiquement":"Masqu",children:V.estPublic?e.jsx(qt,{size:16}):e.jsx(Dr,{size:16})})]})]}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1 line-clamp-2",title:V.competenceNom,children:V.competenceNom}),e.jsx("p",{className:`text-xs font-medium mb-3 ${je.accent}`,children:Vc(V.niveauCertification)}),e.jsxs("div",{className:"pt-3 border-t border-white/50 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Obtenu le"}),e.jsx("span",{className:"text-gray-700 font-medium",children:new Date(V.dateObtention).toLocaleDateString("fr-FR")})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Validit"}),V.validitePermanente?e.jsxs("span",{className:"text-emerald-600 font-medium flex items-center gap-1",children:[e.jsx(ze,{size:12}),"Permanente"]}):V.dateExpiration?e.jsxs("span",{className:"text-orange-600 font-medium",children:["Jusqu'au ",new Date(V.dateExpiration).toLocaleDateString("fr-FR")]}):e.jsx("span",{className:"text-gray-400",children:"-"})]})]})]},V.id)})})),r==="competences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-gray-900 font-medium mb-3",children:"Rechercher et ajouter des comptences"}),e.jsxs("div",{className:"relative",children:[e.jsx(us,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Ex: React, Python, Design...",value:a,onChange:V=>{l(V.target.value),m(!0)},onFocus:()=>m(!0),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"})]}),o&&a&&we.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:we.map(V=>e.jsx("button",{onClick:()=>U(V),className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:V.icone}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.nom}),e.jsx("p",{className:"text-sm text-gray-600",children:V.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 rounded",children:V.categorie})})]})]})},V.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-4",children:["Mes comptences (",i.length,")"]}),i.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Ft,{size:48,className:"mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Aucune comptence ajoute"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Utilisez la barre de recherche ci-dessus pour ajouter vos comptences"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:i.map(V=>{const je=pt(V.competenceId),Se=je.filter(Re=>Re.statut==="en_attente").length;return e.jsxs("div",{className:"relative bg-white border-2 border-gray-200 rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-pointer group",onClick:()=>ae(V),children:[Se>0&&e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center text-sm font-bold shadow-lg animate-pulse",children:Se}),e.jsx("button",{onClick:Re=>{Re.stopPropagation(),H(V.id)},className:"absolute top-2 right-2 p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Retirer cette comptence",children:e.jsx(st,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg mb-1",children:V.nom}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:V.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[je.length," ",je.length>1?"propositions":"proposition"]}),Se>0&&e.jsxs("span",{className:"text-red-600 font-medium",children:[Se," en attente"]})]})]})]},V.id)})})]})]})]})}function ay(){const{competenceId:t}=bn(),s=jt(),[r,n]=d.useState(null),[a,l]=d.useState([]),[i,c]=d.useState(!0);d.useEffect(()=>{o()},[t]);const o=()=>{c(!0);try{const f=(JSON.parse(localStorage.getItem("pitm_utilisateur")||"{}").competences||[]).find(p=>p===t);if(f){const p={id:`user_comp_${f}`,competenceId:t||"",nom:f,description:`Comptence en ${f}`,nombreDemandes:Math.floor(Math.random()*15)+1,dateAjout:new Date().toISOString()};n(p),m(t||"")}else n(null)}catch(v){console.error("Erreur lors du chargement:",v)}finally{c(!1)}},m=v=>{l([{id:"prop_1",competenceId:v,nomProjet:"Dveloppement d'une plateforme e-commerce",descriptionProjet:"Cration d'une boutique en ligne moderne avec panier, paiement et gestion des commandes. Interface responsive et performante.",nomClient:"Sarah Ouedraogo",emailClient:"sarah.o@entreprise.bf",avatarClient:"https://i.pravatar.cc/200?u=sarah",entrepriseClient:"TechStore BF",budget:25e5,devise:"FCFA",dureeEstimee:"6 semaines",dateProposition:"2025-01-28",statut:"en_attente",priorite:"haute",type:"projet"},{id:"prop_2",competenceId:v,nomProjet:"Correction de bugs sur application",descriptionProjet:"Rsoudre 5 bugs identifis dans notre application de gestion. Liste dtaille fournie.",nomClient:"Moussa Traor",emailClient:"moussa.t@startup.bf",entrepriseClient:"StartupHub",budget:15e4,devise:"FCFA",dureeEstimee:"1 semaine",dateProposition:"2025-01-27",statut:"en_attente",priorite:"normale",type:"tache"},{id:"prop_3",competenceId:v,nomProjet:"API REST pour application mobile",descriptionProjet:"Dveloppement d'une API backend complte avec authentification, gestion utilisateurs et base de donnes MongoDB.",nomClient:"Aminata Kabor",emailClient:"aminata.k@mobile.bf",entrepriseClient:"MobileFirst",budget:18e5,devise:"FCFA",dureeEstimee:"4 semaines",dateProposition:"2025-01-26",statut:"en_attente",priorite:"haute",type:"projet"},{id:"prop_4",competenceId:v,nomProjet:"Optimisation des performances",descriptionProjet:"Amliorer les temps de chargement et optimiser les requtes de notre application web existante.",nomClient:"Ibrahim Sawadogo",emailClient:"ibrahim.s@tech.bf",entrepriseClient:"WebTech",budget:5e5,devise:"FCFA",dureeEstimee:"2 semaines",dateProposition:"2025-01-25",statut:"en_attente",priorite:"normale",type:"tache"}])},j=(v,y)=>{l(f=>f.map(p=>p.id===v?{...p,statut:y}:p)),console.log(`Notification envoye pour proposition ${v}: ${y}`),alert(`Proposition ${y==="accepte"?"accepte":"refuse"}. Le client a t notifi.`)},x=()=>{s("/expertise")};if(i)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})});if(!r)return e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ge,{size:64,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Comptence non trouve"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Cette comptence n'existe pas ou a t supprime."}),e.jsxs("button",{onClick:x,className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-800 transition-colors",children:[e.jsx(Os,{size:20}),"Retour aux comptences"]})]})});const h=a.filter(v=>v.statut==="en_attente"),u=a.filter(v=>v.statut==="accepte"),g=a.filter(v=>v.statut==="refuse");return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:x,className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Os,{size:20}),"Retour aux comptences"]}),e.jsx("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 rounded-xl p-6 border border-primary/20",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.nom}),e.jsx("p",{className:"text-gray-600 mb-4",children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{size:16,className:"text-gray-600"}),e.jsxs("span",{className:"text-gray-700",children:[a.length," ",a.length>1?"propositions":"proposition"]})]}),h.length>0&&e.jsxs("div",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full font-medium",children:[h.length," en attente"]}),u.length>0&&e.jsxs("div",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full font-medium",children:[u.length," accepte",u.length>1?"s":""]})]})]}),h.length>0&&e.jsx("div",{className:"w-16 h-16 bg-red-500 text-white rounded-full flex items-center justify-center text-2xl font-bold shadow-lg animate-pulse",children:h.length})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:e.jsxs("div",{className:"flex border-b border-gray-200 overflow-x-auto",children:[e.jsxs("button",{className:"flex-1 px-6 py-4 font-medium text-primary bg-primary/5 border-b-2 border-primary whitespace-nowrap",children:["Toutes (",a.length,")"]}),e.jsxs("button",{className:"flex-1 px-6 py-4 font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 whitespace-nowrap",children:["En attente (",h.length,")"]}),e.jsxs("button",{className:"flex-1 px-6 py-4 font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 whitespace-nowrap",children:["Acceptes (",u.length,")"]}),e.jsxs("button",{className:"flex-1 px-6 py-4 font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 whitespace-nowrap",children:["Refuses (",g.length,")"]})]})}),e.jsx("div",{className:"space-y-6",children:a.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(Ge,{size:48,className:"mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Aucune proposition pour cette comptence"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Les clients pourront vous soumettre des projets ncessitant ",r.nom]})]}):a.map(v=>e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border-2 p-6 transition-all hover:shadow-md ${v.statut==="en_attente"?"border-gray-300":v.statut==="accepte"?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("img",{src:v.avatarClient||"https://i.pravatar.cc/100",alt:v.nomClient,className:"w-16 h-16 rounded-full border-2 border-gray-200"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:v.nomClient}),v.entrepriseClient&&e.jsx("p",{className:"text-sm text-gray-600",children:v.entrepriseClient}),e.jsx("p",{className:"text-xs text-gray-500",children:v.emailClient})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[v.type==="projet"?e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:"Projet"}):e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full",children:"Tche"}),v.priorite==="haute"&&e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:"Urgent"})]})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-xl mb-2",children:v.nomProjet}),e.jsx("p",{className:"text-gray-700",children:v.descriptionProjet})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[v.budget&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:e.jsx(il,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Budget"}),e.jsxs("p",{className:"font-bold text-gray-900",children:[v.budget.toLocaleString()," ",v.devise]})]})]}),v.dureeEstimee&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:e.jsx(ss,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Dure estime"}),e.jsx("p",{className:"font-bold text-gray-900",children:v.dureeEstimee})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:e.jsx(Ge,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Propos le"}),e.jsx("p",{className:"font-bold text-gray-900",children:new Date(v.dateProposition).toLocaleDateString("fr-FR")})]})]})]}),v.statut==="en_attente"?e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>j(v.id,"accepte"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Lb,{size:20}),"Accepter"]}),e.jsxs("button",{onClick:()=>j(v.id,"refuse"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:[e.jsx(ds,{size:20}),"Refuser"]})]}):e.jsx("div",{className:`text-center py-3 rounded-lg font-medium ${v.statut==="accepte"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:v.statut==="accepte"?" Proposition accepte":" Proposition refuse"})]},v.id))})]})}const Bm={BROUILLON:{label:"Brouillon",classe:"badge-ghost"},PUBLIE:{label:"Publi",classe:"badge-info"},EN_COURS:{label:"En cours",classe:"badge-warning"},EN_PAUSE:{label:"En pause",classe:"badge-neutral"},TERMINE:{label:"Termin",classe:"badge-success"},ANNULE:{label:"Annul",classe:"badge-error"}};function ly(){const t=jt(),{isAuthenticated:s}=Es(),[r,n]=d.useState("mes-projets"),[a,l]=d.useState([]),[i,c]=d.useState([]),[o,m]=d.useState(!0),[j,x]=d.useState(""),[h,u]=d.useState(0),[g,v]=d.useState(0);d.useEffect(()=>{y()},[r,h,s]);const y=async()=>{m(!0);try{if(r==="mes-projets"&&s){const k=await Ht.listerMesProjets();l(k)}else{const k=await Ht.listerProjetsPublics(h,12);c(k.content),v(k.totalPages)}}catch(k){console.error("Erreur chargement projets:",k)}finally{m(!1)}},f=async()=>{if(!j.trim()){y();return}m(!0);try{const k=await Ht.rechercherProjetsPublics(j,0,20);c(k.content),v(k.totalPages)}catch(k){console.error("Erreur recherche:",k)}finally{m(!1)}},b=(r==="mes-projets"?a:i).filter(k=>{var w;return k.nom.toLowerCase().includes(j.toLowerCase())||((w=k.description)==null?void 0:w.toLowerCase().includes(j.toLowerCase()))}),E=(k,w)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:w==="FCFA"?"XOF":w,maximumFractionDigits:0}).format(k),P=k=>k?new Date(k).toLocaleDateString("fr-FR",{day:"numeric",month:"short"}):"-";return e.jsx("div",{className:"min-h-screen bg-base-200",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(cn,{className:"text-primary",size:28}),"Projets"]}),e.jsx("p",{className:"text-base-content/60 text-sm mt-1",children:r==="mes-projets"?"Grez vos projets et suivez leur avancement":"Dcouvrez des projets et proposez vos services"})]}),s&&r==="mes-projets"&&e.jsxs("button",{onClick:()=>t("/projets/creer"),className:"btn btn-primary btn-sm gap-2",children:[e.jsx(Ye,{size:18}),"Nouveau projet"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"tabs tabs-boxed bg-base-100 p-1",children:[e.jsxs("button",{className:`tab gap-2 ${r==="mes-projets"?"tab-active":""}`,onClick:()=>{n("mes-projets"),u(0)},children:[e.jsx(cn,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Mes projets"}),e.jsx("span",{className:"sm:hidden",children:"Mes"})]}),e.jsxs("button",{className:`tab gap-2 ${r==="explorer"?"tab-active":""}`,onClick:()=>{n("explorer"),u(0)},children:[e.jsx(Hd,{size:16}),"Explorer"]})]}),e.jsx("div",{className:"flex-1 flex gap-2",children:e.jsxs("div",{className:"join flex-1",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un projet...",className:"input input-bordered input-sm join-item w-full",value:j,onChange:k=>x(k.target.value),onKeyDown:k=>k.key==="Enter"&&f()}),e.jsx("button",{className:"btn btn-sm btn-ghost join-item",onClick:f,children:e.jsx(us,{size:16})})]})})]}),o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(_s,{})}):b.length===0?e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body items-center text-center py-12",children:[e.jsx(cn,{size:48,className:"text-base-content/30 mb-4"}),e.jsx("h3",{className:"font-semibold text-lg",children:r==="mes-projets"?"Aucun projet cr":"Aucun projet trouv"}),e.jsx("p",{className:"text-base-content/60 text-sm max-w-md",children:r==="mes-projets"?"Crez votre premier projet pour commencer  collaborer avec des experts.":"Essayez de modifier vos critres de recherche."}),s&&r==="mes-projets"&&e.jsxs("button",{onClick:()=>t("/projets/creer"),className:"btn btn-primary btn-sm mt-4",children:[e.jsx(Ye,{size:16}),"Crer mon premier projet"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(k=>{var w,R;return e.jsx("div",{className:"card bg-base-100 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t(`/projets/${k.id}`),children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"card-title text-base line-clamp-1 flex-1",children:k.nom}),e.jsx("span",{className:`badge badge-sm ${((w=Bm[k.statut])==null?void 0:w.classe)||"badge-ghost"}`,children:((R=Bm[k.statut])==null?void 0:R.label)||k.statut})]}),k.description&&e.jsx("p",{className:"text-sm text-base-content/60 line-clamp-2",children:k.description}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-base-content/60",children:"Progression"}),e.jsxs("span",{className:"font-medium",children:[k.progression,"%"]})]}),e.jsx("progress",{className:"progress progress-primary h-1.5",value:k.progression,max:"100"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-xs text-base-content/70",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ur,{size:14}),e.jsx("span",{children:E(k.budget,k.devise)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ut,{size:14}),e.jsxs("span",{children:[k.nombreTaches," tches"]})]}),k.nombreCandidatures>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bt,{size:14}),e.jsxs("span",{children:[k.nombreCandidatures," candidat",k.nombreCandidatures>1?"s":""]})]}),r==="explorer"&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qt,{size:14}),e.jsx("span",{children:k.nombreVues})]})]}),(k.dateDebutPrevue||k.dateFinPrevue)&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-base-content/50 mt-2 pt-2 border-t border-base-200",children:[e.jsx(ss,{size:12}),e.jsxs("span",{children:[P(k.dateDebutPrevue),"  ",P(k.dateFinPrevue)]})]}),r==="explorer"&&k.nombreTachesDisponibles>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"badge badge-success badge-sm gap-1",children:[e.jsx(bt,{size:12}),k.nombreTachesDisponibles," tche",k.nombreTachesDisponibles>1?"s":""," disponible",k.nombreTachesDisponibles>1?"s":""]})})]})},k.id)})}),r==="explorer"&&g>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("div",{className:"join",children:[e.jsx("button",{className:"join-item btn btn-sm",disabled:h===0,onClick:()=>u(k=>k-1),children:""}),e.jsxs("button",{className:"join-item btn btn-sm",children:["Page ",h+1," / ",g]}),e.jsx("button",{className:"join-item btn btn-sm",disabled:h>=g-1,onClick:()=>u(k=>k+1),children:""})]})})]})]})})}function iy(){const t=jt(),[s,r]=d.useState(!1),[n,a]=d.useState(null),[l,i]=d.useState({nom:"",description:"",budget:"",devise:"FCFA",visibilite:"PUBLIC",dateDebutPrevue:"",dateFinPrevue:""}),[c,o]=d.useState([]),[m,j]=d.useState(""),x=()=>{m.trim()&&(o([...c,{id:Date.now(),description:m.trim()}]),j(""))},h=v=>{o(c.filter(y=>y.id!==v))},u=v=>{const{name:y,value:f}=v.target;i(p=>({...p,[y]:f}))},g=async v=>{if(v.preventDefault(),a(null),!l.nom.trim()){a("Le nom du projet est requis");return}r(!0);try{const y={nom:l.nom.trim(),description:l.description.trim()||void 0,budget:l.budget?parseFloat(l.budget):void 0,devise:l.devise,visibilite:l.visibilite,dateDebutPrevue:l.dateDebutPrevue||void 0,dateFinPrevue:l.dateFinPrevue||void 0,exigences:c.length>0?c.map(p=>p.description):void 0},f=await Ht.creerProjet(y);t(`/projets/${f.id}`)}catch(y){console.error("Erreur cration projet:",y),a("Une erreur est survenue lors de la cration du projet")}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-base-200",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-2xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>t("/projets"),className:"btn btn-ghost btn-sm btn-circle",children:e.jsx(Os,{size:20})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Cm,{className:"text-primary",size:24}),"Nouveau projet"]}),e.jsx("p",{className:"text-sm text-base-content/60",children:"Crez un projet et commencez  collaborer"})]})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx(Ge,{size:18}),e.jsx("span",{children:n})]}),e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Informations gnrales"}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text",children:"Nom du projet *"})}),e.jsx("input",{type:"text",name:"nom",value:l.nom,onChange:u,placeholder:"Ex: Refonte site e-commerce",className:"input input-bordered input-sm",required:!0})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text",children:"Description"})}),e.jsx("textarea",{name:"description",value:l.description,onChange:u,placeholder:"Dcrivez votre projet en quelques phrases...",className:"textarea textarea-bordered textarea-sm",rows:3})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text",children:"Visibilit"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"visibilite",value:"PUBLIC",checked:l.visibilite==="PUBLIC",onChange:u,className:"radio radio-primary radio-sm"}),e.jsx(Hd,{size:16}),e.jsx("span",{className:"text-sm",children:"Public"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"visibilite",value:"PRIVE",checked:l.visibilite==="PRIVE",onChange:u,className:"radio radio-primary radio-sm"}),e.jsx(Oc,{size:16}),e.jsx("span",{className:"text-sm",children:"Priv"})]})]})]})]})}),e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Budget et planning"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsxs("span",{className:"label-text flex items-center gap-1",children:[e.jsx(il,{size:14}),"Budget estim"]})}),e.jsxs("div",{className:"join",children:[e.jsx("input",{type:"number",name:"budget",value:l.budget,onChange:u,placeholder:"0",min:"0",className:"input input-bordered input-sm join-item flex-1"}),e.jsxs("select",{name:"devise",value:l.devise,onChange:u,className:"select select-bordered select-sm join-item w-24",children:[e.jsx("option",{value:"FCFA",children:"FCFA"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"USD",children:"USD"})]})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsxs("span",{className:"label-text flex items-center gap-1",children:[e.jsx(ss,{size:14}),"Date de dbut"]})}),e.jsx("input",{type:"date",name:"dateDebutPrevue",value:l.dateDebutPrevue,onChange:u,className:"input input-bordered input-sm"})]}),e.jsxs("div",{className:"form-control sm:col-start-2",children:[e.jsx("label",{className:"label py-1",children:e.jsxs("span",{className:"label-text flex items-center gap-1",children:[e.jsx(ss,{size:14}),"Date de fin prvue"]})}),e.jsx("input",{type:"date",name:"dateFinPrevue",value:l.dateFinPrevue,onChange:u,className:"input input-bordered input-sm"})]})]})]})}),e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Exigences du projet"}),e.jsx("p",{className:"text-sm text-base-content/60 mb-3",children:"Listez les conditions ou critres importants pour ce projet"}),c.length>0&&e.jsx("ul",{className:"space-y-2 mb-3",children:c.map(v=>e.jsxs("li",{className:"flex items-center gap-2 bg-base-200 p-2 rounded",children:[e.jsx("span",{className:"flex-1 text-sm",children:v.description}),e.jsx("button",{type:"button",onClick:()=>h(v.id),className:"btn btn-ghost btn-xs btn-circle text-error",children:e.jsx(Je,{size:14})})]},v.id))}),e.jsxs("div",{className:"join w-full",children:[e.jsx("input",{type:"text",value:m,onChange:v=>j(v.target.value),placeholder:"Ex: Exprience en React requise",className:"input input-bordered input-sm join-item flex-1",onKeyDown:v=>v.key==="Enter"&&(v.preventDefault(),x())}),e.jsx("button",{type:"button",onClick:x,className:"btn btn-sm btn-ghost join-item",children:e.jsx(Ye,{size:16})})]})]})}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>t("/projets"),className:"btn btn-ghost btn-sm",disabled:s,children:"Annuler"}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",disabled:s,children:s?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Cm,{size:16}),"Crer le projet"]})})]})]})]})})}class oy{constructor(){Ks(this,"BASE_URL","/api/candidatures")}async creerCandidature(s){const r=await Ee(this.BASE_URL,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`Erreur lors de la cration de la candidature: ${r.status}`);return await r.json()}async obtenirCandidature(s){const r=await Ee(`${this.BASE_URL}/${s}`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration de la candidature: ${r.status}`);return await r.json()}async listerMesCandidatures(){const s=await Ee(`${this.BASE_URL}/mes-candidatures`,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la rcupration de mes candidatures: ${s.status}`);return await s.json()}async listerMesCandidaturesPaginees(s=0,r=10){const n=await Ee(`${this.BASE_URL}/mes-candidatures/page?page=${s}&size=${r}`,{credentials:"include",headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`Erreur lors de la rcupration de mes candidatures: ${n.status}`);return await n.json()}async listerCandidaturesProjet(s){const r=await Ee(`${this.BASE_URL}/projet/${s}`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration des candidatures: ${r.status}`);return await r.json()}async listerCandidaturesTache(s){const r=await Ee(`${this.BASE_URL}/tache/${s}`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration des candidatures: ${r.status}`);return await r.json()}async listerCandidaturesEnAttente(){const s=await Ee(`${this.BASE_URL}/en-attente`,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors de la rcupration des candidatures en attente: ${s.status}`);return await s.json()}async compterCandidaturesEnAttente(){const s=await Ee(`${this.BASE_URL}/en-attente/count`,{credentials:"include",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Erreur lors du comptage des candidatures: ${s.status}`);return(await s.json()).count}async repondreCandidature(s,r){const n=await Ee(`${this.BASE_URL}/${s}/repondre`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Erreur lors de la rponse  la candidature: ${n.status}`);return await n.json()}async retirerCandidature(s){const r=await Ee(`${this.BASE_URL}/${s}`,{method:"DELETE",credentials:"include"});if(!r.ok)throw new Error(`Erreur lors du retrait de la candidature: ${r.status}`)}}const ks=new oy;function cy({isOpen:t,onClose:s,projet:r,candidature:n,onConfirmer:a,enregistrement:l}){var g;const[i,c]=d.useState(new Set),m=[...r.tachesIndependantes||[],...((g=r.etapes)==null?void 0:g.flatMap(v=>v.taches||[]))||[]].filter(v=>!v.expertAssigneId&&v.statut==="A_FAIRE");d.useEffect(()=>{t&&c(new Set)},[t]);const j=v=>{const y=new Set(i);y.has(v)?y.delete(v):y.add(v),c(y)},x=()=>{i.size===m.length?c(new Set):c(new Set(m.map(v=>v.id)))},h=()=>{a(Array.from(i))};if(!t)return null;const u=i.size===m.length&&m.length>0;return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-base-100 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-5 border-b border-base-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Accepter la candidature"}),e.jsx("button",{onClick:s,className:"btn btn-ghost btn-sm btn-circle",disabled:l,children:""})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3 bg-base-200 rounded-lg p-3",children:[n.expertPhotoUrl?e.jsx("img",{src:n.expertPhotoUrl,alt:`${n.expertPrenom} ${n.expertNom}`,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsx(Vs,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:[n.expertPrenom," ",n.expertNom]}),n.expertTitre&&e.jsx("p",{className:"text-sm text-base-content/60",children:n.expertTitre})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5",children:[e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-base-content/70",children:"Slectionnez les tches  assigner  cet expert. Vous pourrez assigner d'autres experts aux tches restantes."})}),m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ze,{size:48,className:"mx-auto text-success mb-4"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Toutes les tches sont dj assignes"}),e.jsx("p",{className:"text-sm text-base-content/60",children:"Il n'y a plus de tches disponibles dans ce projet."})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-primary/10 rounded-lg cursor-pointer hover:bg-primary/20 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:x,className:"checkbox checkbox-primary checkbox-sm",disabled:l}),e.jsxs("span",{className:"font-medium",children:["Slectionner toutes les tches (",m.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:m.map(v=>e.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg cursor-pointer transition-colors border-2 ${i.has(v.id)?"bg-primary/5 border-primary":"bg-base-200 border-transparent hover:border-base-300"}`,children:[e.jsx("input",{type:"checkbox",checked:i.has(v.id),onChange:()=>j(v.id),className:"checkbox checkbox-primary checkbox-sm mt-0.5",disabled:l}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium mb-1",children:v.nom}),v.description&&e.jsx("div",{className:"text-sm text-base-content/60 line-clamp-2 mb-2",children:v.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-base-content/60",children:[v.budget>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:v.budget.toLocaleString("fr-FR")})," FCFA"]}),v.delaiJours&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ut,{size:12}),v.delaiJours," jours"]}),v.nombreLivrables>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Yi,{size:12}),v.nombreLivrables," livrable",v.nombreLivrables>1?"s":""]})]})]})]},v.id))})]})]}),e.jsx("div",{className:"p-5 border-t border-base-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-base-content/60",children:[i.size," tche",i.size>1?"s":""," slectionne",i.size>1?"s":""]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"btn btn-ghost",onClick:s,disabled:l,children:"Annuler"}),e.jsxs("button",{className:"btn btn-success gap-2",onClick:h,disabled:l||i.size===0,children:[l?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsx(ze,{size:18}),"Accepter et assigner"]})]})]})})]})})}function nf({expert:t,isOpen:s,onClose:r,onSuccess:n}){const a=xl(),[l,i]=d.useState(""),[c,o]=d.useState(""),[m,j]=d.useState(""),[x,h]=d.useState(!1),[u,g]=d.useState({});if(!s)return null;const v=()=>{const b={};return l.trim()?l.length>255&&(b.objet="L'objet ne peut pas dpasser 255 caractres"):b.objet="L'objet est obligatoire",c.trim()?c.length>5e3&&(b.message="Le message ne peut pas dpasser 5000 caractres"):b.message="Le message est obligatoire",g(b),Object.keys(b).length===0},y=async()=>{if(v())try{h(!0);const b={objet:l.trim(),message:c.trim(),emailReponse:m.trim()||void 0};await br.envoyerDemandeContact(t.id,b),a.succes("Message envoy avec succs ! L'expert sera notifi."),i(""),o(""),j(""),g({}),n&&n(),r()}catch(b){console.error("Erreur lors de l'envoi du message:",b);const E=(b==null?void 0:b.message)||"Erreur lors de l'envoi du message";a.erreur(E)}finally{h(!1)}},f=()=>{x||(i(""),o(""),j(""),g({}),r())},p=()=>{var P,k,w,R;const b=((k=(P=t.prenom)==null?void 0:P.charAt(0))==null?void 0:k.toUpperCase())||"",E=((R=(w=t.nom)==null?void 0:w.charAt(0))==null?void 0:R.toUpperCase())||"";return`${b}${E}`||"?"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:f,children:e.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full shadow-2xl",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-success/10 rounded-lg",children:e.jsx(_r,{size:20,className:"text-success"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Contacter"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.prenom," ",t.nom]})]})]}),e.jsx("button",{onClick:f,disabled:x,className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:e.jsx(st,{size:18,className:"text-gray-400"})})]}),e.jsx("div",{className:"px-5 py-3 bg-slate-50 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[t.photoUrl?e.jsx("img",{src:t.photoUrl,alt:`${t.prenom} ${t.nom}`,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm",onError:b=>{b.target.style.display="none"}}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white font-bold text-sm border-2 border-white shadow-sm",children:p()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:t.titre}),t.localisation&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.localisation})]}),t.disponible&&e.jsxs("span",{className:"badge badge-success badge-sm gap-1",children:[e.jsx(ze,{size:10}),"Disponible"]})]})}),e.jsxs("div",{className:"px-5 py-4 space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"label py-1",children:[e.jsxs("span",{className:"label-text font-medium text-gray-700",children:["Objet du message ",e.jsx("span",{className:"text-error",children:"*"})]}),e.jsxs("span",{className:"label-text-alt text-gray-400",children:[l.length,"/255"]})]}),e.jsx("input",{type:"text",value:l,onChange:b=>{i(b.target.value),u.objet&&g({...u,objet:void 0})},placeholder:"Ex: Demande de collaboration, Question sur vos services...",className:`input input-bordered input-sm w-full ${u.objet?"input-error":""}`,disabled:x,maxLength:255}),u.objet&&e.jsx("label",{className:"label py-1",children:e.jsxs("span",{className:"label-text-alt text-error flex items-center gap-1",children:[e.jsx(Ge,{size:12}),u.objet]})})]}),e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"label py-1",children:[e.jsxs("span",{className:"label-text font-medium text-gray-700",children:["Votre message ",e.jsx("span",{className:"text-error",children:"*"})]}),e.jsxs("span",{className:"label-text-alt text-gray-400",children:[c.length,"/5000"]})]}),e.jsx("textarea",{value:c,onChange:b=>{o(b.target.value),u.message&&g({...u,message:void 0})},placeholder:"Dcrivez votre demande, votre projet ou posez vos questions...",className:`textarea textarea-bordered w-full text-sm resize-none ${u.message?"textarea-error":""}`,rows:4,disabled:x,maxLength:5e3}),u.message&&e.jsx("label",{className:"label py-1",children:e.jsxs("span",{className:"label-text-alt text-error flex items-center gap-1",children:[e.jsx(Ge,{size:12}),u.message]})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label py-1",children:e.jsxs("span",{className:"label-text font-medium text-gray-700",children:["Email de rponse ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(optionnel)"})]})}),e.jsx("input",{type:"email",value:m,onChange:b=>j(b.target.value),placeholder:"votre.email@exemple.com",className:"input input-bordered input-sm w-full",disabled:x}),e.jsx("label",{className:"label py-1",children:e.jsx("span",{className:"label-text-alt text-gray-400",children:"Si vous souhaitez recevoir la rponse sur un email spcifique"})})]}),e.jsx("div",{className:"bg-info/10 border border-info/20 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-info flex items-start gap-2",children:[e.jsx(Vs,{size:14,className:"flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"L'expert sera notifi de votre message et pourra vous rpondre directement via la plateforme ou par email."})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 px-5 py-4 border-t border-slate-200 bg-slate-50 rounded-b-xl",children:[e.jsx("button",{onClick:f,disabled:x,className:"btn btn-ghost btn-sm",children:"Annuler"}),e.jsx("button",{onClick:y,disabled:x||!l.trim()||!c.trim(),className:"btn btn-success btn-sm gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Envoi..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{size:14}),"Envoyer le message"]})})]})]})})}const Vm={BROUILLON:{label:"Brouillon",classe:"badge-ghost"},PUBLIE:{label:"Publi",classe:"badge-info"},EN_COURS:{label:"En cours",classe:"badge-warning"},EN_PAUSE:{label:"En pause",classe:"badge-neutral"},TERMINE:{label:"Termin",classe:"badge-success"},ANNULE:{label:"Annul",classe:"badge-error"}},dy={A_FAIRE:{label:" faire",classe:"badge-ghost",icone:e.jsx(ut,{size:12})},EN_COURS:{label:"En cours",classe:"badge-warning",icone:e.jsx(ut,{size:12})},EN_REVUE:{label:"En revue",classe:"badge-info",icone:e.jsx(qt,{size:12})},TERMINEE:{label:"Termine",classe:"badge-success",icone:e.jsx(ze,{size:12})},BLOQUEE:{label:"Bloque",classe:"badge-error",icone:e.jsx(Ge,{size:12})},ANNULEE:{label:"Annule",classe:"badge-neutral",icone:e.jsx(Je,{size:12})}},Hm={EN_ATTENTE:{label:"En attente",classe:"badge-warning"},EN_DISCUSSION:{label:"En discussion",classe:"badge-info"},ACCEPTEE:{label:"Accepte",classe:"badge-success"},REFUSEE:{label:"Refuse",classe:"badge-error"},RETIREE:{label:"Retire",classe:"badge-ghost"}};function uy(){var ur,mr,pr,Qs;const{id:t}=bn(),s=jt(),{user:r}=Es(),[n,a]=d.useState(null),[l,i]=d.useState([]),[c,o]=d.useState(!0),[m,j]=d.useState("apercu"),[x,h]=d.useState(new Set),[u,g]=d.useState(!1),[v,y]=d.useState(!1),[f,p]=d.useState(null),[b,E]=d.useState(!1),[P,k]=d.useState({projetId:0,nom:"",description:""}),[w,R]=d.useState({projetId:0,nom:"",description:"",budget:0,priorite:"NORMALE",livrables:[]}),[I,T]=d.useState([]),[L,J]=d.useState({}),[Q,W]=d.useState({}),[ce,se]=d.useState(!1),[be,A]=d.useState(""),[z,S]=d.useState(!1),[$,D]=d.useState(null),[q,ie]=d.useState({message:"",tarifPropose:"",delaiProposeJours:""}),[me,Pe]=d.useState(null),[Ne,Le]=d.useState(!1),[Y,ve]=d.useState(null),[O,re]=d.useState(!1),[ne,we]=d.useState(null),U=(n==null?void 0:n.proprietaireId)===(r==null?void 0:r.id);d.useEffect(()=>{t&&H()},[t]),d.useEffect(()=>{n&&(async()=>{if(!(!r||U))try{const te=(await ks.listerMesCandidatures()).find(C=>C.projetId===parseInt(t)&&C.statut!=="RETIREE");Pe(te||null)}catch{}})()},[n,r,t,U]);const H=async()=>{if(t){o(!0);try{const N=await Ht.obtenirProjet(parseInt(t));if(a(N),U||r)try{const B=await ks.listerCandidaturesProjet(parseInt(t));i(B)}catch{}}catch(N){console.error("Erreur chargement projet:",N),s("/projets")}finally{o(!1)}}},ae=N=>{const B=new Set(x);B.has(N)?B.delete(N):B.add(N),h(B)},ke=async()=>{if(n)try{const N=await Ht.publierProjet(n.id);a(N)}catch(N){console.error("Erreur publication:",N)}},Te=async()=>{if(n)try{const N=await Ht.depublierProjet(n.id);a(N)}catch(N){console.error("Erreur dpublication:",N)}},Me=(N,B)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:B==="FCFA"?"XOF":B,maximumFractionDigits:0}).format(N),pt=N=>N?new Date(N).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):"-",At=()=>{n&&(k({projetId:n.id,nom:"",description:""}),g(!0))},V=N=>{n&&(p(N??null),R({projetId:n.id,etapeId:N,nom:"",description:"",budget:0,priorite:"NORMALE",livrables:[]}),T([]),J({}),y(!0))},je=async()=>{if(P.nom.trim()){E(!0);try{await Ht.creerEtape(P),g(!1),await H()}catch(N){console.error("Erreur cration tape:",N)}finally{E(!1)}}},Se=async()=>{if(w.nom.trim()){E(!0);try{const N=I.map(te=>({nom:te.nom,description:te.description||void 0,criteresAcceptation:te.criteres.length>0?te.criteres:void 0})),B={...w,livrables:N.length>0?N:void 0};await ar.creerTache(B),y(!1),await H()}catch(N){console.error("Erreur cration tche:",N)}finally{E(!1)}}},Re=()=>{T([...I,{nom:"",description:"",criteres:[]}])},Ve=N=>{T(I.filter((B,te)=>te!==N))},rt=(N,B,te)=>{const C=[...I];C[N]={...C[N],[B]:te},T(C)},yt=N=>{var C;const B=(C=L[N])==null?void 0:C.trim();if(!B)return;const te=[...I];te[N]={...te[N],criteres:[...te[N].criteres,B]},T(te),J({...L,[N]:""})},rs=(N,B)=>{const te=[...I];te[N]={...te[N],criteres:te[N].criteres.filter((C,M)=>M!==B)},T(te)},Mt=async()=>{if(n){E(!0);try{const N=await Ht.modifierProjet(n.id,Q);a(N),se(!1)}catch(N){console.error("Erreur modification projet:",N)}finally{E(!1)}}},F=()=>{n&&(W({nom:n.nom,description:n.description||"",budget:n.budget,devise:n.devise,visibilite:n.visibilite,dateDebutPrevue:n.dateDebutPrevue,dateFinPrevue:n.dateFinPrevue}),se(!0))},Ce=async()=>{if(!(!n||!be.trim())){E(!0);try{await Ht.ajouterExigence(n.id,be.trim()),A(""),await H()}catch(N){console.error("Erreur ajout exigence:",N)}finally{E(!1)}}},X=async N=>{if(confirm("Supprimer cette exigence ?")){E(!0);try{await Ht.supprimerExigence(N),await H()}catch(B){console.error("Erreur suppression exigence:",B)}finally{E(!1)}}},xe=N=>{s(`/projets/${n==null?void 0:n.id}/taches/${N}`)},fe=async(N,B,te)=>{const C=l.find(M=>M.id===N);if(C){if(B==="ACCEPTER"&&!C.estSurTache){ve(C),Le(!0);return}if(B==="EN_DISCUSSION"){we(C),re(!0);return}E(!0);try{await ks.repondreCandidature(N,{action:B,reponse:te});const M=await ks.listerCandidaturesProjet(parseInt(t));i(M),await H()}catch(M){console.error("Erreur rponse candidature:",M)}finally{E(!1)}}},Oe=async()=>{if(ne){try{await ks.repondreCandidature(ne.id,{action:"EN_DISCUSSION"});const N=await ks.listerCandidaturesProjet(parseInt(t));i(N)}catch(N){console.error("Erreur mise  jour candidature:",N)}we(null)}},_e=async N=>{if(Y){E(!0);try{await ks.repondreCandidature(Y.id,{action:"ACCEPTER"});for(const te of N)await ar.assignerExpert(te,Y.expertId);Le(!1),ve(null);const B=await ks.listerCandidaturesProjet(parseInt(t));i(B),await H()}catch(B){console.error("Erreur acceptation candidature:",B)}finally{E(!1)}}},nt=async N=>{var B;if(n){E(!0);try{const C=[...n.tachesIndependantes||[],...((B=n.etapes)==null?void 0:B.flatMap(M=>M.taches||[]))||[]].filter(M=>!M.expertAssigneId&&M.statut==="A_FAIRE");for(const M of C)await ar.assignerExpert(M.id,N);await H(),alert(`Expert assign  ${C.length} tche(s)`)}catch(te){console.error("Erreur assignation expert:",te),alert("Erreur lors de l'assignation")}finally{E(!1)}}},Ct=N=>{D(null),ie({message:"",tarifPropose:"",delaiProposeJours:""}),S(!0)},xs=async()=>{if(n){E(!0);try{const N=await ks.creerCandidature({projetId:n.id,tacheId:$||void 0,message:q.message||void 0,tarifPropose:q.tarifPropose?parseInt(q.tarifPropose):void 0,delaiProposeJours:q.delaiProposeJours?parseInt(q.delaiProposeJours):void 0});S(!1),Pe(N)}catch(N){console.error("Erreur candidature:",N)}finally{E(!1)}}};if(c)return e.jsx("div",{className:"min-h-screen bg-base-200 flex items-center justify-center",children:e.jsx(_s,{})});if(!n)return e.jsx("div",{className:"min-h-screen bg-base-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Projet non trouv"}),e.jsx("button",{onClick:()=>s("/projets"),className:"btn btn-primary btn-sm",children:"Retour aux projets"})]})});const Bt=[...n.tachesIndependantes,...n.etapes.flatMap(N=>N.taches)],ns={totalTaches:Bt.length,tachesTerminees:Bt.filter(N=>N.statut==="TERMINEE").length,tachesEnCours:Bt.filter(N=>N.statut==="EN_COURS").length,candidaturesEnAttente:l.filter(N=>N.statut==="EN_ATTENTE").length};return e.jsxs("div",{className:"min-h-screen bg-base-200",children:[e.jsx("div",{className:"bg-base-100 border-b border-base-300 sticky top-0 z-10",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 max-w-6xl",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/projets"),className:"btn btn-ghost btn-sm btn-circle",children:e.jsx(Os,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-lg font-bold truncate",children:n.nom}),e.jsx("span",{className:`badge badge-sm ${(ur=Vm[n.statut])==null?void 0:ur.classe}`,children:(mr=Vm[n.statut])==null?void 0:mr.label})]}),e.jsxs("div",{className:"text-sm text-base-content/60 flex items-center gap-3",children:[e.jsx("span",{children:Me(n.budget,n.devise)}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsxs("span",{className:"hidden sm:inline",children:[n.nombreTaches," tches"]})]})]}),U&&e.jsxs("div",{className:"flex items-center gap-2",children:[n.statut==="BROUILLON"?e.jsxs("button",{onClick:ke,className:"btn btn-primary btn-sm gap-1",children:[e.jsx(qt,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Publier"})]}):n.statut==="PUBLIE"&&e.jsxs("button",{onClick:Te,className:"btn btn-ghost btn-sm gap-1",children:[e.jsx(Dr,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Dpublier"})]}),e.jsx("button",{onClick:()=>j("parametres"),className:"btn btn-ghost btn-sm btn-circle",title:"Paramtres du projet",children:e.jsx(Uc,{size:16})})]})]}),e.jsxs("div",{className:"tabs tabs-bordered mt-3 -mb-px",children:[e.jsxs("button",{className:`tab tab-sm gap-1 ${m==="apercu"?"tab-active":""}`,onClick:()=>j("apercu"),children:[e.jsx(ts,{size:14}),"Aperu"]}),e.jsxs("button",{className:`tab tab-sm gap-1 ${m==="taches"?"tab-active":""}`,onClick:()=>j("taches"),children:[e.jsx(an,{size:14}),"Tches",ns.totalTaches>0&&e.jsx("span",{className:"badge badge-xs",children:ns.totalTaches})]}),U&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`tab tab-sm gap-1 ${m==="candidatures"?"tab-active":""}`,onClick:()=>j("candidatures"),children:[e.jsx(bt,{size:14}),"Candidatures",ns.candidaturesEnAttente>0&&e.jsx("span",{className:"badge badge-warning badge-xs",children:ns.candidaturesEnAttente})]}),e.jsxs("button",{className:`tab tab-sm gap-1 ${m==="parametres"?"tab-active":""}`,onClick:()=>j("parametres"),children:[e.jsx(Uc,{size:14}),"Paramtres"]})]})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[m==="apercu"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-base-content/70",children:n.description||"Aucune description"})]})}),e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Progression"}),e.jsxs("span",{className:"text-xl font-bold text-primary",children:[n.progression,"%"]})]}),e.jsx("progress",{className:"progress progress-primary",value:n.progression,max:"100"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:ns.tachesTerminees}),e.jsx("div",{className:"text-xs text-base-content/60",children:"Termines"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:ns.tachesEnCours}),e.jsx("div",{className:"text-xs text-base-content/60",children:"En cours"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:ns.totalTaches-ns.tachesTerminees-ns.tachesEnCours}),e.jsx("div",{className:"text-xs text-base-content/60",children:" faire"})]})]})]})}),n.exigences.length>0&&e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Exigences du projet"}),e.jsx("ul",{className:"space-y-2",children:n.exigences.map(N=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(ze,{size:16,className:"text-success mt-0.5 flex-shrink-0"}),e.jsx("span",{children:N.description})]},N.id))})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Dtails"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base-content/60",children:"Budget"}),e.jsx("span",{className:"font-medium",children:Me(n.budget,n.devise)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base-content/60",children:"Visibilit"}),e.jsx("span",{className:"badge badge-sm",children:n.visibilite==="PUBLIC"?"Public":"Priv"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base-content/60",children:"tapes"}),e.jsx("span",{children:n.etapes.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base-content/60",children:"Candidatures"}),e.jsx("span",{children:n.nombreCandidatures})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base-content/60",children:"Vues"}),e.jsx("span",{children:n.nombreVues})]}),e.jsx("div",{className:"divider my-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base-content/60",children:"Dbut prvu"}),e.jsx("span",{children:pt(n.dateDebutPrevue)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base-content/60",children:"Fin prvue"}),e.jsx("span",{children:pt(n.dateFinPrevue)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base-content/60",children:"Cr le"}),e.jsx("span",{children:pt(n.dateCreation)})]})]})]})}),!U&&n.visibilite==="PUBLIC"&&r&&e.jsx("div",{className:`card ${(me==null?void 0:me.statut)==="ACCEPTEE"?"bg-success/10 border border-success/30":(me==null?void 0:me.statut)==="REFUSEE"?"bg-error/10 border border-error/30":me?"bg-warning/10 border border-warning/30":"bg-primary/5 border border-primary/20"}`,children:e.jsx("div",{className:"card-body p-4",children:me?e.jsxs(e.Fragment,{children:[me.statut==="ACCEPTEE"&&e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2 text-success",children:[e.jsx(ze,{size:18}),"Candidature accepte"]}),e.jsx("p",{className:"text-sm text-base-content/70",children:'Flicitations ! Votre candidature a t accepte. Consultez vos tches assignes dans "Mes tches".'}),e.jsxs("button",{onClick:()=>s("/mes-taches"),className:"btn btn-success btn-sm mt-2 gap-1",children:[e.jsx(an,{size:16}),"Voir mes tches"]})]}),me.statut==="REFUSEE"&&e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2 text-error",children:[e.jsx(Ge,{size:18}),"Candidature refuse"]}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Malheureusement, votre candidature n'a pas t retenue pour ce projet."})]}),me.statut==="EN_ATTENTE"&&e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2 text-warning",children:[e.jsx(ut,{size:18}),"Candidature en attente"]}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Votre candidature est en cours d'examen par le propritaire du projet."})]}),me.statut==="EN_DISCUSSION"&&e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2 text-info",children:[e.jsx(bt,{size:18}),"En discussion"]}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Le propritaire souhaite changer avec vous. Vrifiez vos messages."})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Intress par ce projet ?"}),e.jsx("p",{className:"text-sm text-base-content/70 mb-3",children:"Proposez vos services en candidatant  ce projet ou  une tche spcifique."}),e.jsxs("button",{onClick:()=>Ct(),className:"btn btn-primary btn-sm w-full gap-1",children:[e.jsx(ys,{size:16}),"Candidater"]})]})})}),!U&&n.visibilite==="PUBLIC"&&!r&&e.jsx("div",{className:"card bg-base-200 border border-base-300",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Intress par ce projet ?"}),e.jsx("p",{className:"text-sm text-base-content/70 mb-3",children:"Connectez-vous pour proposer vos services."}),e.jsx("button",{onClick:()=>s("/profil"),className:"btn btn-outline btn-sm w-full gap-1",children:"Se connecter"})]})})]})]}),m==="taches"&&e.jsxs("div",{className:"space-y-4",children:[U&&e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs("button",{onClick:At,className:"btn btn-ghost btn-sm gap-1",children:[e.jsx(zl,{size:16}),"Ajouter une tape"]}),e.jsxs("button",{onClick:()=>V(),className:"btn btn-primary btn-sm gap-1",children:[e.jsx(Ye,{size:16}),"Ajouter une tche"]})]}),n.tachesIndependantes.length>0&&e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Yi,{size:18}),"Tches indpendantes",e.jsx("span",{className:"badge badge-sm",children:n.tachesIndependantes.length})]}),e.jsx("div",{className:"space-y-2",children:n.tachesIndependantes.map(N=>e.jsx(Wm,{tache:N,onClick:()=>xe(N.id)},N.id))})]})}),n.etapes.map(N=>e.jsxs("div",{className:"card bg-base-100 shadow-sm",children:[e.jsxs("div",{className:"card-body p-4 cursor-pointer",onClick:()=>ae(N.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x.has(N.id)?e.jsx(ia,{size:18}):e.jsx(qr,{size:18}),e.jsx("h3",{className:"font-semibold",children:N.nom}),e.jsxs("span",{className:"badge badge-sm",children:[N.taches.length," tches"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-base-content/60",children:[N.progression,"%"]}),e.jsx("progress",{className:"progress progress-primary w-20 h-2",value:N.progression,max:"100"})]})]}),N.description&&e.jsx("p",{className:"text-sm text-base-content/60 mt-1 ml-6",children:N.description})]}),x.has(N.id)&&e.jsxs("div",{className:"border-t border-base-200 p-4 space-y-2",children:[N.taches.map(B=>e.jsx(Wm,{tache:B,onClick:()=>xe(B.id)},B.id)),U&&e.jsxs("button",{onClick:B=>{B.stopPropagation(),V(N.id)},className:"btn btn-ghost btn-sm btn-block gap-1 border-dashed border-2 border-base-300 hover:border-primary",children:[e.jsx(Ye,{size:16}),"Ajouter une tche  cette tape"]})]})]},N.id)),n.etapes.length===0&&n.tachesIndependantes.length===0&&e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body items-center text-center py-12",children:[e.jsx(an,{size:48,className:"text-base-content/30 mb-4"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Aucune tche"}),e.jsx("p",{className:"text-base-content/60 text-sm",children:"Commencez par crer des tapes et des tches pour organiser votre projet."}),U&&e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:At,className:"btn btn-outline btn-sm gap-1",children:[e.jsx(zl,{size:16}),"Crer une tape"]}),e.jsxs("button",{onClick:()=>V(),className:"btn btn-primary btn-sm gap-1",children:[e.jsx(Ye,{size:16}),"Crer une tche"]})]})]})})]}),m==="candidatures"&&U&&e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body items-center text-center py-12",children:[e.jsx(bt,{size:48,className:"text-base-content/30 mb-4"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Aucune candidature"}),e.jsx("p",{className:"text-base-content/60 text-sm",children:"Les experts intresss par votre projet apparatront ici."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(N=>{var B,te,C,M;return e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-base-300",children:N.expertPhotoUrl?e.jsx("img",{src:N.expertPhotoUrl,alt:"Expert"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full text-lg font-bold text-base-content/50",children:((B=N.expertPrenom)==null?void 0:B.charAt(0))||((te=N.expertNom)==null?void 0:te.charAt(0))||"?"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:N.expertPrenom&&N.expertNom?`${N.expertPrenom} ${N.expertNom}`:`Expert #${N.expertId.slice(0,8)}`}),N.expertTitre&&e.jsx("div",{className:"text-xs text-base-content/60",children:N.expertTitre}),N.tacheNom&&e.jsxs("div",{className:"text-xs text-primary mt-1",children:["Pour: ",N.tacheNom]})]}),e.jsx("span",{className:`badge badge-sm flex-shrink-0 ${(C=Hm[N.statut])==null?void 0:C.classe}`,children:(M=Hm[N.statut])==null?void 0:M.label})]})})]}),N.message&&e.jsxs("p",{className:"text-sm mt-3 bg-base-200 p-2 rounded italic",children:['"',N.message,'"']}),e.jsxs("div",{className:"flex gap-4 text-xs text-base-content/60 mt-2",children:[N.tarifPropose&&e.jsxs("span",{className:"font-medium text-primary",children:[N.tarifPropose.toLocaleString()," FCFA"]}),N.delaiProposeJours&&e.jsxs("span",{children:["Dlai: ",N.delaiProposeJours," jours"]}),e.jsx("span",{className:"ml-auto",children:new Date(N.dateCreation).toLocaleDateString("fr-FR")})]}),N.statut==="EN_ATTENTE"&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>fe(N.id,"ACCEPTER"),disabled:b,className:"btn btn-success btn-xs flex-1",children:b?e.jsx("span",{className:"loading loading-spinner loading-xs"}):"Accepter"}),e.jsxs("button",{onClick:()=>fe(N.id,"EN_DISCUSSION"),disabled:b,className:"btn btn-info btn-xs flex-1 gap-1",children:[e.jsx(_r,{size:12}),"Contacter"]}),e.jsx("button",{onClick:()=>fe(N.id,"REFUSER"),disabled:b,className:"btn btn-error btn-xs btn-outline flex-1",children:"Refuser"})]}),N.statut==="EN_DISCUSSION"&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>fe(N.id,"ACCEPTER"),disabled:b,className:"btn btn-success btn-xs flex-1",children:"Accepter"}),e.jsx("button",{onClick:()=>fe(N.id,"REFUSER"),disabled:b,className:"btn btn-error btn-xs btn-outline flex-1",children:"Refuser"})]}),N.statut==="ACCEPTEE"&&!N.estSurTache&&n&&(()=>{var Z;const G=[...n.tachesIndependantes||[],...((Z=n.etapes)==null?void 0:Z.flatMap(pe=>pe.taches||[]))||[]].filter(pe=>!pe.expertAssigneId&&pe.statut==="A_FAIRE");return G.length>0?e.jsx("div",{className:"mt-3",children:e.jsxs("button",{onClick:()=>nt(N.expertId),disabled:b,className:"btn btn-primary btn-xs w-full gap-1",children:[e.jsx(bt,{size:12}),"Assigner aux ",G.length," tche(s) disponible(s)"]})}):e.jsxs("div",{className:"mt-3 text-xs text-success flex items-center gap-1",children:[e.jsx(ze,{size:12}),"Dj assign aux tches"]})})()]})},N.id)})})}),m==="parametres"&&U&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[e.jsx(ts,{size:18}),"Informations du projet"]}),!ce&&e.jsxs("button",{onClick:F,className:"btn btn-ghost btn-sm gap-1",children:[e.jsx(Fc,{size:14}),"Modifier"]})]}),ce?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Nom du projet *"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",value:Q.nom||"",onChange:N=>W({...Q,nom:N.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Description"})}),e.jsx("textarea",{className:"textarea textarea-bordered w-full h-24",value:Q.description||"",onChange:N=>W({...Q,description:N.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Budget"})}),e.jsx("input",{type:"number",className:"input input-bordered w-full",value:Q.budget||"",onChange:N=>W({...Q,budget:parseInt(N.target.value)||0})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Devise"})}),e.jsxs("select",{className:"select select-bordered w-full",value:Q.devise||"FCFA",onChange:N=>W({...Q,devise:N.target.value}),children:[e.jsx("option",{value:"FCFA",children:"FCFA"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"USD",children:"USD"})]})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Visibilit"})}),e.jsxs("select",{className:"select select-bordered w-full",value:Q.visibilite||"PRIVE",onChange:N=>W({...Q,visibilite:N.target.value}),children:[e.jsx("option",{value:"PRIVE",children:"Priv - Seul vous pouvez voir ce projet"}),e.jsx("option",{value:"PUBLIC",children:"Public - Visible par tous les experts"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date dbut prvue"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:Q.dateDebutPrevue||"",onChange:N=>W({...Q,dateDebutPrevue:N.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date fin prvue"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:Q.dateFinPrevue||"",onChange:N=>W({...Q,dateFinPrevue:N.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:()=>se(!1),className:"btn btn-ghost btn-sm",disabled:b,children:"Annuler"}),e.jsxs("button",{onClick:Mt,disabled:!((pr=Q.nom)!=null&&pr.trim())||b,className:"btn btn-primary btn-sm gap-1",children:[b?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsx(Js,{size:14}),"Enregistrer"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-base-content/60 mb-1",children:"Nom"}),e.jsx("div",{className:"font-medium",children:n.nom})]}),n.description&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-base-content/60 mb-1",children:"Description"}),e.jsx("div",{className:"text-sm",children:n.description})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-base-content/60 mb-1",children:"Budget"}),e.jsx("div",{className:"font-medium",children:Me(n.budget,n.devise)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-base-content/60 mb-1",children:"Visibilit"}),e.jsx("div",{className:"badge badge-sm",children:n.visibilite==="PUBLIC"?"Public":"Priv"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-base-content/60 mb-1",children:"Dbut prvu"}),e.jsx("div",{children:pt(n.dateDebutPrevue)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-base-content/60 mb-1",children:"Fin prvue"}),e.jsx("div",{children:pt(n.dateFinPrevue)})]})]})]})]})}),e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[e.jsx(_n,{size:18}),"Exigences du projet",e.jsx("span",{className:"badge badge-sm",children:n.exigences.length})]})}),e.jsxs("div",{className:"space-y-2",children:[n.exigences.map(N=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded hover:bg-base-200 group",children:[e.jsx(ze,{size:16,className:"text-success flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-sm",children:N.description}),e.jsx("button",{onClick:()=>X(N.id),className:"btn btn-ghost btn-xs btn-circle text-error opacity-0 group-hover:opacity-100 transition-opacity",disabled:b,children:e.jsx(Je,{size:14})})]},N.id)),n.exigences.length===0&&e.jsx("p",{className:"text-sm text-base-content/50 text-center py-4",children:"Aucune exigence dfinie"}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("input",{type:"text",placeholder:"Ajouter une exigence...",className:"input input-bordered input-sm flex-1",value:be,onChange:N=>A(N.target.value),onKeyPress:N=>{N.key==="Enter"&&(N.preventDefault(),Ce())}}),e.jsxs("button",{onClick:Ce,disabled:!be.trim()||b,className:"btn btn-primary btn-sm gap-1",children:[b?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(Ye,{size:14}),"Ajouter"]})]})]})]})}),e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[e.jsx(zl,{size:18}),"tapes du projet",e.jsx("span",{className:"badge badge-sm",children:n.etapes.length})]}),e.jsxs("button",{onClick:At,className:"btn btn-ghost btn-sm gap-1",children:[e.jsx(Ye,{size:14}),"Ajouter"]})]}),e.jsxs("div",{className:"space-y-2",children:[n.etapes.map(N=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded bg-base-200",children:[e.jsx(Sm,{size:16,className:"text-base-content/40"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:N.nom}),N.description&&e.jsx("div",{className:"text-xs text-base-content/60",children:N.description})]}),e.jsxs("span",{className:"badge badge-sm",children:[N.taches.length," tches"]})]},N.id)),n.etapes.length===0&&e.jsx("p",{className:"text-sm text-base-content/50 text-center py-4",children:"Aucune tape dfinie"})]})]})}),e.jsx("div",{className:"card bg-error/5 border border-error/20",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("h2",{className:"font-semibold text-error flex items-center gap-2 mb-4",children:[e.jsx(Ge,{size:18}),"Zone de danger"]}),e.jsx("p",{className:"text-sm text-base-content/70 mb-4",children:"Ces actions sont irrversibles. Procdez avec prcaution."}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs("button",{className:"btn btn-error btn-sm btn-outline gap-1",children:[e.jsx(Je,{size:14}),"Supprimer le projet"]})})]})})]})]}),u&&e.jsxs("div",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box max-w-md",children:[e.jsx("button",{onClick:()=>g(!1),className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:e.jsx(st,{size:18})}),e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[e.jsx(zl,{size:20}),"Nouvelle tape"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Nom de l'tape *"})}),e.jsx("input",{type:"text",placeholder:"Ex: Phase de conception",className:"input input-bordered w-full",value:P.nom,onChange:N=>k({...P,nom:N.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Description"})}),e.jsx("textarea",{placeholder:"Dcrivez cette tape...",className:"textarea textarea-bordered w-full h-24",value:P.description||"",onChange:N=>k({...P,description:N.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date dbut"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:P.dateDebutPrevue||"",onChange:N=>k({...P,dateDebutPrevue:N.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date fin"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:P.dateFinPrevue||"",onChange:N=>k({...P,dateFinPrevue:N.target.value})})]})]})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:()=>g(!1),className:"btn btn-ghost",children:"Annuler"}),e.jsxs("button",{onClick:je,disabled:!P.nom.trim()||b,className:"btn btn-primary gap-1",children:[b?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsx(Ye,{size:16}),"Crer l'tape"]})]})]}),e.jsx("div",{className:"modal-backdrop",onClick:()=>g(!1)})]}),v&&e.jsxs("div",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>y(!1),className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:e.jsx(st,{size:18})}),e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[e.jsx(an,{size:20}),"Nouvelle tche",f&&(n==null?void 0:n.etapes)&&e.jsx("span",{className:"badge badge-ghost",children:((Qs=n.etapes.find(N=>N.id===f))==null?void 0:Qs.nom)||"tape"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Nom de la tche *"})}),e.jsx("input",{type:"text",placeholder:"Ex: Crer les maquettes UI",className:"input input-bordered w-full",value:w.nom,onChange:N=>R({...w,nom:N.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Description"})}),e.jsx("textarea",{placeholder:"Dcrivez cette tche en dtail...",className:"textarea textarea-bordered w-full h-24",value:w.description||"",onChange:N=>R({...w,description:N.target.value})})]}),!f&&n&&n.etapes.length>0&&e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Rattacher  une tape"})}),e.jsxs("select",{className:"select select-bordered w-full",value:w.etapeId||"",onChange:N=>R({...w,etapeId:N.target.value?parseInt(N.target.value):void 0}),children:[e.jsx("option",{value:"",children:"Tche indpendante"}),n.etapes.map(N=>e.jsx("option",{value:N.id,children:N.nom},N.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Budget (FCFA)"})}),e.jsx("input",{type:"number",placeholder:"0",className:"input input-bordered w-full",value:w.budget||"",onChange:N=>R({...w,budget:parseInt(N.target.value)||0})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Dlai (jours)"})}),e.jsx("input",{type:"number",placeholder:"7",className:"input input-bordered w-full",value:w.delaiJours||"",onChange:N=>R({...w,delaiJours:parseInt(N.target.value)||void 0})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Priorit"})}),e.jsxs("select",{className:"select select-bordered w-full",value:w.priorite||"NORMALE",onChange:N=>R({...w,priorite:N.target.value}),children:[e.jsx("option",{value:"BASSE",children:"Basse"}),e.jsx("option",{value:"NORMALE",children:"Normale"}),e.jsx("option",{value:"HAUTE",children:"Haute"}),e.jsx("option",{value:"URGENTE",children:"Urgente"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date dbut"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:w.dateDebutPrevue||"",onChange:N=>R({...w,dateDebutPrevue:N.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date fin"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:w.dateFinPrevue||"",onChange:N=>R({...w,dateFinPrevue:N.target.value})})]})]}),e.jsxs("div",{className:"divider text-sm",children:[e.jsx(ki,{size:16,className:"mr-1"}),"Livrables attendus"]}),e.jsxs("div",{className:"space-y-3",children:[I.map((N,B)=>{var te;return e.jsx("div",{className:"card bg-base-200 p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Sm,{size:16,className:"text-base-content/40 mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Nom du livrable (ex: Maquettes Figma)",className:"input input-bordered input-sm flex-1",value:N.nom,onChange:C=>rt(B,"nom",C.target.value)}),e.jsx("button",{type:"button",onClick:()=>Ve(B),className:"btn btn-ghost btn-sm btn-square text-error",children:e.jsx(Je,{size:14})})]}),e.jsx("input",{type:"text",placeholder:"Description (optionnel)",className:"input input-bordered input-sm w-full",value:N.description,onChange:C=>rt(B,"description",C.target.value)}),e.jsxs("div",{className:"pl-2 border-l-2 border-primary/30 space-y-1",children:[e.jsxs("div",{className:"text-xs font-medium text-base-content/70 flex items-center gap-1",children:[e.jsx(_n,{size:12}),"Critres de validation"]}),N.criteres.map((C,M)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ze,{size:12,className:"text-success flex-shrink-0"}),e.jsx("span",{className:"flex-1",children:C}),e.jsx("button",{type:"button",onClick:()=>rs(B,M),className:"btn btn-ghost btn-xs btn-circle text-error",children:e.jsx(st,{size:12})})]},M)),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",placeholder:"Ajouter un critre...",className:"input input-bordered input-xs flex-1",value:L[B]||"",onChange:C=>J({...L,[B]:C.target.value}),onKeyPress:C=>{C.key==="Enter"&&(C.preventDefault(),yt(B))}}),e.jsx("button",{type:"button",onClick:()=>yt(B),className:"btn btn-primary btn-xs",disabled:!((te=L[B])!=null&&te.trim()),children:e.jsx(Ye,{size:12})})]})]})]})]})},B)}),e.jsxs("button",{type:"button",onClick:Re,className:"btn btn-ghost btn-sm btn-block border-dashed border-2 gap-1",children:[e.jsx(Ye,{size:16}),"Ajouter un livrable"]}),I.length===0&&e.jsx("p",{className:"text-xs text-base-content/50 text-center",children:"Dfinissez les livrables que l'expert devra fournir et leurs critres de validation"})]})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:()=>y(!1),className:"btn btn-ghost",children:"Annuler"}),e.jsxs("button",{onClick:Se,disabled:!w.nom.trim()||b,className:"btn btn-primary gap-1",children:[b?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsx(Ye,{size:16}),"Crer la tche"]})]})]}),e.jsx("div",{className:"modal-backdrop",onClick:()=>y(!1)})]}),z&&e.jsxs("div",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box max-w-md",children:[e.jsx("button",{onClick:()=>S(!1),className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:e.jsx(st,{size:18})}),e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[e.jsx(ys,{size:20}),"Candidater",$&&e.jsx("span",{className:"badge badge-ghost text-xs",children:"pour une tche"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Message de motivation"})}),e.jsx("textarea",{placeholder:"Prsentez-vous et expliquez pourquoi vous tes le bon expert pour ce projet...",className:"textarea textarea-bordered w-full h-32",value:q.message,onChange:N=>ie({...q,message:N.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Tarif propos (FCFA)"})}),e.jsx("input",{type:"number",placeholder:"Ex: 150000",className:"input input-bordered w-full",value:q.tarifPropose,onChange:N=>ie({...q,tarifPropose:N.target.value})}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt",children:"Optionnel"})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Dlai (jours)"})}),e.jsx("input",{type:"number",placeholder:"Ex: 14",className:"input input-bordered w-full",value:q.delaiProposeJours,onChange:N=>ie({...q,delaiProposeJours:N.target.value})}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt",children:"Optionnel"})})]})]}),e.jsxs("div",{className:"alert alert-info py-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-xs",children:"Le propritaire du projet pourra voir votre profil et vos comptences."})]})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:()=>S(!1),className:"btn btn-ghost",children:"Annuler"}),e.jsxs("button",{onClick:xs,disabled:b,className:"btn btn-primary gap-1",children:[b?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsx(ys,{size:16}),"Envoyer ma candidature"]})]})]}),e.jsx("div",{className:"modal-backdrop",onClick:()=>S(!1)})]}),n&&Y&&e.jsx(cy,{isOpen:Ne,onClose:()=>{Le(!1),ve(null)},projet:n,candidature:Y,onConfirmer:_e,enregistrement:b}),ne&&e.jsx(nf,{isOpen:O,onClose:()=>{re(!1),we(null)},expert:{id:ne.expertId,nom:ne.expertNom||"",prenom:ne.expertPrenom||"",titre:ne.expertTitre||"",photoUrl:ne.expertPhotoUrl||"",rating:0,nombreProjets:0,description:"",competences:[],experienceAnnees:0,tjmMin:0,tjmMax:0,localisation:"",disponible:!0},onSuccess:Oe})]})}function Wm({tache:t,onClick:s}){var l,i,c;const r=dy[t.statut],a=(()=>{if(t.delaiJours)return`${t.delaiJours} jour${t.delaiJours>1?"s":""}`;if(t.dateDebutPrevue&&t.dateFinPrevue){const o=new Date(t.dateDebutPrevue),m=new Date(t.dateFinPrevue),j=Math.ceil((m.getTime()-o.getTime())/(1e3*60*60*24));return`${j} jour${j>1?"s":""}`}return null})();return e.jsx("div",{className:`card bg-base-200/50 hover:bg-base-200 transition-colors ${s?"cursor-pointer":""}`,onClick:s,children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[t.expertAssigneId?e.jsxs("div",{className:"flex-shrink-0 tooltip tooltip-right","data-tip":`${t.expertPrenom||""} ${t.expertNom||""}`,children:[t.expertPhotoUrl?e.jsx("img",{src:`/api/photos/${t.expertAssigneId}`,alt:"",className:"w-8 h-8 rounded-full object-cover",onError:o=>{var m;o.target.style.display="none",(m=o.target.nextElementSibling)==null||m.classList.remove("hidden")}}):null,e.jsxs("div",{className:`w-8 h-8 rounded-full bg-primary text-primary-content flex items-center justify-center font-semibold text-xs ${t.expertPhotoUrl?"hidden":""}`,children:[((l=t.expertPrenom)==null?void 0:l.charAt(0).toUpperCase())||((i=t.expertNom)==null?void 0:i.charAt(0).toUpperCase())||"?",((c=t.expertNom)==null?void 0:c.charAt(0).toUpperCase())||""]})]}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-base-300 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xs text-base-content/40",children:"?"})}),e.jsxs("div",{className:`badge badge-sm gap-1 flex-shrink-0 ${r==null?void 0:r.classe}`,children:[r==null?void 0:r.icone,r==null?void 0:r.label]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:t.nom}),t.description&&e.jsx("div",{className:"text-xs text-base-content/60 line-clamp-2 mt-0.5",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.estDisponible&&e.jsx("span",{className:"badge badge-success badge-xs",children:"Disponible"}),s&&e.jsx(qr,{size:14,className:"text-base-content/40"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-2 text-xs text-base-content/60",children:[a&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ut,{size:12}),a]}),t.dateDebutPrevue&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ss,{size:12}),new Date(t.dateDebutPrevue).toLocaleDateString("fr-FR",{day:"numeric",month:"short"}),t.dateFinPrevue&&e.jsxs(e.Fragment,{children:["  ",new Date(t.dateFinPrevue).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]}),t.budget>0&&e.jsxs("span",{className:"font-medium text-primary",children:[t.budget.toLocaleString()," FCFA"]})]}),t.nombreLivrables>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-base-300",children:[e.jsx(ki,{size:14,className:"text-base-content/50"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"text-xs",children:[t.nombreLivrables," livrable",t.nombreLivrables>1?"s":""]}),t.nombreLivrablesValides>0&&e.jsxs("span",{className:"text-xs text-success ml-2",children:["(",t.nombreLivrablesValides," valid",t.nombreLivrablesValides>1?"s":"",")"]})]}),e.jsx("div",{className:"flex gap-0.5",children:Array.from({length:t.nombreLivrables}).map((o,m)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${m<t.nombreLivrablesValides?"bg-success":"bg-base-300"}`},m))})]}),t.livrables&&t.livrables.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-base-300 space-y-1",children:[t.livrables.slice(0,3).map(o=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${o.statut==="ACCEPTE"?"bg-success":o.statut==="SOUMIS"||o.statut==="EN_REVUE"?"bg-warning":o.statut==="REFUSE"?"bg-error":"bg-base-300"}`}),e.jsx("span",{className:"truncate",children:o.nom}),o.criteres&&o.criteres.length>0&&e.jsxs("span",{className:"text-base-content/40 flex-shrink-0",children:["(",o.criteres.filter(m=>m.estValide).length,"/",o.criteres.length," critres)"]})]},o.id)),t.livrables.length>3&&e.jsxs("div",{className:"text-xs text-base-content/40",children:["+",t.livrables.length-3," autre",t.livrables.length-3>1?"s":""]})]})]})})}class my{constructor(){Ks(this,"BASE_URL","/api/livrables")}async obtenirLivrable(s){const r=await Ee(`${this.BASE_URL}/${s}`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration du livrable: ${r.status}`);return await r.json()}async listerLivrablesTache(s){const r=await fetch(`${this.BASE_URL}/tache/${s}`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration des livrables: ${r.status}`);return await r.json()}async listerLivrablesEnAttenteValidation(s){const r=await Ee(`${this.BASE_URL}/projet/${s}/en-attente`,{credentials:"include",headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Erreur lors de la rcupration des livrables en attente: ${r.status}`);return await r.json()}async soumettreLivrable(s,r){const n=await Ee(`${this.BASE_URL}/${s}/soumettre`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Erreur lors de la soumission du livrable: ${n.status}`);return await n.json()}async validerLivrable(s,r){const n=await Ee(`${this.BASE_URL}/${s}/valider`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Erreur lors de la validation du livrable: ${n.status}`);return await n.json()}async demanderRevision(s,r){const n=await Ee(`${this.BASE_URL}/${s}/revision`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({commentaire:r})});if(!n.ok)throw new Error(`Erreur lors de la demande de rvision: ${n.status}`);return await n.json()}async compterLivrables(s,r){const n=r?`?statut=${r}`:"",a=await fetch(`${this.BASE_URL}/tache/${s}/count${n}`,{credentials:"include",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Erreur lors du comptage des livrables: ${a.status}`);return(await a.json()).count}async uploaderFichier(s,r){const n=new FormData;n.append("fichier",r);const a=await Ee(`${this.BASE_URL}/${s}/upload`,{method:"POST",credentials:"include",body:n});if(!a.ok){const l=await a.json().catch(()=>({}));throw new Error(l.erreur||`Erreur lors de l'upload du fichier: ${a.status}`)}return await a.json()}getUrlPrevisualisation(s){return`/api/files/${s.replace("livrables/","livrables/view/")}`}getUrlTelechargement(s){return`/api/files/${s.replace("livrables/","livrables/download/")}`}}const Ro=new my,qm={A_FAIRE:{label:" faire",classe:"badge-ghost"},EN_COURS:{label:"En cours",classe:"badge-warning"},EN_REVUE:{label:"En revue",classe:"badge-info"},TERMINEE:{label:"Termine",classe:"badge-success"},BLOQUEE:{label:"Bloque",classe:"badge-error"},ANNULEE:{label:"Annule",classe:"badge-neutral"}},Jm={A_FOURNIR:{label:" fournir",classe:"badge-ghost"},SOUMIS:{label:"Soumis",classe:"badge-info"},EN_REVUE:{label:"En revue",classe:"badge-warning"},ACCEPTE:{label:"Accept",classe:"badge-success"},REFUSE:{label:"Refus",classe:"badge-error"},A_REVISER:{label:" rviser",classe:"badge-warning"}},Gm={BASSE:{label:"Basse",classe:"badge-ghost"},NORMALE:{label:"Normale",classe:"badge-info"},HAUTE:{label:"Haute",classe:"badge-warning"},URGENTE:{label:"Urgente",classe:"badge-error"}};function py(){var V,je,Se,Re,Ve,rt,yt,rs,Mt;const{projetId:t,tacheId:s}=bn(),r=jt(),{user:n}=Es(),[a,l]=d.useState(null),[i,c]=d.useState(""),[o,m]=d.useState(""),[j,x]=d.useState(!0),[h,u]=d.useState(!1),[g,v]=d.useState(null),[y,f]=d.useState("url"),[p,b]=d.useState(null),[E,P]=d.useState(!1),[k,w]=d.useState({fichierUrl:"",fichierNom:"",commentaire:""}),[R,I]=d.useState(null),[T,L]=d.useState({accepte:!0,commentaire:""}),[J,Q]=d.useState(!1),[W,ce]=d.useState({}),[se,be]=d.useState(null),[A,z]=d.useState({nom:"",description:""}),[S,$]=d.useState(!1),[D,q]=d.useState({}),[ie,me]=d.useState(!1),[Pe,Ne]=d.useState(""),Le=o===(n==null?void 0:n.id),Y=(a==null?void 0:a.expertAssigneId)===(n==null?void 0:n.id);d.useEffect(()=>{ve()},[t,s]);const ve=async()=>{if(!(!t||!s)){x(!0);try{const F=await ar.obtenirTache(parseInt(s));l(F);const Ce=await Ht.obtenirProjet(parseInt(t));c(Ce.nom),m(Ce.proprietaireId)}catch(F){console.error("Erreur chargement tche:",F),r(`/projets/${t}`)}finally{x(!1)}}},O=()=>{a&&(ce({nom:a.nom,description:a.description||"",budget:a.budget,delaiJours:a.delaiJours,priorite:a.priorite,dateDebutPrevue:a.dateDebutPrevue,dateFinPrevue:a.dateFinPrevue}),Q(!0))},re=async()=>{if(a){u(!0);try{const F=await ar.modifierTache(a.id,W);l(F),Q(!1)}catch(F){console.error("Erreur modification tche:",F)}finally{u(!1)}}},ne=async()=>{if(!(!a||!A.nom.trim())){u(!0);try{await ar.ajouterLivrable(a.id,A.nom,A.description||void 0),z({nom:"",description:""}),$(!1),await ve()}catch(F){console.error("Erreur ajout livrable:",F)}finally{u(!1)}}},we=async F=>{var X;const Ce=(X=D[F])==null?void 0:X.trim();if(Ce){u(!0);try{if(!(await fetch(`/api/livrables/${F}/criteres`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({description:Ce})})).ok)throw new Error("Erreur lors de l'ajout du critre");q({...D,[F]:""}),await ve()}catch(xe){console.error("Erreur ajout critre:",xe)}finally{u(!1)}}},U=async F=>{u(!0);try{if(!(await fetch(`/api/livrables/criteres/${F}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Erreur lors de la suppression du critre");await ve()}catch(Ce){console.error("Erreur suppression critre:",Ce)}finally{u(!1)}},H=async F=>{if(confirm("Supprimer ce livrable et tous ses critres ?")){u(!0);try{if(!(await fetch(`/api/livrables/${F}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Erreur lors de la suppression du livrable");await ve()}catch(Ce){console.error("Erreur suppression livrable:",Ce)}finally{u(!1)}}},ae=F=>{be(se===F?null:F)},ke=async F=>{if(!(y==="url"&&!k.fichierUrl.trim())&&!(y==="fichier"&&!p)){u(!0);try{let Ce=k.fichierUrl,X="",xe,fe;if(y==="fichier"&&p){P(!0);try{const _e=await Ro.uploaderFichier(F,p);Ce=_e.fichierUrl,X=_e.fichierNom,xe=_e.fichierTaille,fe=_e.fichierType}catch(_e){const nt=_e instanceof Error?_e.message:"Erreur lors de l'upload";alert(`Erreur upload: ${nt}`);return}finally{P(!1)}}if(!(await fetch(`/api/livrables/${F}/soumettre`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({fichierUrl:Ce||void 0,fichierNom:X||void 0,fichierTaille:xe,fichierType:fe,commentaire:k.commentaire||void 0})})).ok)throw new Error("Erreur lors de la soumission du livrable");v(null),f("url"),b(null),w({fichierUrl:"",fichierNom:"",commentaire:""}),await ve()}catch(Ce){console.error("Erreur soumission livrable:",Ce)}finally{u(!1)}}},Te=async(F,Ce)=>{u(!0);try{if(!(await fetch(`/api/livrables/${F}/valider`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({accepte:Ce,commentaire:T.commentaire||void 0})})).ok)throw new Error("Erreur lors de la validation du livrable");I(null),L({accepte:!0,commentaire:""}),await ve()}catch(X){console.error("Erreur validation livrable:",X)}finally{u(!1)}},Me=async F=>{u(!0);try{if(!(await fetch(`/api/livrables/${F}/revision`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({commentaire:T.commentaire||void 0})})).ok)throw new Error("Erreur lors de la demande de rvision");I(null),L({accepte:!0,commentaire:""}),await ve()}catch(Ce){console.error("Erreur demande rvision:",Ce)}finally{u(!1)}},pt=async()=>{if(a){u(!0);try{const F=Pe?`?motif=${encodeURIComponent(Pe)}`:"";if(!(await fetch(`/api/taches/${a.id}/desassigner${F}`,{method:"PUT",credentials:"include",headers:{Accept:"application/json"}})).ok)throw new Error("Erreur lors du retrait de l'expert");me(!1),Ne(""),await ve()}catch(F){console.error("Erreur retrait expert:",F)}finally{u(!1)}}},At=F=>F?new Date(F).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):"-";return j?e.jsx("div",{className:"min-h-screen bg-base-200 flex items-center justify-center",children:e.jsx(_s,{})}):a?e.jsxs("div",{className:"min-h-screen bg-base-200",children:[e.jsx("div",{className:"bg-base-100 border-b border-base-300 sticky top-0 z-10",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-base-content/60 mb-2",children:[e.jsx("button",{onClick:()=>r("/projets"),className:"hover:text-primary",children:"Projets"}),e.jsx("span",{children:"/"}),e.jsx("button",{onClick:()=>r(`/projets/${t}`),className:"hover:text-primary truncate max-w-[150px]",children:i}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"truncate",children:"Tche"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r(`/projets/${t}`),className:"btn btn-ghost btn-sm btn-circle",children:e.jsx(Os,{size:20})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h1",{className:"text-lg font-bold truncate",children:a.nom}),e.jsx("span",{className:`badge badge-sm ${(V=qm[a.statut])==null?void 0:V.classe}`,children:(je=qm[a.statut])==null?void 0:je.label}),e.jsx("span",{className:`badge badge-sm ${(Se=Gm[a.priorite])==null?void 0:Se.classe}`,children:(Re=Gm[a.priorite])==null?void 0:Re.label})]})})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl space-y-6",children:[e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Yi,{size:18}),"Informations de base"]}),Le&&!J&&e.jsxs("button",{onClick:O,className:"btn btn-ghost btn-sm gap-1",children:[e.jsx(Fc,{size:14}),"Modifier"]})]}),J?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Nom de la tche *"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",value:W.nom||"",onChange:F=>ce({...W,nom:F.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Description"})}),e.jsx("textarea",{className:"textarea textarea-bordered w-full h-24",value:W.description||"",onChange:F=>ce({...W,description:F.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Budget (FCFA)"})}),e.jsx("input",{type:"number",className:"input input-bordered w-full",value:W.budget||"",onChange:F=>ce({...W,budget:parseInt(F.target.value)||0})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Dlai (jours)"})}),e.jsx("input",{type:"number",className:"input input-bordered w-full",value:W.delaiJours||"",onChange:F=>ce({...W,delaiJours:parseInt(F.target.value)||void 0})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Priorit"})}),e.jsxs("select",{className:"select select-bordered w-full",value:W.priorite||"NORMALE",onChange:F=>ce({...W,priorite:F.target.value}),children:[e.jsx("option",{value:"BASSE",children:"Basse"}),e.jsx("option",{value:"NORMALE",children:"Normale"}),e.jsx("option",{value:"HAUTE",children:"Haute"}),e.jsx("option",{value:"URGENTE",children:"Urgente"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date dbut prvue"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:W.dateDebutPrevue||"",onChange:F=>ce({...W,dateDebutPrevue:F.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date fin prvue"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:W.dateFinPrevue||"",onChange:F=>ce({...W,dateFinPrevue:F.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:()=>Q(!1),className:"btn btn-ghost btn-sm",disabled:h,children:"Annuler"}),e.jsxs("button",{onClick:re,disabled:!((Ve=W.nom)!=null&&Ve.trim())||h,className:"btn btn-primary btn-sm gap-1",children:[h?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsx(Js,{size:14}),"Enregistrer"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[a.description&&e.jsx("p",{className:"text-sm text-base-content/70",children:a.description}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base-content/60 text-xs mb-1",children:"Budget"}),e.jsx("div",{className:"font-medium",children:a.budget>0?`${a.budget.toLocaleString()} FCFA`:"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base-content/60 text-xs mb-1",children:"Dlai"}),e.jsxs("div",{className:"font-medium flex items-center gap-1",children:[e.jsx(ut,{size:14}),a.delaiJours?`${a.delaiJours} jours`:"-"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base-content/60 text-xs mb-1",children:"Dbut prvu"}),e.jsxs("div",{className:"font-medium flex items-center gap-1",children:[e.jsx(ss,{size:14}),At(a.dateDebutPrevue)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base-content/60 text-xs mb-1",children:"Fin prvue"}),e.jsxs("div",{className:"font-medium flex items-center gap-1",children:[e.jsx(ss,{size:14}),At(a.dateFinPrevue)]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-base-content/60",children:"Progression"}),e.jsxs("span",{className:"font-medium",children:[a.progression,"%"]})]}),e.jsx("progress",{className:"progress progress-primary w-full",value:a.progression,max:"100"})]})]})]})}),a.expertAssigneId&&e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a.expertPhotoUrl?e.jsx("img",{src:`/api/photos/${a.expertAssigneId}`,alt:"",className:"w-12 h-12 rounded-full object-cover",onError:F=>{var Ce;F.target.style.display="none",(Ce=F.target.nextElementSibling)==null||Ce.classList.remove("hidden")}}):null,e.jsxs("div",{className:`w-12 h-12 rounded-full bg-primary text-primary-content flex items-center justify-center font-bold text-lg ${a.expertPhotoUrl?"hidden":""}`,children:[((rt=a.expertPrenom)==null?void 0:rt.charAt(0).toUpperCase())||((yt=a.expertNom)==null?void 0:yt.charAt(0).toUpperCase())||"?",((rs=a.expertNom)==null?void 0:rs.charAt(0).toUpperCase())||""]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[e.jsx(_n,{size:18}),"Expert assign"]}),e.jsxs("p",{className:"text-sm font-medium",children:[a.expertPrenom," ",a.expertNom]}),e.jsxs("p",{className:"text-xs text-base-content/60",children:["Assign le ",At(a.dateAssignation)]})]})]}),Le&&e.jsxs("button",{onClick:()=>me(!0),className:"btn btn-error btn-sm btn-outline gap-1",children:[e.jsx(Ti,{size:14}),"Retirer l'expert"]})]})})}),e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[e.jsx(ki,{size:18}),"Livrables attendus",e.jsx("span",{className:"badge badge-sm",children:((Mt=a.livrables)==null?void 0:Mt.length)||0})]}),Le&&e.jsxs("button",{onClick:()=>$(!0),className:"btn btn-ghost btn-sm gap-1",disabled:S,children:[e.jsx(Ye,{size:14}),"Ajouter"]})]}),e.jsxs("div",{className:"space-y-3",children:[S&&e.jsx("div",{className:"card bg-base-200 p-3",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Nom du livrable (ex: Maquettes Figma)",className:"input input-bordered input-sm w-full",value:A.nom,onChange:F=>z({...A,nom:F.target.value}),autoFocus:!0}),e.jsx("input",{type:"text",placeholder:"Description (optionnel)",className:"input input-bordered input-sm w-full",value:A.description,onChange:F=>z({...A,description:F.target.value})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{$(!1),z({nom:"",description:""})},className:"btn btn-ghost btn-xs",children:"Annuler"}),e.jsxs("button",{onClick:ne,disabled:!A.nom.trim()||h,className:"btn btn-primary btn-xs gap-1",children:[h?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(Ye,{size:12}),"Ajouter"]})]})]})}),a.livrables&&a.livrables.length>0?a.livrables.map(F=>{var Ce,X,xe;return e.jsxs("div",{className:"card bg-base-200",children:[e.jsx("div",{className:"p-3 cursor-pointer hover:bg-base-300/50 transition-colors",onClick:()=>ae(F.id),children:e.jsxs("div",{className:"flex items-center gap-3",children:[se===F.id?e.jsx(ia,{size:16,className:"flex-shrink-0"}):e.jsx(qr,{size:16,className:"flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm",children:F.nom}),e.jsx("span",{className:`badge badge-xs ${(Ce=Jm[F.statut])==null?void 0:Ce.classe}`,children:(X=Jm[F.statut])==null?void 0:X.label})]}),F.description&&e.jsx("p",{className:"text-xs text-base-content/60 truncate mt-0.5",children:F.description})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[F.criteres&&F.criteres.length>0&&e.jsxs("span",{className:"text-xs text-base-content/60",children:[F.criteres.filter(fe=>fe.estValide).length,"/",F.criteres.length," critres"]}),Le&&e.jsx("button",{onClick:fe=>{fe.stopPropagation(),H(F.id)},className:"btn btn-ghost btn-xs btn-circle text-error",children:e.jsx(Je,{size:12})})]})]})}),se===F.id&&e.jsxs("div",{className:"border-t border-base-300 p-3 space-y-4",children:[(F.fichierUrl||F.fichierNom)&&e.jsxs("div",{className:"bg-base-300/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs font-medium text-base-content/70",children:"Livrable soumis"}),F.dateSoumission&&e.jsxs("div",{className:"text-xs text-base-content/50 flex items-center gap-1",children:[e.jsx(ut,{size:10}),new Date(F.dateSoumission).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),F.fichierUrl?F.fichierUrl.startsWith("livrables/")?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{size:14,className:"text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:F.fichierNom||F.fichierUrl.split("/").pop()}),F.fichierTaille&&e.jsx("span",{className:"badge badge-xs badge-ghost",children:F.fichierTaille>1024*1024?`${(F.fichierTaille/(1024*1024)).toFixed(1)} Mo`:`${(F.fichierTaille/1024).toFixed(1)} Ko`})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("a",{href:Ro.getUrlPrevisualisation(F.fichierUrl),target:"_blank",rel:"noopener noreferrer",className:"btn btn-xs btn-ghost gap-1",children:[e.jsx(qt,{size:12}),"Prvisualiser"]}),e.jsxs("a",{href:Ro.getUrlTelechargement(F.fichierUrl),className:"btn btn-xs btn-ghost gap-1",children:[e.jsx(Dx,{size:12}),"Tlcharger"]})]})]}):e.jsxs("a",{href:F.fichierUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline break-all flex items-center gap-1",children:[e.jsx(km,{size:14}),F.fichierUrl]}):F.fichierNom&&e.jsxs("div",{className:"text-sm flex items-center gap-1",children:[e.jsx(ts,{size:14}),F.fichierNom]}),F.commentaireSoumission&&e.jsxs("p",{className:"text-xs text-base-content/60 mt-2 italic",children:['"',F.commentaireSoumission,'"']})]}),F.dateValidation&&(F.statut==="ACCEPTE"||F.statut==="REFUSE"||F.statut==="A_REVISER")&&e.jsxs("div",{className:`rounded-lg p-3 ${F.statut==="ACCEPTE"?"bg-success/10":"bg-error/10"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:`text-xs font-medium ${F.statut==="ACCEPTE"?"text-success":"text-error"}`,children:F.statut==="ACCEPTE"?"Valid":F.statut==="REFUSE"?"Refus":"Rvision demande"}),e.jsxs("div",{className:"text-xs text-base-content/50 flex items-center gap-1",children:[e.jsx(ut,{size:10}),new Date(F.dateValidation).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),F.commentaireValidation&&e.jsxs("p",{className:"text-xs text-base-content/70 italic",children:['"',F.commentaireValidation,'"']})]}),Y&&(F.statut==="A_FOURNIR"||F.statut==="A_REVISER")&&e.jsx("div",{className:"bg-primary/10 rounded-lg p-3",children:g===F.id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{f("url"),w({...k,fichierNom:""})},className:`btn btn-xs flex-1 gap-1 ${y==="url"?"btn-primary":"btn-ghost"}`,children:[e.jsx(km,{size:12}),"Lien URL"]}),e.jsxs("button",{type:"button",onClick:()=>{f("fichier"),w({...k,fichierUrl:""})},className:`btn btn-xs flex-1 gap-1 ${y==="fichier"?"btn-primary":"btn-ghost"}`,children:[e.jsx(Wn,{size:12}),"Fichier"]})]}),y==="url"?e.jsx("input",{type:"text",placeholder:"URL du livrable (lien Drive, Dropbox, Github, etc.)",className:"input input-bordered input-sm w-full",value:k.fichierUrl,onChange:fe=>w({...k,fichierUrl:fe.target.value}),autoFocus:!0}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",className:"file-input file-input-bordered file-input-sm w-full",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif",onChange:fe=>{var _e;const Oe=(_e=fe.target.files)==null?void 0:_e[0];b(Oe||null)}}),p&&e.jsxs("div",{className:"text-xs text-base-content/60 flex items-center gap-2",children:[e.jsx(ts,{size:12}),e.jsx("span",{children:p.name}),e.jsxs("span",{className:"badge badge-xs",children:[(p.size/1024).toFixed(1)," Ko"]})]}),e.jsx("p",{className:"text-xs text-base-content/50",children:"Formats accepts: PDF, DOC, DOCX, JPG, PNG, GIF (max 10 Mo)"})]}),e.jsx("textarea",{placeholder:"Commentaire (optionnel) - dcrivez ce que vous soumettez",className:"textarea textarea-bordered textarea-sm w-full h-16",value:k.commentaire,onChange:fe=>w({...k,commentaire:fe.target.value})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{v(null),f("url"),b(null),w({fichierUrl:"",fichierNom:"",commentaire:""})},className:"btn btn-ghost btn-xs",disabled:h||E,children:"Annuler"}),e.jsx("button",{onClick:()=>ke(F.id),disabled:(y==="url"?!k.fichierUrl.trim():!p)||h||E,className:"btn btn-primary btn-xs gap-1",children:h||E?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-xs"}),E?"Upload...":"Envoi..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:12}),"Soumettre"]})})]})]}):e.jsxs("button",{onClick:()=>v(F.id),className:"btn btn-primary btn-sm w-full gap-1",children:[e.jsx(ze,{size:14}),"Soumettre ce livrable"]})}),Le&&(F.statut==="SOUMIS"||F.statut==="EN_REVUE")&&e.jsx("div",{className:"bg-warning/10 rounded-lg p-3",children:R===F.id?e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{placeholder:"Commentaire (expliquez votre dcision  l'expert)",className:"textarea textarea-bordered textarea-sm w-full h-16",value:T.commentaire,onChange:fe=>L({...T,commentaire:fe.target.value})}),e.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[e.jsx("button",{onClick:()=>{I(null),L({accepte:!0,commentaire:""})},className:"btn btn-ghost btn-xs",disabled:h,children:"Annuler"}),e.jsxs("button",{onClick:()=>Me(F.id),disabled:h,className:"btn btn-warning btn-xs gap-1",title:"L'expert pourra resoumettre",children:[e.jsx(Fc,{size:12}),"Rvision"]}),e.jsxs("button",{onClick:()=>Te(F.id,!1),disabled:h,className:"btn btn-error btn-xs gap-1",title:"L'expert ne pourra pas resoumettre",children:[e.jsx(st,{size:12}),"Refuser"]}),e.jsxs("button",{onClick:()=>Te(F.id,!0),disabled:h,className:"btn btn-success btn-xs gap-1",children:[h?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(ze,{size:12}),"Accepter"]})]}),e.jsxs("p",{className:"text-xs text-base-content/50",children:[e.jsx("strong",{children:"Rvision"})," : l'expert peut corriger et resoumettre.",e.jsx("strong",{children:" Refuser"})," : dfinitif, envisagez de retirer l'expert."]})]}):e.jsxs("button",{onClick:()=>I(F.id),className:"btn btn-warning btn-sm w-full gap-1",children:[e.jsx(_n,{size:14}),"Valider ce livrable"]})}),e.jsxs("div",{className:"text-xs font-medium text-base-content/70 flex items-center gap-1 mb-2",children:[e.jsx(_n,{size:12}),"Critres de validation"]}),F.criteres&&F.criteres.length>0?e.jsx("div",{className:"space-y-1",children:F.criteres.map(fe=>e.jsxs("div",{className:"flex items-center gap-2 text-sm p-2 rounded hover:bg-base-300/50",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${fe.estValide?"border-success bg-success text-success-content":"border-base-content/30"}`,children:fe.estValide&&e.jsx(ze,{size:10})}),e.jsx("span",{className:`flex-1 ${fe.estValide?"line-through text-base-content/50":""}`,children:fe.description}),Le&&e.jsx("button",{onClick:()=>U(fe.id),className:"btn btn-ghost btn-xs btn-circle text-error opacity-50 hover:opacity-100",children:e.jsx(st,{size:12})})]},fe.id))}):e.jsx("p",{className:"text-xs text-base-content/50 italic",children:"Aucun critre dfini"}),Le&&e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("input",{type:"text",placeholder:"Ajouter un critre de validation...",className:"input input-bordered input-xs flex-1",value:D[F.id]||"",onChange:fe=>q({...D,[F.id]:fe.target.value}),onKeyPress:fe=>{fe.key==="Enter"&&(fe.preventDefault(),we(F.id))}}),e.jsx("button",{onClick:()=>we(F.id),disabled:!((xe=D[F.id])!=null&&xe.trim())||h,className:"btn btn-primary btn-xs",children:e.jsx(Ye,{size:12})})]})]})]},F.id)}):!S&&e.jsxs("div",{className:"text-center py-8 text-base-content/50",children:[e.jsx(ki,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Aucun livrable dfini"}),Le&&e.jsxs("button",{onClick:()=>$(!0),className:"btn btn-ghost btn-sm mt-2 gap-1",children:[e.jsx(Ye,{size:14}),"Ajouter un livrable"]})]})]})]})}),a.competencesRequises&&a.competencesRequises.length>0&&e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("h2",{className:"font-semibold flex items-center gap-2 mb-4",children:[e.jsx(_n,{size:18}),"Comptences requises"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.competencesRequises.map(F=>e.jsxs("div",{className:"badge badge-outline gap-1",children:[F.competenceLibelle,e.jsxs("span",{className:"badge badge-xs badge-primary",children:["Niv. ",F.niveauRequis]}),F.estObligatoire&&e.jsx("span",{className:"text-error",children:"*"})]},F.id))})]})}),e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h2",{className:"font-semibold mb-4",children:"Informations"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base-content/60",children:"Cre le"}),e.jsx("div",{children:At(a.dateCreation)})]}),a.dateModification&&e.jsxs("div",{children:[e.jsx("span",{className:"text-base-content/60",children:"Modifie le"}),e.jsx("div",{children:At(a.dateModification)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base-content/60",children:"Candidatures"}),e.jsx("div",{children:a.nombreCandidatures})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base-content/60",children:"Disponible"}),e.jsx("div",{children:a.estDisponible?e.jsx("span",{className:"badge badge-success badge-sm",children:"Oui"}):e.jsx("span",{className:"badge badge-ghost badge-sm",children:"Non"})})]})]})]})})]}),ie&&e.jsxs("div",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(Hx,{size:20,className:"text-warning"}),"Retirer l'expert de cette tche ?"]}),e.jsx("p",{className:"py-4 text-sm text-base-content/70",children:"L'expert sera notifi et tous les livrables non-accepts seront rinitialiss. La tche redeviendra disponible pour d'autres experts."}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Motif (optionnel)"})}),e.jsx("textarea",{className:"textarea textarea-bordered h-20",placeholder:"Expliquez pourquoi vous retirez l'expert...",value:Pe,onChange:F=>Ne(F.target.value)})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:()=>{me(!1),Ne("")},className:"btn btn-ghost",disabled:h,children:"Annuler"}),e.jsxs("button",{onClick:pt,className:"btn btn-error gap-1",disabled:h,children:[h?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsx(Ti,{size:16}),"Confirmer le retrait"]})]})]}),e.jsx("div",{className:"modal-backdrop bg-black/50",onClick:()=>me(!1)})]})]}):e.jsx("div",{className:"min-h-screen bg-base-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tche non trouve"}),e.jsx("button",{onClick:()=>r(`/projets/${t}`),className:"btn btn-primary btn-sm",children:"Retour au projet"})]})})}const _l={EN_ATTENTE:{label:"En attente",classe:"badge-warning",icone:e.jsx(ut,{size:12})},EN_DISCUSSION:{label:"En discussion",classe:"badge-info",icone:e.jsx(Ki,{size:12})},ACCEPTEE:{label:"Accepte",classe:"badge-success",icone:e.jsx(ze,{size:12})},REFUSEE:{label:"Refuse",classe:"badge-error",icone:e.jsx(ds,{size:12})},RETIREE:{label:"Retire",classe:"badge-ghost",icone:e.jsx(Je,{size:12})}};function hy(){const t=jt(),[s,r]=d.useState([]),[n,a]=d.useState(!0),[l,i]=d.useState("TOUTES");d.useEffect(()=>{c()},[]);const c=async()=>{a(!0);try{const h=await ks.listerMesCandidatures();r(h)}catch(h){console.error("Erreur chargement candidatures:",h)}finally{a(!1)}},o=async h=>{if(confirm("Voulez-vous vraiment retirer cette candidature ?"))try{await ks.retirerCandidature(h),r(u=>u.filter(g=>g.id!==h))}catch(u){console.error("Erreur retrait candidature:",u)}},m=l==="TOUTES"?s:s.filter(h=>h.statut===l),j={total:s.length,enAttente:s.filter(h=>h.statut==="EN_ATTENTE").length,acceptees:s.filter(h=>h.statut==="ACCEPTEE").length},x=h=>new Date(h).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"});return e.jsx("div",{className:"min-h-screen bg-base-200",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(ys,{className:"text-primary",size:28}),"Mes candidatures"]}),e.jsx("p",{className:"text-base-content/60 text-sm mt-1",children:"Suivez l'tat de vos candidatures aux projets"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"stat bg-base-100 rounded-lg p-3",children:[e.jsx("div",{className:"stat-title text-xs",children:"En attente"}),e.jsx("div",{className:"stat-value text-warning text-xl",children:j.enAttente})]}),e.jsxs("div",{className:"stat bg-base-100 rounded-lg p-3",children:[e.jsx("div",{className:"stat-title text-xs",children:"Acceptes"}),e.jsx("div",{className:"stat-value text-success text-xl",children:j.acceptees})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[e.jsxs("button",{className:`btn btn-sm ${l==="TOUTES"?"btn-primary":"btn-ghost"}`,onClick:()=>i("TOUTES"),children:["Toutes (",j.total,")"]}),Object.keys(_l).map(h=>{const u=s.filter(g=>g.statut===h).length;return u===0?null:e.jsxs("button",{className:`btn btn-sm gap-1 ${l===h?"btn-primary":"btn-ghost"}`,onClick:()=>i(h),children:[_l[h].icone,_l[h].label," (",u,")"]},h)})]}),n?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(_s,{})}):m.length===0?e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body items-center text-center py-12",children:[e.jsx(ys,{size:48,className:"text-base-content/30 mb-4"}),e.jsx("h3",{className:"font-semibold text-lg",children:l==="TOUTES"?"Aucune candidature":"Aucun rsultat"}),e.jsx("p",{className:"text-base-content/60 text-sm max-w-md",children:l==="TOUTES"?"Explorez les projets disponibles et proposez vos services.":"Aucune candidature avec ce statut."}),l==="TOUTES"&&e.jsxs("button",{onClick:()=>t("/projets"),className:"btn btn-primary btn-sm mt-4",children:[e.jsx(cn,{size:16}),"Explorer les projets"]})]})}):e.jsx("div",{className:"space-y-3",children:m.map(h=>{const u=_l[h.statut];return e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:`badge ${u.classe} gap-1`,children:[u.icone,u.label]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold",children:h.projetNom||`Projet #${h.projetId}`}),h.estSurTache&&h.tacheNom&&e.jsxs("span",{className:"badge badge-ghost badge-sm",children:["Tche: ",h.tacheNom]})]}),h.message&&e.jsx("p",{className:"text-sm text-base-content/70 mt-1 line-clamp-2",children:h.message}),e.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-base-content/60",children:[h.tarifPropose&&e.jsxs("span",{children:["Tarif: ",h.tarifPropose.toLocaleString()," FCFA"]}),h.delaiProposeJours&&e.jsxs("span",{children:["Dlai: ",h.delaiProposeJours," jours"]}),e.jsxs("span",{children:["Envoye le ",x(h.dateCreation)]})]}),h.reponseClient&&e.jsxs("div",{className:"mt-2 p-2 bg-base-200 rounded text-sm",children:[e.jsx("span",{className:"font-medium",children:"Rponse: "}),h.reponseClient]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>t(`/projets/${h.projetId}`),className:"btn btn-ghost btn-sm btn-circle",title:"Voir le projet",children:e.jsx(Pb,{size:16})}),h.statut==="EN_ATTENTE"&&e.jsx("button",{onClick:()=>o(h.id),className:"btn btn-ghost btn-sm btn-circle text-error",title:"Retirer la candidature",children:e.jsx(Je,{size:16})})]})]})})},h.id)})})]})})}const xy={A_FAIRE:{label:" faire",classe:"badge-ghost",icone:e.jsx(ut,{size:12})},EN_COURS:{label:"En cours",classe:"badge-warning",icone:e.jsx($c,{size:12})},EN_REVUE:{label:"En revue",classe:"badge-info",icone:e.jsx(qt,{size:12})},TERMINEE:{label:"Termine",classe:"badge-success",icone:e.jsx(ze,{size:12})},BLOQUEE:{label:"Bloque",classe:"badge-error",icone:e.jsx(Ge,{size:12})},ANNULEE:{label:"Annule",classe:"badge-neutral",icone:e.jsx(Je,{size:12})}},fy={BASSE:{label:"Basse",classe:"text-base-content/50"},NORMALE:{label:"Normale",classe:"text-base-content"},HAUTE:{label:"Haute",classe:"text-warning"},URGENTE:{label:"Urgente",classe:"text-error"}};function gy(){const t=jt(),[s,r]=d.useState([]),[n,a]=d.useState(!0),[l,i]=d.useState("toutes");d.useEffect(()=>{c()},[]);const c=async()=>{a(!0);try{const u=await ar.listerMesTaches();r(u)}catch(u){console.error("Erreur chargement tches:",u)}finally{a(!1)}},o=async(u,g)=>{try{const v=await ar.changerStatut(u,g);r(y=>y.map(f=>f.id===u?v:f))}catch(v){console.error("Erreur changement statut:",v)}},m=s.filter(u=>{switch(l){case"en-cours":return u.statut==="EN_COURS";case"a-faire":return u.statut==="A_FAIRE";case"terminees":return u.statut==="TERMINEE";default:return!0}}),j={total:s.length,enCours:s.filter(u=>u.statut==="EN_COURS").length,aFaire:s.filter(u=>u.statut==="A_FAIRE").length,terminees:s.filter(u=>u.statut==="TERMINEE").length},x=u=>u?new Date(u).toLocaleDateString("fr-FR",{day:"numeric",month:"short"}):"-",h=u=>new Intl.NumberFormat("fr-FR").format(u)+" FCFA";return e.jsx("div",{className:"min-h-screen bg-base-200",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(an,{className:"text-primary",size:28}),"Mes tches"]}),e.jsx("p",{className:"text-base-content/60 text-sm mt-1",children:"Grez vos tches assignes et suivez votre progression"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"stat bg-base-100 rounded-lg p-3",children:[e.jsx("div",{className:"stat-title text-xs",children:"En cours"}),e.jsx("div",{className:"stat-value text-warning text-xl",children:j.enCours})]}),e.jsxs("div",{className:"stat bg-base-100 rounded-lg p-3",children:[e.jsx("div",{className:"stat-title text-xs",children:" faire"}),e.jsx("div",{className:"stat-value text-info text-xl",children:j.aFaire})]}),e.jsxs("div",{className:"stat bg-base-100 rounded-lg p-3",children:[e.jsx("div",{className:"stat-title text-xs",children:"Termines"}),e.jsx("div",{className:"stat-value text-success text-xl",children:j.terminees})]})]})]}),e.jsxs("div",{className:"tabs tabs-boxed bg-base-100 p-1 mb-6 inline-flex",children:[e.jsxs("button",{className:`tab ${l==="toutes"?"tab-active":""}`,onClick:()=>i("toutes"),children:["Toutes (",j.total,")"]}),e.jsx("button",{className:`tab ${l==="en-cours"?"tab-active":""}`,onClick:()=>i("en-cours"),children:"En cours"}),e.jsx("button",{className:`tab ${l==="a-faire"?"tab-active":""}`,onClick:()=>i("a-faire"),children:" faire"}),e.jsx("button",{className:`tab ${l==="terminees"?"tab-active":""}`,onClick:()=>i("terminees"),children:"Termines"})]}),n?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(_s,{})}):m.length===0?e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body items-center text-center py-12",children:[e.jsx(an,{size:48,className:"text-base-content/30 mb-4"}),e.jsx("h3",{className:"font-semibold text-lg",children:l==="toutes"?"Aucune tche assigne":"Aucune tche dans cette catgorie"}),e.jsx("p",{className:"text-base-content/60 text-sm max-w-md",children:l==="toutes"?"Candidatez  des projets pour recevoir des tches.":"Changez de filtre pour voir d'autres tches."}),l==="toutes"&&e.jsxs("button",{onClick:()=>t("/projets"),className:"btn btn-primary btn-sm mt-4",children:[e.jsx(cn,{size:16}),"Explorer les projets"]})]})}):e.jsx("div",{className:"space-y-3",children:m.map(u=>{const g=xy[u.statut],v=fy[u.priorite];return e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:`badge ${g.classe} gap-1`,children:[g.icone,e.jsx("span",{className:"hidden sm:inline",children:g.label})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold truncate",children:u.nom}),u.priorite!=="NORMALE"&&e.jsx("span",{className:`text-xs ${v.classe}`,children:v.label})]}),e.jsxs("p",{className:"text-xs text-base-content/60",children:[u.projetNom||`Projet #${u.projetId}`,u.etapeNom&&` > ${u.etapeNom}`]}),u.description&&e.jsx("p",{className:"text-sm text-base-content/70 mt-1 line-clamp-2",children:u.description}),u.nombreLivrables>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Yi,{size:14,className:"text-base-content/60"}),e.jsxs("span",{className:"text-xs text-base-content/60",children:[u.nombreLivrablesValides,"/",u.nombreLivrables," livrables valids"]}),e.jsx("progress",{className:"progress progress-success h-1.5 w-20",value:u.nombreLivrablesValides,max:u.nombreLivrables})]}),e.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-base-content/60 flex-wrap",children:[u.budget>0&&e.jsx("span",{children:h(u.budget)}),u.delaiJours&&e.jsxs("span",{children:[u.delaiJours," jours"]}),(u.dateDebutPrevue||u.dateFinPrevue)&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ss,{size:12}),x(u.dateDebutPrevue),"  ",x(u.dateFinPrevue)]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[u.statut==="A_FAIRE"&&e.jsxs("button",{onClick:()=>o(u.id,"EN_COURS"),className:"btn btn-primary btn-xs gap-1",title:"Dmarrer",children:[e.jsx($c,{size:12}),e.jsx("span",{className:"hidden sm:inline",children:"Dmarrer"})]}),u.statut==="EN_COURS"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>o(u.id,"EN_REVUE"),className:"btn btn-info btn-xs gap-1",title:"Soumettre",children:[e.jsx(qt,{size:12}),e.jsx("span",{className:"hidden sm:inline",children:"Soumettre"})]}),e.jsx("button",{onClick:()=>o(u.id,"BLOQUEE"),className:"btn btn-ghost btn-xs gap-1 text-error",title:"Bloquer",children:e.jsx(qb,{size:12})})]}),u.statut==="BLOQUEE"&&e.jsxs("button",{onClick:()=>o(u.id,"EN_COURS"),className:"btn btn-warning btn-xs gap-1",title:"Reprendre",children:[e.jsx($c,{size:12}),e.jsx("span",{className:"hidden sm:inline",children:"Reprendre"})]}),e.jsxs("button",{onClick:()=>t(`/projets/${u.projetId}/taches/${u.id}`),className:"btn btn-ghost btn-xs gap-1",title:"Voir les dtails",children:[e.jsx(qt,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Dtails"})]})]})]})})},u.id)})})]})})}function vy(){return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Plus"}),e.jsx("p",{className:"text-gray-600",children:"Menu supplmentaire -  implmenter"})]})})}function by(){const t=jt();return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-6xl font-bold text-primary mb-4",children:"404"}),e.jsx("p",{className:"text-2xl text-gray-600 mb-8",children:"Page non trouve"}),e.jsx(ol,{onClick:()=>t("/"),children:"Retour  l'accueil"})]})})}function fs({children:t}){const{isAuthenticated:s,isLoading:r,openAuthModal:n}=Es(),a=$s(),l=a.search.includes("auth=success");return d.useEffect(()=>{if(!r&&!s&&!l){const i=a.pathname+a.search;console.log(" [REQUIRE AUTH] Accs refus, ouverture du modal d'authentification"),console.log(" [REQUIRE AUTH] Page demande:",i),n(i)}},[s,r,n,a,l]),r||l&&!s?(console.log(" [REQUIRE AUTH] Chargement...",{isLoading:r,isOAuthCallback:l,isAuthenticated:s}),e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"loading loading-spinner loading-lg"})})):s?e.jsx(e.Fragment,{children:t}):e.jsx(Mx,{to:"/",replace:!0,state:{from:a,authRequired:!0}})}function wa({children:t,roles:s}){const{isAuthenticated:r,isLoading:n,openAuthModal:a}=Es(),{roles:l,loading:i}=Wd(),c=$s(),o=c.search.includes("auth=success");if(n||i||o&&!r)return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"loading loading-spinner loading-lg"})});if(!r){const x=c.pathname+c.search;return a(x),e.jsx(Mx,{to:"/",replace:!0,state:{from:c,authRequired:!0}})}return l.some(x=>s.some(h=>x.toLowerCase()===h.toLowerCase()))?e.jsx(e.Fragment,{children:t}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-8",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Accs Refus"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Cette page est rserve aux utilisateurs avec les rles : ",s.join(", ")]}),e.jsx("button",{onClick:()=>window.location.href="/",className:"btn btn-primary",children:"Retour  l'accueil"})]})})})}const xr="/api/referentiels";class jy{async getDomainesCompetence(){const s=await fetch(`${xr}/domaines-competence`);if(!s.ok)throw new Error("Erreur lors du chargement des domaines de comptence");return s.json()}async getDomainesMetier(){const s=await fetch(`${xr}/domaines-metier`);if(!s.ok)throw new Error("Erreur lors du chargement des domaines mtier");return s.json()}async getSousDomainesMetier(s){const r=s?`${xr}/sous-domaines-metier?domaineMetierId=${s}`:`${xr}/sous-domaines-metier`,n=await fetch(r);if(!n.ok)throw new Error("Erreur lors du chargement des sous-domaines mtier");return n.json()}async getCriteresEvaluation(s){const r=s?`${xr}/criteres-evaluation?domaineId=${s}`:`${xr}/criteres-evaluation`,n=await fetch(r);if(!n.ok)throw new Error("Erreur lors du chargement des critres d'valuation");return n.json()}async getMethodesEvaluation(s){const r=s?`${xr}/methodes-evaluation?domaineId=${s}`:`${xr}/methodes-evaluation`,n=await fetch(r);if(!n.ok)throw new Error("Erreur lors du chargement des mthodes d'valuation");return n.json()}}const Cr=new jy,yy=()=>{const{hasRole:t}=rj(),[s,r]=d.useState([]),[n,a]=d.useState(!0),[l,i]=d.useState(""),[c,o]=d.useState(""),[m,j]=d.useState(""),[x,h]=d.useState([]),[,u]=d.useState({}),[g,v]=d.useState("liste"),[y,f]=d.useState(!1),[p,b]=d.useState(null),[E,P]=d.useState(null),[k,w]=d.useState(!1),[R,I]=d.useState(!1),[T,L]=d.useState(null),[J,Q]=d.useState([]),[W,ce]=d.useState([]),[se,be]=d.useState([]),[A,z]=d.useState(!1);d.useEffect(()=>{$(),S()},[]);const S=async()=>{try{const[O,re]=await Promise.all([Cr.getDomainesCompetence(),Cr.getDomainesMetier()]);Q(O),ce(re)}catch(O){console.error("Erreur lors du chargement des rfrentiels:",O)}},$=async()=>{try{a(!0);const[O,re,ne]=await Promise.all([fetch(`/api/competences-reference?includeInactive=${k}`).then(we=>we.json()),fetch("/api/competences-reference/domaines").then(we=>we.json()),fetch("/api/competences-reference/statistiques").then(we=>we.json())]);r(Array.isArray(O)?O:[]),h(Array.isArray(re)?re:[]),u(typeof ne=="object"&&ne!==null?ne:{})}catch(O){console.error("Erreur lors du chargement:",O),P({type:"error",text:"Erreur lors du chargement des donnes"}),r([]),h([]),u({})}finally{a(!1)}},D=async()=>{try{if(a(!0),l){const re=await(await fetch(`/api/competences-reference/recherche?terme=${encodeURIComponent(l)}`)).json();r(Array.isArray(re)?re:[])}else if(c||m){const O=new URLSearchParams;c&&O.append("domaine",c),m&&O.append("typeCompetence",m);const ne=await(await fetch(`/api/competences-reference/recherche-avancee?${O}`)).json();r(Array.isArray(ne)?ne:[])}else $()}catch(O){console.error("Erreur lors de la recherche:",O),r([])}finally{a(!1)}};d.useEffect(()=>{const O=setTimeout(()=>{D()},300);return()=>clearTimeout(O)},[l,c,m]);const q=async()=>{try{a(!0);const re=await(await fetch("/api/competences-reference/arborescence")).json();r(Array.isArray(re)?re:[])}catch(O){console.error("Erreur lors du chargement de l'arborescence:",O),r([])}finally{a(!1)}};d.useEffect(()=>{g==="arbre"?q():$()},[g,k]);const ie=()=>{b({id:0,code:"",libelle:"",description:"",typeCompetence:"SAVOIR_FAIRE",domaine:"",sousDomaine:"",verbeAction:"",objet:"",contexte:"",ressourcesMobilisees:"",criteresPerformance:"",referentiel:"Interne",organisme:"PITM",statut:"VALIDE",indicePopularite:0,estActive:!0}),f(!0)},me=async O=>{let re=O.domaineCompetenceId,ne=O.domaineMetierId,we=O.sousDomaineMetierId;if(!re&&O.typeCompetence){const U=J.find(H=>H.code===O.typeCompetence);U&&(re=U.id)}if(!ne&&O.domaine){const U=W.find(H=>H.libelle===O.domaine);if(U){ne=U.id;try{const H=await Cr.getSousDomainesMetier(U.id);if(be(H),!we&&O.sousDomaine){const ae=H.find(ke=>ke.libelle===O.sousDomaine);ae&&(we=ae.id)}}catch(H){console.error("Erreur lors du chargement des sous-domaines:",H)}}}b({...O,domaineCompetenceId:re,domaineMetierId:ne,sousDomaineMetierId:we}),f(!0)},Pe=async()=>{if(p)try{const re=JSON.parse(localStorage.getItem("user")||"{}").id||"1";let ne;if(!p.id||p.id===0){const{id:we,...U}=p;ne=await fetch("/api/competences-reference",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":re},body:JSON.stringify(U)})}else ne=await fetch(`/api/competences-reference/${p.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":re},body:JSON.stringify(p)});if(!ne.ok){const we=await ne.text();throw new Error(`Erreur ${ne.status}: ${we}`)}P({type:"success",text:p.id===0?"Comptence cre avec succs":"Comptence mise  jour avec succs"}),f(!1),b(null),$()}catch(O){console.error("Erreur lors de la sauvegarde:",O),P({type:"error",text:"Erreur lors de la sauvegarde"})}},Ne=(O,re)=>{L({id:O,libelle:re}),I(!0)},Le=async()=>{if(T)try{const re=JSON.parse(localStorage.getItem("user")||"{}").id||"1",ne=await fetch(`/api/competences-reference/${T.id}`,{method:"DELETE",headers:{"X-User-Id":re}});if(!ne.ok){const we=await ne.text();throw new Error(`Erreur ${ne.status}: ${we}`)}P({type:"success",text:"Comptence supprime avec succs"}),I(!1),L(null),$()}catch(O){console.error("Erreur lors de la suppression:",O),P({type:"error",text:"Erreur lors de la suppression"}),I(!1),L(null)}},Y=()=>{I(!1),L(null)},ve=(O,re=0)=>O.map(ne=>e.jsxs("div",{style:{marginLeft:`${re*24}px`},className:"my-2",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-base-200 rounded-lg hover:bg-base-300 transition-colors",children:[e.jsx(Pi,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:ne.libelle}),e.jsx("span",{className:"badge badge-sm",children:ne.domaine}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",ne.code,")"]}),t&&e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:()=>me(ne),className:"btn btn-ghost btn-xs",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ne(ne.id,ne.libelle),className:"btn btn-ghost btn-xs text-error",children:e.jsx(Je,{className:"w-4 h-4"})})]})]}),ne.sousCompetences&&ne.sousCompetences.length>0&&ve(ne.sousCompetences,re+1)]},ne.id));return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[t&&e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs("button",{onClick:ie,className:"btn btn-primary gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),"Nouvelle Comptence"]})}),E&&e.jsxs("div",{className:`alert ${E.type==="success"?"alert-success":"alert-error"} mb-4`,children:[e.jsx("span",{children:E.text}),e.jsx("button",{onClick:()=>P(null),className:"btn btn-ghost btn-sm",children:e.jsx(st,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Total Comptences"}),e.jsx("div",{className:"stat-value text-primary",children:s.length})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Domaines"}),e.jsx("div",{className:"stat-value text-secondary",children:x.length})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Plus Populaire"}),e.jsx("div",{className:"stat-value text-accent",children:s.length>0?Math.max(...s.map(O=>O.indicePopularite||0)):0})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Affichage"}),e.jsx("div",{className:`stat-value ${k?"text-warning":"text-success"}`,children:k?"Toutes":"Actives"}),e.jsx("div",{className:"stat-desc",children:k?"Actives + Inactives":"Uniquement actives"})]})})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl mb-6",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"form-control",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(us,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Rechercher une comptence...",className:"input input-bordered w-full pl-10",value:l,onChange:O=>i(O.target.value)})]})})}),e.jsx("div",{className:"form-control w-full md:w-48",children:e.jsxs("select",{className:"select select-bordered",value:c,onChange:O=>o(O.target.value),children:[e.jsx("option",{value:"",children:"Tous les domaines"}),W.map(O=>e.jsx("option",{value:O.libelle,children:O.libelle},O.id))]})}),e.jsx("div",{className:"form-control w-full md:w-48",children:e.jsxs("select",{className:"select select-bordered",value:m,onChange:O=>j(O.target.value),children:[e.jsx("option",{value:"",children:"Tous les types"}),J.map(O=>e.jsx("option",{value:O.code,children:O.libelle},O.id))]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer gap-2",children:[e.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:k,onChange:O=>w(O.target.checked)}),e.jsx("span",{className:"label-text",children:"Afficher inactives"})]})}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:`btn ${g==="liste"?"btn-active":""}`,onClick:()=>v("liste"),children:e.jsx($x,{className:"w-5 h-5"})}),e.jsx("button",{className:`btn ${g==="cartes"?"btn-active":""}`,onClick:()=>v("cartes"),children:e.jsx(Xi,{className:"w-5 h-5"})}),e.jsx("button",{className:`btn ${g==="arbre"?"btn-active":""}`,onClick:()=>v("arbre"),children:e.jsx(Pi,{className:"w-5 h-5"})})]})]})})}),n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[g==="liste"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Libell"}),e.jsx("th",{children:"Domaine"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Popularit"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:s.map(O=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono text-sm",children:O.code}),e.jsxs("td",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium",children:O.libelle}),!O.estActive&&e.jsx("span",{className:"badge badge-error badge-sm",children:"Inactive"})]}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-md",children:O.description})]}),e.jsxs("td",{children:[e.jsx("div",{className:"badge badge-primary",children:O.domaine}),O.sousDomaine&&e.jsx("div",{className:"badge badge-ghost badge-sm mt-1",children:O.sousDomaine})]}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-secondary",children:O.typeCompetence})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ur,{className:"w-4 h-4 text-success"}),e.jsx("span",{children:O.indicePopularite||0})]})}),e.jsx("td",{children:t&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>me(O),className:"btn btn-ghost btn-sm",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ne(O.id,O.libelle),className:"btn btn-ghost btn-sm text-error",children:e.jsx(Je,{className:"w-4 h-4"})})]})})]},O.id))})]})}),g==="cartes"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(O=>e.jsx("div",{className:"card bg-base-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"card-title text-lg",children:O.libelle}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:O.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("span",{className:"badge badge-primary badge-sm",children:O.domaine}),e.jsx("span",{className:"badge badge-secondary badge-sm",children:O.typeCompetence}),e.jsxs("span",{className:"badge badge-ghost badge-sm",children:[e.jsx(Ur,{className:"w-3 h-3 mr-1"}),O.indicePopularite||0]}),!O.estActive&&e.jsx("span",{className:"badge badge-error badge-sm",children:"Inactive"})]}),t&&e.jsxs("div",{className:"card-actions justify-end mt-4",children:[e.jsx("button",{onClick:()=>me(O),className:"btn btn-ghost btn-sm",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ne(O.id,O.libelle),className:"btn btn-ghost btn-sm text-error",children:e.jsx(Je,{className:"w-4 h-4"})})]})]})},O.id))}),g==="arbre"&&e.jsx("div",{className:"space-y-2",children:ve(s)}),s.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ic,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Aucune comptence trouve"})]})]})})]}),y&&p&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box max-w-4xl",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:p.id===0?"Nouvelle Comptence":"Modifier la Comptence"}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Code"})}),e.jsx("input",{type:"text",className:"input input-bordered",value:p.code,onChange:O=>b({...p,code:O.target.value}),placeholder:"Auto-gnr si vide"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Libell *"})}),e.jsx("input",{type:"text",className:"input input-bordered",value:p.libelle,onChange:O=>b({...p,libelle:O.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Description"})}),e.jsx("textarea",{className:"textarea textarea-bordered h-24",value:p.description,onChange:O=>b({...p,description:O.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Domaine mtier (thmatique)"})}),e.jsxs("select",{className:"select select-bordered",value:p.domaineMetierId||"",onChange:async O=>{const re=O.target.value?parseInt(O.target.value):void 0,ne=W.find(we=>we.id===re);if(b({...p,domaineMetierId:re,domaine:(ne==null?void 0:ne.libelle)||"",sousDomaineMetierId:void 0,sousDomaine:""}),re){z(!0);try{const we=await Cr.getSousDomainesMetier(re);be(we)}catch(we){console.error("Erreur chargement sous-domaines:",we)}finally{z(!1)}}else be([])},children:[e.jsx("option",{value:"",children:"-- Slectionner --"}),W.map(O=>e.jsx("option",{value:O.id,children:O.libelle},O.id))]}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt",children:"Technique, Management, Relationnel, etc."})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Sous-domaine mtier"})}),e.jsxs("select",{className:"select select-bordered",value:p.sousDomaineMetierId||"",onChange:O=>{const re=O.target.value?parseInt(O.target.value):void 0,ne=se.find(we=>we.id===re);b({...p,sousDomaineMetierId:re,sousDomaine:(ne==null?void 0:ne.libelle)||""})},disabled:!p.domaineMetierId||A,children:[e.jsx("option",{value:"",children:"-- Slectionner --"}),se.map(O=>e.jsx("option",{value:O.id,children:O.libelle},O.id))]}),A&&e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text-alt text-info",children:[e.jsx("span",{className:"loading loading-spinner loading-xs mr-1"}),"Chargement..."]})}),!p.domaineMetierId&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt",children:"Slectionnez d'abord un domaine mtier"})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Domaine de comptence (pdagogique)"})}),e.jsxs("select",{className:"select select-bordered",value:p.domaineCompetenceId||"",onChange:O=>{const re=O.target.value?parseInt(O.target.value):void 0,ne=J.find(we=>we.id===re);b({...p,domaineCompetenceId:re,typeCompetence:(ne==null?void 0:ne.code)||""})},children:[e.jsx("option",{value:"",children:"-- Slectionner --"}),J.map(O=>e.jsx("option",{value:O.id,children:O.libelle},O.id))]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Verbe d'action"})}),e.jsx("input",{type:"text",className:"input input-bordered",value:p.verbeAction,onChange:O=>b({...p,verbeAction:O.target.value}),placeholder:"Ex: Concevoir, Analyser..."})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Objet"})}),e.jsx("input",{type:"text",className:"input input-bordered",value:p.objet,onChange:O=>b({...p,objet:O.target.value}),placeholder:"Ex: une architecture..."})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Contexte"})}),e.jsx("input",{type:"text",className:"input input-bordered",value:p.contexte,onChange:O=>b({...p,contexte:O.target.value}),placeholder:"Ex: en environnement agile"})]})]})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:()=>f(!1),className:"btn btn-ghost",children:"Annuler"}),e.jsxs("button",{onClick:Pe,className:"btn btn-primary gap-2",children:[e.jsx(Js,{className:"w-4 h-4"}),"Enregistrer"]})]})]})}),R&&T&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Confirmer la suppression"}),e.jsxs("div",{className:"alert alert-warning mb-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{children:"Cette action est irrversible !"})]}),e.jsxs("p",{className:"py-4",children:["tes-vous sr de vouloir supprimer la comptence ",e.jsxs("strong",{className:"text-error",children:['"',T.libelle,'"']})," ?"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"La comptence sera dsactive et ne sera plus visible dans le rfrentiel."}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:Y,className:"btn btn-ghost",children:"Annuler"}),e.jsxs("button",{onClick:Le,className:"btn btn-error gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Supprimer"]})]})]})})]})},Ny=()=>e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ir,{className:"w-8 h-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des Pays"})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"text-gray-600",children:"Cette page permettra de grer la liste des pays disponibles dans le systme."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Fonctionnalits  venir : Ajouter, modifier, supprimer des pays de rfrence."})]})})]})}),wy=()=>e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Si,{className:"w-8 h-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des Villes"})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"text-gray-600",children:"Cette page permettra de grer la liste des villes disponibles dans le systme."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Fonctionnalits  venir : Ajouter, modifier, supprimer des villes de rfrence associes aux pays."})]})})]})}),Ey=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[a,l]=d.useState(""),[i,c]=d.useState(!1),[o,m]=d.useState(null),[j,x]=d.useState(null),[h,u]=d.useState(!1),[g,v]=d.useState(null),[y,f]=d.useState({total:0,actives:0,maxPopularite:0});d.useEffect(()=>{p()},[]);const p=async()=>{try{n(!0);const[I,T]=await Promise.all([fetch("/api/certifications").then(L=>L.json()),fetch("/api/certifications/statistiques").then(L=>L.json())]);s(Array.isArray(I)?I:[]),f(typeof T=="object"&&T!==null?T:{total:0,actives:0,maxPopularite:0})}catch(I){console.error("Erreur lors du chargement:",I),x({type:"error",text:"Erreur lors du chargement des donnes"}),s([]),f({total:0,actives:0,maxPopularite:0})}finally{n(!1)}},b=async()=>{try{if(n(!0),a){const T=await(await fetch(`/api/certifications/recherche?terme=${encodeURIComponent(a)}`)).json();s(Array.isArray(T)?T:[])}else p()}catch(I){console.error("Erreur lors de la recherche:",I),x({type:"error",text:"Erreur lors de la recherche"})}finally{n(!1)}},E=()=>{m({id:0,intitule:"",description:"",organismeDelivrant:"",urlVerification:"",estActive:!0,indicePopularite:0}),c(!0)},P=I=>{m({...I}),c(!0)},k=async()=>{if(!o||!o.intitule.trim()){x({type:"error",text:"L'intitul est obligatoire"});return}try{const T=JSON.parse(localStorage.getItem("user")||"{}").id||"1";let L;if(!o.id||o.id===0){const{id:J,...Q}=o;L=await fetch("/api/certifications",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":T},body:JSON.stringify(Q)})}else L=await fetch(`/api/certifications/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":T},body:JSON.stringify(o)});L.ok?(x({type:"success",text:o.id?"Certification mise  jour avec succs":"Certification cre avec succs"}),c(!1),m(null),p()):x({type:"error",text:"Erreur lors de la sauvegarde"})}catch(I){console.error("Erreur:",I),x({type:"error",text:"Erreur lors de la sauvegarde"})}},w=I=>{v({id:I.id,intitule:I.intitule}),u(!0)},R=async()=>{if(g)try{const T=JSON.parse(localStorage.getItem("user")||"{}").id||"1";(await fetch(`/api/certifications/${g.id}`,{method:"DELETE",headers:{"X-User-Id":T}})).ok?(x({type:"success",text:"Certification supprime avec succs"}),u(!1),v(null),p()):x({type:"error",text:"Erreur lors de la suppression"})}catch(I){console.error("Erreur:",I),x({type:"error",text:"Erreur lors de la suppression"})}};return e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[j&&e.jsxs("div",{className:`alert ${j.type==="success"?"alert-success":"alert-error"} mb-6`,children:[e.jsx("span",{children:j.text}),e.jsx("button",{onClick:()=>x(null),className:"btn btn-sm btn-ghost",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Total"}),e.jsx("div",{className:"stat-value text-primary",children:y.total})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Actives"}),e.jsx("div",{className:"stat-value text-success",children:y.actives})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Plus Populaire"}),e.jsx("div",{className:"stat-value text-accent",children:y.maxPopularite})]})})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl mb-6",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"form-control",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher une certification...",className:"input input-bordered w-full pr-10",value:a,onChange:I=>l(I.target.value),onKeyPress:I=>I.key==="Enter"&&b()}),e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 btn btn-ghost btn-sm",onClick:b,children:e.jsx(us,{className:"w-5 h-5"})})]})})}),e.jsxs("button",{className:"btn btn-primary gap-2",onClick:E,children:[e.jsx(Ye,{className:"w-5 h-5"}),"Nouvelle Certification"]})]})})}),r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Intitul"}),e.jsx("th",{children:"Organisme"}),e.jsx("th",{children:"Popularit"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-gray-500 py-8",children:"Aucune certification trouve"})}):t.map(I=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"font-semibold",children:I.intitule}),I.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-md",children:I.description})]}),e.jsx("td",{children:I.organismeDelivrant||"-"}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ur,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"font-semibold",children:I.indicePopularite})]})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>P(I),children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{className:"btn btn-sm btn-ghost text-error",onClick:()=>w(I),children:e.jsx(Je,{className:"w-4 h-4"})})]})})]},I.id))})]})})})}),i&&o&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box max-w-2xl",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:o.id?"Modifier la certification":"Nouvelle certification"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Intitul *"})}),e.jsx("input",{type:"text",placeholder:"Ex: AWS Certified Solutions Architect",className:"input input-bordered w-full",value:o.intitule,onChange:I=>m({...o,intitule:I.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Description"})}),e.jsx("textarea",{placeholder:"Description de la certification...",className:"textarea textarea-bordered w-full h-24",value:o.description,onChange:I=>m({...o,description:I.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Organisme dlivrant"})}),e.jsx("input",{type:"text",placeholder:"Ex: Amazon Web Services",className:"input input-bordered w-full",value:o.organismeDelivrant,onChange:I=>m({...o,organismeDelivrant:I.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"URL de vrification"})}),e.jsx("input",{type:"url",placeholder:"https://...",className:"input input-bordered w-full",value:o.urlVerification,onChange:I=>m({...o,urlVerification:I.target.value})})]})]}),e.jsxs("div",{className:"modal-action",children:[e.jsxs("button",{className:"btn btn-ghost",onClick:()=>{c(!1),m(null)},children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Annuler"]}),e.jsxs("button",{className:"btn btn-primary",onClick:k,children:[e.jsx(Js,{className:"w-4 h-4 mr-2"}),o.id?"Mettre  jour":"Crer"]})]})]})}),h&&g&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Confirmer la suppression"}),e.jsxs("p",{className:"py-4",children:["tes-vous sr de vouloir supprimer la certification ",e.jsx("strong",{children:g.intitule})," ?"]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>{u(!1),v(null)},children:"Annuler"}),e.jsx("button",{className:"btn btn-error",onClick:R,children:"Supprimer"})]})]})})]})})},Cy=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[a,l]=d.useState(!0),[i,c]=d.useState(""),[o,m]=d.useState(new Set),[j,x]=d.useState(!1),[h,u]=d.useState(null),[g,v]=d.useState(null),[y,f]=d.useState(null),[p,b]=d.useState(!1),[E,P]=d.useState(null),[k,w]=d.useState(null),[R,I]=d.useState({totalPays:0,totalVilles:0,maxPopularite:0});d.useEffect(()=>{T()},[]);const T=async()=>{try{l(!0);const[D,q,ie]=await Promise.all([fetch("/api/localisations/pays").then(me=>me.json()),fetch("/api/localisations/villes").then(me=>me.json()),fetch("/api/localisations/statistiques").then(me=>me.json())]);s(Array.isArray(D)?D:[]),n(Array.isArray(q)?q:[]),I(ie||{totalPays:0,totalVilles:0,maxPopularite:0})}catch(D){console.error("Erreur lors du chargement:",D),w({type:"error",text:"Erreur lors du chargement des donnes"})}finally{l(!1)}},L=async()=>{if(!i){T();return}try{l(!0);const q=await(await fetch(`/api/localisations/pays/recherche?terme=${encodeURIComponent(i)}`)).json();s(Array.isArray(q)?q:[])}catch(D){console.error("Erreur lors de la recherche:",D),w({type:"error",text:"Erreur lors de la recherche"})}finally{l(!1)}},J=D=>{const q=new Set(o);q.has(D)?q.delete(D):q.add(D),m(q)},Q=()=>{u("pays"),v({id:0,nom:"",codeIso:"",estActif:!0,indicePopularite:0,nombreVilles:0}),x(!0)},W=D=>{u("pays"),v({...D}),x(!0)},ce=async()=>{if(!g||!g.nom.trim()){w({type:"error",text:"Le nom du pays est obligatoire"});return}try{const q=JSON.parse(localStorage.getItem("user")||"{}").id||"1";let ie;!g.id||g.id===0?ie=await fetch("/api/localisations/pays",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":q},body:JSON.stringify(g)}):ie=await fetch(`/api/localisations/pays/${g.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":q},body:JSON.stringify(g)}),ie.ok?(w({type:"success",text:g.id?"Pays mis  jour":"Pays cr"}),x(!1),v(null),u(null),T()):w({type:"error",text:"Erreur lors de la sauvegarde"})}catch(D){console.error("Erreur:",D),w({type:"error",text:"Erreur lors de la sauvegarde"})}},se=D=>{const q=t.find(ie=>ie.id===D);u("ville"),f({id:0,nom:"",paysId:D,paysNom:(q==null?void 0:q.nom)||"",codePostal:"",estActif:!0,indicePopularite:0}),x(!0)},be=D=>{u("ville"),f({...D}),x(!0)},A=async()=>{if(!y||!y.nom.trim()){w({type:"error",text:"Le nom de la ville est obligatoire"});return}try{const q=JSON.parse(localStorage.getItem("user")||"{}").id||"1";let ie;!y.id||y.id===0?ie=await fetch("/api/localisations/villes",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":q},body:JSON.stringify(y)}):ie=await fetch(`/api/localisations/villes/${y.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":q},body:JSON.stringify(y)}),ie.ok?(w({type:"success",text:y.id?"Ville mise  jour":"Ville cre"}),x(!1),f(null),u(null),T()):w({type:"error",text:"Erreur lors de la sauvegarde"})}catch(D){console.error("Erreur:",D),w({type:"error",text:"Erreur lors de la sauvegarde"})}},z=(D,q,ie)=>{P({type:D,id:q,nom:ie}),b(!0)},S=async()=>{if(E)try{const q=JSON.parse(localStorage.getItem("user")||"{}").id||"1",ie=E.type==="pays"?`/api/localisations/pays/${E.id}`:`/api/localisations/villes/${E.id}`;(await fetch(ie,{method:"DELETE",headers:{"X-User-Id":q}})).ok?(w({type:"success",text:`${E.type==="pays"?"Pays":"Ville"} supprim(e)`}),b(!1),P(null),T()):w({type:"error",text:"Erreur lors de la suppression"})}catch(D){console.error("Erreur:",D),w({type:"error",text:"Erreur lors de la suppression"})}},$=D=>r.filter(q=>q.paysId===D);return e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[k&&e.jsxs("div",{className:`alert ${k.type==="success"?"alert-success":"alert-error"} mb-6`,children:[e.jsx("span",{children:k.text}),e.jsx("button",{onClick:()=>w(null),className:"btn btn-sm btn-ghost",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Pays"}),e.jsx("div",{className:"stat-value text-primary",children:R.totalPays})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Villes"}),e.jsx("div",{className:"stat-value text-success",children:R.totalVilles})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Plus Populaire"}),e.jsx("div",{className:"stat-value text-accent",children:R.maxPopularite})]})})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl mb-6",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"form-control",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un pays...",className:"input input-bordered w-full pr-10",value:i,onChange:D=>c(D.target.value),onKeyPress:D=>D.key==="Enter"&&L()}),e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 btn btn-ghost btn-sm",onClick:L,children:e.jsx(us,{className:"w-5 h-5"})})]})})}),e.jsxs("button",{className:"btn btn-primary gap-2",onClick:Q,children:[e.jsx(Ye,{className:"w-5 h-5"}),"Nouveau Pays"]})]})})}),a?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsx("div",{className:"card-body text-center text-gray-500 py-8",children:"Aucun pays trouv"})}):t.map(D=>e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body p-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-base-200 cursor-pointer",onClick:()=>J(D.id),children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx(ia,{className:`w-5 h-5 transition-transform ${o.has(D.id)?"rotate-180":""}`}),e.jsx(Hd,{className:"w-6 h-6 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-lg",children:D.nom}),e.jsxs("div",{className:"text-sm text-gray-500",children:[D.codeIso,"  ",D.nombreVilles," ville",D.nombreVilles>1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"badge badge-accent",children:D.indicePopularite||0}),e.jsxs("div",{className:"flex gap-2",onClick:q=>q.stopPropagation(),children:[e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>se(D.id),title:"Ajouter une ville",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>W(D),children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{className:"btn btn-sm btn-ghost text-error",onClick:()=>z("pays",D.id,D.nom),children:e.jsx(Je,{className:"w-4 h-4"})})]})]})]}),o.has(D.id)&&e.jsx("div",{className:"border-t border-base-300",children:$(D.id).length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucune ville pour ce pays"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Ville"}),e.jsx("th",{children:"Code Postal"}),e.jsx("th",{children:"Popularit"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:$(D.id).map(q=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ir,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"font-semibold",children:q.nom})]})}),e.jsx("td",{children:q.codePostal||"-"}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-accent",children:q.indicePopularite||0})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>be(q),children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{className:"btn btn-sm btn-ghost text-error",onClick:()=>z("ville",q.id,q.nom),children:e.jsx(Je,{className:"w-4 h-4"})})]})})]},q.id))})]})})})]})},D.id))}),j&&(g||y)&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box max-w-2xl",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:h==="pays"?g!=null&&g.id?"Modifier le pays":"Nouveau pays":y!=null&&y.id?"Modifier la ville":"Nouvelle ville"}),h==="pays"&&g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Nom du pays *"})}),e.jsx("input",{type:"text",placeholder:"Ex: France",className:"input input-bordered w-full",value:g.nom,onChange:D=>v({...g,nom:D.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Code ISO"})}),e.jsx("input",{type:"text",placeholder:"Ex: FR",maxLength:3,className:"input input-bordered w-full",value:g.codeIso,onChange:D=>v({...g,codeIso:D.target.value.toUpperCase()})})]})]}),h==="ville"&&y&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Pays"})}),e.jsx("select",{className:"select select-bordered w-full",value:y.paysId,onChange:D=>{const q=parseInt(D.target.value),ie=t.find(me=>me.id===q);f({...y,paysId:q,paysNom:(ie==null?void 0:ie.nom)||""})},children:t.map(D=>e.jsx("option",{value:D.id,children:D.nom},D.id))})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Nom de la ville *"})}),e.jsx("input",{type:"text",placeholder:"Ex: Paris",className:"input input-bordered w-full",value:y.nom,onChange:D=>f({...y,nom:D.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Code postal"})}),e.jsx("input",{type:"text",placeholder:"Ex: 75000",className:"input input-bordered w-full",value:y.codePostal||"",onChange:D=>f({...y,codePostal:D.target.value})})]})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>{x(!1),v(null),f(null),u(null)},children:"Annuler"}),e.jsx("button",{className:"btn btn-primary",onClick:h==="pays"?ce:A,children:(h==="pays"?g!=null&&g.id:y!=null&&y.id)?"Mettre  jour":"Crer"})]})]})}),p&&E&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Confirmer la suppression"}),e.jsxs("p",{className:"py-4",children:["tes-vous sr de vouloir supprimer ",E.type==="pays"?"le pays":"la ville"," ",e.jsx("strong",{children:E.nom})," ?",E.type==="pays"&&e.jsx("span",{className:"block mt-2 text-warning",children:" Toutes les villes de ce pays seront galement supprimes."})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>{b(!1),P(null)},children:"Annuler"}),e.jsx("button",{className:"btn btn-error",onClick:S,children:"Supprimer"})]})]})})]})})},Sy=t=>{if(!t)return"?";const s=t.trim().split(/\s+/);return s.length>=2?(s[0][0]+s[1][0]).toUpperCase():t.substring(0,2).toUpperCase()},ky=t=>{const s=["bg-primary","bg-secondary","bg-accent","bg-info","bg-success","bg-warning"];let r=0;for(let n=0;n<t.length;n++)r=t.charCodeAt(n)+((r<<5)-r);return s[Math.abs(r)%s.length]},Lo=({utilisateurId:t,titre:s,taille:r="md"})=>{const[n,a]=d.useState(!1),l={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"},i=`/api/profil/public/${t}/photo`;return n?e.jsx("div",{className:`${ky(s)} text-white rounded-full ${l[r]} flex items-center justify-center font-semibold flex-shrink-0`,children:e.jsx("span",{children:Sy(s)})}):e.jsx("div",{className:`${l[r]} rounded-full overflow-hidden ring-2 ring-base-200 flex-shrink-0`,children:e.jsx("img",{src:i,alt:s,className:"w-full h-full object-cover",onError:()=>a(!0)})})},Qm=({niveau:t})=>{if(!t)return null;const s={PLATINE:"bg-gradient-to-r from-purple-500 to-indigo-500 text-white",OR:"bg-gradient-to-r from-yellow-400 to-amber-500 text-white",ARGENT:"bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800",BRONZE:"bg-gradient-to-r from-orange-400 to-orange-600 text-white"};return e.jsxs("span",{className:`badge badge-sm ${s[t]||"badge-ghost"}`,children:[e.jsx(Et,{className:"w-3 h-3 mr-1"}),t]})},Py=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!1),[a,l]=d.useState(0),[i,c]=d.useState(0),[o,m]=d.useState(0),[j,x]=d.useState(""),[h,u]=d.useState(""),[g,v]=d.useState(),[y,f]=d.useState(),[p,b]=d.useState(),[E,P]=d.useState(),[k,w]=d.useState(),[R,I]=d.useState(),[T,L]=d.useState(),[J,Q]=d.useState(!1),[W,ce]=d.useState(),[se,be]=d.useState("SCORE"),[A,z]=d.useState([]),[S,$]=d.useState([]),[D,q]=d.useState(null),[ie,me]=d.useState("cartes"),[Pe,Ne]=d.useState(!1),[Le,Y]=d.useState(null);Jr({});const ve=d.useCallback(async(U=0,H)=>{try{n(!0);const ke={terme:(H!==void 0?H:h)||void 0,paysId:g,villeId:y,disponible:p,anneesExperienceMin:E,niveauMaitriseMin:k,thmMin:R,thmMax:T,certifieUniquement:J||void 0,niveauBadgeMin:W,tri:se,page:U,taille:20};Object.keys(ke).forEach(pt=>{ke[pt]===void 0&&delete ke[pt]});const Te=await fetch("/api/expertise/public/recherche-avancee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ke)});if(!Te.ok)throw new Error("Erreur lors de la recherche");const Me=await Te.json();s(Me.resultats||[]),l(Me.totalResultats),c(Me.page),m(Me.totalPages),Me.facettesPays&&z(Me.facettesPays),Me.facettesVilles&&$(Me.facettesVilles),Me.statistiques&&q(Me.statistiques)}catch(ae){console.error("Erreur recherche:",ae),Y({type:"error",text:"Erreur lors de la recherche"})}finally{n(!1)}},[h,g,y,p,E,k,R,T,J,W,se]);d.useEffect(()=>{ve(0)},[]),d.useEffect(()=>{const U=setTimeout(()=>{u(j)},1e3);return()=>clearTimeout(U)},[j]),d.useEffect(()=>{ve(0)},[h,g,y,p,E,k,R,T,J,W,se]);const O=()=>{u(j)},re=()=>{x(""),u(""),v(void 0),f(void 0),b(void 0),P(void 0),w(void 0),I(void 0),L(void 0),Q(!1),ce(void 0),be("SCORE")},ne=[g,y,p,E,k,R,T,J,W].filter(U=>U!==void 0&&U!==!1).length,we=U=>{const H={};return U.forEach(ae=>{var Te;(((Te=ae.competencesPrincipales)==null?void 0:Te.map(Me=>Me.nom))||["Sans comptence"]).forEach(Me=>{H[Me]||(H[Me]=[]),H[Me].some(pt=>pt.utilisateurId===ae.utilisateurId)||H[Me].push(ae)})}),H};return e.jsx("div",{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[Le&&e.jsxs("div",{className:`alert ${Le.type==="success"?"alert-success":"alert-error"} mb-3 py-2`,children:[e.jsx("span",{className:"text-sm",children:Le.text}),e.jsx("button",{onClick:()=>Y(null),className:"btn btn-ghost btn-xs",children:e.jsx(st,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"bg-base-100 rounded-xl shadow-sm border border-base-200 p-3 mb-4",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-base-content/40"}),e.jsx("input",{type:"text",placeholder:"Rechercher un expert, comptence, certification...",className:"input input-sm input-bordered w-full pl-9 h-9",value:j,onChange:U=>x(U.target.value),onKeyDown:U=>{U.key==="Enter"&&(U.preventDefault(),O())}}),r&&j!==h&&e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 loading loading-spinner loading-xs text-primary"})]}),e.jsxs("button",{className:`btn btn-sm h-9 gap-1 ${Pe?"btn-primary":"btn-ghost"}`,onClick:()=>Ne(!Pe),children:[e.jsx(zx,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filtres"}),ne>0&&e.jsx("span",{className:"badge badge-sm badge-secondary",children:ne}),Pe?e.jsx(Ib,{className:"w-3 h-3"}):e.jsx(ia,{className:"w-3 h-3"})]}),e.jsxs("select",{className:"select select-sm select-bordered h-9 w-full sm:w-44",value:se,onChange:U=>be(U.target.value),children:[e.jsx("option",{value:"SCORE",children:"Meilleur score"}),e.jsx("option",{value:"PERTINENCE",children:"Pertinence"}),e.jsx("option",{value:"EXPERIENCE",children:"Exprience"}),e.jsx("option",{value:"THM_ASC",children:"Tarif croissant"}),e.jsx("option",{value:"THM_DESC",children:"Tarif dcroissant"}),e.jsx("option",{value:"POPULARITE",children:"Popularit"}),e.jsx("option",{value:"RECENT",children:"Plus rcents"})]}),e.jsxs("div",{className:"join hidden sm:flex",children:[e.jsx("button",{className:`join-item btn btn-sm h-9 ${ie==="liste"?"btn-active":"btn-ghost"}`,onClick:()=>me("liste"),title:"Vue liste",children:e.jsx($x,{className:"w-4 h-4"})}),e.jsx("button",{className:`join-item btn btn-sm h-9 ${ie==="cartes"?"btn-active":"btn-ghost"}`,onClick:()=>me("cartes"),title:"Vue cartes",children:e.jsx(Xi,{className:"w-4 h-4"})}),e.jsx("button",{className:`join-item btn btn-sm h-9 ${ie==="arbre"?"btn-active":"btn-ghost"}`,onClick:()=>me("arbre"),title:"Vue par comptence",children:e.jsx(Pi,{className:"w-4 h-4"})})]})]}),Pe&&e.jsxs("div",{className:"border-t border-base-200 pt-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2",children:[e.jsxs("select",{className:"select select-sm select-bordered w-full",value:g||"",onChange:U=>{v(U.target.value?Number(U.target.value):void 0),f(void 0)},children:[e.jsx("option",{value:"",children:"Tous les pays"}),A.map(U=>e.jsxs("option",{value:U.code,children:[U.libelle," (",U.count,")"]},U.code))]}),e.jsxs("select",{className:"select select-sm select-bordered w-full",value:y||"",onChange:U=>f(U.target.value?Number(U.target.value):void 0),children:[e.jsx("option",{value:"",children:"Toutes les villes"}),S.map(U=>e.jsxs("option",{value:U.code,children:[U.libelle," (",U.count,")"]},U.code))]}),e.jsxs("select",{className:"select select-sm select-bordered w-full",value:p===void 0?"":String(p),onChange:U=>b(U.target.value===""?void 0:U.target.value==="true"),children:[e.jsx("option",{value:"",children:"Disponibilit"}),e.jsx("option",{value:"true",children:"Disponibles"}),e.jsx("option",{value:"false",children:"Indisponibles"})]}),e.jsxs("select",{className:"select select-sm select-bordered w-full",value:E||"",onChange:U=>P(U.target.value?Number(U.target.value):void 0),children:[e.jsx("option",{value:"",children:"Exprience"}),e.jsx("option",{value:"1",children:"1+ an"}),e.jsx("option",{value:"3",children:"3+ ans"}),e.jsx("option",{value:"5",children:"5+ ans"}),e.jsx("option",{value:"10",children:"10+ ans"})]}),e.jsxs("select",{className:"select select-sm select-bordered w-full",value:k||"",onChange:U=>w(U.target.value?Number(U.target.value):void 0),children:[e.jsx("option",{value:"",children:"Niveau"}),e.jsx("option",{value:"3",children:"Intermdiaire+"}),e.jsx("option",{value:"4",children:"Avanc+"}),e.jsx("option",{value:"5",children:"Expert"})]}),e.jsxs("select",{className:"select select-sm select-bordered w-full",value:W||"",onChange:U=>ce(U.target.value||void 0),children:[e.jsx("option",{value:"",children:"Certification"}),e.jsx("option",{value:"BRONZE",children:"Bronze+"}),e.jsx("option",{value:"ARGENT",children:"Argent+"}),e.jsx("option",{value:"OR",children:"Or+"}),e.jsx("option",{value:"PLATINE",children:"Platine"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(il,{className:"w-4 h-4 text-base-content/50"}),e.jsx("input",{type:"number",placeholder:"THM min",className:"input input-sm input-bordered w-24",value:R||"",onChange:U=>I(U.target.value?Number(U.target.value):void 0)}),e.jsx("span",{className:"text-xs text-base-content/50",children:"-"}),e.jsx("input",{type:"number",placeholder:"THM max",className:"input input-sm input-bordered w-24",value:T||"",onChange:U=>L(U.target.value?Number(U.target.value):void 0)}),e.jsx("span",{className:"text-xs text-base-content/50",children:"FCFA/h"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-sm checkbox-primary",checked:J,onChange:U=>Q(U.target.checked)}),e.jsx("span",{className:"text-sm",children:"Certifis uniquement"})]}),e.jsxs("button",{className:"btn btn-ghost btn-sm ml-auto",onClick:re,children:[e.jsx(st,{className:"w-3 h-3"}),"Rinitialiser"]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-base-content/60 border-t border-base-200 pt-2",children:[e.jsxs("span",{className:"font-medium text-base-content",children:[a," rsultat",a>1?"s":""]}),D&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsxs("span",{className:"hidden sm:flex items-center gap-1",children:[e.jsx(bt,{className:"w-3 h-3"}),D.totalExpertsDisponibles," disponibles"]}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsxs("span",{className:"hidden sm:flex items-center gap-1",children:[e.jsx(Et,{className:"w-3 h-3"}),D.totalExpertsCertifies," certifis"]}),e.jsx("span",{className:"hidden lg:inline",children:""}),e.jsxs("span",{className:"hidden lg:flex items-center gap-1",children:[e.jsx(il,{className:"w-3 h-3"}),"THM moyen: ",D.thmMoyen.toLocaleString()," FCFA"]})]})]})]})}),e.jsx("div",{className:"relative h-1",children:r&&e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-0 z-10",children:e.jsxs("div",{className:"bg-base-100 rounded-full px-5 py-2 shadow-md border border-base-200 flex items-center gap-2",children:[e.jsx("span",{className:"loading loading-spinner loading-sm text-primary"}),e.jsx("span",{className:"text-sm text-base-content/70",children:"Recherche en cours..."})]})})}),e.jsxs("div",{children:[ie==="liste"&&t.length>0&&e.jsx("div",{className:"bg-base-100 rounded-xl border border-base-200 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-base-200",children:t.map(U=>{var H;return e.jsxs(kt,{to:`/expertise-profil/${U.utilisateurId}`,className:"flex items-center gap-3 p-3 hover:bg-base-50 transition-colors",children:[e.jsx(Lo,{utilisateurId:U.utilisateurId,titre:U.titre,taille:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm truncate",children:U.titre}),U.nombreBadges>0&&e.jsx(Qm,{niveau:U.niveauBadgeMax})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-base-content/60 mt-0.5",children:[U.villeNom&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ir,{className:"w-3 h-3"}),U.villeNom]}),U.anneesExperienceMax>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ut,{className:"w-3 h-3"}),U.anneesExperienceMax," ans"]}),U.nombreFollowers>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(bt,{className:"w-3 h-3"}),U.nombreFollowers]})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 flex-shrink-0",children:[U.thmMin&&e.jsxs("span",{className:"text-xs font-medium text-success",children:[U.thmMin.toLocaleString(),"F/h"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-base-content/50",children:[e.jsx($r,{className:"w-3 h-3 text-warning"}),((H=U.scoreGlobal)==null?void 0:H.toFixed(0))||0]})]}),U.disponible?e.jsx("span",{className:"badge badge-success badge-xs flex-shrink-0",children:"Dispo"}):e.jsx("span",{className:"badge badge-ghost badge-xs flex-shrink-0",children:"Indispo"})]},U.utilisateurId)})})}),ie==="cartes"&&t.length>0&&e.jsx("div",{className:"gap-4",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gridAutoRows:"auto auto auto"},children:t.map(U=>{var H;return e.jsxs(kt,{to:`/expertise-profil/${U.utilisateurId}`,className:"group bg-primary/5 rounded-xl border border-primary/20 shadow-sm hover:shadow-lg hover:border-primary/40 hover:-translate-y-0.5 transition-all duration-200 overflow-hidden p-4",style:{display:"grid",gridTemplateRows:"subgrid",gridRow:"span 3",gap:"12px"},children:[e.jsxs("div",{className:"flex gap-3 overflow-hidden",children:[e.jsx(Lo,{utilisateurId:U.utilisateurId,titre:U.titre,taille:"md"}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-sm text-base-content line-clamp-1 group-hover:text-primary transition-colors",children:U.titre}),U.nombreBadges>0&&e.jsx(Qm,{niveau:U.niveauBadgeMax})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-base-content/70 mt-0.5",children:[U.villeNom&&e.jsxs("span",{className:"flex items-center gap-1 truncate",children:[e.jsx(Ir,{className:"w-3 h-3 flex-shrink-0"}),U.villeNom]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($r,{className:"w-3 h-3 text-warning flex-shrink-0"}),((H=U.scoreGlobal)==null?void 0:H.toFixed(0))||0]})]}),e.jsx("div",{className:"mt-1",children:U.disponible?e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-success font-medium",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-success rounded-full animate-pulse"}),"Disponible"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-base-content/60",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-base-content/40 rounded-full"}),"Indisponible"]})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-base-content/70",children:[U.anneesExperienceMax>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"w-3 h-3"}),U.anneesExperienceMax," ans"]}),U.nombreProjets>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ur,{className:"w-3 h-3"}),U.nombreProjets," projets"]}),U.nombreFollowers>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(bt,{className:"w-3 h-3"}),U.nombreFollowers]}),U.thmMin&&e.jsxs("span",{className:"ml-auto text-success font-semibold",children:[U.thmMin.toLocaleString(),"F/h"]})]}),e.jsx("div",{className:"space-y-1.5 overflow-hidden",children:U.competencesPrincipales&&U.competencesPrincipales.length>0?e.jsxs(e.Fragment,{children:[U.competencesPrincipales.slice(0,2).map((ae,ke)=>e.jsxs("div",{className:"flex items-center justify-between bg-base-100/80 border border-base-300 rounded-lg px-2.5 py-1.5 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1 overflow-hidden",children:[ae.estCertifiee&&e.jsx(Et,{className:"w-3 h-3 text-warning flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-base-content truncate",children:ae.nom})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-base-content/70 flex-shrink-0 ml-2",children:[ae.anneesExperience&&e.jsxs("span",{children:[ae.anneesExperience,"a"]}),ae.thm&&e.jsxs("span",{className:"text-success font-semibold",children:[ae.thm.toLocaleString(),"F/h"]})]})]},ke)),U.nombreCompetences>2&&e.jsxs("div",{className:"text-xs text-primary font-medium pl-1",children:["+",U.nombreCompetences-2," autre",U.nombreCompetences>3?"s":""]})]}):e.jsx("div",{className:"flex items-center justify-center h-[52px] text-xs text-base-content/40 italic",children:"Aucune comptence liste"})})]},U.utilisateurId)})}),ie==="arbre"&&t.length>0&&e.jsx("div",{className:"space-y-3",children:Object.entries(we(t)).map(([U,H])=>e.jsxs("div",{className:"bg-base-100 rounded-xl border border-base-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-primary/5 border-b border-base-200",children:[e.jsx(Pi,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium text-sm text-base-content",children:U}),e.jsxs("span",{className:"ml-auto text-xs text-base-content/50",children:[H.length," expert",H.length>1?"s":""]})]}),e.jsx("div",{className:"divide-y divide-base-200",children:H.map(ae=>e.jsxs(kt,{to:`/expertise-profil/${ae.utilisateurId}`,className:"flex items-center gap-3 px-3 py-2.5 hover:bg-base-50 transition-colors",children:[e.jsx(Lo,{utilisateurId:ae.utilisateurId,titre:ae.titre,taille:"sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:ae.titre}),ae.villeNom&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-base-content/50",children:[e.jsx(Ir,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:ae.villeNom})]})]}),ae.disponible?e.jsx("span",{className:"badge badge-success badge-xs flex-shrink-0",children:"Dispo"}):e.jsx("span",{className:"badge badge-ghost badge-xs flex-shrink-0",children:"Indispo"})]},ae.utilisateurId))})]},U))}),t.length===0&&!r&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-base-200 rounded-full flex items-center justify-center",children:e.jsx(bt,{className:"w-8 h-8 text-base-content/30"})}),e.jsx("p",{className:"font-medium text-base-content/70 mb-1",children:"Aucun expert trouv"}),e.jsx("p",{className:"text-sm text-base-content/50",children:"Essayez de modifier vos critres de recherche"}),ne>0&&e.jsx("button",{className:"btn btn-primary btn-sm mt-4",onClick:re,children:"Rinitialiser les filtres"})]}),o>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("div",{className:"join",children:[e.jsx("button",{className:"join-item btn btn-sm",disabled:i===0,onClick:()=>ve(i-1),children:""}),e.jsxs("button",{className:"join-item btn btn-sm",children:["Page ",i+1," / ",o]}),e.jsx("button",{className:"join-item btn btn-sm",disabled:i>=o-1,onClick:()=>ve(i+1),children:""})]})})]})]})})};function Ty(){const{id:t}=bn(),s=jt(),[r,n]=d.useState(null),[a,l]=d.useState(!0),[i,c]=d.useState(null),[o,m]=d.useState(!1),[j,x]=d.useState(!1),{isAuthenticated:h,openAuthModal:u}=Es(),[g,v]=d.useState([]),[y,f]=d.useState(null),[p,b]=d.useState(!1),[E,P]=d.useState(!1),[k,w]=d.useState(!1),[R,I]=d.useState(!1),[T,L]=d.useState(!1),[J,Q]=d.useState(null);Jr({}),d.useEffect(()=>{t&&(Le(),W(),S(),ie())},[t]);const W=async()=>{try{const Y=await fetch(`/api/profil/public/${t}`,{credentials:"include"});if(Y.ok){const ve=await Y.json();f(ve)}else console.warn("Utilisateur public non trouv:",Y.status)}catch(Y){console.error("Erreur chargement utilisateur:",Y)}},ce=()=>{var Y,ve,O,re,ne,we;if(y){const U=((ve=(Y=y.nom)==null?void 0:Y.charAt(0))==null?void 0:ve.toUpperCase())||"",H=((re=(O=y.prenom)==null?void 0:O.charAt(0))==null?void 0:re.toUpperCase())||"";if(U||H)return`${H}${U}`}return((we=(ne=r==null?void 0:r.titre)==null?void 0:ne.charAt(0))==null?void 0:we.toUpperCase())||"?"},se=()=>{var Y;return r?{id:r.utilisateurId,nom:(y==null?void 0:y.nom)||"",prenom:(y==null?void 0:y.prenom)||"",titre:r.titre,photoUrl:y!=null&&y.hasPhoto?`/api/profil/public/${t}/photo`:"",rating:0,nombreProjets:0,description:r.description||"",competences:((Y=r.competences)==null?void 0:Y.map(ve=>({nom:ve.nom,favorite:ve.estFavorite||!1,anneesExperience:ve.anneesExperience,thm:ve.thm,nombreProjets:ve.nombreProjets,certifications:ve.certifications,niveauMaitrise:ve.niveauMaitrise})))||[],experienceAnnees:0,tjmMin:0,tjmMax:0,localisation:r.localisation||"",disponible:r.disponible}:null},be=()=>{P(!0)},A=()=>{if(!h){const Y=window.location.pathname+window.location.search;u(Y);return}w(!0)},z=()=>{if(!h){const Y=window.location.pathname+window.location.search;u(Y);return}I(!0)};d.useEffect(()=>{h&&t&&S()},[h,t]);const S=async()=>{if(h)try{const Y=await fetch(`/api/expertise/reseau/${t}/est-dans-reseau`,{credentials:"include"});if(Y.ok){const ve=await Y.json();m(ve.estDansReseau)}}catch(Y){console.error("Erreur lors de la vrification du rseau:",Y)}},$=async()=>{if(!h){const Y=window.location.pathname+window.location.search;console.log(" [EXPERTISE PROFIL] Authentification requise, URL sauvegarde:",Y),u(Y);return}try{x(!0);const Y=await fetch(`/api/expertise/reseau/${t}`,{method:"POST",credentials:"include"});Y.ok?m(!0):Y.status===403&&console.error("Accs refus - vrifiez vos permissions")}catch(Y){console.error("Erreur lors de l'ajout au rseau:",Y)}finally{x(!1)}},D=async()=>{try{x(!0),(await fetch(`/api/expertise/reseau/${t}`,{method:"DELETE",credentials:"include"})).ok&&m(!1)}catch(Y){console.error("Erreur lors du retrait du rseau:",Y)}finally{x(!1)}},q=()=>{o?D():$()},ie=async()=>{try{const Y=await Rs.getBadgesExpert(t);v(Y.filter(ve=>ve.estPublic))}catch(Y){console.error("Erreur chargement badges:",Y)}},me=Y=>g.find(ve=>ve.competenceNom.toLowerCase()===Y.toLowerCase()),Pe={[Ue.BRONZE]:"",[Ue.ARGENT]:"",[Ue.OR]:"",[Ue.PLATINE]:""},Ne={[Ue.BRONZE]:"from-orange-300 to-orange-600",[Ue.ARGENT]:"from-gray-300 to-gray-500",[Ue.OR]:"from-yellow-400 to-yellow-600",[Ue.PLATINE]:"from-purple-400 to-pink-600"},Le=async()=>{try{l(!0),c(null);const ve=await(await fetch("/api/expertise/public/experts")).json(),O=Array.isArray(ve)?ve.find(re=>re.utilisateurId===t):null;O?n(O):c("Expertise non trouve")}catch(Y){console.error("Erreur lors du chargement de l'expertise:",Y),c("Erreur lors du chargement des donnes")}finally{l(!1)}};return a?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):i||!r?e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"alert alert-error",children:e.jsx("span",{children:i||"Expertise non trouve"})}),e.jsxs("button",{onClick:()=>s("/rechercher"),className:"btn btn-primary mt-4",children:[e.jsx(Os,{className:"w-4 h-4 mr-2"}),"Retour  la recherche"]})]}):e.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto",children:[e.jsxs("button",{onClick:()=>s(-1),className:"inline-flex items-center gap-1 text-sm text-base-content/60 hover:text-primary mb-4 transition-colors",children:[e.jsx(Os,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Retour"})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl mb-6",children:e.jsxs("div",{className:"card-body p-4 sm:p-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"avatar flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full ring-2 ring-primary ring-offset-base-100 ring-offset-1",children:(y==null?void 0:y.hasPhoto)===!1||p?e.jsx("div",{className:"bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white font-bold text-xl sm:text-2xl w-full h-full rounded-full",children:ce()}):e.jsx("img",{src:`/api/profil/public/${t}/photo`,alt:r.titre,onError:()=>b(!0),className:"rounded-full object-cover"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold truncate",children:r.titre}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs sm:text-sm text-base-content/70 mt-1",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.typePersonne==="MORALE"?e.jsx(Si,{className:"w-3.5 h-3.5"}):e.jsx(Vs,{className:"w-3.5 h-3.5"}),r.typePersonne==="MORALE"?"Entreprise":"Indpendant"]}),r.localisation&&e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Ir,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"truncate max-w-[150px]",children:r.localisation})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:r.disponible?e.jsxs("span",{className:"badge badge-success badge-sm gap-1",children:[e.jsx(Qi,{className:"w-3 h-3"}),"Disponible"]}):e.jsxs("span",{className:"badge badge-ghost badge-sm gap-1",children:[e.jsx(ds,{className:"w-3 h-3"}),"Indisponible"]})})]}),r.description&&e.jsx("p",{className:"text-sm text-base-content/80 mt-3 line-clamp-2 sm:line-clamp-3",children:r.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-base-300",children:[e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Partager le profil",children:e.jsx("button",{onClick:be,className:"btn btn-circle btn-sm btn-ghost hover:bg-info/20 hover:text-info",children:e.jsx(Bx,{className:"w-4 h-4"})})}),h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":o?"Retirer du rseau":"Ajouter au rseau",children:e.jsx("button",{onClick:q,className:`btn btn-circle btn-sm ${o?"btn-error btn-outline hover:bg-error hover:text-white":"btn-ghost hover:bg-primary/20 hover:text-primary"}`,disabled:j,children:j?e.jsx("span",{className:"loading loading-spinner loading-xs"}):o?e.jsx(Ti,{className:"w-4 h-4"}):e.jsx(Gb,{className:"w-4 h-4"})})}),e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Proposer un projet",children:e.jsx("button",{onClick:A,className:"btn btn-circle btn-sm btn-ghost hover:bg-secondary/20 hover:text-secondary",children:e.jsx(ts,{className:"w-4 h-4"})})}),r.disponible&&e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Contacter",children:e.jsx("button",{onClick:z,className:"btn btn-circle btn-sm btn-ghost hover:bg-success/20 hover:text-success",children:e.jsx(_r,{className:"w-4 h-4"})})})]}):e.jsx("div",{className:"text-xs text-base-content/50 ml-2",children:e.jsx("span",{className:"hidden sm:inline",children:"Connectez-vous pour plus d'actions"})})]})]})}),e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body p-4 sm:p-6",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-base sm:text-lg font-semibold mb-4",children:[e.jsx(Ft,{className:"w-5 h-5 text-primary"}),"Comptences",r.competences&&r.competences.length>0&&e.jsx("span",{className:"badge badge-primary badge-sm",children:r.competences.length})]}),r.competences&&r.competences.length>0?e.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"auto auto auto"},children:r.competences.map((Y,ve)=>{const O=me(Y.nom);return e.jsxs("div",{className:`relative rounded-xl p-4 border transition-all hover:shadow-lg ${O?"border-primary/30 bg-primary/5":"border-base-300 bg-base-200/50 hover:border-primary/30"}`,style:{display:"grid",gridTemplateRows:"subgrid",gridRow:"span 3",gap:"12px"},children:[O&&e.jsx("div",{className:"absolute -top-2 -right-2 z-10",children:e.jsx("div",{className:`w-9 h-9 rounded-full bg-gradient-to-br ${Ne[O.niveauCertification]} flex items-center justify-center shadow-lg border-2 border-white`,children:e.jsx("span",{className:"text-base",children:Pe[O.niveauCertification]})})}),e.jsxs("div",{className:"space-y-1.5 pr-6",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("h3",{className:"text-sm font-bold text-base-content leading-tight cursor-pointer hover:text-primary transition-colors",onClick:()=>{Q(Y),L(!0)},title:"Cliquez pour voir les dtails",children:Y.nom}),Y.estFavorite&&e.jsx("span",{className:"text-warning text-sm flex-shrink-0",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Y.niveauMaitrise!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-base-content/50",children:"Niveau"}),e.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(re=>e.jsx("span",{className:`w-2 h-2 rounded-full ${re<=Y.niveauMaitrise?"bg-warning":"bg-base-300"}`},re))})]}),O&&e.jsxs("span",{className:"badge badge-success badge-sm gap-1",children:[e.jsx(Et,{className:"w-3 h-3"}),O.niveauCertification]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`text-xs leading-relaxed ${Y.description?"text-base-content/70":"text-base-content/30 italic"}`,children:Y.description||"Aucune description"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[Y.thm!==void 0&&Y.thm>0&&e.jsxs("span",{className:"badge badge-outline badge-success badge-sm",children:[Y.thm.toLocaleString()," FCFA/h"]}),Y.nombreProjets!==void 0&&Y.nombreProjets>0&&e.jsxs("span",{className:"badge badge-ghost badge-sm",children:[Y.nombreProjets," projet",Y.nombreProjets>1?"s":""]}),Y.anneesExperience!==void 0&&Y.anneesExperience>0&&e.jsxs("span",{className:"badge badge-ghost badge-sm",children:[Y.anneesExperience," an",Y.anneesExperience>1?"s":""]})]})]}),e.jsx("div",{className:"pt-2 border-t border-base-300/50",children:Y.certifications?e.jsxs("p",{className:"text-xs text-accent line-clamp-1",title:Y.certifications,children:[" ",Y.certifications]}):e.jsx("p",{className:"text-xs text-base-content/25 italic",children:"Aucune certification"})})]},`${Y.nom}-${ve}`)})}):e.jsxs("div",{className:"text-center py-6 text-base-content/40",children:[e.jsx(Ft,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Aucune comptence renseigne"})]})]})}),se()&&e.jsx(Kx,{expert:se(),isOpen:E,onClose:()=>P(!1)}),se()&&e.jsx(Yx,{expert:se(),isOpen:k,onClose:()=>w(!1)}),se()&&e.jsx(nf,{expert:se(),isOpen:R,onClose:()=>I(!1)}),e.jsx(tf,{isOpen:T,onClose:()=>{L(!1),Q(null)},competence:J,badge:J?me(J.nom):null})]})}function Ay({badge:t,onToggleVisibilite:s,afficherActions:r=!0,compact:n=!1}){const a=c=>({[Dt.BRONZE]:"from-amber-700 to-amber-900",[Dt.ARGENT]:"from-gray-400 to-gray-600",[Dt.OR]:"from-yellow-400 to-yellow-600",[Dt.PLATINE]:"from-slate-300 to-slate-500"})[c]||"from-gray-400 to-gray-600",l=c=>({[Dt.BRONZE]:"#CD7F32",[Dt.ARGENT]:"#C0C0C0",[Dt.OR]:"#FFD700",[Dt.PLATINE]:"#E5E4E2"})[c]||"#808080",i=c=>new Date(c).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return n?e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded-lg",children:[e.jsx(Et,{size:24,style:{color:l(t.niveauCertification)}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:t.competenceNom}),e.jsx("p",{className:"text-xs text-base-content/70",children:Vc(t.niveauCertification)})]}),!t.estPublic&&e.jsx(Dr,{size:16,className:"text-base-content/40"})]}):e.jsxs("div",{className:`card bg-gradient-to-br ${a(t.niveauCertification)} shadow-xl text-white relative overflow-hidden`,children:[!t.estValide&&e.jsx("div",{className:"absolute top-2 right-2 badge badge-error badge-sm",children:"Expir"}),!t.estPublic&&r&&e.jsxs("div",{className:"absolute top-2 left-2 badge badge-ghost badge-sm",children:[e.jsx(Dr,{size:14,className:"mr-1"}),"Priv"]}),e.jsxs("div",{className:"card-body p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Et,{size:64,className:"drop-shadow-lg"}),e.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-white text-black rounded-full w-8 h-8 flex items-center justify-center text-xs font-bold shadow-md",children:[t.niveauCertification===Dt.BRONZE&&"",t.niveauCertification===Dt.ARGENT&&"",t.niveauCertification===Dt.OR&&"",t.niveauCertification===Dt.PLATINE&&""]})]})}),e.jsx("h3",{className:"card-title text-center justify-center mb-2",children:t.competenceNom}),e.jsx("div",{className:"text-center mb-4",children:e.jsx("span",{className:"badge badge-lg bg-white/20 border-white/40 text-white",children:Vc(t.niveauCertification)})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm opacity-90 mb-2",children:[e.jsx(ss,{size:16}),e.jsxs("span",{children:["Obtenu le ",i(t.dateObtention)]})]}),e.jsx("div",{className:"text-center text-sm opacity-80",children:t.validitePermanente?e.jsx("span",{children:"Validit permanente"}):t.dateExpiration?e.jsxs("span",{children:["Valide jusqu'au ",i(t.dateExpiration)]}):null}),r&&s&&t.estActif&&e.jsx("div",{className:"card-actions justify-center mt-4",children:e.jsx("button",{onClick:()=>s(t.id),className:"btn btn-sm btn-ghost bg-white/10 hover:bg-white/20 border-white/20 text-white",children:t.estPublic?e.jsxs(e.Fragment,{children:[e.jsx(qt,{size:16}),"Rendre priv"]}):e.jsxs(e.Fragment,{children:[e.jsx(Dr,{size:16}),"Rendre public"]})})})]}),!t.estActif&&t.motifRevocation&&e.jsxs("div",{className:"bg-red-900/50 p-3 text-sm",children:[e.jsx("p",{className:"font-semibold",children:"Badge rvoqu"}),e.jsx("p",{className:"opacity-90",children:t.motifRevocation}),t.dateRevocation&&e.jsxs("p",{className:"opacity-70 text-xs mt-1",children:["Le ",i(t.dateRevocation)]})]})]})}function My({utilisateurId:t,afficherActions:s=!0}){const[r,n]=d.useState([]),[a,l]=d.useState(null),[i,c]=d.useState(!0),[o,m]=d.useState(null),[j,x]=d.useState("actifs"),h=!!t;d.useEffect(()=>{u(),h||g()},[t,j]);const u=async()=>{try{c(!0),m(null);let y;if(h&&t)y=await Ol.getBadgesPublics(t);else{const f=j==="actifs";y=await Ol.getMesBadges(f),j==="inactifs"&&(y=y.filter(p=>!p.estActif))}n(y)}catch(y){console.error("Erreur lors du chargement des badges:",y),m("Impossible de charger les badges")}finally{c(!1)}},g=async()=>{try{const y=await Ol.getStatistiques();l(y)}catch(y){console.error("Erreur lors du chargement des statistiques:",y)}},v=async y=>{try{const f=await Ol.toggleVisibilite(y);n(p=>p.map(b=>b.id===y?f:b)),console.log("Visibilit du badge modifie")}catch(f){console.error("Erreur lors du changement de visibilit:",f),alert("Erreur lors du changement de visibilit du badge")}};return i?e.jsx("div",{className:"flex justify-center items-center p-12",children:e.jsx("div",{className:"loading loading-spinner loading-lg"})}):o?e.jsx("div",{className:"alert alert-error",children:e.jsx("span",{children:o})}):e.jsxs("div",{className:"space-y-6",children:[!h&&a&&e.jsxs("div",{className:"stats stats-vertical lg:stats-horizontal shadow w-full",children:[e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-figure text-primary",children:e.jsx(Et,{size:32})}),e.jsx("div",{className:"stat-title",children:"Total de badges"}),e.jsx("div",{className:"stat-value text-primary",children:a.total})]}),e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-figure",style:{color:"#CD7F32"},children:""}),e.jsx("div",{className:"stat-title",children:"Bronze"}),e.jsx("div",{className:"stat-value",children:a.bronze})]}),e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-figure",style:{color:"#C0C0C0"},children:""}),e.jsx("div",{className:"stat-title",children:"Argent"}),e.jsx("div",{className:"stat-value",children:a.argent})]}),e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-figure",style:{color:"#FFD700"},children:""}),e.jsx("div",{className:"stat-title",children:"Or"}),e.jsx("div",{className:"stat-value",children:a.or})]}),e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-figure",children:""}),e.jsx("div",{className:"stat-title",children:"Platine"}),e.jsx("div",{className:"stat-value",children:a.platine})]})]}),!h&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>x("actifs"),className:`btn btn-sm ${j==="actifs"?"btn-primary":"btn-ghost"}`,children:["Actifs (",r.filter(y=>y.estActif).length,")"]}),e.jsxs("button",{onClick:()=>x("tous"),className:`btn btn-sm ${j==="tous"?"btn-primary":"btn-ghost"}`,children:["Tous (",r.length,")"]}),e.jsxs("button",{onClick:()=>x("inactifs"),className:`btn btn-sm ${j==="inactifs"?"btn-primary":"btn-ghost"}`,children:["Inactifs (",r.filter(y=>!y.estActif).length,")"]})]}),r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Et,{size:64,className:"mx-auto mb-4 text-base-content/30"}),e.jsx("p",{className:"text-lg font-semibold text-base-content/70",children:h?"Aucun badge public pour le moment":"Aucun badge obtenu pour le moment"}),!h&&e.jsx("p",{className:"text-sm text-base-content/50 mt-2",children:"Demandez une reconnaissance de comptence pour obtenir votre premier badge!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(y=>e.jsx(Ay,{badge:y,onToggleVisibilite:s?v:void 0,afficherActions:s&&!h},y.id))}),!h&&r.length>0&&r.length<5&&e.jsxs("div",{className:"alert alert-info",children:[e.jsx(Ur,{size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Continuez sur votre lance!"}),e.jsxs("div",{className:"text-sm",children:["Vous avez ",r.length," badge",r.length>1?"s":"",". Demandez des reconnaissances pour progresser vers le niveau suprieur!"]})]})]})]})}function Ry(){return e.jsx("div",{className:"min-h-screen bg-base-200",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(kt,{to:"/dashboard",className:"btn btn-ghost btn-circle",children:e.jsx(Os,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-4xl font-bold flex items-center gap-3",children:[e.jsx(Et,{size:40,className:"text-primary"}),"Mes Badges de Comptence"]}),e.jsx("p",{className:"text-base-content/70 mt-2",children:"Consultez tous vos badges de comptence obtenus suite aux reconnaissances valides"})]})]}),e.jsxs("div",{className:"alert alert-info mb-6",children:[e.jsx(Et,{size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:" propos des badges"}),e.jsx("div",{className:"text-sm",children:"Les badges attestent de vos comptences reconnues par l'organisation. Ils sont classs en 4 niveaux : Bronze (dbutant), Argent (intermdiaire), Or (avanc), et Platine (expert)."})]})]}),e.jsx(My,{afficherActions:!0}),e.jsx("div",{className:"card bg-base-100 shadow-xl mt-8",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Obtenir plus de badges"}),e.jsx("p",{className:"text-base-content/70",children:"Pour obtenir de nouveaux badges ou faire progresser vos badges existants, demandez une reconnaissance de comptence sur vos expertises."}),e.jsx("div",{className:"card-actions justify-end mt-4",children:e.jsxs(kt,{to:"/expertises",className:"btn btn-primary",children:[e.jsx(Et,{size:20}),"Grer mes expertises"]})})]})})]})})}const xt="/api/demandes-reconnaissance",gt={async getDemandesATraiter(t){const s=t?`${xt}?statut=${t}`:xt,r=await fetch(s,{credentials:"include"});if(!r.ok)throw new Error("Erreur lors de la rcupration des demandes");return r.json()},async getDemandesAssignees(){const t=await fetch(`${xt}/demandes`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des demandes");return t.json()},async getDemandeDetails(t){const s=await fetch(`${xt}/${t}`,{credentials:"include"});if(!s.ok)throw new Error("Erreur lors de la rcupration des dtails");return s.json()},async assignerDemande(t){const s=await fetch(`${xt}/${t}/assigner`,{method:"PUT",credentials:"include"});if(!s.ok){const r=await s.text();throw new Error(r||"Erreur lors de l'assignation")}return s.json()},async evaluerDemande(t,s){const r=await fetch(`${xt}/${t}/evaluer`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors de l'valuation")}return r.json()},async approuverDemande(t,s){const r=await fetch(`${xt}/${t}/approuver`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors de l'approbation")}return r.json()},async rejeterDemande(t,s){const r=await fetch(`${xt}/${t}/rejeter`,{method:"PUT",headers:{"Content-Type":"text/plain"},credentials:"include",body:s});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors du rejet")}return r.json()},async demanderComplement(t,s){const r=await fetch(`${xt}/${t}/complements`,{method:"POST",headers:{"Content-Type":"text/plain"},credentials:"include",body:s});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors de la demande de complment")}return r.json()},async marquerPieceVerifiee(t){const s=await fetch(`${xt}/pieces/${t}/verifier`,{method:"PUT",credentials:"include"});if(!s.ok)throw new Error("Erreur lors de la vrification de la pice");return s.json()},async getStatistiques(){const t=await fetch(`${xt}/statistiques`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des statistiques");return t.json()},async revoquerBadge(t,s){const r=await fetch(`${xt}/badges/${t}/revoquer`,{method:"PUT",headers:{"Content-Type":"text/plain"},credentials:"include",body:s});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors de la rvocation du badge")}},async getUtilisateursRh(){const t=await fetch(`${xt}/rh-disponibles`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des utilisateurs RH");return t.json()},async assignerDemandeAuRh(t,s){const r=await fetch(`${xt}/${t}/assigner-rh`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors de l'assignation au RH")}return r.json()},async getDemandesAssigneesParManager(){const t=await fetch(`${xt}/assignees`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des demandes assignes");return t.json()},async getDemandesEnAttenteValidation(){const t=await fetch(`${xt}/a-valider`,{credentials:"include"});if(!t.ok)throw new Error("Erreur lors de la rcupration des demandes  valider");return t.json()},async soumettreEvaluationAuManager(t){const s=await fetch(`${xt}/${t}/soumettre-evaluation`,{method:"POST",credentials:"include"});if(!s.ok){const r=await s.text();throw new Error(r||"Erreur lors de la soumission de l'valuation")}return s.json()},async approuverDemandeManager(t,s){const r=await fetch(`${xt}/${t}/approuver-manager`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors de l'approbation")}return r.json()},async rejeterDemandeManager(t,s){const r=await fetch(`${xt}/${t}/rejeter-manager`,{method:"PUT",headers:{"Content-Type":"text/plain"},credentials:"include",body:s});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors du rejet")}return r.json()},async demanderComplementManager(t,s){const r=await fetch(`${xt}/${t}/complements-manager`,{method:"POST",headers:{"Content-Type":"text/plain"},credentials:"include",body:s});if(!r.ok){const n=await r.text();throw new Error(n||"Erreur lors de la demande de complment")}return r.json()}},af=t=>{const[s,r]=d.useState(!1),[n,a]=d.useState(!0);return d.useEffect(()=>{(async()=>{try{const i=await fetch("/api/me/roles",{credentials:"include"});if(i.ok){const m=((await i.json()).roles||[]).some(j=>j.toLowerCase()===t.toLowerCase());r(m)}else r(!1)}catch(i){console.error("[useHasRole] Erreur lors de la vrification du rle:",i),r(!1)}finally{a(!1)}})()},[t]),{hasRole:s,loading:n}},lf=()=>af("manager"),of=()=>af("rh");function cf({isOpen:t,onClose:s,onConfirm:r}){const[n,a]=d.useState([]),[l,i]=d.useState(null),[c,o]=d.useState(""),[m,j]=d.useState(!1),[x,h]=d.useState(null);d.useEffect(()=>{t&&(u(),i(null),o(""),h(null))},[t]);const u=async()=>{j(!0),h(null);try{const v=await gt.getUtilisateursRh();a(v)}catch(v){h(v instanceof Error?v.message:"Erreur lors du chargement")}finally{j(!1)}},g=()=>{if(!l){h("Veuillez slectionner un RH");return}r(l,c||void 0),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:s,children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[85vh] overflow-hidden shadow-xl",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(bt,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Assigner  un RH"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Slectionnez un valuateur"})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(st,{size:20,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-5 overflow-y-auto max-h-[calc(85vh-180px)]",children:[x&&e.jsxs("div",{className:"flex items-center gap-2 p-3 mb-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[e.jsx(Ge,{size:16}),x]}),m?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mb-3"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Chargement des RH..."})]}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(bt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Aucun RH disponible"})]}):e.jsx("div",{className:"space-y-2",children:n.map(v=>{const y=l===v.userId,f=v.tauxApprobation>=70?"text-emerald-600":v.tauxApprobation>=50?"text-amber-600":"text-red-600";return e.jsxs("div",{onClick:()=>i(v.userId),className:`relative flex items-center gap-4 p-4 rounded-xl cursor-pointer transition-all ${y?"bg-primary/5 ring-2 ring-primary":"bg-slate-50 hover:bg-slate-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${y?"bg-primary text-white":"bg-slate-200 text-slate-600"}`,children:v.nom.split(" ").map(p=>p[0]).join("").slice(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:v.nom}),y&&e.jsx(ze,{size:16,className:"text-primary"})]}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:v.email})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center gap-1 text-amber-600",children:[e.jsx(ut,{size:12}),e.jsx("span",{className:"font-semibold",children:v.nombreDemandesEnCours})]}),e.jsx("span",{className:"text-gray-400",children:"en cours"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-200"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`flex items-center gap-1 ${f}`,children:[e.jsx(Ur,{size:12}),e.jsxs("span",{className:"font-semibold",children:[v.tauxApprobation.toFixed(0),"%"]})]}),e.jsx("span",{className:"text-gray-400",children:"approb."})]})]})]},v.userId)})}),!m&&n.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions (optionnel)"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none focus:ring-2 focus:ring-primary/20 focus:border-primary",rows:2,placeholder:"Ajoutez des instructions pour le RH...",value:c,onChange:v=>o(v.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-5 py-4 border-t border-slate-200 bg-slate-50",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 hover:bg-slate-200 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),e.jsxs("button",{onClick:g,disabled:!l,className:"px-5 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(ea,{size:16}),"Assigner"]})]})]})}):null}const Ly={[le.EN_ATTENTE]:{bg:"bg-amber-50",text:"text-amber-700",icon:ut},[le.ASSIGNEE_RH]:{bg:"bg-blue-50",text:"text-blue-700",icon:ea},[le.EN_COURS_EVALUATION]:{bg:"bg-indigo-50",text:"text-indigo-700",icon:ts},[le.EN_ATTENTE_VALIDATION]:{bg:"bg-purple-50",text:"text-purple-700",icon:ze},[le.EN_COURS_TRAITEMENT]:{bg:"bg-blue-50",text:"text-blue-700",icon:ut},[le.COMPLEMENT_REQUIS]:{bg:"bg-orange-50",text:"text-orange-700",icon:Ge},[le.APPROUVEE]:{bg:"bg-emerald-50",text:"text-emerald-700",icon:ze},[le.REJETEE]:{bg:"bg-red-50",text:"text-red-700",icon:Ge},[le.ANNULEE]:{bg:"bg-gray-50",text:"text-gray-700",icon:Ge}},Do={[Ue.BRONZE]:{emoji:"",label:"Bronze",color:"bg-amber-100 text-amber-800"},[Ue.ARGENT]:{emoji:"",label:"Argent",color:"bg-slate-100 text-slate-800"},[Ue.OR]:{emoji:"",label:"Or",color:"bg-yellow-100 text-yellow-800"},[Ue.PLATINE]:{emoji:"",label:"Platine",color:"bg-cyan-100 text-cyan-800"}};function Dy(){const t=jt(),s=$s(),[r]=Vd(),{hasRole:n,loading:a}=lf(),{hasRole:l,loading:i}=of(),[c,o]=d.useState([]),[m,j]=d.useState([]),[x,h]=d.useState([]),[u,g]=d.useState(!0),[v,y]=d.useState(null),[f,p]=d.useState(""),[b,E]=d.useState(!1),[P,k]=d.useState(null),[w,R]=d.useState(!1),I=!a&&!i,T=d.useMemo(()=>{if(!I)return[];const S=[];return n&&(S.push({id:"disponibles",label:`Nouvelles demandes (${c.length})`}),S.push({id:"assignees",label:`En cours de traitement (${m.length})`}),S.push({id:"a-valider",label:`Demandes  valider (${x.length})`})),l&&S.push({id:"demandes",label:`Demandes  valuer (${m.length})`}),S},[I,n,l,c.length,m.length,x.length]);Jr({title:"Demandes de reconnaissance",tabs:T,activeTab:f,onTabChange:p}),d.useEffect(()=>{if(I&&!w){const S=r.get("tab");S&&["disponibles","assignees","a-valider","demandes"].includes(S)?p(S):p(n?"disponibles":"demandes"),L()}},[I,n,w,r]);const L=async()=>{try{if(g(!0),n){const[S,$,D]=await Promise.all([gt.getDemandesATraiter(le.EN_ATTENTE),gt.getDemandesAssigneesParManager(),gt.getDemandesEnAttenteValidation()]);o(S),j($),h(D)}else{const S=await gt.getDemandesAssignees();j(S)}y(null),R(!0)}catch(S){y(S instanceof Error?S.message:"Erreur lors du chargement")}finally{g(!1)}};d.useEffect(()=>{const S=s.state;S!=null&&S.refresh&&f&&n&&(J(),t(s.pathname+s.search,{replace:!0,state:{}}))},[s.state]);const J=async()=>{try{g(!0);const[S,$,D]=await Promise.all([gt.getDemandesATraiter(le.EN_ATTENTE),gt.getDemandesAssigneesParManager(),gt.getDemandesEnAttenteValidation()]);o(S),j($),h(D),y(null)}catch(S){y(S instanceof Error?S.message:"Erreur lors du rafrachissement")}finally{g(!1)}},Q=async()=>{n?await J():await L()},W=S=>{k(S),E(!0)},ce=async(S,$)=>{if(P)try{await gt.assignerDemandeAuRh(P,{rhId:S,commentaire:$}),await Q(),E(!1),k(null)}catch(D){alert(D instanceof Error?D.message:"Erreur lors de l'assignation")}},se=S=>new Date(S).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}),be=f==="disponibles"?c:f==="assignees"?m:f==="a-valider"?x:f==="demandes"?m:[];if(!I)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsx(_s,{})});if(!n&&!l)return e.jsx("div",{className:"min-h-screen bg-slate-50 p-8",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[e.jsx(Ge,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Accs refus"}),e.jsx("p",{className:"text-red-600",children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),e.jsx("p",{className:"text-sm text-red-500 mt-2",children:"Rles requis : MANAGER ou RH"})]})})});const A=()=>{switch(f){case"disponibles":return"Nouvelles demandes";case"assignees":return"Demandes en cours de traitement";case"a-valider":return"Demandes en attente de validation";case"demandes":return"Demandes  valuer";default:return"Demandes"}},z=()=>{switch(f){case"disponibles":return"Assignez ces demandes  un RH pour valuation";case"assignees":return"Suivez l'avancement des valuations en cours";case"a-valider":return"Prenez une dcision finale sur ces demandes values";case"demandes":return"valuez les comptences des experts";default:return""}};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:A()}),e.jsx("p",{className:"text-gray-600 mt-1",children:z()})]}),e.jsxs("button",{onClick:Q,disabled:u,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-white rounded-lg transition-colors border border-slate-200",children:[e.jsx(Zn,{size:18,className:u?"animate-spin":""}),e.jsx("span",{className:"hidden sm:inline",children:"Actualiser"})]})]}),v&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[e.jsx(Ge,{className:"text-red-500 flex-shrink-0",size:20}),e.jsx("p",{className:"text-red-700",children:v})]}),u?e.jsx("div",{className:"flex justify-center py-16",children:e.jsx(_s,{})}):be.length===0?e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ts,{className:"text-slate-400",size:32})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Aucune demande"}),e.jsx("p",{className:"text-gray-500",children:f==="disponibles"?"Aucune demande en attente d'assignation":f==="a-valider"?"Aucune demande en attente de validation":"Vous n'avez pas de demandes assignes"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:be.map(S=>{const $=Ly[S.statut],D=$.icon;return e.jsx("div",{className:"bg-white border border-slate-200 rounded-xl hover:border-primary/30 hover:shadow-md transition-all cursor-pointer group",onClick:()=>t(`/demandes-reconnaissance/evaluer/${S.id}`),children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-primary transition-colors",children:S.competenceNom}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium ${$.bg} ${$.text}`,children:[e.jsx(D,{size:14}),S.statut.replace(/_/g," ")]}),S.niveauVise&&e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-sm font-medium ${Do[S.niveauVise].color}`,children:[Do[S.niveauVise].emoji," ",Do[S.niveauVise].label]}),S.priorite>0&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 bg-red-100 text-red-700 text-xs font-bold rounded-full",children:["PRIORIT ",S.priorite]})]})]}),e.jsx(qr,{className:"text-gray-400 group-hover:text-primary group-hover:translate-x-1 transition-all flex-shrink-0",size:24})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx(ss,{size:16,className:"text-gray-400"}),se(S.dateCreation)]}),e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx($a,{size:16,className:"text-gray-400"}),S.nombrePieces," pice",S.nombrePieces>1?"s":""]}),S.traitantId&&e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:["|",e.jsx(Vs,{size:16,className:"text-gray-400"}),"Chez ",S.traitantNom||"RH assign"]})]}),S.commentaireExpert&&e.jsx("div",{className:"bg-slate-50 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-gray-700 line-clamp-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Motif / Justification Demande: "}),S.commentaireExpert]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-slate-100",children:[e.jsx("button",{onClick:q=>{q.stopPropagation(),t(`/demandes-reconnaissance/evaluer/${S.id}`)},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:f==="demandes"?"valuer":"Voir dtails"}),f==="disponibles"&&e.jsx("button",{onClick:q=>{q.stopPropagation(),W(S.id)},className:"px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors text-sm font-medium",children:"Assigner  un RH"}),(f==="assignees"||f==="a-valider")&&n&&e.jsx("button",{onClick:q=>{q.stopPropagation(),W(S.id)},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium",children:"Rassigner"})]})]})},S.id)})})]}),e.jsx(cf,{isOpen:b,onClose:()=>{E(!1),k(null)},onConfirm:ce})]})}const Iy={default:{icone:Ki,classeIcone:"text-primary",classeFond:"bg-primary/10",classeBouton:"bg-primary hover:bg-primary/90"},warning:{icone:Ge,classeIcone:"text-amber-600",classeFond:"bg-amber-100",classeBouton:"bg-amber-500 hover:bg-amber-600"},info:{icone:Dc,classeIcone:"text-blue-600",classeFond:"bg-blue-100",classeBouton:"bg-blue-500 hover:bg-blue-600"},danger:{icone:Ge,classeIcone:"text-red-600",classeFond:"bg-red-100",classeBouton:"bg-red-500 hover:bg-red-600"}};function Xm({isOpen:t,onClose:s,onConfirm:r,title:n,label:a,placeholder:l,description:i,type:c="textarea",required:o=!0,confirmText:m="Confirmer",cancelText:j="Annuler",maxLength:x=500,variante:h="default",raisonsPredefinis:u,conseil:g}){const[v,y]=d.useState(""),f=Iy[h],p=f.icone,b=k=>{y(w=>w.includes(k.value)?w:w?`${w}
${k.value}`:k.value)},E=()=>{o&&!v.trim()||(r(v),y(""))},P=()=>{y(""),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-3 z-50",onClick:P,children:e.jsxs("div",{className:"bg-white rounded-lg max-w-xs w-full shadow-xl animate-in fade-in zoom-in-95 duration-200",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded-md ${f.classeFond}`,children:e.jsx(p,{size:14,className:f.classeIcone})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:n}),i&&e.jsx("p",{className:"text-[10px] text-gray-500",children:i})]})]}),e.jsx("button",{onClick:P,className:"p-0.5 hover:bg-slate-100 rounded transition-colors",children:e.jsx(st,{size:14,className:"text-gray-400"})})]}),e.jsxs("div",{className:"px-3 py-2",children:[u&&u.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-[10px] font-medium text-gray-500 uppercase tracking-wide",children:"Raisons rapides"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:u.map((k,w)=>e.jsx("button",{type:"button",onClick:()=>b(k),className:`px-2 py-0.5 text-[10px] rounded-full border transition-colors ${v.includes(k.value)?"bg-primary/10 border-primary/30 text-primary":"bg-slate-50 border-slate-200 text-gray-600 hover:bg-slate-100"}`,children:k.label},w))})]}),e.jsxs("label",{className:"block text-[10px] font-medium text-gray-600 mb-1",children:[a,o&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),c==="textarea"?e.jsx("textarea",{className:"w-full px-2 py-1.5 border border-slate-200 rounded text-xs resize-none focus:ring-1 focus:ring-primary/30 focus:border-primary transition-colors",placeholder:l,value:v,onChange:k=>y(k.target.value),maxLength:x,rows:2,autoFocus:!0}):e.jsx("input",{type:"text",className:"w-full px-2 py-1.5 border border-slate-200 rounded text-xs focus:ring-1 focus:ring-primary/30 focus:border-primary transition-colors",placeholder:l,value:v,onChange:k=>y(k.target.value),maxLength:x,autoFocus:!0}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[g&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-600",children:[e.jsx(Ux,{size:10}),e.jsx("span",{children:g})]}),e.jsxs("span",{className:"text-[10px] text-gray-400 ml-auto",children:[v.length,"/",x]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-1.5 px-3 py-2 border-t border-slate-200 bg-slate-50 rounded-b-lg",children:[e.jsx("button",{onClick:P,className:"px-2 py-1 text-gray-600 hover:bg-slate-200 rounded transition-colors text-xs font-medium",children:j}),e.jsxs("button",{onClick:E,disabled:o&&!v.trim(),className:`px-2.5 py-1 text-white rounded transition-colors text-xs font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 ${f.classeBouton}`,children:[e.jsx(ys,{size:10}),m]})]})]})}):null}const zy={approuver:"Approuver la demande",rejeter:"Rejeter la demande",complement:"Demander un complment"},Oy={approuver:"Approuver",rejeter:"Rejeter",complement:"Demander"},_y={approuver:"bg-green-500 hover:bg-green-600",rejeter:"bg-red-500 hover:bg-red-600",complement:"bg-orange-500 hover:bg-orange-600"},$y={approuver:"bg-green-50 border-green-200",rejeter:"bg-red-50 border-red-200",complement:"bg-orange-50 border-orange-200"},Uy={approuver:"text-green-600",rejeter:"text-red-600",complement:"text-orange-600"},Fy={approuver:[],rejeter:[{label:"Niveau insuffisant",value:"Le niveau de matrise dmontr ne correspond pas aux critres requis."},{label:"Preuves manquantes",value:"Les pices justificatives fournies sont insuffisantes."},{label:"Exprience limite",value:"L'exprience professionnelle ne justifie pas le niveau demand."},{label:"Hors primtre",value:"La comptence ne correspond pas au rfrentiel."}],complement:[{label:"Certificat requis",value:"Merci de fournir un certificat ou attestation de formation."},{label:"Rfrences projets",value:"Veuillez ajouter des rfrences de projets raliss."},{label:"Portfolio",value:"Un portfolio ou des exemples de travaux seraient apprcis."},{label:"Prciser dure",value:"Prcisez la dure d'exprience dans ce domaine."}]};function By({isOpen:t,onClose:s,onConfirm:r,actionType:n,commentaireRh:a=""}){const[l,i]=d.useState(""),[c,o]=d.useState(!1),[m,j]=d.useState(!0),[x,h]=d.useState("");d.useEffect(()=>{t&&(i(a),j(!0),h(""))},[t,a]);const u=()=>{const f=new Date;return f.setDate(f.getDate()+1),f.toISOString().split("T")[0]},g=async()=>{if(n==="approuver"&&!m&&!x){alert("Veuillez slectionner une date d'expiration pour le badge temporaire");return}try{o(!0);const f={commentaire:l};n==="approuver"&&(f.validitePermanente=m,!m&&x&&(f.dateExpiration=x)),await r(f),s()}catch(f){console.error("Erreur lors de la confirmation:",f)}finally{o(!1)}},v=f=>{i(p=>p.includes(f.value)?p:p?`${p}
${f.value}`:f.value)},y=Fy[n];return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-3 z-50",onClick:s,children:e.jsxs("div",{className:"bg-white rounded-lg max-w-sm w-full max-h-[85vh] overflow-y-auto shadow-xl",onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:`sticky top-0 border-b px-3 py-2 flex justify-between items-center ${$y[n]}`,children:[e.jsx("h2",{className:`text-sm font-bold ${Uy[n]}`,children:zy[n]}),e.jsx("button",{onClick:s,disabled:c,className:"p-1 hover:bg-white/50 rounded disabled:opacity-50",children:e.jsx(st,{size:16})})]}),e.jsxs("div",{className:"p-3 space-y-3",children:[y.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] font-medium text-gray-500 uppercase tracking-wide",children:"Raisons rapides"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:y.map((f,p)=>e.jsx("button",{type:"button",onClick:()=>v(f),disabled:c,className:`px-2 py-0.5 text-[10px] rounded-full border transition-colors disabled:opacity-50 ${l.includes(f.value)?"bg-primary/10 border-primary/30 text-primary":"bg-slate-50 border-slate-200 text-gray-600 hover:bg-slate-100"}`,children:f.label},p))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Commentaire ",a?"(pr-rempli)":""]}),e.jsx("textarea",{value:l,onChange:f=>i(f.target.value),rows:3,className:"w-full border border-slate-200 rounded text-xs p-2 focus:ring-1 focus:ring-primary/30 focus:border-primary",placeholder:"Votre commentaire...",disabled:c}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-600",children:[e.jsx(Ux,{size:10}),e.jsx("span",{children:"Soyez clair et constructif"})]}),e.jsxs("span",{className:"text-[10px] text-gray-400",children:[l.length,"/500"]})]})]}),n==="approuver"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Type de badge"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"validite",checked:m,onChange:()=>j(!0),disabled:c,className:"radio radio-primary radio-xs"}),e.jsx("span",{className:"text-xs",children:"Permanent"})]}),e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"validite",checked:!m,onChange:()=>j(!1),disabled:c,className:"radio radio-warning radio-xs"}),e.jsx("span",{className:"text-xs",children:"Temporaire"})]})]})]}),!m&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center gap-1",children:[e.jsx(ss,{size:12}),"Expiration"]}),e.jsx("input",{type:"date",value:x,onChange:f=>h(f.target.value),min:u(),disabled:c,className:"input input-bordered input-xs w-full text-xs",required:!0})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-2 text-[11px] text-green-800",children:["Badge ",m?"permanent":"temporaire"," attribu  l'expert.",!m&&x&&e.jsxs("span",{className:"block mt-0.5 text-green-700",children:["Expire le ",new Date(x).toLocaleDateString("fr-FR")]})]})]}),n==="rejeter"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2 text-[11px] text-red-800",children:"Action dfinitive. L'expert sera notifi du rejet."}),n==="complement"&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded p-2 text-[11px] text-orange-800",children:"L'expert recevra une notification pour complter sa demande."})]}),e.jsxs("div",{className:"sticky bottom-0 bg-slate-50 border-t px-3 py-2 flex justify-end gap-2",children:[e.jsx("button",{onClick:s,disabled:c,className:"px-3 py-1 text-xs border rounded hover:bg-white disabled:opacity-50",children:"Annuler"}),e.jsx("button",{onClick:g,disabled:c,className:`px-3 py-1 text-xs text-white rounded disabled:opacity-50 ${_y[n]}`,children:c?"...":Oy[n]})]})]})}):null}const Vy=["application/pdf","image/jpeg","image/png","image/gif","image/webp","image/svg+xml","text/plain","text/html","video/mp4","video/webm","audio/mpeg","audio/wav","audio/ogg"],Hy=t=>Vy.includes(t.toLowerCase()),Km={[Pt.CERTIFICAT]:{label:"Certificat",icon:Et,color:"text-blue-600 bg-blue-50"},[Pt.DIPLOME]:{label:"Diplme",icon:Ox,color:"text-purple-600 bg-purple-50"},[Pt.PROJET]:{label:"Projet",icon:cn,color:"text-orange-600 bg-orange-50"},[Pt.RECOMMANDATION]:{label:"Recommandation",icon:Ki,color:"text-green-600 bg-green-50"},[Pt.EXPERIENCE]:{label:"Exprience",icon:Ft,color:"text-teal-600 bg-teal-50"},[Pt.PUBLICATION]:{label:"Publication",icon:Ab,color:"text-indigo-600 bg-indigo-50"},[Pt.AUTRE]:{label:"Autre",icon:ts,color:"text-gray-600 bg-gray-50"}},$l=[{statut:le.EN_ATTENTE,label:"Soumise",icon:ut},{statut:le.ASSIGNEE_RH,label:"Assigne",icon:ea},{statut:le.EN_COURS_EVALUATION,label:"En valuation",icon:ts},{statut:le.EN_ATTENTE_VALIDATION,label:" valider",icon:ze},{statut:le.APPROUVEE,label:"Approuve",icon:Qi}];function Wy(){var Ce;const{id:t}=bn(),s=jt(),{hasRole:r}=lf(),{hasRole:n}=of(),a=xl(),[l,i]=d.useState(null),[c,o]=d.useState(!0),[m,j]=d.useState(!1),[x,h]=d.useState(null),[u,g]=d.useState([]),[v,y]=d.useState({}),[f,p]=d.useState(!1),[b,E]=d.useState(Ta.EN_COURS),[P,k]=d.useState(""),[w,R]=d.useState(30),[I,T]=d.useState({}),[L,J]=d.useState(""),[Q,W]=d.useState(!1),[ce,se]=d.useState(!1),[be,A]=d.useState(!1),[z,S]=d.useState(!1),[$,D]=d.useState(!1),[q,ie]=d.useState("approuver"),[me,Pe]=d.useState(!1),[Ne,Le]=d.useState(!0),[Y,ve]=d.useState(""),[O,re]=d.useState(null),[ne,we]=d.useState(!1),U=r&&(l==null?void 0:l.statut)===le.EN_ATTENTE_VALIDATION,H=n&&!U&&((l==null?void 0:l.statut)===le.ASSIGNEE_RH||(l==null?void 0:l.statut)===le.EN_COURS_EVALUATION||(l==null?void 0:l.statut)===le.COMPLEMENT_REQUIS);Jr({title:"valuation de demande"}),d.useEffect(()=>{t&&(ke(parseInt(t),!0),ae())},[t]);const ae=async()=>{try{const X=await Cr.getMethodesEvaluation(),xe={};X.forEach(fe=>{xe[fe.id]=fe.libelle}),T(xe)}catch(X){console.error("Erreur chargement mthodes:",X)}},ke=async(X,xe=!1)=>{var fe;try{xe&&o(!0);const Oe=await gt.getDemandeDetails(X);i(Oe);let _e;if((fe=Oe.evaluation)!=null&&fe.criteres)try{_e=JSON.parse(Oe.evaluation.criteres)}catch{}if(!Oe.competenceReferenceId){h("La comptence n'est pas lie  une comptence de rfrence.");return}await Te(Oe.competenceReferenceId,_e),Oe.evaluation&&(E(Oe.evaluation.recommandation),k(Oe.evaluation.commentaire||""),R(Oe.evaluation.tempsEvaluationMinutes||30)),h(null)}catch(Oe){h(Oe instanceof Error?Oe.message:"Erreur lors du chargement")}finally{o(!1)}},Te=async(X,xe)=>{try{p(!0);const fe=await fetch(`/api/competences-reference/${X}`);if(!fe.ok){h("Comptence de rfrence non trouve");return}const _e=(await fe.json()).domaineCompetenceId;if(!_e){h("Aucun domaine de comptence dfini");return}const nt=await fetch(`/api/referentiels/domaines-competence/${_e}`);if(nt.ok){const Bt=await nt.json();J(Bt.code||"")}const Ct=await Cr.getCriteresEvaluation(_e);if(!(Ct!=null&&Ct.length)){h("Aucun critre d'valuation dfini");return}g(Ct);const xs={};Ct.forEach(Bt=>{xs[Bt.id]=(xe==null?void 0:xe[Bt.id])??0}),y(xs)}catch{h("Erreur lors du chargement des critres")}finally{p(!1)}},Me=Object.values(v).reduce((X,xe)=>X+xe,0),pt=async()=>{if(!l)return;const X={recommandation:b,commentaire:P,tempsEvaluationMinutes:w,criteres:JSON.stringify(v),noteGlobale:Me};try{j(!0);const xe=await gt.evaluerDemande(l.id,X);xe&&i(fe=>fe?{...fe,evaluation:xe}:null),a.succes("valuation enregistre")}catch(xe){a.erreur(xe)}finally{j(!1)}},At=async()=>{if(l)try{j(!0);const X={recommandation:b,commentaire:P,tempsEvaluationMinutes:w,criteres:JSON.stringify(v),noteGlobale:Me};await gt.evaluerDemande(l.id,X),await gt.soumettreEvaluationAuManager(l.id),a.succes("Soumise au Manager"),setTimeout(()=>s("/demandes-reconnaissance",{state:{refresh:!0}}),2e3)}catch(X){a.erreur(X),j(!1)}},V=async()=>{if(l){if(!Ne&&!Y){a.avertissement("Date d'expiration requise");return}try{j(!0);const X=!Ne&&Y?`${Y}T23:59:59`:void 0;await gt.approuverDemande(l.id,{commentaire:P,validitePermanente:Ne,dateExpiration:X}),a.succes("Demande approuve ! Badge attribu."),setTimeout(()=>s("/demandes-reconnaissance",{state:{refresh:!0}}),2e3)}catch(X){a.erreur(X),j(!1)}}},je=async X=>{if(l)try{j(!0),await gt.rejeterDemande(l.id,X),a.info("Demande rejete"),setTimeout(()=>s("/demandes-reconnaissance",{state:{refresh:!0}}),2e3)}catch(xe){a.erreur(xe),j(!1)}},Se=async X=>{if(l)try{j(!0),await gt.demanderComplement(l.id,X),a.info("Complment demand"),setTimeout(()=>s("/demandes-reconnaissance",{state:{refresh:!0}}),2e3)}catch(xe){a.erreur(xe),j(!1)}},Re=async()=>{if(l)try{we(!0);const X=await Ys.getCompetenceUtilisateur(l.utilisateurId,l.competenceId);re(X),S(!0)}catch{a.erreur("Erreur lors du chargement de la comptence")}finally{we(!1)}},Ve=X=>{ie(X),D(!0)},rt=async X=>{if(l)try{if(j(!0),q==="approuver"){const xe=X.validitePermanente===!1&&X.dateExpiration?`${X.dateExpiration}T23:59:59`:void 0;await gt.approuverDemandeManager(l.id,{commentaire:X.commentaire,validitePermanente:X.validitePermanente??!0,dateExpiration:xe}),a.succes("Demande approuve")}else q==="rejeter"?(await gt.rejeterDemandeManager(l.id,X.commentaire),a.info("Demande rejete")):(await gt.demanderComplementManager(l.id,X.commentaire),a.info("Complment demand"));setTimeout(()=>s("/demandes-reconnaissance?tab=a-valider",{state:{refresh:!0}}),2e3)}catch(xe){a.erreur(xe)}finally{j(!1)}},yt=async(X,xe)=>{if(l)try{await gt.assignerDemandeAuRh(l.id,{rhId:X,commentaire:xe}),a.succes("Demande rassigne"),Pe(!1),await ke(l.id)}catch(fe){a.erreur(fe)}},rs=()=>{if(!l)return 0;const X=$l.findIndex(xe=>xe.statut===l.statut);return X>=0?X:$l.length-1},Mt=X=>e.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(xe=>e.jsx($r,{size:16,className:xe<=X?"fill-amber-400 text-amber-400":"text-gray-300"},xe))});if(c)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsx(_s,{})});if(!l)return e.jsx("div",{className:"min-h-screen bg-slate-50 p-8",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[e.jsx(Ge,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-semibold text-red-800",children:"Demande non trouve"})]})})});const F=rs();return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("div",{className:"sticky top-16 z-30 bg-white border-b border-slate-200 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/demandes-reconnaissance"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(Os,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("button",{onClick:Re,disabled:ne,className:"text-xl font-bold text-gray-900 hover:text-primary transition-colors text-left",children:l.competenceNom}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 flex-wrap",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Niveau vis : ",e.jsx("span",{className:"font-medium text-gray-700",children:L?ry(L):"-"})]}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(l.dateCreation).toLocaleDateString("fr-FR")}),l.traitantNom&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Trait par : ",e.jsx("span",{className:"font-medium text-primary",children:l.traitantNom})]})]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:r&&(l.statut===le.ASSIGNEE_RH||l.statut===le.EN_COURS_EVALUATION||l.statut===le.EN_ATTENTE_VALIDATION)&&e.jsxs("button",{onClick:()=>Pe(!0),className:"flex items-center gap-2 px-4 py-2 text-orange-700 bg-orange-100 hover:bg-orange-200 rounded-lg transition-colors text-sm font-medium",children:[e.jsx(Zn,{size:16}),"Rassigner"]})})]}),e.jsx("div",{className:"mt-4 flex items-center justify-between",children:$l.map((X,xe)=>{const fe=X.icon,Oe=xe<F,_e=xe===F,nt=l.statut===le.REJETEE;return e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all ${nt&&_e?"bg-red-100 text-red-600":Oe?"bg-emerald-100 text-emerald-600":_e?"bg-primary/10 text-primary ring-2 ring-primary":"bg-slate-100 text-slate-400"}`,children:nt&&_e?e.jsx(ds,{size:20}):e.jsx(fe,{size:20})}),e.jsx("span",{className:`text-xs mt-1 font-medium ${nt&&_e?"text-red-600":Oe||_e?"text-gray-900":"text-gray-400"}`,children:nt&&_e?"Rejete":X.label})]}),xe<$l.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-2 ${Oe?"bg-emerald-300":"bg-slate-200"}`})]},X.statut)})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[x&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[e.jsx(Ge,{className:"text-red-500 flex-shrink-0",size:20}),e.jsx("p",{className:"text-red-700",children:x})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.commentaireExpert&&e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Ki,{size:18,className:"text-gray-400"}),"Motif / Justification Demande :"]}),e.jsx("p",{className:"text-gray-700 text-justify",children:l.commentaireExpert})]}),l.commentaireManagerAssignation&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-5",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(ea,{size:18,className:"text-blue-600"}),"Instructions du Manager"]}),e.jsx("p",{className:"text-blue-800 text-justify",children:l.commentaireManagerAssignation})]}),l.pieces&&l.pieces.length>0&&e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx($a,{size:18,className:"text-gray-400"}),"Pices justificatives (",l.pieces.length,")"]}),e.jsx("div",{className:"space-y-1.5",children:l.pieces.map(X=>{const xe=Km[X.typePiece]||Km[Pt.AUTRE],fe=xe.icon,Oe=(X.tailleOctets/1024).toFixed(0),nt=Hy(X.typeMime)?`/api/files/view/${X.urlFichier}`:`/api/files/download/${X.urlFichier}`;return e.jsxs("div",{className:"flex items-center gap-2.5 py-2 px-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsx("div",{className:`p-1.5 rounded ${xe.color}`,children:e.jsx(fe,{size:16})}),e.jsx("a",{href:nt,target:"_blank",rel:"noopener noreferrer",className:"flex-1 min-w-0 hover:text-primary transition-colors",children:e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate block hover:text-primary",children:X.description||X.nomOriginal})}),e.jsxs("span",{className:"text-xs text-gray-400",children:[Oe," Ko"]}),X.estVerifie&&e.jsx(Qi,{className:"text-emerald-500 flex-shrink-0",size:14}),e.jsx("a",{href:`/api/files/download/${X.urlFichier}`,target:"_blank",rel:"noopener noreferrer",className:"p-1 text-gray-400 hover:text-primary transition-colors",title:"Tlcharger",children:e.jsx(Dx,{size:14})})]},X.id)})})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ts,{size:18,className:"text-gray-400"}),"valuation"]}),f?e.jsx("div",{className:"text-center py-8",children:e.jsx(_s,{})}):u.length>0?e.jsxs("div",{className:"space-y-4",children:[u.map(X=>{var nt;const xe=Math.round(100/u.length),fe=((nt=X.methodeIds)==null?void 0:nt.map(Ct=>I[Ct]).filter(Boolean))||[],Oe=v[X.id]||0,_e=Oe/xe*100;return e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:X.libelle}),e.jsxs("span",{className:"text-sm font-semibold text-primary",children:[Oe,"/",xe]})]}),X.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:X.description}),fe.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:fe.map((Ct,xs)=>e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded-full",children:Ct},xs))}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${_e}%`}})}),e.jsx("input",{type:"range",min:"0",max:xe,value:Oe,onChange:Ct=>y({...v,[X.id]:parseInt(Ct.target.value)}),disabled:!H,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed"})]})]},X.id)}),e.jsx("div",{className:"p-4 bg-primary/5 rounded-lg border border-primary/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Note globale"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Me,"/100"]})]})})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Dc,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Aucun critre d'valuation dfini"})]})]})]}),e.jsxs("div",{className:"lg:sticky lg:top-36 lg:self-start space-y-4",children:[e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Recommandation"}),e.jsx("div",{className:"space-y-2",children:[{value:Ta.APPROUVER,label:"Approuver",icon:ze,color:"text-emerald-600"},{value:Ta.REJETER,label:"Rejeter",icon:ds,color:"text-red-600"},{value:Ta.DEMANDER_COMPLEMENT,label:"Demander complment",icon:Dc,color:"text-orange-600"}].map(({value:X,label:xe,icon:fe,color:Oe})=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${b===X?"bg-slate-100":"hover:bg-slate-50"} ${H?"":"opacity-60 cursor-not-allowed"}`,children:[e.jsx("input",{type:"radio",name:"recommandation",value:X,checked:b===X,onChange:()=>E(X),disabled:!H,className:"sr-only"}),e.jsx(fe,{size:20,className:Oe}),e.jsx("span",{className:"font-medium text-gray-900",children:xe}),b===X&&e.jsx(ze,{size:16,className:"ml-auto text-primary"})]},X))})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Commentaire"}),e.jsx("textarea",{value:P,onChange:X=>k(X.target.value),rows:4,className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary resize-none",placeholder:"Votre valuation dtaille...",disabled:!H})]}),!1,H&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:pt,disabled:m,className:"w-full py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[m&&e.jsx("span",{className:"loading loading-spinner loading-sm"}),"Enregistrer l'valuation"]}),l.evaluation&&(l.statut===le.ASSIGNEE_RH||l.statut===le.EN_COURS_EVALUATION)&&e.jsxs("button",{onClick:At,disabled:m,className:"w-full py-3 bg-purple-600 text-white rounded-xl font-medium hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[m?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsx(ys,{size:18}),"Soumettre au Manager"]})]}),U&&l.evaluation&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Dcision finale"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>Ve("approuver"),disabled:m,className:"w-full py-2.5 bg-emerald-500 text-white rounded-lg font-medium hover:bg-emerald-600 transition-colors disabled:opacity-50",children:"Approuver"}),e.jsx("button",{onClick:()=>Ve("rejeter"),disabled:m,className:"w-full py-2.5 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50",children:"Rejeter"}),e.jsx("button",{onClick:()=>Ve("complement"),disabled:m,className:"w-full py-2.5 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors disabled:opacity-50",children:"Demander complment"})]})]})]})]})]}),e.jsx(By,{isOpen:$,onClose:()=>D(!1),onConfirm:rt,actionType:q,commentaireRh:((Ce=l==null?void 0:l.evaluation)==null?void 0:Ce.commentaire)||""}),e.jsx(Xm,{isOpen:ce,onClose:()=>se(!1),onConfirm:X=>{se(!1),je(X)},title:"Rejeter la demande",description:"Action dfinitive",label:"Motif du rejet",placeholder:"Dtaillez les raisons...",confirmText:"Rejeter",maxLength:500,variante:"danger",raisonsPredefinis:[{label:"Niveau insuffisant",value:"Le niveau de matrise dmontr ne correspond pas aux critres requis."},{label:"Preuves manquantes",value:"Les pices justificatives fournies sont insuffisantes ou non conformes."},{label:"Exprience limite",value:"L'exprience professionnelle ne justifie pas le niveau demand."},{label:"Hors primtre",value:"La comptence ne correspond pas au rfrentiel de certification."}],conseil:"Soyez prcis et constructif"}),e.jsx(Xm,{isOpen:be,onClose:()=>A(!1),onConfirm:X=>{A(!1),Se(X)},title:"Demander un complment",description:"Expert notifi",label:"Informations requises",placeholder:"Prcisez ce qui manque...",confirmText:"Envoyer",maxLength:500,variante:"info",raisonsPredefinis:[{label:"Certificat",value:"Merci de fournir un certificat ou attestation de formation."},{label:"Rfrences",value:"Veuillez ajouter des rfrences de projets raliss."},{label:"Portfolio",value:"Un portfolio ou des exemples de travaux seraient apprcis."},{label:"Dure",value:"Prcisez la dure d'exprience dans ce domaine."}],conseil:"L'expert pourra complter sa demande"}),e.jsx(cf,{isOpen:me,onClose:()=>Pe(!1),onConfirm:yt}),z&&O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>S(!1),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full shadow-xl",onClick:X=>X.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(Et,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:O.nom}),e.jsx("div",{className:"flex items-center gap-1 mt-0.5",children:Mt(O.niveauMaitrise||0)})]})]}),e.jsx("button",{onClick:()=>S(!1),className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(ds,{size:18,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-5",children:[O.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:O.description}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{className:"flex-1 text-center py-2 px-3 bg-slate-50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:O.anneesExperience||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ans exp."})]}),e.jsxs("div",{className:"flex-1 text-center py-2 px-3 bg-slate-50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:O.nombreProjets||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"projets"})]}),e.jsxs("div",{className:"flex-1 text-center py-2 px-3 bg-slate-50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:O.thm||"-"}),e.jsx("p",{className:"text-xs text-gray-500",children:"FCFA/h"})]})]}),O.certifications&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 rounded-lg text-sm",children:[e.jsx(Ox,{size:16,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-blue-700",children:O.certifications})]})]})]})}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-600 mb-4",children:"Approuver la demande"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Un badge sera automatiquement attribu  l'expert."}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer ${Ne?"border-primary bg-primary/5":"border-slate-200"}`,children:[e.jsx("input",{type:"radio",checked:Ne,onChange:()=>{Le(!0),ve("")},className:"mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Validit permanente"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Le badge n'expirera jamais"})]})]}),e.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer ${Ne?"border-slate-200":"border-primary bg-primary/5"}`,children:[e.jsx("input",{type:"radio",checked:!Ne,onChange:()=>Le(!1),className:"mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Validit limite"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Le badge expirera  une date dfinie"})]})]})]}),!Ne&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date d'expiration"}),e.jsx("input",{type:"date",value:Y,onChange:X=>ve(X.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-slate-200 rounded-lg"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>W(!1),disabled:m,className:"flex-1 py-2.5 border border-slate-200 rounded-lg font-medium hover:bg-slate-50 disabled:opacity-50",children:"Annuler"}),e.jsxs("button",{onClick:V,disabled:m||!Ne&&!Y,className:"flex-1 py-2.5 bg-emerald-500 text-white rounded-lg font-medium hover:bg-emerald-600 disabled:opacity-50 flex items-center justify-center gap-2",children:[m&&e.jsx("span",{className:"loading loading-spinner loading-sm"}),"Approuver"]})]})]})})]})}function qy(){const t=jt(),[s]=Vd(),r=s.get("email")||"",[n,a]=d.useState(!1),[l,i]=d.useState(""),[c,o]=d.useState("");d.useEffect(()=>{r||t("/")},[r,t]);const m=async()=>{a(!0),i(""),o("");try{const x=await(await fetch("/api/auth/renvoyer-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})})).json();x.success?i(x.message):o(x.message||"Une erreur est survenue")}catch{o("Impossible de renvoyer l'email. Veuillez ressayer.")}finally{a(!1)}};return e.jsx("div",{className:"min-h-screen bg-base-200 flex items-center justify-center p-4",children:e.jsx("div",{className:"card bg-base-100 shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(_r,{className:"w-10 h-10 text-primary"})})}),e.jsx("h1",{className:"text-xl font-bold sm:text-2xl",children:"Vrifiez votre email"}),e.jsx("p",{className:"text-base-content/70 mt-2 text-sm sm:text-base",children:"Nous avons envoy un lien de vrification  :"}),e.jsx("p",{className:"font-semibold text-primary break-all text-sm sm:text-base",children:r}),e.jsxs("div",{className:"bg-info/10 rounded-lg p-4 mt-4 text-left",children:[e.jsx("h3",{className:"font-semibold text-info mb-2 text-sm sm:text-base",children:"Prochaines tapes :"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs sm:text-sm text-base-content/80",children:[e.jsx("li",{children:"Ouvrez votre bote mail"}),e.jsx("li",{children:`Recherchez l'email de "Plateforme Intermediation"`}),e.jsx("li",{children:"Cliquez sur le lien de vrification"}),e.jsx("li",{children:"Connectez-vous  votre compte"})]})]}),e.jsx("div",{className:"alert alert-warning mt-4 text-xs sm:text-sm",children:e.jsx("span",{children:"Le lien expire dans 72 heures"})}),l&&e.jsxs("div",{className:"alert alert-success mt-4 text-xs sm:text-sm",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{children:l})]}),c&&e.jsx("div",{className:"alert alert-error mt-4 text-xs sm:text-sm",children:e.jsx("span",{children:c})}),e.jsxs("div",{className:"card-actions flex-col gap-2 mt-6",children:[e.jsxs("button",{className:`btn btn-outline btn-primary w-full ${n?"loading":""}`,onClick:m,disabled:n,children:[!n&&e.jsx(Zn,{className:"w-4 h-4 mr-2"}),n?"Envoi en cours...":"Renvoyer l'email"]}),e.jsxs("button",{className:"btn btn-ghost w-full text-sm",onClick:()=>t("/"),children:[e.jsx(Os,{className:"w-4 h-4 mr-2"}),"Retour  l'accueil"]})]}),e.jsx("p",{className:"text-xs text-base-content/50 mt-4",children:"Vous ne trouvez pas l'email ? Vrifiez vos spams ou courriers indsirables."})]})})})}function Jy(){const t=jt(),[s]=Vd(),r=s.get("token")||"",{openAuthModal:n}=Es(),[a,l]=d.useState("chargement"),[i,c]=d.useState(""),[o,m]=d.useState(""),[j,x]=d.useState(!1);d.useEffect(()=>{if(!r){l("erreur"),c("Lien de vrification invalide.");return}h()},[r]);const h=async()=>{l("chargement");try{const y=await(await fetch(`/api/auth/verifier-email?token=${encodeURIComponent(r)}`)).json();y.success?(l("succes"),c(y.message)):y.tokenExpire?(l("expire"),c(y.message)):(l("erreur"),c(y.message||"Une erreur est survenue"))}catch{l("erreur"),c("Impossible de vrifier votre email. Veuillez ressayer.")}},u=async()=>{if(o){x(!0);try{(await(await fetch("/api/auth/renvoyer-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})})).json()).success&&t(`/confirmation-inscription?email=${encodeURIComponent(o)}`)}catch{}finally{x(!1)}}},g=()=>{n(),t("/")};return e.jsx("div",{className:"min-h-screen bg-base-200 flex items-center justify-center p-4",children:e.jsx("div",{className:"card bg-base-100 shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"card-body text-center",children:[a==="chargement"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Vb,{className:"w-16 h-16 text-primary animate-spin"})}),e.jsx("h1",{className:"text-xl font-bold sm:text-2xl",children:"Vrification en cours..."}),e.jsx("p",{className:"text-base-content/70 mt-2 text-sm sm:text-base",children:"Veuillez patienter pendant que nous vrifions votre email."})]}),a==="succes"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-success/10 flex items-center justify-center",children:e.jsx(ze,{className:"w-12 h-12 text-success"})})}),e.jsx("h1",{className:"text-xl font-bold text-success sm:text-2xl",children:"Email vrifi !"}),e.jsx("p",{className:"text-base-content/70 mt-2 text-sm sm:text-base",children:i}),e.jsx("div",{className:"bg-success/10 rounded-lg p-4 mt-4",children:e.jsx("p",{className:"text-sm text-success-content",children:"Votre compte est maintenant actif. Vous pouvez vous connecter et profiter de toutes les fonctionnalits."})}),e.jsxs("div",{className:"card-actions flex-col gap-2 mt-6",children:[e.jsxs("button",{className:"btn btn-primary w-full",onClick:g,children:[e.jsx(_c,{className:"w-4 h-4 mr-2"}),"Se connecter"]}),e.jsx("button",{className:"btn btn-ghost w-full text-sm",onClick:()=>t("/"),children:"Retour  l'accueil"})]})]}),a==="expire"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-warning/10 flex items-center justify-center",children:e.jsx(Zn,{className:"w-12 h-12 text-warning"})})}),e.jsx("h1",{className:"text-xl font-bold text-warning sm:text-2xl",children:"Lien expir"}),e.jsx("p",{className:"text-base-content/70 mt-2 text-sm sm:text-base",children:i}),e.jsxs("div",{className:"form-control mt-4",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text text-sm",children:"Entrez votre email pour recevoir un nouveau lien :"})}),e.jsx("input",{type:"email",placeholder:"votre@email.com",className:"input input-bordered w-full",value:o,onChange:v=>m(v.target.value)})]}),e.jsxs("div",{className:"card-actions flex-col gap-2 mt-4",children:[e.jsxs("button",{className:`btn btn-primary w-full ${j?"loading":""}`,onClick:u,disabled:j||!o,children:[!j&&e.jsx(Zn,{className:"w-4 h-4 mr-2"}),j?"Envoi en cours...":"Renvoyer le lien"]}),e.jsx("button",{className:"btn btn-ghost w-full text-sm",onClick:()=>t("/"),children:"Retour  l'accueil"})]})]}),a==="erreur"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-error/10 flex items-center justify-center",children:e.jsx(ds,{className:"w-12 h-12 text-error"})})}),e.jsx("h1",{className:"text-xl font-bold text-error sm:text-2xl",children:"Erreur de vrification"}),e.jsx("p",{className:"text-base-content/70 mt-2 text-sm sm:text-base",children:i}),e.jsx("div",{className:"alert alert-info mt-4 text-xs sm:text-sm text-left",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Que faire ?"}),e.jsxs("ul",{className:"list-disc list-inside mt-1",children:[e.jsx("li",{children:"Vrifiez que vous avez utilis le bon lien"}),e.jsx("li",{children:"Le lien peut avoir dj t utilis"}),e.jsx("li",{children:"Demandez un nouveau lien de vrification"})]})]})}),e.jsx("div",{className:"card-actions flex-col gap-2 mt-6",children:e.jsx("button",{className:"btn btn-primary w-full",onClick:()=>t("/"),children:"Retour  l'accueil"})})]})]})})})}const Gy=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[a,l]=d.useState(!0),[i,c]=d.useState(""),[o,m]=d.useState(new Set),[j,x]=d.useState(!1),[h,u]=d.useState(null),[g,v]=d.useState(null),[y,f]=d.useState(null),[p,b]=d.useState(!1),[E,P]=d.useState(null),[k,w]=d.useState(null);d.useEffect(()=>{R()},[]);const R=async()=>{try{l(!0);const[S,$]=await Promise.all([fetch("/api/domaines-metier").then(D=>D.json()),fetch("/api/domaines-metier/sous-domaines").then(D=>D.json())]);s(Array.isArray(S)?S:[]),n(Array.isArray($)?$:[])}catch(S){console.error("Erreur lors du chargement:",S),w({type:"error",text:"Erreur lors du chargement des donnes"})}finally{l(!1)}},I=async()=>{if(!i){R();return}try{l(!0);const $=await(await fetch(`/api/domaines-metier/recherche?terme=${encodeURIComponent(i)}`)).json();s(Array.isArray($)?$:[])}catch(S){console.error("Erreur lors de la recherche:",S),w({type:"error",text:"Erreur lors de la recherche"})}finally{l(!1)}},T=S=>{const $=new Set(o);$.has(S)?$.delete(S):$.add(S),m($)},L=()=>{u("domaine"),v({id:0,code:"",libelle:"",description:"",icone:"",couleur:"#3B82F6",popularite:0,estActif:!0,nombreSousDomaines:0}),x(!0)},J=S=>{u("domaine"),v({...S}),x(!0)},Q=async()=>{if(!g||!g.libelle.trim()){w({type:"error",text:"Le libell du domaine est obligatoire"});return}if(!g.code.trim()){w({type:"error",text:"Le code du domaine est obligatoire"});return}try{const $=JSON.parse(localStorage.getItem("user")||"{}").id||"1";let D;if(!g.id||g.id===0?D=await fetch("/api/domaines-metier",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":$},body:JSON.stringify(g)}):D=await fetch(`/api/domaines-metier/${g.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":$},body:JSON.stringify(g)}),D.ok)w({type:"success",text:g.id?"Domaine mis  jour":"Domaine cr"}),x(!1),v(null),u(null),R();else{const q=await D.json();w({type:"error",text:q.message||"Erreur lors de la sauvegarde"})}}catch(S){console.error("Erreur:",S),w({type:"error",text:"Erreur lors de la sauvegarde"})}},W=S=>{const $=t.find(D=>D.id===S);u("sousDomaine"),f({sousDomaineId:0,codeSousDomaine:"",libelleSousDomaine:"",domaineId:S,libelleDomaine:($==null?void 0:$.libelle)||"",nomComplet:"",popularite:0}),x(!0)},ce=S=>{u("sousDomaine"),f({...S}),x(!0)},se=async()=>{if(!y||!y.libelleSousDomaine.trim()){w({type:"error",text:"Le libell du sous-domaine est obligatoire"});return}if(!y.codeSousDomaine.trim()){w({type:"error",text:"Le code du sous-domaine est obligatoire"});return}try{const $=JSON.parse(localStorage.getItem("user")||"{}").id||"1",D={domaineId:y.domaineId,code:y.codeSousDomaine,libelle:y.libelleSousDomaine,description:"",popularite:y.popularite};let q;if(!y.sousDomaineId||y.sousDomaineId===0?q=await fetch("/api/domaines-metier/sous-domaines",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":$},body:JSON.stringify(D)}):q=await fetch(`/api/domaines-metier/sous-domaines/${y.sousDomaineId}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":$},body:JSON.stringify({...D,estActif:!0})}),q.ok)w({type:"success",text:y.sousDomaineId?"Sous-domaine mis  jour":"Sous-domaine cr"}),x(!1),f(null),u(null),R();else{const ie=await q.json();w({type:"error",text:ie.message||"Erreur lors de la sauvegarde"})}}catch(S){console.error("Erreur:",S),w({type:"error",text:"Erreur lors de la sauvegarde"})}},be=(S,$,D)=>{P({type:S,id:$,nom:D}),b(!0)},A=async()=>{if(E)try{const $=JSON.parse(localStorage.getItem("user")||"{}").id||"1",D=E.type==="domaine"?`/api/domaines-metier/${E.id}`:`/api/domaines-metier/sous-domaines/${E.id}`,q=await fetch(D,{method:"DELETE",headers:{"X-User-Id":$}});if(q.ok)w({type:"success",text:`${E.type==="domaine"?"Domaine":"Sous-domaine"} supprim(e)`}),b(!1),P(null),R();else{const ie=await q.json();w({type:"error",text:ie.message||"Erreur lors de la suppression"})}}catch(S){console.error("Erreur:",S),w({type:"error",text:"Erreur lors de la suppression"})}},z=S=>r.filter($=>$.domaineId===S);return e.jsx("div",{className:"p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[k&&e.jsxs("div",{className:`alert ${k.type==="success"?"alert-success":"alert-error"} mb-6`,children:[e.jsx("span",{children:k.text}),e.jsx("button",{onClick:()=>w(null),className:"btn btn-sm btn-ghost",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Domaines Mtier"}),e.jsx("div",{className:"stat-value text-primary",children:t.length})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Sous-Domaines"}),e.jsx("div",{className:"stat-value text-secondary",children:r.length})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Plus Populaire"}),e.jsx("div",{className:"stat-value text-accent",children:t.length>0?Math.max(...t.map(S=>S.popularite||0)):0})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Affichage"}),e.jsx("div",{className:"stat-value text-success",children:"Actives"}),e.jsx("div",{className:"stat-desc",children:"Uniquement actives"})]})})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl mb-6",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"form-control",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un domaine mtier...",className:"input input-bordered w-full pr-10",value:i,onChange:S=>c(S.target.value),onKeyPress:S=>S.key==="Enter"&&I()}),e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 btn btn-ghost btn-sm",onClick:I,children:e.jsx(us,{className:"w-5 h-5"})})]})})}),e.jsxs("button",{className:"btn btn-primary gap-2",onClick:L,children:[e.jsx(Ye,{className:"w-5 h-5"}),"Nouveau Domaine"]})]})})}),a?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsx("div",{className:"card-body text-center text-gray-500 py-8",children:"Aucun domaine mtier trouv"})}):t.map(S=>e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body p-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-base-200 cursor-pointer",onClick:()=>T(S.id),children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx(ia,{className:`w-5 h-5 transition-transform ${o.has(S.id)?"rotate-180":""}`}),e.jsx(Fb,{className:"w-6 h-6 text-primary",style:{color:S.couleur}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-lg",children:S.libelle}),e.jsxs("div",{className:"text-sm text-gray-500",children:[S.code,"  ",S.nombreSousDomaines||0," sous-domaine",(S.nombreSousDomaines||0)>1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx("div",{className:"badge badge-accent",children:S.popularite}),e.jsxs("div",{className:"flex gap-1 md:gap-2",onClick:$=>$.stopPropagation(),children:[e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>W(S.id),title:"Ajouter un sous-domaine",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>J(S),children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{className:"btn btn-sm btn-ghost text-error",onClick:()=>be("domaine",S.id,S.libelle),children:e.jsx(Je,{className:"w-4 h-4"})})]})]})]}),o.has(S.id)&&e.jsx("div",{className:"border-t border-base-300",children:z(S.id).length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucun sous-domaine pour ce domaine"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Sous-domaine"}),e.jsx("th",{className:"hidden md:table-cell",children:"Popularit"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:z(S.id).map($=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"badge badge-outline",children:$.codeSousDomaine})}),e.jsx("td",{children:e.jsx("span",{className:"font-semibold",children:$.libelleSousDomaine})}),e.jsx("td",{className:"hidden md:table-cell",children:e.jsx("span",{className:"badge badge-accent",children:$.popularite})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-1 md:gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>ce($),children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{className:"btn btn-sm btn-ghost text-error",onClick:()=>be("sousDomaine",$.sousDomaineId,$.libelleSousDomaine),children:e.jsx(Je,{className:"w-4 h-4"})})]})})]},$.sousDomaineId))})]})})})]})},S.id))}),j&&(g||y)&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box max-w-2xl",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:h==="domaine"?g!=null&&g.id?"Modifier le domaine":"Nouveau domaine":y!=null&&y.sousDomaineId?"Modifier le sous-domaine":"Nouveau sous-domaine"}),h==="domaine"&&g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Code *"})}),e.jsx("input",{type:"text",placeholder:"Ex: DEV",className:"input input-bordered w-full",value:g.code,onChange:S=>v({...g,code:S.target.value.toUpperCase()})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Libell *"})}),e.jsx("input",{type:"text",placeholder:"Ex: Dveloppement",className:"input input-bordered w-full",value:g.libelle,onChange:S=>v({...g,libelle:S.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Description"})}),e.jsx("textarea",{placeholder:"Description du domaine",className:"textarea textarea-bordered w-full",value:g.description,onChange:S=>v({...g,description:S.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Icne"})}),e.jsx("input",{type:"text",placeholder:"Ex: ",className:"input input-bordered w-full",value:g.icone,onChange:S=>v({...g,icone:S.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Couleur"})}),e.jsx("input",{type:"color",className:"input input-bordered w-full h-12",value:g.couleur,onChange:S=>v({...g,couleur:S.target.value})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Popularit"})}),e.jsx("input",{type:"number",className:"input input-bordered w-full",value:g.popularite,onChange:S=>v({...g,popularite:parseInt(S.target.value)||0})})]}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start gap-4",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:g.estActif,onChange:S=>v({...g,estActif:S.target.checked})}),e.jsx("span",{className:"label-text font-semibold",children:"Actif"})]})})]}),h==="sousDomaine"&&y&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Domaine mtier"})}),e.jsx("select",{className:"select select-bordered w-full",value:y.domaineId,onChange:S=>{const $=parseInt(S.target.value),D=t.find(q=>q.id===$);f({...y,domaineId:$,libelleDomaine:(D==null?void 0:D.libelle)||""})},children:t.map(S=>e.jsx("option",{value:S.id,children:S.libelle},S.id))})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Code *"})}),e.jsx("input",{type:"text",placeholder:"Ex: JAVA",className:"input input-bordered w-full",value:y.codeSousDomaine,onChange:S=>f({...y,codeSousDomaine:S.target.value.toUpperCase()})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Libell *"})}),e.jsx("input",{type:"text",placeholder:"Ex: Java",className:"input input-bordered w-full",value:y.libelleSousDomaine,onChange:S=>f({...y,libelleSousDomaine:S.target.value})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Popularit"})}),e.jsx("input",{type:"number",className:"input input-bordered w-full",value:y.popularite,onChange:S=>f({...y,popularite:parseInt(S.target.value)||0})})]})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>{x(!1),v(null),f(null),u(null)},children:"Annuler"}),e.jsx("button",{className:"btn btn-primary",onClick:h==="domaine"?Q:se,children:(h==="domaine"?g!=null&&g.id:y!=null&&y.sousDomaineId)?"Mettre  jour":"Crer"})]})]})}),p&&E&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Confirmer la suppression"}),e.jsxs("p",{className:"py-4",children:["tes-vous sr de vouloir supprimer ",E.type==="domaine"?"le domaine":"le sous-domaine"," ",e.jsx("strong",{children:E.nom})," ?",E.type==="domaine"&&e.jsx("span",{className:"block mt-2 text-warning",children:" Tous les sous-domaines de ce domaine seront galement supprims."})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>{b(!1),P(null)},children:"Annuler"}),e.jsx("button",{className:"btn btn-error",onClick:A,children:"Supprimer"})]})]})})]})})},Qy=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[a,l]=d.useState(""),[i,c]=d.useState(null),[o,m]=d.useState([]),[j,x]=d.useState([]),[h,u]=d.useState(!1),[g,v]=d.useState(null),[y,f]=d.useState(null),[p,b]=d.useState(!1),[E,P]=d.useState(null);d.useEffect(()=>{R(),k(),w()},[]);const k=async()=>{try{const A=await Cr.getDomainesCompetence();m(A)}catch(A){console.error("Erreur lors du chargement des domaines:",A)}},w=async()=>{try{const A=await Cr.getMethodesEvaluation();x(A)}catch(A){console.error("Erreur lors du chargement des mthodes:",A)}},R=async()=>{try{n(!0);const z=await(await fetch("/api/referentiels/criteres-evaluation")).json();s(Array.isArray(z)?z:[])}catch(A){console.error("Erreur lors du chargement:",A),f({type:"error",text:"Erreur lors du chargement des donnes"}),s([])}finally{n(!1)}},I=t.filter(A=>{const z=!a||A.libelle.toLowerCase().includes(a.toLowerCase())||A.code.toLowerCase().includes(a.toLowerCase()),S=!i||A.domaineId===i;return z&&S}),T=()=>{v({id:0,domaineId:o.length>0?o[0].id:0,code:"",libelle:"",description:"",estActif:!0,methodeIds:[]}),u(!0)},L=A=>{v({...A}),u(!0)},J=async()=>{if(g){if(!g.code||!g.libelle){f({type:"error",text:"Le code et le libell sont obligatoires"});return}if(!g.domaineId){f({type:"error",text:"Veuillez slectionner un domaine de comptence"});return}try{const z=JSON.parse(localStorage.getItem("user")||"{}").id||"1";let S;if(!g.id||g.id===0){const{id:$,...D}=g;S=await fetch("/api/referentiels/criteres-evaluation",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":z},body:JSON.stringify(D)})}else S=await fetch(`/api/referentiels/criteres-evaluation/${g.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":z},body:JSON.stringify(g)});if(!S.ok){const $=await S.text();throw new Error(`Erreur ${S.status}: ${$}`)}f({type:"success",text:g.id===0?"Critre cr avec succs":"Critre mis  jour avec succs"}),u(!1),v(null),R()}catch(A){console.error("Erreur lors de la sauvegarde:",A),f({type:"error",text:A instanceof Error?A.message:"Erreur lors de la sauvegarde"})}}},Q=(A,z)=>{P({id:A,libelle:z}),b(!0)},W=async()=>{if(E)try{const z=JSON.parse(localStorage.getItem("user")||"{}").id||"1",S=await fetch(`/api/referentiels/criteres-evaluation/${E.id}`,{method:"DELETE",headers:{"X-User-Id":z}});if(!S.ok){const $=await S.text();throw new Error(`Erreur ${S.status}: ${$}`)}f({type:"success",text:"Critre supprim avec succs"}),b(!1),P(null),R()}catch(A){console.error("Erreur lors de la suppression:",A),f({type:"error",text:"Erreur lors de la suppression"}),b(!1),P(null)}},ce=()=>{b(!1),P(null)},se=A=>{const z=o.find(S=>S.id===A);return(z==null?void 0:z.libelle)||"Inconnu"},be=A=>!A||A.length===0?[]:A.map(z=>{const S=j.find($=>$.id===z);return S?S.libelle:null}).filter(Boolean);return e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[y&&e.jsxs("div",{className:`alert ${y.type==="success"?"alert-success":"alert-error"} mb-6`,children:[e.jsx("span",{children:y.text}),e.jsx("button",{onClick:()=>f(null),className:"btn btn-ghost btn-sm",children:e.jsx(st,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Total Critres"}),e.jsx("div",{className:"stat-value text-primary",children:t.length})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Critres Actifs"}),e.jsx("div",{className:"stat-value text-success",children:t.filter(A=>A.estActif).length})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Domaines Couverts"}),e.jsx("div",{className:"stat-value text-accent",children:new Set(t.map(A=>A.domaineId)).size})]})})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl mb-6",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"form-control",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(us,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Rechercher un critre...",className:"input input-bordered w-full pl-10",value:a,onChange:A=>l(A.target.value)})]})})}),e.jsx("div",{className:"form-control w-full md:w-64",children:e.jsxs("select",{className:"select select-bordered",value:i||"",onChange:A=>c(A.target.value?parseInt(A.target.value):null),children:[e.jsx("option",{value:"",children:"Tous les domaines"}),o.map(A=>e.jsx("option",{value:A.id,children:A.libelle},A.id))]})}),e.jsxs("button",{onClick:T,className:"btn btn-primary gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),"Nouveau Critre"]})]})})}),r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-24",children:"Code"}),e.jsx("th",{children:"Libell"}),e.jsx("th",{className:"hidden md:table-cell",children:"Description"}),e.jsx("th",{className:"hidden lg:table-cell",children:"Domaine"}),e.jsx("th",{className:"hidden xl:table-cell",children:"Mthodes"}),e.jsx("th",{className:"w-24",children:"Statut"}),e.jsx("th",{className:"w-32",children:"Actions"})]})}),e.jsx("tbody",{children:I.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"text-center py-12 text-gray-500",children:[e.jsx(Vx,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Aucun critre trouv"})]})}):I.map(A=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono text-sm font-semibold",children:A.code}),e.jsx("td",{className:"font-medium",children:A.libelle}),e.jsx("td",{className:"hidden md:table-cell",children:e.jsx("div",{className:"text-sm text-gray-600 truncate max-w-md",children:A.description||"-"})}),e.jsx("td",{className:"hidden lg:table-cell",children:e.jsx("span",{className:"badge badge-secondary max-w-[150px] truncate",title:se(A.domaineId),children:se(A.domaineId)})}),e.jsx("td",{className:"hidden xl:table-cell",children:e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-[200px]",children:[be(A.methodeIds).length>0?be(A.methodeIds).slice(0,2).map((z,S)=>e.jsx("span",{className:"badge badge-sm badge-outline truncate max-w-[90px]",title:z,children:z},S)):e.jsx("span",{className:"text-xs text-gray-500",children:"Aucune"}),be(A.methodeIds).length>2&&e.jsxs("span",{className:"badge badge-sm badge-ghost",title:be(A.methodeIds).slice(2).join(", "),children:["+",be(A.methodeIds).length-2]})]})}),e.jsx("td",{children:A.estActif?e.jsx("span",{className:"badge badge-success",children:"Actif"}):e.jsx("span",{className:"badge badge-error",children:"Inactif"})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>L(A),className:"btn btn-ghost btn-sm",title:"Modifier",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Q(A.id,A.libelle),className:"btn btn-ghost btn-sm text-error",title:"Supprimer",children:e.jsx(Je,{className:"w-4 h-4"})})]})})]},A.id))})]})})})})]}),h&&g&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box max-w-2xl",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:g.id===0?"Nouveau Critre d'valuation":"Modifier le Critre"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Domaine de Comptence *"})}),e.jsxs("select",{className:"select select-bordered",value:g.domaineId,onChange:A=>v({...g,domaineId:parseInt(A.target.value)}),required:!0,children:[e.jsx("option",{value:"",children:"-- Slectionner --"}),o.map(A=>e.jsx("option",{value:A.id,children:A.libelle},A.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Code *"})}),e.jsx("input",{type:"text",className:"input input-bordered",value:g.code,onChange:A=>v({...g,code:A.target.value.toUpperCase()}),placeholder:"Ex: QUAL_CODE",required:!0})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Libell *"})}),e.jsx("input",{type:"text",className:"input input-bordered",value:g.libelle,onChange:A=>v({...g,libelle:A.target.value}),placeholder:"Ex: Qualit du code",required:!0})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Description"})}),e.jsx("textarea",{className:"textarea textarea-bordered h-24",value:g.description||"",onChange:A=>v({...g,description:A.target.value}),placeholder:"Description dtaille du critre..."})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Mthodes d'valuation"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 p-4 border border-base-300 rounded-lg max-h-48 overflow-y-auto",children:j.length===0?e.jsx("p",{className:"text-sm text-gray-500 col-span-2",children:"Aucune mthode disponible"}):j.map(A=>{var z;return e.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-sm",checked:((z=g.methodeIds)==null?void 0:z.includes(A.id))||!1,onChange:S=>{const $=g.methodeIds||[],D=S.target.checked?[...$,A.id]:$.filter(q=>q!==A.id);v({...g,methodeIds:D})}}),e.jsxs("span",{className:"label-text text-sm",children:[A.libelle,e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",A.typeMethode,")"]})]})]},A.id)})}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-gray-500",children:"Slectionnez une ou plusieurs mthodes d'valuation pour ce critre"})})]}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start gap-4",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:g.estActif,onChange:A=>v({...g,estActif:A.target.checked})}),e.jsx("span",{className:"label-text font-semibold",children:"Critre actif"})]})})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:()=>{u(!1),v(null)},className:"btn btn-ghost",children:"Annuler"}),e.jsxs("button",{onClick:J,className:"btn btn-primary gap-2",children:[e.jsx(Js,{className:"w-4 h-4"}),"Enregistrer"]})]})]})}),p&&E&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Confirmer la suppression"}),e.jsxs("div",{className:"alert alert-warning mb-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{children:"Cette action est irrversible !"})]}),e.jsxs("p",{className:"py-4",children:["tes-vous sr de vouloir supprimer le critre ",e.jsxs("strong",{className:"text-error",children:['"',E.libelle,'"']})," ?"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Le critre sera dsactiv et ne sera plus visible."}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:ce,className:"btn btn-ghost",children:"Annuler"}),e.jsxs("button",{onClick:W,className:"btn btn-error gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Supprimer"]})]})]})})]})},Io=[{value:"THEORIQUE",label:"Thorique"},{value:"PRATIQUE",label:"Pratique"},{value:"COMPORTEMENTAL",label:"Comportemental"},{value:"INTEGRE",label:"Intgr"}],Xy=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[a,l]=d.useState(""),[i,c]=d.useState(""),[o,m]=d.useState(!1),[j,x]=d.useState(null),[h,u]=d.useState(null),[g,v]=d.useState(!1),[y,f]=d.useState(null);d.useEffect(()=>{p()},[]);const p=async()=>{try{n(!0);const J=await(await fetch("/api/referentiels/methodes-evaluation")).json();s(Array.isArray(J)?J:[])}catch(L){console.error("Erreur lors du chargement:",L),u({type:"error",text:"Erreur lors du chargement des donnes"}),s([])}finally{n(!1)}},b=t.filter(L=>{const J=!a||L.libelle.toLowerCase().includes(a.toLowerCase())||L.code.toLowerCase().includes(a.toLowerCase()),Q=!i||L.typeMethode===i;return J&&Q}),E=()=>{x({id:0,code:"",libelle:"",description:"",typeMethode:"PRATIQUE",estActif:!0}),m(!0)},P=L=>{x({...L}),m(!0)},k=async()=>{if(j){if(!j.code||!j.libelle){u({type:"error",text:"Le code et le libell sont obligatoires"});return}try{const J=JSON.parse(localStorage.getItem("user")||"{}").id||"1";let Q;if(!j.id||j.id===0){const{id:W,...ce}=j;Q=await fetch("/api/referentiels/methodes-evaluation",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":J},body:JSON.stringify(ce)})}else Q=await fetch(`/api/referentiels/methodes-evaluation/${j.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":J},body:JSON.stringify(j)});if(!Q.ok){const W=await Q.text();throw new Error(`Erreur ${Q.status}: ${W}`)}u({type:"success",text:j.id===0?"Mthode cre avec succs":"Mthode mise  jour avec succs"}),m(!1),x(null),p()}catch(L){console.error("Erreur lors de la sauvegarde:",L),u({type:"error",text:L instanceof Error?L.message:"Erreur lors de la sauvegarde"})}}},w=(L,J)=>{f({id:L,libelle:J}),v(!0)},R=async()=>{if(y)try{const J=JSON.parse(localStorage.getItem("user")||"{}").id||"1",Q=await fetch(`/api/referentiels/methodes-evaluation/${y.id}`,{method:"DELETE",headers:{"X-User-Id":J}});if(!Q.ok){const W=await Q.text();throw new Error(`Erreur ${Q.status}: ${W}`)}u({type:"success",text:"Mthode supprime avec succs"}),v(!1),f(null),p()}catch(L){console.error("Erreur lors de la suppression:",L),u({type:"error",text:"Erreur lors de la suppression"}),v(!1),f(null)}},I=()=>{v(!1),f(null)},T=L=>{const J=Io.find(Q=>Q.value===L);return(J==null?void 0:J.label)||L};return e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[h&&e.jsxs("div",{className:`alert ${h.type==="success"?"alert-success":"alert-error"} mb-6`,children:[e.jsx("span",{children:h.text}),e.jsx("button",{onClick:()=>u(null),className:"btn btn-ghost btn-sm",children:e.jsx(st,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Total Mthodes"}),e.jsx("div",{className:"stat-value text-primary",children:t.length})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Mthodes Actives"}),e.jsx("div",{className:"stat-value text-success",children:t.filter(L=>L.estActif).length})]})}),e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Types Diffrents"}),e.jsx("div",{className:"stat-value text-accent",children:new Set(t.map(L=>L.typeMethode)).size})]})})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl mb-6",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"form-control",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(us,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Rechercher une mthode...",className:"input input-bordered w-full pl-10",value:a,onChange:L=>l(L.target.value)})]})})}),e.jsx("div",{className:"form-control w-full md:w-48",children:e.jsxs("select",{className:"select select-bordered",value:i,onChange:L=>c(L.target.value),children:[e.jsx("option",{value:"",children:"Tous les types"}),Io.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]})}),e.jsxs("button",{onClick:E,className:"btn btn-primary gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),"Nouvelle Mthode"]})]})})}),r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-24",children:"Code"}),e.jsx("th",{children:"Libell"}),e.jsx("th",{className:"hidden md:table-cell",children:"Description"}),e.jsx("th",{className:"hidden lg:table-cell",children:"Type"}),e.jsx("th",{className:"w-24",children:"Statut"}),e.jsx("th",{className:"w-32",children:"Actions"})]})}),e.jsx("tbody",{children:b.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-center py-12 text-gray-500",children:[e.jsx(Fx,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Aucune mthode trouve"})]})}):b.map(L=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono text-sm font-semibold",children:L.code}),e.jsx("td",{className:"font-medium",children:L.libelle}),e.jsx("td",{className:"hidden md:table-cell",children:e.jsx("div",{className:"text-sm text-gray-600 truncate max-w-md",children:L.description||"-"})}),e.jsx("td",{className:"hidden lg:table-cell",children:e.jsx("span",{className:"badge badge-info",children:T(L.typeMethode)})}),e.jsx("td",{children:L.estActif?e.jsx("span",{className:"badge badge-success",children:"Actif"}):e.jsx("span",{className:"badge badge-error",children:"Inactif"})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P(L),className:"btn btn-ghost btn-sm",title:"Modifier",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(L.id,L.libelle),className:"btn btn-ghost btn-sm text-error",title:"Supprimer",children:e.jsx(Je,{className:"w-4 h-4"})})]})})]},L.id))})]})})})})]}),o&&j&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box max-w-2xl",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:j.id===0?"Nouvelle Mthode d'valuation":"Modifier la Mthode"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Type de Mthode *"})}),e.jsx("select",{className:"select select-bordered",value:j.typeMethode,onChange:L=>x({...j,typeMethode:L.target.value}),required:!0,children:Io.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Code *"})}),e.jsx("input",{type:"text",className:"input input-bordered",value:j.code,onChange:L=>x({...j,code:L.target.value.toUpperCase()}),placeholder:"Ex: QCM",required:!0})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Libell *"})}),e.jsx("input",{type:"text",className:"input input-bordered",value:j.libelle,onChange:L=>x({...j,libelle:L.target.value}),placeholder:"Ex: Questionnaire  choix multiples",required:!0})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Description"})}),e.jsx("textarea",{className:"textarea textarea-bordered h-24",value:j.description||"",onChange:L=>x({...j,description:L.target.value}),placeholder:"Description dtaille de la mthode..."})]}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start gap-4",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:j.estActif,onChange:L=>x({...j,estActif:L.target.checked})}),e.jsx("span",{className:"label-text font-semibold",children:"Mthode active"})]})})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:()=>{m(!1),x(null)},className:"btn btn-ghost",children:"Annuler"}),e.jsxs("button",{onClick:k,className:"btn btn-primary gap-2",children:[e.jsx(Js,{className:"w-4 h-4"}),"Enregistrer"]})]})]})}),g&&y&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Confirmer la suppression"}),e.jsxs("div",{className:"alert alert-warning mb-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{children:"Cette action est irrversible !"})]}),e.jsxs("p",{className:"py-4",children:["tes-vous sr de vouloir supprimer la mthode ",e.jsxs("strong",{className:"text-error",children:['"',y.libelle,'"']})," ?"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"La mthode sera dsactive et ne sera plus visible."}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:I,className:"btn btn-ghost",children:"Annuler"}),e.jsxs("button",{onClick:R,className:"btn btn-error gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Supprimer"]})]})]})})]})},Ky={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg"},Yy={online:"bg-success",offline:"bg-gray-400",busy:"bg-warning",none:""};function Ym({utilisateurId:t,nom:s,prenom:r,photoUrl:n,hasPhoto:a,size:l="md",className:i="",indicateur:c="none",onClick:o}){const[m,j]=d.useState(!1),x=()=>{var b,E;const f=((b=r==null?void 0:r.charAt(0))==null?void 0:b.toUpperCase())||"",p=((E=s==null?void 0:s.charAt(0))==null?void 0:E.toUpperCase())||"";return`${f}${p}`||"?"},h=()=>{const f=["from-primary to-secondary","from-blue-500 to-purple-500","from-green-500 to-teal-500","from-orange-500 to-red-500","from-pink-500 to-rose-500","from-indigo-500 to-blue-500","from-cyan-500 to-blue-500","from-emerald-500 to-green-500"],p=t||`${r}${s}`||"default";let b=0;for(let P=0;P<p.length;P++)b=p.charCodeAt(P)+((b<<5)-b);const E=Math.abs(b)%f.length;return f[E]},g=a===!1?null:n||(t?`/api/profil/public/${t}/photo`:null),v=g&&!m,y=`
    ${Ky[l]}
    rounded-full
    flex-shrink-0
    relative
    ${o?"cursor-pointer hover:ring-2 hover:ring-primary/50 transition-all":""}
    ${i}
  `;return e.jsxs("div",{className:y,onClick:o,children:[v?e.jsx("img",{src:g,alt:`${r} ${s}`,className:"w-full h-full rounded-full object-cover",onError:()=>j(!0)}):e.jsx("div",{className:`w-full h-full rounded-full bg-gradient-to-br ${h()} flex items-center justify-center text-white font-semibold`,children:x()}),c!=="none"&&e.jsx("span",{className:`absolute bottom-0 right-0 w-3 h-3 ${Yy[c]} rounded-full border-2 border-white`})]})}const Zm={EN_ATTENTE:{label:"Non lu",color:"badge-warning",icon:ut},LUE:{label:"Lu",color:"badge-info",icon:qt},REPONDUE:{label:"Rpondu",color:"badge-success",icon:Rb},ARCHIVEE:{label:"Archiv",color:"badge-ghost",icon:Lx}};function Zy(){var A;const t=xl(),s=jt(),[r,n]=d.useState("recus"),[a,l]=d.useState([]),[i,c]=d.useState([]),[o,m]=d.useState(null),[j,x]=d.useState(!0),[h,u]=d.useState(!1),[g,v]=d.useState(0),[y,f]=d.useState(""),[p,b]=d.useState(!1),[E,P]=d.useState("liste");Jr({}),d.useEffect(()=>{k()},[]);const k=async()=>{try{x(!0);const[z,S,$]=await Promise.all([br.getDemandesRecues(),br.getDemandesEnvoyees(),br.compterDemandesNonLues()]);l(z),c(S),v($)}catch(z){console.error("Erreur chargement messages:",z),t.erreur("Erreur lors du chargement des messages")}finally{x(!1)}},w=async z=>{if(z.statut==="EN_ATTENTE")try{const S=await br.marquerCommeLue(z.id);l($=>$.map(D=>D.id===z.id?S:D)),m(S),v($=>Math.max(0,$-1))}catch(S){console.error("Erreur marquage lu:",S)}},R=z=>{m(z),b(!1),f(""),r==="recus"&&w(z)},I=async z=>{try{u(!0),await br.archiverDemande(z),t.succes("Message archiv"),l(S=>S.filter($=>$.id!==z)),c(S=>S.filter($=>$.id!==z)),(o==null?void 0:o.id)===z&&m(null)}catch(S){t.erreur((S==null?void 0:S.message)||"Erreur lors de l'archivage")}finally{u(!1)}},T=async()=>{if(!(!o||!y.trim()))try{u(!0),await br.envoyerDemandeContact(o.expediteurId,{objet:`RE: ${o.objet}`,message:y.trim()}),t.succes("Rponse envoye avec succs"),f(""),b(!1),k()}catch(z){t.erreur((z==null?void 0:z.message)||"Erreur lors de l'envoi de la rponse")}finally{u(!1)}},L=[{id:"recus",label:"Bote de rception",icon:zc,count:g},{id:"envoyes",label:"Messages envoys",icon:ys,count:void 0},{id:"archives",label:"Archives",icon:Lx,count:void 0}],Q=(()=>{switch(r){case"recus":return a.filter(z=>z.statut!=="ARCHIVEE");case"envoyes":return i.filter(z=>z.statut!=="ARCHIVEE");case"archives":return[...a,...i].filter(z=>z.statut==="ARCHIVEE");default:return[]}})(),W=z=>{const S=new Date(z),D=Math.floor((new Date().getTime()-S.getTime())/(1e3*60*60*24));return D===0?S.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):D===1?"Hier":D<7?S.toLocaleDateString("fr-FR",{weekday:"short"}):S.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})},ce=z=>{R(z),P("detail")},se=()=>{P("liste"),m(null)},be=z=>{n(z),m(null),P("liste")};return j?e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("span",{className:"loading loading-spinner loading-lg text-primary"})}):e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex bg-base-200",children:[e.jsxs("div",{className:`
        w-56 bg-base-100 border-r border-base-300 flex-shrink-0 flex flex-col
        ${E!=="dossiers"?"hidden lg:flex":"flex"}
      `,children:[e.jsx("div",{className:"p-4 border-b border-base-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_r,{size:20,className:"text-primary"}),e.jsx("h2",{className:"font-bold text-gray-900",children:"Messagerie"})]})}),e.jsx("nav",{className:"flex-1 p-2 space-y-1",children:L.map(z=>{const S=z.icon,$=r===z.id;return e.jsxs("button",{onClick:()=>be(z.id),className:`
                  w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left transition-all
                  ${$?"bg-primary text-white":"hover:bg-base-200 text-gray-700"}
                `,children:[e.jsx(S,{size:18}),e.jsx("span",{className:"flex-1 text-sm font-medium truncate",children:z.label}),z.count!==void 0&&z.count>0&&e.jsx("span",{className:`
                    min-w-[20px] h-5 px-1.5 rounded-full text-xs font-bold flex items-center justify-center
                    ${$?"bg-white/20 text-white":"bg-warning text-warning-content"}
                  `,children:z.count>99?"99+":z.count})]},z.id)})}),e.jsx("div",{className:"p-3 border-t border-base-200",children:e.jsxs("button",{onClick:k,disabled:j,className:"btn btn-ghost btn-sm w-full gap-2",children:[e.jsx(Zn,{size:14,className:j?"animate-spin":""}),"Actualiser"]})})]}),e.jsxs("div",{className:`
        w-80 lg:w-96 bg-base-100 border-r border-base-300 flex-shrink-0 flex flex-col
        ${E==="detail"?"hidden md:flex":"flex"}
        ${E==="dossiers"?"hidden lg:flex":""}
      `,children:[e.jsxs("div",{className:"p-3 border-b border-base-200 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>P("dossiers"),className:"btn btn-ghost btn-sm btn-circle lg:hidden",children:e.jsx(cn,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:(A=L.find(z=>z.id===r))==null?void 0:A.label}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Q.length," message",Q.length!==1?"s":""]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:Q.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-base-200 rounded-full flex items-center justify-center mb-4",children:e.jsx(zc,{size:28,className:"text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun message"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[r==="recus"&&"Les messages reus apparatront ici",r==="envoyes"&&"Les messages envoys apparatront ici",r==="archives"&&"Les messages archivs apparatront ici"]})]}):Q.map(z=>{const S=(o==null?void 0:o.id)===z.id,$=z.statut==="EN_ATTENTE"&&r==="recus",D=r==="recus"||r==="archives"?{id:z.expediteurId,nom:z.expediteurNom,prenom:z.expediteurPrenom,hasPhoto:z.expediteurHasPhoto}:{id:z.destinataireId,nom:z.destinataireNom,prenom:z.destinatairePrenom,hasPhoto:z.destinataireHasPhoto};return e.jsx("div",{onClick:()=>window.innerWidth<768?ce(z):R(z),className:`
                    p-3 border-b border-base-200 cursor-pointer transition-all
                    ${S?"bg-primary/10 border-l-4 border-l-primary":"hover:bg-base-200/50"}
                    ${$?"bg-warning/5":""}
                  `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ym,{utilisateurId:D.id,nom:D.nom,prenom:D.prenom,hasPhoto:D.hasPhoto,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:`text-sm truncate ${$?"font-bold":"font-medium"}`,children:[D.prenom," ",D.nom]}),e.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-2",children:W(z.dateCreation)})]}),e.jsx("p",{className:`text-sm truncate ${$?"font-semibold text-gray-900":"text-gray-600"}`,children:z.objet}),e.jsxs("p",{className:"text-xs text-gray-400 truncate mt-0.5",children:[z.message.substring(0,50),"..."]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[$&&e.jsx("span",{className:"w-2.5 h-2.5 bg-warning rounded-full"}),e.jsx(qr,{size:16,className:"text-gray-300 md:hidden"})]})]})},z.id)})})]}),e.jsx("div",{className:`
        flex-1 bg-base-100 flex flex-col min-w-0
        ${E!=="detail"?"hidden md:flex":"flex"}
      `,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-b border-base-200 p-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:se,className:"btn btn-ghost btn-sm btn-circle md:hidden",children:e.jsx(Os,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"font-bold text-lg truncate",children:o.objet}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[e.jsx("span",{className:`badge badge-sm ${Zm[o.statut].color}`,children:Zm[o.statut].label}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(o.dateCreation).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[r==="recus"&&!o.estNotificationSysteme&&e.jsxs("button",{onClick:()=>b(!p),className:"btn btn-ghost btn-sm gap-1",title:"Rpondre",children:[e.jsx(Tm,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Rpondre"})]}),e.jsx("button",{onClick:()=>I(o.id),className:"btn btn-ghost btn-sm text-error",disabled:h,title:"Archiver",children:e.jsx(Je,{size:16})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:[o.estNotificationSysteme&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 p-3 bg-info/10 rounded-lg border border-info/20",children:[e.jsx(Lc,{size:16,className:"text-info flex-shrink-0"}),e.jsx("span",{className:"text-sm text-info",children:"Notification systme"})]}),e.jsx("div",{className:"flex items-center gap-4 mb-6 p-4 bg-base-200/50 rounded-xl",children:o.estNotificationSysteme?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Lc,{size:24,className:"text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Systme"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Notification automatique"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ym,{utilisateurId:r==="recus"?o.expediteurId:o.destinataireId,nom:r==="recus"?o.expediteurNom:o.destinataireNom,prenom:r==="recus"?o.expediteurPrenom:o.destinatairePrenom,hasPhoto:r==="recus"?o.expediteurHasPhoto:o.destinataireHasPhoto,size:"lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:r==="recus"?`${o.expediteurPrenom} ${o.expediteurNom}`:`${o.destinatairePrenom} ${o.destinataireNom}`}),e.jsx("p",{className:"text-sm text-gray-500",children:r==="recus"?"Expditeur":"Destinataire"})]}),r==="recus"&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(Hb,{size:14}),e.jsx("span",{children:" moi"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-base-200",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:o.message})}),o.lienReference&&e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:()=>s(o.lienReference),className:"btn btn-primary btn-sm gap-2",children:[e.jsx(Ix,{size:16}),o.typeReference==="PROJET"&&"Voir le projet",o.typeReference==="TACHE"&&"Voir la tche",o.typeReference==="LIVRABLE"&&"Voir le livrable",o.typeReference==="CANDIDATURE"&&"Voir la candidature",!o.typeReference&&"Voir les dtails"]})}),o.emailReponse&&e.jsx("div",{className:"mt-4 p-3 bg-info/10 rounded-lg",children:e.jsxs("p",{className:"text-xs text-info flex items-center gap-2",children:[e.jsx(_r,{size:14}),"Email de rponse souhait : ",e.jsx("strong",{children:o.emailReponse})]})})]}),r==="recus"&&p&&!o.estNotificationSysteme&&e.jsx("div",{className:"border-t border-base-200 p-4 bg-base-50 flex-shrink-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(Tm,{size:16}),"Rpondre  ",o.expediteurPrenom]}),e.jsx("button",{onClick:()=>{b(!1),f("")},className:"btn btn-ghost btn-xs btn-circle",children:e.jsx(st,{size:14})})]}),e.jsx("textarea",{value:y,onChange:z=>f(z.target.value),placeholder:"crivez votre rponse...",className:"textarea textarea-bordered w-full text-sm resize-none",rows:4,maxLength:5e3,autoFocus:!0}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[y.length,"/5000"]}),e.jsxs("button",{onClick:T,disabled:!y.trim()||h,className:"btn btn-primary btn-sm gap-2",children:[h?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(ys,{size:14}),"Envoyer"]})]})]})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center bg-base-50",children:[e.jsx("div",{className:"w-24 h-24 bg-base-200 rounded-full flex items-center justify-center mb-6",children:e.jsx(Wb,{size:40,className:"text-gray-400"})}),e.jsx("p",{className:"text-xl font-medium text-gray-600 mb-2",children:"Slectionnez un message"}),e.jsx("p",{className:"text-sm text-gray-400 max-w-xs",children:"Cliquez sur un message dans la liste pour afficher son contenu ici"})]})})]})}const eN=db([{path:"/",element:e.jsx(pj,{}),children:[{index:!0,element:e.jsx(Lj,{})},{path:"explorer",element:e.jsx(_j,{})},{path:"rechercher",element:e.jsx(Py,{})},{path:"expertise-profil/:id",element:e.jsx(Ty,{})},{path:"reseau",element:e.jsx($j,{})},{path:"profil",element:e.jsx(_m,{})},{path:"profil/:id",element:e.jsx(_m,{})},{path:"mon-compte",element:e.jsx(fs,{children:e.jsx(Bj,{})})},{path:"expertise",element:e.jsx(fs,{children:e.jsx(ny,{})})},{path:"expertise/:competenceId",element:e.jsx(ay,{})},{path:"competences",element:e.jsx(fs,{children:e.jsx(yy,{})})},{path:"competences/pays",element:e.jsx(fs,{children:e.jsx(Ny,{})})},{path:"competences/villes",element:e.jsx(fs,{children:e.jsx(wy,{})})},{path:"competences/certifications",element:e.jsx(fs,{children:e.jsx(Ey,{})})},{path:"competences/localisations",element:e.jsx(fs,{children:e.jsx(Cy,{})})},{path:"projets",element:e.jsx(ly,{})},{path:"projets/creer",element:e.jsx(fs,{children:e.jsx(iy,{})})},{path:"projets/:projetId/taches/:tacheId",element:e.jsx(py,{})},{path:"projets/:id",element:e.jsx(uy,{})},{path:"mes-candidatures",element:e.jsx(fs,{children:e.jsx(hy,{})})},{path:"mes-taches",element:e.jsx(fs,{children:e.jsx(gy,{})})},{path:"plus",element:e.jsx(vy,{})},{path:"expert/:id",element:e.jsx(Oj,{})},{path:"confirmation-inscription",element:e.jsx(qy,{})},{path:"verifier-email",element:e.jsx(Jy,{})},{path:"reconnaissance/badges",element:e.jsx(fs,{children:e.jsx(Ry,{})})},{path:"messages",element:e.jsx(fs,{children:e.jsx(Zy,{})})},{path:"demandes-reconnaissance",element:e.jsx(wa,{roles:["manager","rh"],children:e.jsx(Dy,{})})},{path:"demandes-reconnaissance/evaluer/:id",element:e.jsx(wa,{roles:["manager","rh"],children:e.jsx(Wy,{})})},{path:"competences/domaines-metier",element:e.jsx(wa,{roles:["manager","rh"],children:e.jsx(Gy,{})})},{path:"competences/criteres-evaluation",element:e.jsx(wa,{roles:["manager","rh"],children:e.jsx(Qy,{})})},{path:"competences/methodes-evaluation",element:e.jsx(wa,{roles:["manager","rh"],children:e.jsx(Xy,{})})},{path:"*",element:e.jsx(by,{})}]}]);function tN(){const{showAuthModal:t,closeAuthModal:s,openAuthModal:r}=Es();return d.useEffect(()=>{vj(r)},[r]),e.jsxs("div",{"data-theme":"pitm-light",className:"min-h-screen",children:[e.jsx(bb,{router:eN}),e.jsx(qx,{isOpen:t,onClose:s})]})}function sN(){return e.jsx(Yb,{children:e.jsx(ej,{children:e.jsx(Yj,{children:e.jsx(tN,{})})})})}hx(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(sN,{})}));
